(function(){function i(e){var t=-1,n=e.length,r=[];while(++t<n)r.push(e[t]);return r}function s(e){return Array.prototype.slice.call(e)}function a(){return this}function f(e,t,n){return function(){var r=n.apply(t,arguments);return arguments.length?e:r}}function l(e){return e!=null&&!isNaN(e)}function c(e){return e.length}function h(e){return e==null}function p(e){return e.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function m(){}function g(){function n(){var t=e,n=-1,r=t.length,i;while(++n<r)(i=t[n].on)&&i.apply(this,arguments)}var e=[],t={};return n.on=function(r,i){var s,o;if(arguments.length<2)return(s=t[r])&&s.on;if(s=t[r])s.on=null,e=e.slice(0,o=e.indexOf(s)).concat(e.slice(o+1)),delete t[r];return i&&e.push(t[r]={on:i}),n},n}function w(e,t){return t-(e?1+Math.floor(Math.log(e+Math.pow(10,1+Math.floor(Math.log(e)/Math.LN10)-t))/Math.LN10):1)}function E(e){return e+""}function S(e){var t=e.lastIndexOf("."),n=t>=0?e.substring(t):(t=e.length,""),r=[];while(t>0)r.push(e.substring(t-=3,t+3));return r.reverse().join(",")+n}function T(e,t){return{scale:Math.pow(10,(8-t)*3),symbol:e}}function A(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function O(e){return function(t){return 1-e(1-t)}}function M(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function _(e){return e}function D(e){return function(t){return Math.pow(t,e)}}function P(e){return 1-Math.cos(e*Math.PI/2)}function H(e){return Math.pow(2,10*(e-1))}function B(e){return 1-Math.sqrt(1-e*e)}function j(e,t){var n;return arguments.length<2&&(t=.45),arguments.length<1?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(r){return 1+e*Math.pow(2,10*-r)*Math.sin((r-n)*2*Math.PI/t)}}function F(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function I(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function q(){d3.event.stopPropagation(),d3.event.preventDefault()}function U(e){return e=="transform"?d3.interpolateTransform:d3.interpolate}function z(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function W(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function X(e,t,n){return new V(e,t,n)}function V(e,t,n){this.r=e,this.g=t,this.b=n}function $(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function J(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/i.exec(e);if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(Q(u[0]),Q(u[1]),Q(u[2]))}}return(a=G[e])?t(a.r,a.g,a.b):(e!=null&&e.charAt(0)==="#"&&(e.length===4?(r=e.charAt(1),r+=r,i=e.charAt(2),i+=i,s=e.charAt(3),s+=s):e.length===7&&(r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7)),r=parseInt(r,16),i=parseInt(i,16),s=parseInt(s,16)),t(r,i,s))}function K(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;return s?(u=a<.5?s/(i+r):s/(2-i-r),e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4,o*=60):u=o=0,Z(o,u,a)}function Q(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function Z(e,t,n){return new et(e,t,n)}function et(e,t,n){this.h=e,this.s=t,this.l=n}function tt(e,t,n){function s(e){return e>360?e-=360:e<0&&(e+=360),e<60?r+(i-r)*e/60:e<180?i:e<240?r+(i-r)*(240-e)/60:r}function o(e){return Math.round(s(e)*255)}var r,i;return e%=360,e<0&&(e+=360),t=t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i,X(o(e+120),o(e),o(e-120))}function nt(e){return u(e,at),e}function ft(e){return function(){return rt(e,this)}}function lt(e){return function(){return it(e,this)}}function ht(e,t){function s(){if(t=this.classList)return t.add(e);var t=this.className,r=t.baseVal!=null,i=r?t.baseVal:t;n.lastIndex=0,n.test(i)||(i=p(i+" "+e),r?t.baseVal=i:this.className=i)}function o(){if(t=this.classList)return t.remove(e);var t=this.className,r=t.baseVal!=null,i=r?t.baseVal:t;i=p(i.replace(n," ")),r?t.baseVal=i:this.className=i}function u(){(t.apply(this,arguments)?s:o).call(this)}var n=new RegExp("(^|\\s+)"+d3.requote(e)+"(\\s+|$)","g");if(arguments.length<2){var r=this.node();if(i=r.classList)return i.contains(e);var i=r.className;return n.lastIndex=0,n.test(i.baseVal!=null?i.baseVal:i)}return this.each(typeof t=="function"?u:t?s:o)}function pt(e){return{__data__:e}}function dt(e){return function(){return ut(this,e)}}function vt(e){return arguments.length||(e=d3.ascending),function(t,n){return e(t&&t.__data__,n&&n.__data__)}}function gt(e){return u(e,yt),e}function bt(e,t,n){u(e,xt);var r={},i=d3.dispatch("start","end"),s=Ct;return e.id=t,e.time=n,e.tween=function(t,n){return arguments.length<2?r[t]:(n==null?delete r[t]:r[t]=n,e)},e.ease=function(t){return arguments.length?(s=typeof t=="function"?t:d3.ease.apply(d3,arguments),e):s},e.each=function(t,n){return arguments.length<2?kt.call(e,t):(i.on(t,n),e)},d3.timer(function(o){return e.each(function(u,a,f){function v(e){if(d.active>t)return g();d.active=t;for(var s in r)(s=r[s].call(c,u,a))&&l.push(s);return i.start.call(c,u,a),m(e)||d3.timer(m,0,n),1}function m(e){if(d.active!==t)return g();var n=(e-h)/p,r=s(n),o=l.length;while(o>0)l[--o].call(c,r);if(n>=1)return g(),Nt=t,i.end.call(c,u,a),Nt=0,1}function g(){return--d.count||delete c.__transition__,1}var l=[],c=this,h=e[f][a].delay,p=e[f][a].duration,d=c.__transition__||(c.__transition__={active:0,count:0});++d.count,h<=o?v(o):d3.timer(v,h,n)}),1},0,n),e}function Et(e,t,n){return n!=""&&wt}function St(e,t){function r(e,r,i){var s=t.call(this,e,r);return s==null?i!=""&&wt:i!=s&&n(i,s)}function i(e,r,i){return i!=t&&n(i,t)}var n=U(e);return typeof t=="function"?r:t==null?Et:(t+="",i)}function kt(e){for(var t=0,n=this.length;t<n;t++)for(var r=this[t],i=0,s=r.length;i<s;i++){var o=r[i];o&&e.call(o=o.node,o.__data__,i,t)}return this}function Mt(){var e,t=Date.now(),n=Lt;while(n)e=t-n.then,e>=n.delay&&(n.flush=n.callback(e)),n=n.next;var r=_t()-t;r>24?(isFinite(r)&&(clearTimeout(Ot),Ot=setTimeout(Mt,r)),At=0):(At=1,Dt(Mt))}function _t(){var e=null,t=Lt,n=Infinity;while(t)t.flush?t=e?e.next=t.next:Lt=t.next:(n=Math.min(n,t.then+t.delay),t=(e=t).next);return n}function Pt(e){var t=[e.a,e.b],n=[e.c,e.d],r=Bt(t),i=Ht(t,n),s=Bt(jt(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Ft,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*Ft:0}function Ht(e,t){return e[0]*t[0]+e[1]*t[1]}function Bt(e){var t=Math.sqrt(Ht(e,e));return t&&(e[0]/=t,e[1]/=t),t}function jt(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function It(){}function qt(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Rt(e){return e.rangeExtent?e.rangeExtent():qt(e.range())}function Ut(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;s<i&&(o=n,n=r,r=o,o=i,i=s,s=o);if(o=s-i)t=t(o),e[n]=t.floor(i),e[r]=t.ceil(s);return e}function zt(){return Math}function Wt(e,t,n,r){function o(){var o=e.length==2?Qt:Gt,a=r?W:z;return i=o(e,t,a,n),s=o(t,e,a,d3.interpolate),u}function u(e){return i(e)}var i,s;return u.invert=function(e){return s(e)},u.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},u.range=function(e){return arguments.length?(t=e,o()):t},u.rangeRound=function(e){return u.range(e).interpolate(d3.interpolateRound)},u.clamp=function(e){return arguments.length?(r=e,o()):r},u.interpolate=function(e){return arguments.length?(n=e,o()):n},u.ticks=function(t){return Jt(e,t)},u.tickFormat=function(t){return Kt(e,t)},u.nice=function(){return Ut(e,Vt),o()},u.copy=function(){return Wt(e,t,n,r)},o()}function Xt(e,t){return d3.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Vt(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function $t(e,t){var n=qt(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function Jt(e,t){return d3.range.apply(d3,$t(e,t))}function Kt(e,t){return d3.format(",."+Math.max(0,-Math.floor(Math.log($t(e,t)[2])/Math.LN10+.01))+"f")}function Qt(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function Gt(e,t,n,r){var i=[],s=[],o=0,u=e.length;while(++o<u)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=d3.bisect(e,t,1,e.length-1)-1;return s[n](i[n](t))}}function Yt(e,t){function r(n){return e(t(n))}var n=t.pow;return r.invert=function(t){return n(e.invert(t))},r.domain=function(i){return arguments.length?(t=i[0]<0?tn:en,n=t.pow,e.domain(i.map(t)),r):e.domain().map(n)},r.nice=function(){return e.domain(Ut(e.domain(),zt)),r},r.ticks=function(){var r=qt(e.domain()),i=[];if(r.every(isFinite)){var s=Math.floor(r[0]),o=Math.ceil(r[1]),u=n(r[0]),a=n(r[1]);if(t===tn){i.push(n(s));for(;s++<o;)for(var f=9;f>0;f--)i.push(n(s)*f)}else{for(;s<o;s++)for(var f=1;f<10;f++)i.push(n(s)*f);i.push(n(s))}for(s=0;i[s]<u;s++);for(o=i.length;i[o-1]>a;o--);i=i.slice(s,o)}return i},r.tickFormat=function(e,i){arguments.length<2&&(i=Zt);if(arguments.length<1)return i;var s=e/r.ticks().length,o=t===tn?(u=-1e-12,Math.floor):(u=1e-12,Math.ceil),u;return function(e){return e/n(o(t(e)+u))<s?i(e):""}},r.copy=function(){return Yt(e.copy(),t)},Xt(r,e)}function en(e){return Math.log(e<0?0:e)/Math.LN10}function tn(e){return-Math.log(e>0?0:-e)/Math.LN10}function nn(e,t){function i(t){return e(n(t))}var n=rn(t),r=rn(1/t);return i.invert=function(t){return r(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t.map(n)),i):e.domain().map(r)},i.ticks=function(e){return Jt(i.domain(),e)},i.tickFormat=function(e){return Kt(i.domain(),e)},i.nice=function(){return i.domain(Ut(i.domain(),Vt))},i.exponent=function(e){if(!arguments.length)return t;var s=i.domain();return n=rn(t=e),r=rn(1/t),i.domain(s)},i.copy=function(){return nn(e.copy(),t)},Xt(i,e)}function rn(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function sn(e,t){function s(t){return r[((n[t]||(n[t]=e.push(t)))-1)%r.length]}function o(t,n){return d3.range(e.length).map(function(e){return t+n*e})}var n,r,i;return s.domain=function(r){if(!arguments.length)return e;e=[],n={};var i=-1,o=r.length,u;while(++i<o)n[u=r[i]]||(n[u]=e.push(u));return s[t.t](t.x,t.p)},s.range=function(e){return arguments.length?(r=e,i=0,t={t:"range",x:e},s):r},s.rangePoints=function(n,u){arguments.length<2&&(u=0);var a=n[0],f=n[1],l=(f-a)/(e.length-1+u);return r=o(e.length<2?(a+f)/2:a+l*u/2,l),i=0,t={t:"rangePoints",x:n,p:u},s},s.rangeBands=function(n,u){arguments.length<2&&(u=0);var a=n[0],f=n[1],l=(f-a)/(e.length+u);return r=o(a+l*u,l),i=l*(1-u),t={t:"rangeBands",x:n,p:u},s},s.rangeRoundBands=function(n,u){arguments.length<2&&(u=0);var a=n[0],f=n[1],l=Math.floor((f-a)/(e.length+u));return r=o(a+Math.round((f-a-(e.length-u)*l)/2),l),i=Math.round(l*(1-u)),t={t:"rangeRoundBands",x:n,p:u},s},s.rangeBand=function(){return i},s.rangeExtent=function(){return t.t==="range"?qt(t.x):t.x},s.copy=function(){return sn(e,t)},s.domain(e)}function ln(e,t){function r(){var r=0,s=e.length,o=t.length;n=[];while(++r<o)n[r-1]=d3.quantile(e,r/o);return i}function i(e){return isNaN(e=+e)?NaN:t[d3.bisect(n,e)]}var n;return i.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(d3.ascending),r()):e},i.range=function(e){return arguments.length?(t=e,r()):t},i.quantiles=function(){return n},i.copy=function(){return ln(e,t)},r()}function cn(e,t,n){function s(t){return n[Math.max(0,Math.min(i,Math.floor(r*(t-e))))]}function o(){return r=n.length/(t-e),i=n.length-1,s}var r,i;return s.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},s.range=function(e){return arguments.length?(n=e,o()):n},s.copy=function(){return cn(e,t,n)},o()}function dn(e){return e.innerRadius}function vn(e){return e.outerRadius}function mn(e){return e.startAngle}function gn(e){return e.endAngle}function yn(e){function o(r){return r.length<1?null:"M"+i(e(bn(this,r,t,n)),s)}var t=wn,n=En,r="linear",i=Sn[r],s=.7;return o.x=function(e){return arguments.length?(t=e,o):t},o.y=function(e){return arguments.length?(n=e,o):n},o.interpolate=function(e){return arguments.length?(i=Sn[r=e],o):r},o.tension=function(e){return arguments.length?(s=e,o):s},o}function bn(e,t,n,r){var i=[],s=-1,o=t.length,u=typeof n=="function",a=typeof r=="function",f;if(u&&a)while(++s<o)i.push([n.call(e,f=t[s],s),r.call(e,f,s)]);else if(u)while(++s<o)i.push([n.call(e,t[s],s),r]);else if(a)while(++s<o)i.push([n,r.call(e,t[s],s)]);else while(++s<o)i.push([n,r]);return i}function wn(e){return e[0]}function En(e){return e[1]}function xn(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("L",(r=e[t])[0],",",r[1]);return i.join("")}function Tn(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Nn(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Cn(e,t){return e.length<4?xn(e):e[1]+An(e.slice(1,e.length-1),On(e,t))}function kn(e,t){return e.length<3?xn(e):e[0]+An((e.push(e[0]),e),On([e[e.length-2]].concat(e,[e[1]]),t))}function Ln(e,t,n){return e.length<3?xn(e):e[0]+An(e,On(e,t))}function An(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return xn(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1],i=e[1],a=2);if(t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function On(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a)i=s,s=o,o=e[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function Mn(e){if(e.length<3)return xn(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s];In(a,o,u);while(++t<n)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),In(a,o,u);t=-1;while(++t<2)o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),In(a,o,u);return a.join("")}function _n(e){if(e.length<4)return xn(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3)i=e[n],s.push(i[0]),o.push(i[1]);t.push(Hn(Fn,s)+","+Hn(Fn,o)),--n;while(++n<r)i=e[n],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),In(t,s,o);return t.join("")}function Dn(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4)s=e[n%r],o.push(s[0]),u.push(s[1]);t=[Hn(Fn,o),",",Hn(Fn,u)],--n;while(++n<i)s=e[n%r],o.shift(),o.push(s[0]),u.shift(),u.push(s[1]),In(t,o,u);return t.join("")}function Pn(e,t){var n=e.length-1,r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n)a=e[u],f=u/n,a[0]=t*a[0]+(1-t)*(r+f*s),a[1]=t*a[1]+(1-t)*(i+f*o);return Mn(e)}function Hn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function In(e,t,n){e.push("C",Hn(Bn,t),",",Hn(Bn,n),",",Hn(jn,t),",",Hn(jn,n),",",Hn(Fn,t),",",Hn(Fn,n))}function qn(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Rn(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=qn(i,s);while(++t<n)r[t]=o+(o=qn(i=s,s=e[t+1]));return r[t]=o,r}function Un(e){var t=[],n,r,i,s,o=Rn(e),u=-1,a=e.length-1;while(++u<a)n=qn(e[u],e[u+1]),Math.abs(n)<1e-6?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,s>9&&(s=n*3/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));u=-1;while(++u<=a)s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([s||0,o[u]*s||0]);return t}function zn(e){return e.length<3?xn(e):e[0]+An(e,Un(e))}function Wn(e){var t,n=-1,r=e.length,i,s;while(++n<r)t=e[n],i=t[0],s=t[1]+hn,t[0]=i*Math.cos(s),t[1]=i*Math.sin(s);return e}function Xn(e){function f(s){if(s.length<1)return null;var f=bn(this,s,t,r),l=bn(this,s,t===n?Vn(f):n,r===i?$n(f):i);return"M"+o(e(l),a)+"L"+u(e(f.reverse()),a)+"Z"}var t=wn,n=wn,r=0,i=En,s,o,u,a=.7;return f.x=function(e){return arguments.length?(t=n=e,f):n},f.x0=function(e){return arguments.length?(t=e,f):t},f.x1=function(e){return arguments.length?(n=e,f):n},f.y=function(e){return arguments.length?(r=i=e,f):i},f.y0=function(e){return arguments.length?(r=e,f):r},f.y1=function(e){return arguments.length?(i=e,f):i},f.interpolate=function(e){return arguments.length?(o=Sn[s=e],u=o.reverse||o,f):s},f.tension=function(e){return arguments.length?(a=e,f):a},f.interpolate("linear")}function Vn(e){return function(t,n){return e[n][0]}}function $n(e){return function(t,n){return e[n][1]}}function Jn(e){return e.source}function Kn(e){return e.target}function Qn(e){return e.radius}function Gn(e){return e.startAngle}function Yn(e){return e.endAngle}function Zn(e){return[e.x,e.y]}function er(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+hn;return[n*Math.cos(r),n*Math.sin(r)]}}function nr(e,t){var n=(e.ownerSVGElement||e).createSVGPoint();if(tr<0&&(window.scrollX||window.scrollY)){var r=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0),i=r[0][0].getScreenCTM();tr=!i.f&&!i.e,r.remove()}return tr?(n.x=t.pageX,n.y=t.pageY):(n.x=t.clientX,n.y=t.clientY),n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}function rr(){return 64}function ir(){return"circle"}function ar(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function fr(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function lr(e,t,n){i=[];if(n&&t.length>1){var r=qt(e.domain()),i,s=-1,o=t.length,u=(t[1]-t[0])/++n,a,f;while(++s<o)for(a=n;--a>0;)(f=+t[s]-a*u)>=r[0]&&i.push(f);for(--s,a=0;++a<n&&(f=+t[s]+a*u)<r[1];)i.push(f)}return i}function Er(e,t){e.select(".extent").attr("x",t[0][0]),e.selectAll(".n,.s,.w,.nw,.sw").attr("x",t[0][0]-2),e.selectAll(".e,.ne,.se").attr("x",t[1][0]-3),e.selectAll(".extent,.n,.s").attr("width",t[1][0]-t[0][0])}function Sr(e,t){e.select(".extent").attr("y",t[0][1]),e.selectAll(".n,.e,.w,.nw,.ne").attr("y",t[0][1]-3),e.selectAll(".s,.se,.sw").attr("y",t[1][1]-4),e.selectAll(".extent,.e,.w").attr("height",t[1][1]-t[0][1])}function xr(){d3.event.keyCode==32&&pr&&!gr&&(br=null,wr[0]-=mr[1][0],wr[1]-=mr[1][1],gr=2,q())}function Tr(){d3.event.keyCode==32&&gr==2&&(wr[0]+=mr[1][0],wr[1]+=mr[1][1],gr=0,q())}function Nr(){if(wr){var e=d3.svg.mouse(pr),t=d3.select(pr);gr||(d3.event.altKey?(br||(br=[(mr[0][0]+mr[1][0])/2,(mr[0][1]+mr[1][1])/2]),wr[0]=mr[+(e[0]<br[0])][0],wr[1]=mr[+(e[1]<br[1])][1]):br=null),dr&&(Cr(e,dr,0),Er(t,mr)),vr&&(Cr(e,vr,1),Sr(t,mr)),hr("brush")}}function Cr(e,t,n){var r=Rt(t),i=r[0],s=r[1],o=wr[n],u=mr[1][n]-mr[0][n],a,f;gr&&(i-=o,s-=u+o),a=Math.max(i,Math.min(s,e[n])),gr?f=(a+=o)+u:(br&&(o=Math.max(i,Math.min(s,2*br[n]-a))),o<a?(f=a,a=o):f=o),mr[0][n]=a,mr[1][n]=f}function kr(){wr&&(Nr(),d3.select(pr).selectAll(".resize").style("pointer-events",cr.empty()?"none":"all"),hr("brushend"),cr=hr=pr=dr=vr=mr=gr=yr=br=wr=null,q())}function Br(e){var t=jr(),n=d3.event,r=d3.event={type:e};t&&(r.x=t[0]+Dr[0],r.y=t[1]+Dr[1],r.dx=t[0]-Pr[0],r.dy=t[1]-Pr[1],Hr|=r.dx|r.dy,Pr=t);try{Ar[e].apply(Mr,_r)}finally{d3.event=n}n.stopPropagation(),n.preventDefault()}function jr(){var e=Mr.parentNode,t=d3.event.changedTouches;return e&&(t?d3.svg.touches(e,t)[0]:d3.svg.mouse(e))}function Fr(){if(!Mr)return;var e=Mr.parentNode;if(!e)return Ir();Br("drag"),q()}function Ir(){if(!Mr)return;Br("dragend"),Hr&&(q(),Hr=d3.event.target===Or),Ar=Or=Mr=_r=Dr=Pr=null}function qr(){Hr&&(q(),Hr=0)}function Zr(e){return[e[0]-Vr[0],e[1]-Vr[1],Vr[2]]}function ei(){Rr||(Rr=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var e=d3.event,t;try{Rr.scrollTop=1e3,Rr.dispatchEvent(e),t=1e3-Rr.scrollTop}catch(n){t=e.wheelDelta||-e.detail*5}return t*.005}function ti(){var e=d3.svg.touches(Qr),t=-1,n=e.length,r;while(++t<n)Wr[(r=e[t]).identifier]=Zr(r);return e}function ni(){var e=d3.svg.touches(Qr);switch(e.length){case 1:var t=e[0];oi(Vr[2],t,Wr[t.identifier]);break;case 2:var n=e[0],r=e[1],i=[(n[0]+r[0])/2,(n[1]+r[1])/2],s=Wr[n.identifier],o=Wr[r.identifier],u=[(s[0]+o[0])/2,(s[1]+o[1])/2,s[2]];oi(Math.log(d3.event.scale)/Math.LN2+s[2],i,u)}}function ri(){zr=null,Ur&&(Yr=1,oi(Vr[2],d3.svg.mouse(Qr),Ur))}function ii(){Ur&&(Yr&&(q(),Yr=Kr===d3.event.target),Vr=$r=Jr=Kr=Qr=Gr=Ur=null)}function si(){Yr&&(q(),Yr=0)}function oi(e,t,n){function c(e,t,n){e.domain(e.range().map(function(s){return e.invert((s-n)*r/i+t)}))}e=ai(e,2);var r=Math.pow(2,Vr[2]),i=Math.pow(2,e),s=Math.pow(2,(Vr[2]=e)-n[2]),o=Vr[0],u=Vr[1],a=Vr[0]=ai(t[0]-n[0]*s,0,i),f=Vr[1]=ai(t[1]-n[1]*s,1,i),l=d3.event;d3.event={scale:i,translate:[a,f],transform:function(e,t){e&&c(e,o,a),t&&c(t,u,f)}};try{Jr.apply(Qr,Gr)}finally{d3.event=l}l.preventDefault()}function ai(e,t,n){var r=$r[t],i=r[0],s=r[1];return arguments.length===3?Math.max(s*(s===Infinity?-Infinity:1/n-1),Math.min(i===-Infinity?Infinity:i,e/n))*n:Math.max(i,Math.min(s,e))}Date.now||(Date.now=function(){return+(new Date)});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(e){var t=CSSStyleDeclaration.prototype,n=t.setProperty;t.setProperty=function(e,t,r){n.call(this,e,t+"",r)}}d3={version:"2.7.2"};var r=s;try{r(document.documentElement.childNodes)[0].nodeType}catch(o){r=i}var u=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};d3.functor=function(e){return typeof e=="function"?e:function(){return e}},d3.rebind=function(e,t){var n=1,r=arguments.length,i;while(++n<r)e[i=arguments[n]]=f(e,t,t[i]);return e},d3.ascending=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},d3.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},d3.mean=function(e,t){var n=e.length,r,i=0,s=-1,o=0;if(arguments.length===1)while(++s<n)l(r=e[s])&&(i+=(r-i)/++o);else while(++s<n)l(r=t.call(e,e[s],s))&&(i+=(r-i)/++o);return o?i:undefined},d3.median=function(e,t){return arguments.length>1&&(e=e.map(t)),e=e.filter(l),e.length?d3.quantile(e.sort(d3.ascending),.5):undefined},d3.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&((i=e[n])==null||i!=i))i=undefined;while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r&&((i=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i},d3.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&((i=e[n])==null||i!=i))i=undefined;while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r&&((i=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i},d3.extent=function(e,t){var n=-1,r=e.length,i,s,o;if(arguments.length===1){while(++n<r&&((i=o=e[n])==null||i!=i))i=o=undefined;while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r&&((i=o=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]},d3.random={normal:function(e,t){return arguments.length<2&&(t=1),arguments.length<1&&(e=0),function(){var n,r,i;do n=Math.random()*2-1,r=Math.random()*2-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}}},d3.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)isNaN(i=+e[s])||(n+=i);else while(++s<r)isNaN(i=+t.call(e,e[s],s))||(n+=i);return n},d3.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=e[r-1],s=n-r;return s?i+s*(e[r]-i):i},d3.transpose=function(e){return d3.zip.apply(d3,e)},d3.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=d3.min(arguments,c),n=new Array(t);++e<t;)for(var r=-1,i,s=n[e]=new Array(i);++r<i;)s[r]=arguments[r][e];return n},d3.bisectLeft=function(e,t,n,r){arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);while(n<r){var i=n+r>>1;e[i]<t?n=i+1:r=i}return n},d3.bisect=d3.bisectRight=function(e,t,n,r){arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);while(n<r){var i=n+r>>1;t<e[i]?r=i:n=i+1}return n},d3.first=function(e,t){var n=0,r=e.length,i=e[0],s;arguments.length===1&&(t=d3.ascending);while(++n<r)t.call(e,i,s=e[n])>0&&(i=s);return i},d3.last=function(e,t){var n=0,r=e.length,i=e[0],s;arguments.length===1&&(t=d3.ascending);while(++n<r)t.call(e,i,s=e[n])<=0&&(i=s);return i},d3.nest=function(){function s(n,o){if(o>=t.length)return i?i.call(e,n):r?n.sort(r):n;var u=-1,a=n.length,f=t[o++],l,c,h={};while(++u<a)(l=f(c=n[u]))in h?h[l].push(c):h[l]=[c];for(l in h)h[l]=s(h[l],o);return h}function o(e,r){if(r>=t.length)return e;var i=[],s=n[r++],u;for(u in e)i.push({key:u,values:o(e[u],r)});return s&&i.sort(function(e,t){return s(e.key,t.key)}),i}var e={},t=[],n=[],r,i;return e.map=function(e){return s(e,0)},e.entries=function(e){return o(s(e,0),0)},e.key=function(n){return t.push(n),e},e.sortKeys=function(r){return n[t.length-1]=r,e},e.sortValues=function(t){return r=t,e},e.rollup=function(t){return i=t,e},e},d3.keys=function(e){var t=[];for(var n in e)t.push(n);return t},d3.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},d3.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},d3.permute=function(e,t){var n=[],r=-1,i=t.length;while(++r<i)n[r]=e[t[r]];return n},d3.merge=function(e){return Array.prototype.concat.apply([],e)},d3.split=function(e,t){var n=[],r=[],i,s=-1,o=e.length;arguments.length<2&&(t=h);while(++s<o)t.call(r,i=e[s],s)?r=[]:(r.length||n.push(r),r.push(i));return n},d3.range=function(e,t,n){arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0));if((t-e)/n==Infinity)throw new Error("infinite range");var r=[],i=-1,s;if(n<0)while((s=e+n*++i)>t)r.push(s);else while((s=e+n*++i)<t)r.push(s);return r},d3.requote=function(e){return e.replace(d,"\\$&")};var d=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(e,t){return t?Math.round(e*Math.pow(10,t))*Math.pow(10,-t):Math.round(e)},d3.xhr=function(e,t,n){var r=new XMLHttpRequest;arguments.length<3?(n=t,t=null):t&&r.overrideMimeType&&r.overrideMimeType(t),r.open("GET",e,!0),t&&r.setRequestHeader("Accept",t),r.onreadystatechange=function(){r.readyState===4&&n(r.status<300?r:null)},r.send(null)},d3.text=function(e,t,n){function r(e){n(e&&e.responseText)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,r)},d3.json=function(e,t){d3.text(e,"application/json",function(e){t(e?JSON.parse(e):null)})},d3.html=function(e,t){d3.text(e,"text/html",function(e){if(e!=null){var n=document.createRange();n.selectNode(document.body),e=n.createContextualFragment(e)}t(e)})},d3.xml=function(e,t,n){function r(e){n(e&&e.responseXML)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,r)};var v={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:v,qualify:function(e){var t=e.indexOf(":");return t<0?e in v?{space:v[e],local:e}:e:{space:v[e.substring(0,t)],local:e.substring(t+1)}}},d3.dispatch=function(){var e=new m,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=g();return e},m.prototype.on=function(e,t){var n=e.indexOf("."),r="";return n>0&&(r=e.substring(n+1),e=e.substring(0,n)),arguments.length<2?this[e].on(r):(this[e].on(r,t),this)},d3.format=function(e){var t=y.exec(e),n=t[1]||" ",r=t[3]||"",i=t[5],s=+t[6],o=t[7],u=t[8],a=t[9],f=1,l="",c=!1;u&&(u=+u.substring(1)),i&&(n="0",o&&(s-=Math.floor((s-1)/4)));switch(a){case"n":o=!0,a="g";break;case"%":f=100,l="%",a="f";break;case"p":f=100,l="%",a="r";break;case"d":c=!0,u=0;break;case"s":f=-1,a="r"}return a=="r"&&!u&&(a="g"),a=b[a]||E,function(e){if(c&&e%1)return"";var t=e<0&&(e=-e)?"−":r;if(f<0){var h=d3.formatPrefix(e,u);e*=h.scale,l=h.symbol}else e*=f;e=a(e,u);if(i){var p=e.length+t.length;p<s&&(e=(new Array(s-p+1)).join(n)+e),o&&(e=S(e)),e=t+e}else{o&&(e=S(e)),e=t+e;var p=e.length;p<s&&(e=(new Array(s-p+1)).join(n)+e)}return e+l}};var y=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,b={g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return d3.round(e,t=w(e,t)).toFixed(Math.max(0,Math.min(20,t)))}},x=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(T);d3.formatPrefix=function(e,t){var n=0;return e&&(e<0&&(e*=-1),t&&(e=d3.round(e,w(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,Math.floor((n<=0?n+1:n-1)/3)*3))),x[8+n/3]};var N=D(2),C=D(3),k={linear:function(){return _},poly:D,quad:function(){return N},cubic:function(){return C},sin:function(){return P},exp:function(){return H},circle:function(){return B},elastic:j,back:F,bounce:function(){return I}},L={"in":function(e){return e},out:O,"in-out":M,"out-in":function(e){return M(O(e))}};d3.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return A(L[r](k[n].apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(e,t){var n=d3.interpolators.length,r;while(--n>=0&&!(r=d3.interpolators[n](e,t)));return r},d3.interpolateNumber=function(e,t){return t-=e,function(n){return e+t*n}},d3.interpolateRound=function(e,t){return t-=e,function(n){return Math.round(e+t*n)}},d3.interpolateString=function(e,t){var n,r,i,s=0,o=0,u=[],a=[],f,l;R.lastIndex=0;for(r=0;n=R.exec(t);++r)n.index&&u.push(t.substring(s,o=n.index)),a.push({i:u.length,x:n[0]}),u.push(null),s=R.lastIndex;s<t.length&&u.push(t.substring(s));for(r=0,f=a.length;(n=R.exec(e))&&r<f;++r){l=a[r];if(l.x==n[0]){if(l.i)if(u[l.i+1]==null){u[l.i-1]+=l.x,u.splice(l.i,1);for(i=r+1;i<f;++i)a[i].i--}else{u[l.i-1]+=l.x+u[l.i+1],u.splice(l.i,2);for(i=r+1;i<f;++i)a[i].i-=2}else if(u[l.i+1]==null)u[l.i]=l.x;else{u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1);for(i=r+1;i<f;++i)a[i].i--}a.splice(r,1),f--,r--}else l.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(l.x))}while(r<f)l=a.pop(),u[l.i+1]==null?u[l.i]=l.x:(u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1)),f--;return u.length===1?u[0]==null?a[0].x:function(){return t}:function(e){for(r=0;r<f;++r)u[(l=a[r]).i]=l.x(e);return u.join("")}},d3.interpolateTransform=function(e,t){return d3.interpolateString(d3.transform(e)+"",d3.transform(t)+"")},d3.interpolateRgb=function(e,t){e=d3.rgb(e),t=d3.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+$(Math.round(n+s*e))+$(Math.round(r+o*e))+$(Math.round(i+u*e))}},d3.interpolateHsl=function(e,t){e=d3.hsl(e),t=d3.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return function(e){return tt(n+s*e,r+o*e,i+u*e).toString()}},d3.interpolateArray=function(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(d3.interpolate(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}},d3.interpolateObject=function(e,t){var n={},r={},i;for(i in e)i in t?n[i]=U(i)(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}};var R=/[-+]?(?:\d*\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(e,t){return t instanceof Array&&d3.interpolateArray(e,t)},function(e,t){return(typeof e=="string"||typeof t=="string")&&d3.interpolateString(e+"",t+"")},function(e,t){return(typeof t=="string"?t in G||/^(#|rgb\(|hsl\()/.test(t):t instanceof V||t instanceof et)&&d3.interpolateRgb(e,t)},function(e,t){return!isNaN(e=+e)&&!isNaN(t=+t)&&d3.interpolateNumber(e,t)}],d3.rgb=function(e,t,n){return arguments.length===1?e instanceof V?X(e.r,e.g,e.b):J(""+e,X,tt):X(~~e,~~t,~~n)},V.prototype.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?X(i,i,i):(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),X(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(r/e))))},V.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),X(Math.floor(e*this.r),Math.floor(e*this.g),Math.floor(e*this.b))},V.prototype.hsl=function(){return K(this.r,this.g,this.b)},V.prototype.toString=function(){return"#"+$(this.r)+$(this.g)+$(this.b)};var G={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid
:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};for(var Y in G)G[Y]=J(G[Y],X,tt);d3.hsl=function(e,t,n){return arguments.length===1?e instanceof et?Z(e.h,e.s,e.l):J(""+e,K,Z):Z(+e,+t,+n)},et.prototype.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),Z(this.h,this.s,this.l/e)},et.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),Z(this.h,this.s,e*this.l)},et.prototype.rgb=function(){return tt(this.h,this.s,this.l)},et.prototype.toString=function(){return this.rgb().toString()};var rt=function(e,t){return t.querySelector(e)},it=function(e,t){return t.querySelectorAll(e)},st=document.documentElement,ot=st.matchesSelector||st.webkitMatchesSelector||st.mozMatchesSelector||st.msMatchesSelector||st.oMatchesSelector,ut=function(e,t){return ot.call(e,t)};typeof Sizzle=="function"&&(rt=function(e,t){return Sizzle(e,t)[0]},it=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},ut=Sizzle.matchesSelector);var at=[];d3.selection=function(){return mt},d3.selection.prototype=at,at.select=function(e){var t=[],n,r,i,s;typeof e!="function"&&(e=ft(e));for(var o=-1,u=this.length;++o<u;){t.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)(s=i[a])?(n.push(r=e.call(s,s.__data__,a)),r&&"__data__"in s&&(r.__data__=s.__data__)):n.push(null)}return nt(t)},at.selectAll=function(e){var t=[],n,i;typeof e!="function"&&(e=lt(e));for(var s=-1,o=this.length;++s<o;)for(var u=this[s],a=-1,f=u.length;++a<f;)if(i=u[a])t.push(n=r(e.call(i,i.__data__,a))),n.parentNode=i;return nt(t)},at.attr=function(e,t){function r(){this.removeAttribute(e)}function i(){this.removeAttributeNS(e.space,e.local)}function s(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function u(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}function a(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}e=d3.ns.qualify(e);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each(t==null?e.local?i:r:typeof t=="function"?e.local?a:u:e.local?o:s)},at.classed=function(e,t){var n=e.split(ct),r=n.length,i=-1;if(arguments.length>1){while(++i<r)ht.call(this,n[i],t);return this}while(++i<r)if(!ht.call(this,n[i]))return!1;return!0};var ct=/\s+/g;at.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return arguments.length<3&&(n=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(e):this.each(t==null?r:typeof t=="function"?s:i)},at.property=function(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return arguments.length<2?this.node()[e]:this.each(t==null?n:typeof t=="function"?i:r)},at.text=function(e){return arguments.length<1?this.node().textContent:this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e})},at.html=function(e){return arguments.length<1?this.node().innerHTML:this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e})},at.append=function(e){function t(){return this.appendChild(document.createElementNS(this.namespaceURI,e))}function n(){return this.appendChild(document.createElementNS(e.space,e.local))}return e=d3.ns.qualify(e),this.select(e.local?n:t)},at.insert=function(e,t){function n(){return this.insertBefore(document.createElementNS(this.namespaceURI,e),rt(t,this))}function r(){return this.insertBefore(document.createElementNS(e.space,e.local),rt(t,this))}return e=d3.ns.qualify(e),this.select(e.local?r:n)},at.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},at.data=function(e,t){function s(e,s){var o,u=e.length,a=s.length,f=Math.min(u,a),l=Math.max(u,a),c=[],h=[],p=[],d,v;if(t){var m={},g=[],y,b=s.length;for(o=-1;++o<u;)y=t.call(d=e[o],d.__data__,o),y in m?p[b++]=d:m[y]=d,g.push(y);for(o=-1;++o<a;)d=m[y=t.call(s,v=s[o],o)],d?(d.__data__=v,c[o]=d,h[o]=p[o]=null):(h[o]=pt(v),c[o]=p[o]=null),delete m[y];for(o=-1;++o<u;)g[o]in m&&(p[o]=e[o])}else{for(o=-1;++o<f;)d=e[o],v=s[o],d?(d.__data__=v,c[o]=d,h[o]=p[o]=null):(h[o]=pt(v),c[o]=p[o]=null);for(;o<a;++o)h[o]=pt(s[o]),c[o]=p[o]=null;for(;o<l;++o)p[o]=e[o],h[o]=c[o]=null}h.update=c,h.parentNode=c.parentNode=p.parentNode=e.parentNode,n.push(h),r.push(c),i.push(p)}var n=[],r=[],i=[],o=-1,u=this.length,a;if(typeof e=="function")while(++o<u)s(a=this[o],e.call(a,a.parentNode.__data__,o));else while(++o<u)s(a=this[o],e);var f=nt(r);return f.enter=function(){return gt(n)},f.exit=function(){return nt(i)},f},at.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=dt(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return nt(t)},at.map=function(e){return this.each(function(){this.__data__=e.apply(this,arguments)})},at.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n=this[e],r=n.length-1,i=n[r],s;--r>=0;)if(s=n[r])i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i),i=s;return this},at.sort=function(e){e=vt.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},at.on=function(e,t,n){arguments.length<3&&(n=!1);var r="__on"+e,i=e.indexOf(".");return i>0&&(e=e.substring(0,i)),arguments.length<2?(i=this.node()[r])&&i._:this.each(function(i,s){function u(e){var n=d3.event;d3.event=e;try{t.call(o,o.__data__,s)}finally{d3.event=n}}var o=this;o[r]&&o.removeEventListener(e,o[r],n),t&&o.addEventListener(e,o[r]=u,n),u._=t})},at.each=function(e){for(var t=-1,n=this.length;++t<n;)for(var r=this[t],i=-1,s=r.length;++i<s;){var o=r[i];o&&e.call(o,o.__data__,i,t)}return this},at.call=function(e){return e.apply(this,(arguments[0]=this,arguments)),this},at.empty=function(){return!this.node()},at.node=function(e){for(var t=0,n=this.length;t<n;t++)for(var r=this[t],i=0,s=r.length;i<s;i++){var o=r[i];if(o)return o}return null},at.transition=function(){var e=[],t,n;for(var r=-1,i=this.length;++r<i;){e.push(t=[]);for(var s=this[r],o=-1,u=s.length;++o<u;)t.push((n=s[o])?{node:n,delay:0,duration:250}:null)}return bt(e,Nt||++Tt,Date.now())};var mt=nt([[document]]);mt[0].parentNode=st,d3.select=function(e){return typeof e=="string"?mt.select(e):nt([[e]])},d3.selectAll=function(e){return typeof e=="string"?mt.selectAll(e):nt([r(e)])};var yt=[];yt.append=at.append,yt.insert=at.insert,yt.empty=at.empty,yt.node=at.node,yt.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update,t.push(n=[]),n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)(o=s[f])?(n.push(i[f]=r=e.call(s.parentNode,o.__data__,f)),r.__data__=o.__data__):n.push(null)}return nt(t)};var wt={},xt=[],Tt=0,Nt=0,Ct=d3.ease("cubic-in-out");xt.call=at.call,d3.transition=function(){return mt.transition()},d3.transition.prototype=xt,xt.select=function(e){var t=[],n,r,i;typeof e!="function"&&(e=ft(e));for(var s=-1,o=this.length;++s<o;){t.push(n=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(i=u[a])&&(r=e.call(i.node,i.node.__data__,a))?("__data__"in i.node&&(r.__data__=i.node.__data__),n.push({node:r,delay:i.delay,duration:i.duration})):n.push(null)}return bt(t,this.id,this.time).ease(this.ease())},xt.selectAll=function(e){var t=[],n,r,i;typeof e!="function"&&(e=lt(e));for(var s=-1,o=this.length;++s<o;)for(var u=this[s],a=-1,f=u.length;++a<f;)if(i=u[a]){r=e.call(i.node,i.node.__data__,a),t.push(n=[]);for(var l=-1,c=r.length;++l<c;)n.push({node:r[l],delay:i.delay,duration:i.duration})}return bt(t,this.id,this.time).ease(this.ease())},xt.attr=function(e,t){return this.attrTween(e,St(e,t))},xt.attrTween=function(e,t){function r(e,r){var i=t.call(this,e,r,this.getAttribute(n));return i===wt?(this.removeAttribute(n),null):i&&function(e){this.setAttribute(n,i(e))}}function i(e,r){var i=t.call(this,e,r,this.getAttributeNS(n.space,n.local));return i===wt?(this.removeAttributeNS(n.space,n.local),null):i&&function(e){this.setAttributeNS(n.space,n.local,i(e))}}var n=d3.ns.qualify(e);return this.tween("attr."+e,n.local?i:r)},xt.style=function(e,t,n){return arguments.length<3&&(n=""),this.styleTween(e,St(e,t),n)},xt.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(r,i){var s=t.call(this,r,i,window.getComputedStyle(this,null).getPropertyValue(e));return s===wt?(this.style.removeProperty(e),null):s&&function(t){this.style.setProperty(e,s(t),n)}})},xt.text=function(e){return this.tween("text",function(t,n){this.textContent=typeof e=="function"?e.call(this,t,n):e})},xt.remove=function(){return this.each("end",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},xt.delay=function(e){var t=this;return t.each(typeof e=="function"?function(n,r,i){t[i][r].delay=+e.apply(this,arguments)}:(e=+e,function(n,r,i){t[i][r].delay=e}))},xt.duration=function(e){var t=this;return t.each(typeof e=="function"?function(n,r,i){t[i][r].duration=+e.apply(this,arguments)}:(e=+e,function(n,r,i){t[i][r].duration=e}))},xt.transition=function(){return this.select(a)};var Lt=null,At,Ot;d3.timer=function(e,t,n){var r=!1,i,s=Lt;if(arguments.length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;n=Date.now()}while(s){if(s.callback===e){s.then=n,s.delay=t,r=!0;break}i=s,s=s.next}r||(Lt={callback:e,then:n,delay:t,next:Lt}),At||(Ot=clearTimeout(Ot),At=1,Dt(Mt))},d3.timer.flush=function(){var e,t=Date.now(),n=Lt;while(n)e=t-n.then,n.delay||(n.flush=n.callback(e)),n=n.next;_t()};var Dt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};d3.transform=function(e){var t=document.createElementNS(d3.ns.prefix.svg,"g"),n={a:1,b:0,c:0,d:1,e:0,f:0};return(d3.transform=function(e){t.setAttribute("transform",e);var r=t.transform.baseVal.consolidate();return new Pt(r?r.matrix:n)})(e)},Pt.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Ft=180/Math.PI;d3.scale={},d3.scale.linear=function(){return Wt([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return Yt(d3.scale.linear(),en)};var Zt=d3.format(".0e");en.pow=function(e){return Math.pow(10,e)},tn.pow=function(e){return-Math.pow(10,-e)},d3.scale.pow=function(){return nn(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return sn([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(on)},d3.scale.category20=function(){return d3.scale.ordinal().range(un)},d3.scale.category20b=function(){return d3.scale.ordinal().range(an)},d3.scale.category20c=function(){return d3.scale.ordinal().range(fn)};var on=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],un=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],an=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],fn=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return ln([],[])},d3.scale.quantize=function(){return cn(0,1,[0,1])},d3.svg={},d3.svg.arc=function(){function i(){var i=e.apply(this,arguments),s=t.apply(this,arguments),o=n.apply(this,arguments)+hn,u=r.apply(this,arguments)+hn,a=(u<o&&(a=o,o=u,u=a),u-o),f=a<Math.PI?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=pn?i?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+i+"A"+i+","+i+" 0 1,0 0,"+ -i+"A"+i+","+i+" 0 1,0 0,"+i+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":i?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+i*h+","+i*p+"A"+i+","+i+" 0 "+f+",0 "+i*l+","+i*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var e=dn,t=vn,n=mn,r=gn;return i.innerRadius=function(t){return arguments.length?(e=d3.functor(t),i):e},i.outerRadius=function(e){return arguments.length?(t=d3.functor(e),i):t},i.startAngle=function(e){return arguments.length?(n=d3.functor(e),i):n},i.endAngle=function(e){return arguments.length?(r=d3.functor(e),i):r},i.centroid=function(){var i=(e.apply(this,arguments)+t.apply(this,arguments))/2,s=(n.apply(this,arguments)+r.apply(this,arguments))/2+hn;return[Math.cos(s)*i,Math.sin(s)*i]},i};var hn=-Math.PI/2,pn=2*Math.PI-1e-6;d3.svg.line=function(){return yn(Object)};var Sn={linear:xn,"step-before":Tn,"step-after":Nn,basis:Mn,"basis-open":_n,"basis-closed":Dn,bundle:Pn,cardinal:Ln,"cardinal-open":Cn,"cardinal-closed":kn,monotone:zn},Bn=[0,2/3,1/3,0],jn=[0,1/3,2/3,0],Fn=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var e=yn(Wn);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Tn.reverse=Nn,Nn.reverse=Tn,d3.svg.area=function(){return Xn(Object)},d3.svg.area.radial=function(){var e=Xn(Wn);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},d3.svg.chord=function(){function s(n,r){var i=o(this,e,n,r),s=o(this,t,n,r);return"M"+i.p0+a(i.r,i.p1,i.a1-i.a0)+(u(i,s)?f(i.r,i.p1,i.r,i.p0):f(i.r,i.p1,s.r,s.p0)+a(s.r,s.p1,s.a1-s.a0)+f(s.r,s.p1,i.r,i.p0))+"Z"}function o(e,t,s,o){var u=t.call(e,s,o),a=n.call(e,u,o),f=r.call(e,u,o)+hn,l=i.call(e,u,o)+hn;return{r:a,a0:f,a1:l,p0:[a*Math.cos(f),a*Math.sin(f)],p1:[a*Math.cos(l),a*Math.sin(l)]}}function u(e,t){return e.a0==t.a0&&e.a1==t.a1}function a(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Math.PI)+",1 "+t}function f(e,t,n,r){return"Q 0,0 "+r}var e=Jn,t=Kn,n=Qn,r=mn,i=gn;return s.radius=function(e){return arguments.length?(n=d3.functor(e),s):n},s.source=function(t){return arguments.length?(e=d3.functor(t),s):e},s.target=function(e){return arguments.length?(t=d3.functor(e),s):t},s.startAngle=function(e){return arguments.length?(r=d3.functor(e),s):r},s.endAngle=function(e){return arguments.length?(i=d3.functor(e),s):i},s},d3.svg.diagonal=function(){function r(r,i){var s=e.call(this,r,i),o=t.call(this,r,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(n),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var e=Jn,t=Kn,n=Zn;return r.source=function(t){return arguments.length?(e=d3.functor(t),r):e},r.target=function(e){return arguments.length?(t=d3.functor(e),r):t},r.projection=function(e){return arguments.length?(n=e,r):n},r},d3.svg.diagonal.radial=function(){var e=d3.svg.diagonal(),t=Zn,n=e.projection;return e.projection=function(e){return arguments.length?n(er(t=e)):t},e},d3.svg.mouse=function(e){return nr(e,d3.event)};var tr=/WebKit/.test(navigator.userAgent)?-1:0;d3.svg.touches=function(e,t){return arguments.length<2&&(t=d3.event.touches),t?r(t).map(function(t){var n=nr(e,t);return n.identifier=t.identifier,n}):[]},d3.svg.symbol=function(){function n(n,r){return(sr[e.call(this,n,r)]||sr.circle)(t.call(this,n,r))}var e=ir,t=rr;return n.type=function(t){return arguments.length?(e=d3.functor(t),n):e},n.size=function(e){return arguments.length?(t=d3.functor(e),n):t},n};var sr={circle:function(e){var t=Math.sqrt(e/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"},cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*ur)),n=t*ur;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/or),n=t*or/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/or),n=t*or/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}};d3.svg.symbolTypes=d3.keys(sr);var or=Math.sqrt(3),ur=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function f(f){f.each(function(l,c,h){var p=d3.select(this),d=f.delay?function(e){var t=Nt;try{return Nt=f.id,e.transition().delay(f[h][c].delay).duration(f[h][c].duration).ease(f.ease())}finally{Nt=t}}:Object,v=e.ticks?e.ticks.apply(e,o):e.domain(),m=u==null?e.tickFormat?e.tickFormat.apply(e,o):String:u,g=lr(e,v,a),y=p.selectAll(".minor").data(g,String),b=y.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),w=d(y.exit()).style("opacity",1e-6).remove(),E=d(y).style("opacity",1),S=p.selectAll("g").data(v,String),x=S.enter().insert("g","path").style("opacity",1e-6),T=d(S.exit()).style("opacity",1e-6).remove(),N=d(S).style("opacity",1),C,k=Rt(e),L=p.selectAll(".domain").data([0]),A=L.enter().append("path").attr("class","domain"),O=d(L),M=e.copy(),_=this.__chart__||M;this.__chart__=M,x.append("line").attr("class","tick"),x.append("text"),N.select("text").text(m);switch(t){case"bottom":C=ar,b.attr("y2",r),E.attr("x2",0).attr("y2",r),x.select("line").attr("y2",n),x.select("text").attr("y",Math.max(n,0)+s),N.select("line").attr("x2",0).attr("y2",n),N.select("text").attr("x",0).attr("y",Math.max(n,0)+s).attr("dy",".71em").attr("text-anchor","middle"),O.attr("d","M"+k[0]+","+i+"V0H"+k[1]+"V"+i);break;case"top":C=ar,b.attr("y2",-r),E.attr("x2",0).attr("y2",-r),x.select("line").attr("y2",-n),x.select("text").attr("y",-(Math.max(n,0)+s)),N.select("line").attr("x2",0).attr("y2",-n),N.select("text").attr("x",0).attr("y",-(Math.max(n,0)+s)).attr("dy","0em").attr("text-anchor","middle"),O.attr("d","M"+k[0]+","+ -i+"V0H"+k[1]+"V"+ -i);break;case"left":C=fr,b.attr("x2",-r),E.attr("x2",-r).attr("y2",0),x.select("line").attr("x2",-n),x.select("text").attr("x",-(Math.max(n,0)+s)),N.select("line").attr("x2",-n).attr("y2",0),N.select("text").attr("x",-(Math.max(n,0)+s)).attr("y",0).attr("dy",".32em").attr("text-anchor","end"),O.attr("d","M"+ -i+","+k[0]+"H0V"+k[1]+"H"+ -i);break;case"right":C=fr,b.attr("x2",r),E.attr("x2",r).attr("y2",0),x.select("line").attr("x2",n),x.select("text").attr("x",Math.max(n,0)+s),N.select("line").attr("x2",n).attr("y2",0),N.select("text").attr("x",Math.max(n,0)+s).attr("y",0).attr("dy",".32em").attr("text-anchor","start"),O.attr("d","M"+i+","+k[0]+"H0V"+k[1]+"H"+i)}if(e.ticks)x.call(C,_),N.call(C,M),T.call(C,M),b.call(C,_),E.call(C,M),w.call(C,M);else{var D=M.rangeBand()/2,P=function(e){return M(e)+D};x.call(C,P),N.call(C,P)}})}var e=d3.scale.linear(),t="bottom",n=6,r=6,i=6,s=3,o=[10],u,a=0;return f.scale=function(t){return arguments.length?(e=t,f):e},f.orient=function(e){return arguments.length?(t=e,f):t},f.ticks=function(){return arguments.length?(o=arguments,f):o},f.tickFormat=function(e){return arguments.length?(u=e,f):u},f.tickSize=function(e,t,s){if(!arguments.length)return n;var o=arguments.length-1;return n=+e,r=o>1?+t:n,i=o>0?+arguments[o]:n,f},f.tickPadding=function(e){return arguments.length?(s=+e,f):s},f.tickSubdivide=function(e){return arguments.length?(a=+e,f):a},f},d3.svg.brush=function(){function i(e){var o=t&&n?["n","e","s","w","nw","ne","se","sw"]:t?["e","w"]:n?["n","s"]:[];e.each(function(){var e=d3.select(this).on("mousedown.brush",s),u=e.selectAll(".background").data([,]),a=e.selectAll(".extent").data([,]),f=e.selectAll(".resize").data(o,String),l;u.enter().append("rect").attr("class","background").style("visibility","hidden").style("pointer-events","all").style("cursor","crosshair"),a.enter().append("rect").attr("class","extent").style("cursor","move"),f.enter().append("rect").attr("class",function(e){return"resize "+e}).attr("width",6).attr("height",6).style("visibility","hidden").style("pointer-events",i.empty()?"none":"all").style("cursor",function(e){return Lr[e]}),f.exit().remove(),t&&(l=Rt(t),u.attr("x",l[0]).attr("width",l[1]-l[0]),Er(e,r)),n&&(l=Rt(n),u.attr("y",l[0]).attr("height",l[1]-l[0]),Sr(e,r))})}function s(){var e=d3.select(d3.event.target);cr=i,pr=this,mr=r,wr=d3.svg.mouse(pr),(gr=e.classed("extent"))?(wr[0]=r[0][0]-wr[0],wr[1]=r[0][1]-wr[1]):e.classed("resize")?(yr=d3.event.target.__data__,wr[0]=r[+/w$/.test(yr)][0],wr[1]=r[+/^n/.test(yr)][1]):d3.event.altKey&&(br=wr.slice()),dr=!/^(n|s)$/.test(yr)&&t,vr=!/^(e|w)$/.test(yr)&&n,hr=o(this,arguments),hr("brushstart"),Nr(),q()}function o(t,n){return function(r){var s=d3.event;try{d3.event={type:r,target:i},e[r].apply(t,n)}finally{d3.event=s}}}var e=d3.dispatch("brushstart","brush","brushend"),t,n,r=[[0,0],[0,0]];return i.x=function(e){return arguments.length?(t=e,i):t},i.y=function(e){return arguments.length?(n=e,i):n},i.extent=function(e){var s,o,u,a,f;return arguments.length?(t&&(s=e[0],o=e[1],n&&(s=s[0],o=o[0]),t.invert&&(s=t(s),o=t(o)),o<s&&(f=s,s=o,o=f),r[0][0]=s,r[1][0]=o),n&&(u=e[0],a=e[1],t&&(u=u[1],a=a[1]),n.invert&&(u=n(u),a=n(a)),a<u&&(f=u,u=a,a=f),r[0][1]=u,r[1][1]=a),i):(t&&(s=r[0][0],o=r[1][0],t.invert&&(s=t.invert(s),o=t.invert(o)),o<s&&(f=s,s=o,o=f)),n&&(u=r[0][1],a=r[1][1],n.invert&&(u=n.invert(u),a=n.invert(a)),a<u&&(f=u,u=a,a=f)),t&&n?[[s,u],[o,a]]:t?[s,o]:n&&[u,a])},i.clear=function(){return r[0][0]=r[0][1]=r[1][0]=r[1][1]=0,i},i.empty=function(){return t&&r[0][0]===r[1][0]||n&&r[0][1]===r[1][1]},d3.select(window).on("mousemove.brush",Nr).on("mouseup.brush",kr).on("keydown.brush",xr).on("keyup.brush",Tr),d3.rebind(i,e,"on")};var cr,hr,pr,dr,vr,mr,gr,yr,br,wr,Lr={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};d3.behavior={},d3.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",i),d3.select(window).on("mousemove.drag",Fr).on("touchmove.drag",Fr).on("mouseup.drag",Ir,!0).on("touchend.drag",Ir,!0).on("click.drag",qr,!0)}function r(){Ar=e,Or=d3.event.target,Mr=this,_r=arguments,Pr=jr(),t?(Dr=t.apply(Mr,_r),Dr=[Dr.x-Pr[0],Dr.y-Pr[1]]):Dr=[0,0],Hr=0}function i(){r.apply(this,arguments),Br("dragstart")}var e=d3.dispatch("drag","dragstart","dragend"),t=null;return n.origin=function(e){return arguments.length?(t=e,n):t},d3.rebind(n,e,"on")};var Ar,Or,Mr,_r,Dr,Pr,Hr;d3.behavior.zoom=function(){function r(){this.on("mousedown.zoom",s).on("mousewheel.zoom",o).on("DOMMouseScroll.zoom",o).on("dblclick.zoom",u).on("touchstart.zoom",a),d3.select(window).on("mousemove.zoom",ri).on("mouseup.zoom",ii).on("touchmove.zoom",ni).on("touchend.zoom",ti).on("click.zoom",si,!0)}function i(){Vr=e,$r=n,Jr=t.zoom,Kr=d3.event.target,Qr=this,Gr=arguments}function s(){i.apply(this,arguments),Ur=Zr(d3.svg.mouse(Qr)),Yr=0,d3.event.preventDefault(),window.focus()}function o(){i.apply(this,arguments),zr||(zr=Zr(d3.svg.mouse(Qr))),oi(ei()+e[2],d3.svg.mouse(Qr),zr)}function u(){i.apply(this,arguments);var t=d3.svg.mouse(Qr);oi(d3.event.shiftKey?Math.ceil(e[2]-1):Math.floor(e[2]+1),t,Zr(t))}function a(){i.apply(this,arguments);var t=ti(),n,r=Date.now();t.length===1&&r-Xr<300&&oi(1+Math.floor(e[2]),n=t[0],Wr[n.identifier]),Xr=r}var e=[0,0,0],t=d3.dispatch("zoom"),n=ui;return r.extent=function(e){return arguments.length?(n=e==null?ui:e,r):n},d3.rebind(r,t,"on")};var Rr,Ur,zr,Wr={},Xr=0,Vr,$r,Jr,Kr,Qr,Gr,Yr,ui=[[-Infinity,Infinity],[-Infinity,Infinity],[-Infinity,Infinity]]})();(function(){function t(e,t){return function(n){return n&&n.type in e?e[n.type](n):t}}function n(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function r(e,t){e.type in i&&i[e.type](e,t)}function s(e,t){r(e.geometry,t)}function o(e,t){for(var n=e.features,i=0,s=n.length;i<s;i++)r(n[i].geometry,t)}function u(e,t){for(var n=e.geometries,i=0,s=n.length;i<s;i++)r(n[i],t)}function a(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)t.apply(null,n[r])}function f(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var s=n[r],o=0,u=s.length;o<u;o++)t.apply(null,s[o])}function l(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var s=n[r][0],o=0,u=s.length;o<u;o++)t.apply(null,s[o])}function c(e,t){t.apply(null,e.coordinates)}function h(e,t){for(var n=e.coordinates[0],r=0,i=n.length;r<i;r++)t.apply(null,n[r])}function p(e){return e.source}function d(e){return e.target}function v(t,n){function g(t){var n=Math.sin(v-(t*=v))/m,r=Math.sin(t)/m,o=n*u*i+r*p*l,f=n*u*s+r*p*c,h=n*a+r*d;return[Math.atan2(f,o)/e,Math.atan2(h,Math.sqrt(o*o+f*f))/e]}var r=t[0]*e,i=Math.cos(r),s=Math.sin(r),o=t[1]*e,u=Math.cos(o),a=Math.sin(o),f=n[0]*e,l=Math.cos(f),c=Math.sin(f),h=n[1]*e,p=Math.cos(h),d=Math.sin(h),v=g.d=Math.acos(Math.max(-1,Math.min(1,a*d+u*p*Math.cos(f-r)))),m=Math.sin(v);return g}d3.geo={};var e=Math.PI/180;d3.geo.azimuthal=function(){function f(n){var o=n[0]*e-s,f=n[1]*e,l=Math.cos(o),c=Math.sin(o),h=Math.cos(f),p=Math.sin(f),d=t!=="orthographic"?a*p+u*h*l:null,v,m=t==="stereographic"?1/(1+d):t==="gnomonic"?1/d:t==="equidistant"?(v=Math.acos(d),v?v/Math.sin(v):0):t==="equalarea"?Math.sqrt(2/(1+d)):1,g=m*h*c,y=m*(a*h*l-u*p);return[r*g+i[0],r*y+i[1]]}var t="orthographic",n,r=200,i=[480,250],s,o,u,a;return f.invert=function(n){var o=(n[0]-i[0])/r,f=(n[1]-i[1])/r,l=Math.sqrt(o*o+f*f),c=t==="stereographic"?2*Math.atan(l):t==="gnomonic"?Math.atan(l):t==="equidistant"?l:t==="equalarea"?2*Math.asin(.5*l):Math.asin(l),h=Math.sin(c),p=Math.cos(c);return[(s+Math.atan2(o*h,l*u*p+f*a*h))/e,Math.asin(p*a-(l?f*h*u/l:0))/e]},f.mode=function(e){return arguments.length?(t=e+"",f):t},f.origin=function(t){return arguments.length?(n=t,s=n[0]*e,o=n[1]*e,u=Math.cos(o),a=Math.sin(o),f):n},f.scale=function(e){return arguments.length?(r=+e,f):r},f.translate=function(e){return arguments.length?(i=[+e[0],+e[1]],f):i},f.origin([0,0])},d3.geo.albers=function(){function f(t){var n=o*(e*t[0]-s),f=Math.sqrt(u-2*o*Math.sin(e*t[1]))/o;return[r*f*Math.sin(n)+i[0],r*(f*Math.cos(n)-a)+i[1]]}function l(){var r=e*n[0],i=e*n[1],l=e*t[1],c=Math.sin(r),h=Math.cos(r);return s=e*t[0],o=.5*(c+Math.sin(i)),u=h*h+2*o*c,a=Math.sqrt(u-2*o*Math.sin(l))/o,f}var t=[-98,38],n=[29.5,45.5],r=1e3,i=[480,250],s,o,u,a;return f.invert=function(t){var n=(t[0]-i[0])/r,f=(t[1]-i[1])/r,l=a+f,c=Math.atan2(n,l),h=Math.sqrt(n*n+l*l);return[(s+c/o)/e,Math.asin((u-h*h*o*o)/(2*o))/e]},f.origin=function(e){return arguments.length?(t=[+e[0],+e[1]],l()):t},f.parallels=function(e){return arguments.length?(n=[+e[0],+e[1]],l()):n},f.scale=function(e){return arguments.length?(r=+e,f):r},f.translate=function(e){return arguments.length?(i=[+e[0],+e[1]],f):i},l()},d3.geo.albersUsa=function(){function i(i){var s=i[0],o=i[1];return(o>50?t:s<-140?n:o<21?r:e)(i)}var e=d3.geo.albers(),t=d3.geo.albers().origin([-160,60]).parallels([55,65]),n=d3.geo.albers().origin([-160,20]).parallels([8,18]),r=d3.geo.albers().origin([-60,10]).parallels([8,18]);return i.scale=function(s){return arguments.length?(e.scale(s),t.scale(s*.6),n.scale(s),r.scale(s*1.5),i.translate(e.translate())):e.scale()},i.translate=function(s){if(!arguments.length)return e.translate();var o=e.scale()/1e3,u=s[0],a=s[1];return e.translate(s),t.translate([u-400*o,a+170*o]),n.translate([u-190*o,a+200*o]),r.translate([u+580*o,a+430*o]),i},i.scale(e.scale())},d3.geo.bonne=function(){function u(u){var a=u[0]*e-r,f=u[1]*e-i;if(s){var l=o+s-f,c=a*Math.cos(f)/l;a=l*Math.sin(c),f=l*Math.cos(c)-o}else a*=Math.cos(f),f*=-1;return[t*a+n[0],t*f+n[1]]}var t=200,n=[480,250],r,i,s,o;return u.invert=function(i){var u=(i[0]-n[0])/t,a=(i[1]-n[1])/t;if(s){var f=o+a,l=Math.sqrt(u*u+f*f);a=o+s-l,u=r+l*Math.atan2(u,f)/Math.cos(a)}else a*=-1,u/=Math.cos(a);return[u/e,a/e]},u.parallel=function(t){return arguments.length?(o=1/Math.tan(s=t*e),u):s/e},u.origin=function(t){return arguments.length?(r=t[0]*e,i=t[1]*e,u):[r/e,i/e]},u.scale=function(e){return arguments.length?(t=+e,u):t},u.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],u):n},u.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function n(n){var r=n[0]/360,i=-n[1]/360;return[e*r+t[0],e*i+t[1]]}var e=500,t=[480,250];return n.invert=function(n){var r=(n[0]-t[0])/e,i=(n[1]-t[1])/e;return[360*r,-360*i]},n.scale=function(t){return arguments.length?(e=+t,n):e},n.translate=function(e){return arguments.length?(t=[+e[0],+e[1]],n):t},n},d3.geo.mercator=function(){function r(r){var i=r[0]/360,s=-(Math.log(Math.tan(Math.PI/4+r[1]*e/2))/e)/360;return[t*i+n[0],t*Math.max(-0.5,Math.min(.5,s))+n[1]]}var t=500,n=[480,250];return r.invert=function(r){var i=(r[0]-n[0])/t,s=(r[1]-n[1])/t;return[360*i,2*Math.atan(Math.exp(-360*s*e))/e-90]},r.scale=function(e){return arguments.length?(t=+e,r):t},r.translate=function(e){return arguments.length?(n=[+e[0],+e[1]],r):n},r},d3.geo.path=function(){function s(t,i){return typeof e=="function"&&(r=n(e.apply(this,arguments))),u(t)||null}function o(e){return i(e).join(",")}function f(e){var t=h(e[0]),n=0,r=e.length;while(++n<r)t-=h(e[n]);return t}function l(e){var t=d3.geom.polygon(e[0].map(i)),n=t.area(),r=t.centroid(n<0?(n*=-1,1):-1),s=r[0],o=r[1],u=n,a=0,f=e.length;while(++a<f)t=d3.geom.polygon(e[a].map(i)),n=t.area(),r=t.centroid(n<0?(n*=-1,1):-1),s-=r[0],o-=r[1],u-=n;return[s,o,6*u]}function h(e){return Math.abs(d3.geom.polygon(e.map(i)).area())}var e=4.5,r=n(e),i=d3.geo.albersUsa(),u=t({FeatureCollection:function(e){var t=[],n=e.features,r=-1,i=n.length;while(++r<i)t.push(u(n[r].geometry));return t.join("")},Feature:function(e){return u(e.geometry)},Point:function(e){return"M"+o(e.coordinates)+r},MultiPoint:function(e){var t=[],n=e.coordinates,i=-1,s=n.length;while(++i<s)t.push("M",o(n[i]),r);return t.join("")},LineString:function(e){var t=["M"],n=e.coordinates,r=-1,i=n.length;while(++r<i)t.push(o(n[r]),"L");return t.pop(),t.join("")},MultiLineString:function(e){var t=[],n=e.coordinates,r=-1,i=n.length,s,u,a;while(++r<i){s=n[r],u=-1,a=s.length,t.push("M");while(++u<a)t.push(o(s[u]),"L");t.pop()}return t.join("")},Polygon:function(e){var t=[],n=e.coordinates,r=-1,i=n.length,s,u,a;while(++r<i){s=n[r],u=-1;if((a=s.length-1)>0){t.push("M");while(++u<a)t.push(o(s[u]),"L");t[t.length-1]="Z"}}return t.join("")},MultiPolygon:function(e){var t=[],n=e.coordinates,r=-1,i=n.length,s,u,a,f,l,c;while(++r<i){s=n[r],u=-1,a=s.length;while(++u<a){f=s[u],l=-1;if((c=f.length-1)>0){t.push("M");while(++l<c)t.push(o(f[l]),"L");t[t.length-1]="Z"}}}return t.join("")},GeometryCollection:function(e){var t=[],n=e.geometries,r=-1,i=n.length;while(++r<i)t.push(u(n[r]));return t.join("")}}),a=s.area=t({FeatureCollection:function(e){var t=0,n=e.features,r=-1,i=n.length;while(++r<i)t+=a(n[r]);return t},Feature:function(e){return a(e.geometry)},Polygon:function(e){return f(e.coordinates)},MultiPolygon:function(e){var t=0,n=e.coordinates,r=-1,i=n.length;while(++r<i)t+=f(n[r]);return t},GeometryCollection:function(e){var t=0,n=e.geometries,r=-1,i=n.length;while(++r<i)t+=a(n[r]);return t}},0),c=s.centroid=t({Feature:function(e){return c(e.geometry)},Polygon:function(e){var t=l(e.coordinates);return[t[0]/t[2],t[1]/t[2]]},MultiPolygon:function(e){var t=0,n=e.coordinates,r,i=0,s=0,o=0,u=-1,a=n.length;while(++u<a)r=l(n[u]),i+=r[0],s+=r[1],o+=r[2];return[i/o,s/o]}});return s.projection=function(e){return i=e,s},s.pointRadius=function(t){return typeof t=="function"?e=t:(e=+t,r=n(e)),s},s},d3.geo.bounds=function(e){var t=Infinity,n=Infinity,i=-Infinity,s=-Infinity;return r(e,function(e,r){e<t&&(t=e),e>i&&(i=e),r<n&&(n=r),r>s&&(s=r)}),[[t,n],[i,s]]};var i={Feature:s,FeatureCollection:o,GeometryCollection:u,LineString:a,MultiLineString:f,MultiPoint:a,MultiPolygon:l,Point:c,Polygon:h};d3.geo.circle=function(){function o(){}function u(e){return s.distance(e)<i}function f(e){var t=-1,n=e.length,r=[],o,u,a,f,c;while(++t<n)c=s.distance(a=e[t]),c<i?(u&&r.push(v(u,a)((f-i)/(f-c))),r.push(a),o=u=null):(u=a,!o&&r.length&&(r.push(v(r[r.length-1],u)((i-f)/(c-f))),o=u)),f=c;return u&&r.length&&(c=s.distance(a=r[0]),r.push(v(u,a)((f-i)/(f-c)))),l(r)}function l(e){var t=0,n=e.length,r,i,o=n?[e[0]]:e,u,a=s.source();while(++t<n){u=s.source(e[t-1])(e[t]).coordinates;for(r=0,i=u.length;++r<i;)o.push(u[r])}return s.source(a),o}var n=[0,0],r=89.99,i=r*e,s=d3.geo.greatArc().target(Object);o.clip=function(e){return s.source(typeof n=="function"?n.apply(this,arguments):n),a(e)};var a=t({FeatureCollection:function(e){var t=e.features.map(a).filter(Object);return t&&(e=Object.create(e),e.features=t,e)},Feature:function(e){var t=a(e.geometry);return t&&(e=Object.create(e),e.geometry=t,e)},Point:function(e){return u(e.coordinates)&&e},MultiPoint:function(e){var t=e.coordinates.filter(u);return t.length&&{type:e.type,coordinates:t}},LineString:function(e){var t=f(e.coordinates);return t.length&&(e=Object.create(e),e.coordinates=t,e)},MultiLineString:function(e){var t=e.coordinates.map(f).filter(function(e){return e.length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},Polygon:function(e){var t=e.coordinates.map(f);return t[0].length&&(e=Object.create(e),e.coordinates=t,e)},MultiPolygon:function(e){var t=e.coordinates.map(function(e){return e.map(f)}).filter(function(e){return e[0].length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},GeometryCollection:function(e){var t=e.geometries.map(a).filter(Object);return t.length&&(e=Object.create(e),e.geometries=t,e)}});return o.origin=function(e){return arguments.length?(n=e,o):n},o.angle=function(t){return arguments.length?(i=(r=+t)*e,o):r},o.precision=function(e){return arguments.length?(s.precision(e),o):s.precision()},o},d3.geo.greatArc=function(){function i(){var e=typeof t=="function"?t.apply(this,arguments):t,i=typeof n=="function"?n.apply(this,arguments):n,s=v(e,i),o=r/s.d,u=0,a=[e];while((u+=o)<1)a.push(s(u));return a.push(i),{type:"LineString",coordinates:a}}var t=p,n=d,r=6*e;return i.distance=function(){var e=typeof t=="function"?t.apply(this,arguments):t,r=typeof n=="function"?n.apply(this,arguments):n;return v(e,r).d},i.source=function(e){return arguments.length?(t=e,i):t},i.target=function(e){return arguments.length?(n=e,i):n},i.precision=function(t){return arguments.length?(r=t*e,i):r/e},i},d3.geo.greatCircle=d3.geo.circle})();(function(e,t){function n(e){return B.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}function r(e){if(!mn[e]){var t=D.body,n=B("<"+e+">").appendTo(t),r=n.css("display");n.remove();if(r==="none"||r===""){gn||(gn=D.createElement("iframe"),gn.frameBorder=gn.width=gn.height=0),t.appendChild(gn);if(!yn||!gn.createElement)yn=(gn.contentWindow||gn.contentDocument).document,yn.write((D.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),yn.close();n=yn.createElement(e),yn.body.appendChild(n),r=B.css(n,"display"),t.removeChild(gn)}mn[e]=r}return mn[e]}function i(e,t){var n={};return B.each(Sn.concat.apply([],Sn.slice(0,t)),function(){n[this]=e}),n}function s(){xn=t}function o(){return setTimeout(s,0),xn=B.now()}function u(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function a(){try{return new e.XMLHttpRequest}catch(t){}}function f(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},s,o,u=r.length,a,f=r[0],l,c,h,p,d;for(s=1;s<u;s++){if(s===1)for(o in e.converters)typeof o=="string"&&(i[o.toLowerCase()]=e.converters[o]);l=f,f=r[s];if(f==="*")f=l;else if(l!=="*"&&l!==f){c=l+" "+f,h=i[c]||i["* "+f];if(!h){d=t;for(p in i){a=p.split(" ");if(a[0]===l||a[0]==="*"){d=i[a[1]+" "+f];if(d){p=i[p],p===!0?h=d:d===!0&&(h=p);break}}}}!h&&!d&&B.error("No conversion from "+c.replace(" "," to ")),h!==!0&&(n=h?h(n):d(p(n)))}}return n}function l(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function c(e,t,n,r){if(B.isArray(t))B.each(t,function(t,i){n||zt.test(e)?r(e,i):c(e+"["+(typeof i=="object"||B.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)c(e+"["+i+"]",t[i],n,r);else r(e,t)}function h(e,n){var r,i,s=B.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&B.extend(!0,e,i)}function p(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===sn,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=p(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=p(e,n,r,i,"*",o)),c}function d(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(B.isFunction(n)){var r=t.toLowerCase().split(en),i=0,s=r.length,o,u,a;for(;i<s;i++)o=r[i],a=/^\+/.test(o),a&&(o=o.substr(1)||"*"),u=e[o]=e[o]||[],u[a?"unshift":"push"](n)}}}function v(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?jt:Ft,s=0,o=i.length;if(r>0){if(n!=="border")for(;s<o;s++)n||(r-=parseFloat(B.css(e,"padding"+i[s]))||0),n==="margin"?r+=parseFloat(B.css(e,n+i[s]))||0:r-=parseFloat(B.css(e,"border"+i[s]+"Width"))||0;return r+"px"}r=It(e,t,t);if(r<0||r==null)r=e.style[t]||0;r=parseFloat(r)||0;if(n)for(;s<o;s++)r+=parseFloat(B.css(e,"padding"+i[s]))||0,n!=="padding"&&(r+=parseFloat(B.css(e,"border"+i[s]+"Width"))||0),n==="margin"&&(r+=parseFloat(B.css(e,n+i[s]))||0);return r+"px"}function m(e,t){t.src?B.ajax({url:t.src,async:!1,dataType:"script"}):B.globalEval((t.text||t.textContent||t.innerHTML||"").replace(kt,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function g(e){var t=D.createElement("div");return At.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function y(e){var t=(e.nodeName||"").toLowerCase();t==="input"?b(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&B.grep(e.getElementsByTagName("input"),b)}function b(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function w(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function E(e,t){var n;if(t.nodeType===1){t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(B.expando)}}function S(e,t){if(t.nodeType===1&&!!B.hasData(e)){var n,r,i,s=B._data(e),o=B._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)B.event.add(t,n+(u[n][r].namespace?".":"")+u[n][r].namespace,u[n][r],u[n][r].data)}o.data&&(o.data=B.extend({},o.data))}}function x(e,t){return B.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function T(e){var t=vt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function N(e,t,n){t=t||0;if(B.isFunction(t))return B.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return B.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=B.grep(e,function(e){return e.nodeType===1});if(ct.test(t))return B.filter(t,r,!n);t=B.filter(t,r)}return B.grep(e,function(e,r){return B.inArray(e,t)>=0===n})}function C(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function k(){return!0}function L(){return!1}function A(e,t,n){var r=t+"defer",i=t+"queue",s=t+"mark",o=B._data(e,r);o&&(n==="queue"||!B._data(e,i))&&(n==="mark"||!B._data(e,s))&&setTimeout(function(){!B._data(e,i)&&!B._data(e,s)&&(B.removeData(e,r,!0),o.fire())},0)}function O(e){for(var t in e){if(t==="data"&&B.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function M(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(q,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:B.isNumeric(r)?parseFloat(r):I.test(r)?B.parseJSON(r):r}catch(s){}B.data(e,n,r)}else r=t}return r}function _(e){var t=j[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}var D=e.document,P=e.navigator,H=e.location,B=function(){function n(){if(!r.isReady){try{D.documentElement.doScroll("left")}catch(e){setTimeout(n,1);return}r.ready()}}var r=function(e,t){return new r.fn.init(e,t,o)},i=e.jQuery,s=e.$,o,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/\S/,f=/^\s+/,l=/\s+$/,c=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,h=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,v=/(?:^|:|,)(?:\s*\[)+/g,m=/(webkit)[ \/]([\w.]+)/,g=/(opera)(?:.*version)?[ \/]([\w.]+)/,y=/(msie) ([\w.]+)/,b=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,E=/^-ms-/,S=function(e,t){return(t+"").toUpperCase()},x=P.userAgent,T,N,C,k=Object.prototype.toString,L=Object.prototype.hasOwnProperty,A=Array.prototype.push,O=Array.prototype.slice,M=String.prototype.trim,_=Array.prototype.indexOf,H={};return r.fn=r.prototype={constructor:r,init:function(e,n,i){var s,o,a,f;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!n&&D.body)return this.context=D,this[0]=D.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)!=="<"||e.charAt(e.length-1)!==">"||e.length<3?s=u.exec(e):s=[null,e,null];if(s&&(s[1]||!n)){if(s[1])return n=n instanceof r?n[0]:n,f=n?n.ownerDocument||n:D,a=c.exec(e),a?r.isPlainObject(n)?(e=[D.createElement(a[1])],r.fn.attr.call(e,n,!0)):e=[f.createElement(a[1])]:(a=r.buildFragment([s[1]],[f]),e=(a.cacheable?r.clone(a.fragment):a.fragment).childNodes),r.merge(this,e);o=D.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return i.find(e);this.length=1,this[0]=o}return this.context=D,this.selector=e,this}return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e)}return r.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),r.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return O.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return r.isArray(e)?A.apply(i,e):r.merge(i,e),i.prevObject=this,i.context=this.context,t==="find"?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return r.each(this,e,t)},ready:function(e){return r.bindReady(),N.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(O.apply(this,arguments),"slice",O.call(arguments).join(","))},map:function(e){return this.pushStack(r.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:[].sort,splice:[].splice},r.fn.init.prototype=r.fn,r.extend=r.fn.extend=function(){var e,n,i,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!r.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){i=a[n],s=e[n];if(a===s)continue;c&&s&&(r.isPlainObject(s)||(o=r.isArray(s)))?(o?(o=!1,u=i&&r.isArray(i)?i:[]):u=i&&r.isPlainObject(i)?i:{},a[n]=r.extend(c,u,s)):s!==t&&(a[n]=s)}return a},r.extend({noConflict:function(t){return e.$===r&&(e.$=s),t&&e.jQuery===r&&(e.jQuery=i),r},isReady:!1,readyWait:1,holdReady:function(e){e?r.readyWait++:r.ready(!0)},ready:function(e){if(e===!0&&!--r.readyWait||e!==!0&&!r.isReady){if(!D.body)return setTimeout(r.ready,1);r.isReady=!0;if(e!==!0&&--r.readyWait>0)return;N.fireWith(D,[r]),r.fn.trigger&&r(D).trigger("ready").off("ready")}},bindReady:function(){if(!N){N=r.Callbacks("once memory");if(D.readyState==="complete")return setTimeout(r.ready,1);if(D.addEventListener)D.addEventListener("DOMContentLoaded",C,!1),e.addEventListener("load",r.ready,!1);else if(D.attachEvent){D.attachEvent("onreadystatechange",C),e.attachEvent("onload",r.ready);var t=!1;try{t=e.frameElement==null}catch(i){}D.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return r.type(e)==="function"},isArray:Array.isArray||function(e){return r.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):H[k.call(e)]||"object"},isPlainObject:function(e){if(!e||r.type(e)!=="object"||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!L.call(e,"constructor")&&!L.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||L.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=r.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(h.test(t.replace(p,"@").replace(d,"]").replace(v,"")))return(new Function("return "+t))();r.error("Invalid JSON: "+t)},parseXML:function(n){var i,s;try{e.DOMParser?(s=new DOMParser,i=s.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)&&r.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&a.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(E,"ms-").replace(w,S)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var s,o=0,u=e.length,a=u===t||r.isFunction(e);if(i){if(a){for(s in e)if(n.apply(e[s],i)===!1)break}else for(;o<u;)if(n.apply(e[o++],i)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:M?function(e){return e==null?"":M.call(e)}:function(e){return e==null?"":(e+"").replace(f,"").replace(l,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var i=r.type(e);e.length==null||i==="string"||i==="function"||i==="regexp"||r.isWindow(e)?A.call(n,e):r.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(_)return _.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,i){var s,o,u=[],a=0,f=e.length,l=e instanceof r||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||r.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,i),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,i),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var i=e[n];n=e,e=i}if(!r.isFunction(e))return t;var s=O.call(arguments,2),o=function(){return e.apply(n,s.concat(O.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||r.guid++,o},access:function(e,n,i,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)r.access(e,f,n[f],s,o,i);return e}if(i!==t){s=!u&&s&&r.isFunction(i);for(var l=0;l<a;l++)o(e[l],n,s?i.call(e[l],l,o(e[l],n)):i,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=m.exec(e)||g.exec(e)||y.exec(e)||e.indexOf("compatible")<0&&b.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}r.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof r&&!(i instanceof e)&&(i=e(i)),r.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(D);return e},browser:{}}),r.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){H["[object "+t+"]"]=t.toLowerCase()}),T=r.uaMatch(x),T.browser&&(r.browser[T.browser]=!0,r.browser.version=T.version),r.browser.webkit&&(r.browser.safari=!0),a.test(" ")&&(f=/^[\s\xA0]+/,l=/[\s\xA0]+$/),o=r(D),D.addEventListener?C=function(){D.removeEventListener("DOMContentLoaded",C,!1),r.ready()}:D.attachEvent&&(C=function(){D.readyState==="complete"&&(D.detachEvent("onreadystatechange",C),r.ready())}),r}(),j={};B.Callbacks=function(e){e=e?j[e]||_(e):{};var n=[],r=[],i,s,o,u,a,f=function(t){var r,i,s,o,u;for(r=0,i=t.length;r<i;r++)s=t[r],o=B.type(s),o==="array"?f(s):o==="function"&&(!e.unique||!c.has(s))&&n.push(s)},l=function(t,f){f=f||[],i=!e.memory||[t,f],s=!0,a=o||0,o=0,u=n.length;for(;n&&a<u;a++)if(n[a].apply(t,f)===!1&&e.stopOnFalse){i=!0;break}s=!1,n&&(e.once?i===!0?c.disable():n=[]:r&&r.length&&(i=r.shift(),c.fireWith(i[0],i[1])))},c={add:function(){if(n){var e=n.length;f(arguments),s?u=n.length:i&&i!==!0&&(o=e,l(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var o=0;o<n.length;o++)if(t[r]===n[o]){s&&o<=u&&(u--,o<=a&&a--),n.splice(o--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&c.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(s?e.once||r.push([t,n]):(!e.once||!i)&&l(t,n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c};var F=[].slice;B.extend({Deferred:function(e){var t=B.Callbacks("once memory"),n=B.Callbacks("once memory"),r=B.Callbacks("memory"),i="pending",s={resolve:t,reject:n,notify:r},o={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return u.done(e).fail(t).progress(n),this},always:function(){return u.done.apply(u,arguments).fail.apply(u,arguments),this},pipe:function(e,t,n){return B.Deferred(function(r){B.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],s;B.isFunction(n)?u[e](function(){s=n.apply(this,arguments),s&&B.isFunction(s.promise)?s.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===u?r:this,[s])}):u[e](r[i])})}).promise()},promise:function(e){if(e==null)e=o;else for(var t in o)e[t]=o[t];return e}},u=o.promise({}),a;for(a in s)u[a]=s[a].fire,u[a+"With"]=s[a].fireWith;return u.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(u,u),u},when:function(e){function t(e){return function(t){o[e]=arguments.length>1?F.call(arguments,0):t,f.notifyWith(l,o)}}function n(e){return function(t){r[e]=arguments.length>1?F.call(arguments,0):t,--u||f.resolveWith(f,r)}}var r=F.call(arguments,0),i=0,s=r.length,o=Array(s),u=s,a=s,f=s<=1&&e&&B.isFunction(e.promise)?e:B.Deferred(),l=f.promise();if(s>1){for(;i<s;i++)r[i]&&r[i].promise&&B.isFunction(r[i].promise)?r[i].promise().then(n(i),f.reject,t(i)):--u;u||f.resolveWith(f,r)}else f!==e&&f.resolveWith(f,s?[e]:[]);return l}}),B.support=function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d=D.createElement("div"),v=D.documentElement;d.setAttribute("className","t"),d.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0];if(!n||!n.length||!r)return{};i=D.createElement("select"),s=i.appendChild(D.createElement("option")),o=d.getElementsByTagName("input")[0],t={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.55/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:o.value==="on",optSelected:s.selected,getSetAttribute:d.className!=="t",enctype:!!D.createElement("form").enctype,html5Clone:D.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!s.disabled;try{delete d.test}catch(m){t.deleteExpando=!1}!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick")),o=D.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","checked"),d.appendChild(o),a=D.createDocumentFragment(),a.appendChild(d.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,a.removeChild(o),a.appendChild(d),d.innerHTML="",e.getComputedStyle&&(u=D.createElement("div"),u.style.width="0",u.style.marginRight="0",d.style.width="2px",d.appendChild(u),t.reliableMarginRight=(parseInt((e.getComputedStyle(u,null)||{marginRight:0}).marginRight,10)||0)===0);if(d.attachEvent)for(h in{submit:1,change:1,focusin:1})c="on"+h,p=c in d,p||(d.setAttribute(c,"return;"),p=typeof d[c]=="function"),t[h+"Bubbles"]=p;return a.removeChild(d),a=i=s=u=d=o=null,B(function(){var e,n,r,i,s,o,u,a,l,c,h,v=D.getElementsByTagName("body")[0];!v||(u=1,a="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",c="style='"+a+"border:5px solid #000;padding:0;'",h="<div "+c+"><div></div></div>"+"<table "+c+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=D.createElement("div"),e.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+u+"px",v.insertBefore(e,v.firstChild),d=D.createElement("div"),e.appendChild(d),d.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),p=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",t.reliableHiddenOffsets=p&&f[0].offsetHeight===0,d.innerHTML="",d.style.width=d.style.paddingLeft="1px",B.boxModel=t.boxModel=d.offsetWidth===2,typeof d.style.zoom!="undefined"&&(d.style.display="inline",d.style.zoom=1,t.inlineBlockNeedsLayout=d.offsetWidth===2,d.style.display="",d.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=d.offsetWidth!==2),d.style.cssText=a+l,d.innerHTML=h,n=d.firstChild,r=n.firstChild,s=n.nextSibling.firstChild.firstChild,o={doesNotAddBorder:r.offsetTop!==5,doesAddBorderForTableAndCells:s.offsetTop===5},r.style.position="fixed",r.style.top="20px",o.fixedPosition=r.offsetTop===20||r.offsetTop===15,r.style.position=r.style.top="",n.style.overflow="hidden",n.style.position="relative",o.subtractsBorderForOverflowNotVisible=r.offsetTop===-5,o.doesNotIncludeMarginInBodyOffset=v.offsetTop!==u,v.removeChild(e),d=e=null,B.extend(t,o))}),t}();var I=/^(?:\{.*\}|\[.*\])$/,q=/([A-Z])/g;B.extend({cache:{},uuid:0,expando:"jQuery"+(B.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?B.cache[e[B.expando]]:e[B.expando],!!e&&!O(e)},data:function(e,n,r,i){if(!!B.acceptData(e)){var s,o,u,a=B.expando,f=typeof n=="string",l=e.nodeType,c=l?B.cache:e,h=l?e[a]:e[a]&&a,p=n==="events";if((!h||!c[h]||!p&&!i&&!c[h].data)&&f&&r===t)return;h||(l?e[a]=h=++B.uuid:h=a),c[h]||(c[h]={},l||(c[h].toJSON=B.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=B.extend(c[h],n):c[h].data=B.extend(c[h].data,n);return s=o=c[h],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[B.camelCase(n)]=r),p&&!o[n]?s.events:(f?(u=o[n],u==null&&(u=o[B.camelCase(n)])):u=o,u)}},removeData:function(e,t,n){if(!!B.acceptData(e)){var r,i,s,o=B.expando,u=e.nodeType,a=u?B.cache:e,f=u?e[o]:o;if(!a[f])return;if(t){r=n?a[f]:a[f].data;if(r){B.isArray(t)||(t in r?t=[t]:(t=B.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?O:B.isEmptyObject)(r))return}}if(!n){delete a[f].data;if(!O(a[f]))return}B.support.deleteExpando||!a.setInterval?delete a[f]:a[f]=null,u&&(B.support.deleteExpando?delete e[o]:e.removeAttribute?e.removeAttribute(o):e[o]=null)}},_data:function(e,t,n){return B.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=B.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),B.fn.extend({data:function(e,n){var r,i,s,o=null;if(typeof e=="undefined"){if(this.length){o=B.data(this[0]);if(this[0].nodeType===1&&!B._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var u=0,a=i.length;u<a;u++)s=i[u].name,s.indexOf("data-")===0&&(s=B.camelCase(s.substring(5)),M(this[0],s,o[s]));B._data(this[0],"parsedAttrs",!0)}}return o}return typeof e=="object"?this.each(function(){B.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(o=this.triggerHandler("getData"+r[1]+"!",[r[0]]),o===t&&this.length&&(o=B.data(this[0],e),o=M(this[0],e,o)),o===t&&r[1]?this.data(r[0]):o):this.each(function(){var t=B(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),B.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){B.removeData(this,e)})}}),B.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",B._data(e,t,(B._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(B._data(t,r)||1)-1;i?B._data(t,r,i):(B.removeData(t,r,!0),A(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=B._data(e,t),n&&(!r||B.isArray(n)?r=B._data(e,t,B.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=B.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),B._data(e,t+".run",i),r.call(e,function(){B.dequeue(e,t)},i)),n.length||(B.removeData(e,t+"queue "+t+".run",!0),A(e,t,"queue"))}}),B.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?B.queue(this[0],e):this.each(function(){var t=B.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&B.dequeue(this,e)})},dequeue:function(e){return this.each(function(){B.dequeue(this,e)})},delay:function(e,t){return e=B.fx?B.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function r(){--u||i.resolveWith(s,[s])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var i=B.Deferred(),s=this,o=s.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=B.data(s[o],a,t,!0)||(B.data(s[o],f,t,!0)||B.data(s[o],l,t,!0))&&B.data(s[o],a,B.Callbacks("once memory"),!0))u++,c.add(r);return r(),i.promise()}});var R=/[\n\t\r]/g,U=/\s+/,z=/\r/g,W=/^(?:button|input)$/i,X=/^(?:button|input|object|select|textarea)$/i,V=/^a(?:rea)?$/i,$=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,J=B.support.getSetAttribute,K,Q,G;B.fn.extend({attr:function(e,t){return B.access(this,e,t,!0,B.attr)},removeAttr:function(e){return this.each(function(){B.removeAttr(this,e)})},prop:function(e,t){return B.access(this,e,t,!0,B.prop)},removeProp:function(e){return e=B.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(B.isFunction(e))return this.each(function(t){B(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(U);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)~s.indexOf(" "+t[o]+" ")||(s+=t[o]+" ");i.className=B.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(B.isFunction(e))return this.each(function(t){B(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(U);for(r=0,i=this.length;r<i;r++){s=this[r];if(s.nodeType===1&&s.className)if(e){o=(" "+s.className+" ").replace(R," ");for(u=0,a=n.length;u<a;u++)o=o.replace(" "+n[u]+" "," ");s.className=B.trim(o)}else s.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return B.isFunction(e)?this.each(function(n){B(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=B(this),u=t,a=e.split(U);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&B._data(this,"__className__",this.className),this.className=this.className||e===!1?"":B._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(R," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!!arguments.length)return i=B.isFunction(e),this.each(function(r){var s=B(this),o;if(this.nodeType===1){i?o=e.call(this,r,s.val()):o=e,o==null?o="":typeof o=="number"?o+="":B.isArray(o)&&(o=B.map(o,function(e){return e==null?"":e+""})),n=B.valHooks[this.nodeName.toLowerCase()]||B.valHooks[this.type];if(!n||!("set"in n)||n.set(this,o,"value")===t)this.value=o}});if(s)return n=B.valHooks[s.nodeName.toLowerCase()]||B.valHooks[s.type],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(z,""):r==null?"":r)}}),B.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(B.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!B.nodeName(i.parentNode,"optgroup"))){t=B(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?B(u[s]).val():o},set:function(e,t){var n=B.makeArray(t);return B(e).find("option").each(function(){this.selected=B.inArray(B(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!!e&&a!==3&&a!==8&&a!==2){if(i&&n in B.attrFn)return B(e)[n](r);if(typeof e.getAttribute=="undefined")return B.prop(e,n,r);u=a!==1||!B.isXMLDoc(e),u&&(n=n.toLowerCase(),o=B.attrHooks[n]||($.test(n)?Q:K));if(r!==t){if(r===null){B.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,""+r),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)}},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(U),s=r.length;for(;o<s;o++)i=r[o],i&&(n=B.propFix[i]||i,B.attr(e,i,""),e.removeAttribute(J?i:n),$.test(i)&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(W.test(e.nodeName)&&e.parentNode)B.error("type property can't be changed");else if(!B.support.radioValue&&t==="radio"&&B.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return K&&B.nodeName(e,"button")?K.get(e,t):t in e?e.value:null},set:function(e,t,n){if(K&&B.nodeName(e,"button"))return K.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!!e&&u!==3&&u!==8&&u!==2)return o=u!==1||!B.isXMLDoc(e),o&&(n=B.propFix[n]||n,s=B.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):X.test(e.nodeName)||V.test(e.nodeName)&&e.href?0:t}}}}),B.attrHooks.tabindex=B.propHooks.tabIndex,Q={get:function(e,n){var r,i=B.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?B.removeAttr(e,n):(r=B.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},J||(G={name:!0,id:!0},K=B.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(G[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=D.createAttribute(n),e.setAttributeNode(r)),r.nodeValue=t+""}},B.attrHooks.tabindex.set=K.set,B.each(["width","height"],function(e,t){B.attrHooks[t]=B.extend(B.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),B.attrHooks.contenteditable={get:K.get,set:function(e,t,n){t===""&&(t="false"),K.set(e,t,n)}}),B.support.hrefNormalized||B.each(["href","src","width","height"],function(e,n){B.attrHooks[n]=B.extend(B.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),B.support.style||(B.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),B.support.optSelected||(B.propHooks.selected=B.extend(B.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),B.support.enctype||(B.propFix.enctype="encoding"),B.support.checkOn||B.each(["radio","checkbox"],function(){B.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),B.each(["radio","checkbox"],function(){B.valHooks[this]=B.extend(B.valHooks[this],{set:function(e,t){if(B.isArray(t))return e.checked=B.inArray(B(e).val(),t)>=0}})});var Y=/^(?:textarea|input|select)$/i,Z=/^([^\.]*)?(?:\.(.+))?$/,et=/\bhover(\.\S+)?\b/,tt=/^key/,nt=/^(?:mouse|contextmenu)|click/,rt=/^(?:focusinfocus|focusoutblur)$/,it=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,st=function(e){var t=it.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},ot=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},ut=function(e){return B.event.special.hover?e:e.replace(et,"mouseenter$1 mouseleave$1")};B.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g;if(!(e.nodeType===3||e.nodeType===8||!n||!r||!(o=B._data(e)))){r.handler&&(d=r,r=d.handler),r.guid||(r.guid=B.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof B=="undefined"||!!e&&B.event.triggered===e.type?t:B.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=B.trim(ut(n)).split(" ");for(f=0;f<n.length;f++){l=Z.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=B.event.special[c]||{},c=
(s?g.delegateType:g.bindType)||c,g=B.event.special[c]||{},p=B.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,quick:st(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),B.event.global[c]=!0}e=null}},global:{},remove:function(e,t,n,r,i){var s=B.hasData(e)&&B._data(e),o,u,a,f,l,c,h,p,d,v,m,g;if(!!s&&!!(p=s.events)){t=B.trim(ut(t||"")).split(" ");for(o=0;o<t.length;o++){u=Z.exec(t[o])||[],a=f=u[1],l=u[2];if(!a){for(a in p)B.event.remove(e,a+t[o],n,r,!0);continue}d=B.event.special[a]||{},a=(r?d.delegateType:d.bindType)||a,m=p[a]||[],c=m.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(h=0;h<m.length;h++)g=m[h],(i||f===g.origType)&&(!n||n.guid===g.guid)&&(!l||l.test(g.namespace))&&(!r||r===g.selector||r==="**"&&g.selector)&&(m.splice(h--,1),g.selector&&m.delegateCount--,d.remove&&d.remove.call(e,g));m.length===0&&c!==m.length&&((!d.teardown||d.teardown.call(e,l)===!1)&&B.removeEvent(e,a,s.handle),delete p[a])}B.isEmptyObject(p)&&(v=s.handle,v&&(v.elem=null),B.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,s){if(!i||i.nodeType!==3&&i.nodeType!==8){var o=n.type||n,u=[],a,f,l,c,h,p,d,v,m,g;if(rt.test(o+B.event.triggered))return;o.indexOf("!")>=0&&(o=o.slice(0,-1),f=!0),o.indexOf(".")>=0&&(u=o.split("."),o=u.shift(),u.sort());if((!i||B.event.customEvent[o])&&!B.event.global[o])return;n=typeof n=="object"?n[B.expando]?n:new B.Event(o,n):new B.Event(o),n.type=o,n.isTrigger=!0,n.exclusive=f,n.namespace=u.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,p=o.indexOf(":")<0?"on"+o:"";if(!i){a=B.cache;for(l in a)a[l].events&&a[l].events[o]&&B.event.trigger(n,r,a[l].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?B.makeArray(r):[],r.unshift(n),d=B.event.special[o]||{};if(d.trigger&&d.trigger.apply(i,r)===!1)return;m=[[i,d.bindType||o]];if(!s&&!d.noBubble&&!B.isWindow(i)){g=d.delegateType||o,c=rt.test(g+o)?i:i.parentNode,h=null;for(;c;c=c.parentNode)m.push([c,g]),h=c;h&&h===i.ownerDocument&&m.push([h.defaultView||h.parentWindow||e,g])}for(l=0;l<m.length&&!n.isPropagationStopped();l++)c=m[l][0],n.type=m[l][1],v=(B._data(c,"events")||{})[n.type]&&B._data(c,"handle"),v&&v.apply(c,r),v=p&&c[p],v&&B.acceptData(c)&&v.apply(c,r)===!1&&n.preventDefault();return n.type=o,!s&&!n.isDefaultPrevented()&&(!d._default||d._default.apply(i.ownerDocument,r)===!1)&&(o!=="click"||!B.nodeName(i,"a"))&&B.acceptData(i)&&p&&i[o]&&(o!=="focus"&&o!=="blur"||n.target.offsetWidth!==0)&&!B.isWindow(i)&&(h=i[p],h&&(i[p]=null),B.event.triggered=o,i[o](),B.event.triggered=t,h&&(i[p]=h)),n.result}},dispatch:function(n){n=B.event.fix(n||e.event);var r=(B._data(this,"events")||{})[n.type]||[],i=r.delegateCount,s=[].slice.call(arguments,0),o=!n.exclusive&&!n.namespace,u=[],a,f,l,c,h,p,d,v,m,g,y;s[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click")){c=B(this),c.context=this.ownerDocument||this;for(l=n.target;l!=this;l=l.parentNode||this){p={},v=[],c[0]=l;for(a=0;a<i;a++)m=r[a],g=m.selector,p[g]===t&&(p[g]=m.quick?ot(l,m.quick):c.is(g)),p[g]&&v.push(m);v.length&&u.push({elem:l,matches:v})}}r.length>i&&u.push({elem:this,matches:r.slice(i)});for(a=0;a<u.length&&!n.isPropagationStopped();a++){d=u[a],n.currentTarget=d.elem;for(f=0;f<d.matches.length&&!n.isImmediatePropagationStopped();f++){m=d.matches[f];if(o||!n.namespace&&!m.namespace||n.namespace_re&&n.namespace_re.test(m.namespace))n.data=m.data,n.handleObj=m,h=((B.event.special[m.origType]||{}).handle||m.handler).apply(d.elem,s),h!==t&&(n.result=h,h===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||D,i=r.documentElement,s=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},fix:function(e){if(e[B.expando])return e;var n,r,i=e,s=B.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=B.Event(i);for(n=o.length;n;)r=o[--n],e[r]=i[r];return e.target||(e.target=i.srcElement||D),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),s.filter?s.filter(e,i):e},special:{ready:{setup:B.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){B.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=B.extend(new B.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?B.event.trigger(i,null,t):B.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},B.event.handle=B.event.dispatch,B.removeEvent=D.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},B.Event=function(e,t){if(!(this instanceof B.Event))return new B.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?k:L):this.type=e,t&&B.extend(this,t),this.timeStamp=e&&e.timeStamp||B.now(),this[B.expando]=!0},B.Event.prototype={preventDefault:function(){this.isDefaultPrevented=k;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=k;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=k,this.stopPropagation()},isDefaultPrevented:L,isPropagationStopped:L,isImmediatePropagationStopped:L},B.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){B.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,s=i.selector,o;if(!r||r!==n&&!B.contains(n,r))e.type=i.origType,o=i.handler.apply(this,arguments),e.type=t;return o}}}),B.support.submitBubbles||(B.event.special.submit={setup:function(){if(B.nodeName(this,"form"))return!1;B.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=B.nodeName(n,"input")||B.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(B.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&B.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(B.nodeName(this,"form"))return!1;B.event.remove(this,"._submit")}}),B.support.changeBubbles||(B.event.special.change={setup:function(){if(Y.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")B.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),B.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,B.event.simulate("change",this,e,!0))});return!1}B.event.add(this,"beforeactivate._change",function(e){var t=e.target;Y.test(t.nodeName)&&!t._change_attached&&(B.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&B.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return B.event.remove(this,"._change"),Y.test(this.nodeName)}}),B.support.focusinBubbles||B.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){B.event.simulate(t,e.target,B.event.fix(e),!0)};B.event.special[t]={setup:function(){n++===0&&D.addEventListener(e,r,!0)},teardown:function(){--n===0&&D.removeEventListener(e,r,!0)}}}),B.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=L;else if(!i)return this;return s===1&&(o=i,i=function(e){return B().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=B.guid++)),this.each(function(){B.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return B(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=L),this.each(function(){B.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return B(this.context).on(e,this.selector,t,n),this},die:function(e,t){return B(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){B.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return B.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||B.guid++,r=0,i=function(n){var i=(B._data(this,"lastToggle"+e.guid)||0)%r;return B._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),B.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){B.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},B.attrFn&&(B.attrFn[t]=!0),tt.test(t)&&(B.event.fixHooks[t]=B.event.keyHooks),nt.test(t)&&(B.event.fixHooks[t]=B.event.mouseHooks)}),function(){function e(e,t,n,r,s,o){for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){var l=!1;f=f[e];while(f){if(f[i]===n){l=r[f.sizset];break}if(f.nodeType===1){o||(f[i]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}r[u]=l}}}function n(e,t,n,r,s,o){for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){var l=!1;f=f[e];while(f){if(f[i]===n){l=r[f.sizset];break}f.nodeType===1&&!o&&(f[i]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}r[u]=l}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i="sizcache"+(Math.random()+"").replace(".",""),s=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(e,t,n,i){n=n||[],t=t||D;var s=t;if(t.nodeType!==1&&t.nodeType!==9)return[];if(!e||typeof e!="string")return n;var u,a,f,l,c,p,m,g,b=!0,w=h.isXML(t),E=[],x=e;do{r.exec(""),u=r.exec(x);if(u){x=u[3],E.push(u[1]);if(u[2]){l=u[3];break}}}while(u);if(E.length>1&&v.exec(e))if(E.length===2&&d.relative[E[0]])a=S(E[0]+E[1],t,i);else{a=d.relative[E[0]]?[t]:h(E.shift(),t);while(E.length)e=E.shift(),d.relative[e]&&(e+=E.shift()),a=S(e,a,i)}else{!i&&E.length>1&&t.nodeType===9&&!w&&d.match.ID.test(E[0])&&!d.match.ID.test(E[E.length-1])&&(c=h.find(E.shift(),t,w),t=c.expr?h.filter(c.expr,c.set)[0]:c.set[0]);if(t){c=i?{expr:E.pop(),set:y(i)}:h.find(E.pop(),E.length!==1||E[0]!=="~"&&E[0]!=="+"||!t.parentNode?t:t.parentNode,w),a=c.expr?h.filter(c.expr,c.set):c.set,E.length>0?f=y(a):b=!1;while(E.length)p=E.pop(),m=p,d.relative[p]?m=E.pop():p="",m==null&&(m=t),d.relative[p](f,m,w)}else f=E=[]}f||(f=a),f||h.error(p||e);if(o.call(f)==="[object Array]")if(!b)n.push.apply(n,f);else if(t&&t.nodeType===1)for(g=0;f[g]!=null;g++)f[g]&&(f[g]===!0||f[g].nodeType===1&&h.contains(t,f[g]))&&n.push(a[g]);else for(g=0;f[g]!=null;g++)f[g]&&f[g].nodeType===1&&n.push(a[g]);else y(f,n);return l&&(h(l,s,n,i),h.uniqueSort(n)),n};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(t,r,i){var o,u=s++,a=e;typeof r=="string"&&!c.test(r)&&(r=r.toLowerCase(),o=r,a=n),a("parentNode",r,u,t,o,i)},"~":function(t,r,i){var o,u=s++,a=e;typeof r=="string"&&!c.test(r)&&(r=r.toLowerCase(),o=r,a=n),a("previousSibling",r,u,t,o,i)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=s++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,i,s){if(e[1]==="not"){if(!((r.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=h.filter(e[3],t,n,!0^s);return n||i.push.apply(i,o),!1}e[3]=h(e[3],null,null,t)}else if(d.match.POS.test(e[0])||d.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,r,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],r=t[3];if(n===1&&r===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[i]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[i]=s}return f=e.nodeIndex-r,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(D.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;D.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=D.createElement("div"),n="script"+(new Date).getTime(),r=D.documentElement;e.innerHTML="<a name='"+n+"'/>",r.insertBefore(e,r.firstChild),D.getElementById(n)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),r.removeChild(e),r=e=null}(),function(){var e=D.createElement("div");e.appendChild(D.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),D.querySelectorAll&&function(){var e=h,t=D.createElement("div"),n="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(!t.querySelectorAll||t.querySelectorAll(".TEST").length!==0){h=function(t,r,i,s){r=r||D;if(!s&&!h.isXML(r)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(o&&(r.nodeType===1||r.nodeType===9)){if(o[1])return y(r.getElementsByTagName(t),i);if(o[2]&&d.find.CLASS&&r.getElementsByClassName)return y(r.getElementsByClassName(o[2]),i)}if(r.nodeType===9){if(t==="body"&&r.body)return y([r.body],i);if(o&&o[3]){var u=r.getElementById(o[3]);if(!u||!u.parentNode)return y([],i);if(u.id===o[3])return y([u],i)}try{return y(r.querySelectorAll(t),i)}catch(a){}}else if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){var f=r,l=r.getAttribute("id"),c=l||n,p=r.parentNode,v=/^\s*[+~]/.test(t);l?c=c.replace(/'/g,"\\$&"):r.setAttribute("id",c),v&&p&&(r=r.parentNode);try{if(!v||p)return y(r.querySelectorAll("[id='"+c+"'] "+t),i)}catch(m){}finally{l||f.removeAttribute("id")}}}return e(t,r,i,s)};for(var r in e)h[r]=e[r];t=null}}(),function(){var e=D.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(D.createElement("div"),"div"),r=!1;try{t.call(D.documentElement,"[test!='']:sizzle")}catch(i){r=!0}h.matchesSelector=function(e,i){i=i.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(r||!d.match.PSEUDO.test(i)&&!/!=/.test(i)){var s=t.call(e,i);if(s||!n||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(i,null,null,[e]).length>0}}}(),function(){var e=D.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!e.getElementsByClassName&&e.getElementsByClassName("e").length!==0){e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}}(),D.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:D.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var S=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=B.attr,h.selectors.attrMap={},B.find=h,B.expr=h.selectors,B.expr[":"]=B.expr.filters,B.unique=h.uniqueSort,B.text=h.getText,B.isXMLDoc=h.isXML,B.contains=h.contains}();var at=/Until$/,ft=/^(?:parents|prevUntil|prevAll)/,lt=/,/,ct=/^.[^:#\[\.,]*$/,ht=Array.prototype.slice,pt=B.expr.match.POS,dt={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({find:function(e){var t=this,n,r;if(typeof e!="string")return B(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(B.contains(t[n],this))return!0});var i=this.pushStack("","find",e),s,o,u;for(n=0,r=this.length;n<r;n++){s=i.length,B.find(e,this[n],i);if(n>0)for(o=s;o<i.length;o++)for(u=0;u<s;u++)if(i[u]===i[o]){i.splice(o--,1);break}}return i},has:function(e){var t=B(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(B.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(N(this,e,!1),"not",e)},filter:function(e){return this.pushStack(N(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?pt.test(e)?B(e,this.context).index(this[0])>=0:B.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,s=this[0];if(B.isArray(e)){var o=1;while(s&&s.ownerDocument&&s!==t){for(r=0;r<e.length;r++)B(s).is(e[r])&&n.push({selector:e[r],elem:s,level:o});s=s.parentNode,o++}return n}var u=pt.test(e)||typeof e!="string"?B(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){s=this[r];while(s){if(u?u.index(s)>-1:B.find.matchesSelector(s,e)){n.push(s);break}s=s.parentNode;if(!s||!s.ownerDocument||s===t||s.nodeType===11)break}}return n=n.length>1?B.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?B.inArray(this[0],B(e)):B.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?B(e,t):B.makeArray(e&&e.nodeType?[e]:e),r=B.merge(this.get(),n);return this.pushStack(C(n[0])||C(r[0])?r:B.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),B.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return B.dir(e,"parentNode")},parentsUntil:function(e,t,n){return B.dir(e,"parentNode",n)},next:function(e){return B.nth(e,2,"nextSibling")},prev:function(e){return B.nth(e,2,"previousSibling")},nextAll:function(e){return B.dir(e,"nextSibling")},prevAll:function(e){return B.dir(e,"previousSibling")},nextUntil:function(e,t,n){return B.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return B.dir(e,"previousSibling",n)},siblings:function(e){return B.sibling(e.parentNode.firstChild,e)},children:function(e){return B.sibling(e.firstChild)},contents:function(e){return B.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:B.makeArray(e.childNodes)}},function(e,t){B.fn[e]=function(n,r){var i=B.map(this,t,n);return at.test(e)||(r=n),r&&typeof r=="string"&&(i=B.filter(r,i)),i=this.length>1&&!dt[e]?B.unique(i):i,(this.length>1||lt.test(r))&&ft.test(e)&&(i=i.reverse()),this.pushStack(i,e,ht.call(arguments).join(","))}}),B.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?B.find.matchesSelector(t[0],e)?[t[0]]:[]:B.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!B(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var vt="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:\d+|null)"/g,gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style)/i,xt=/<(?:script|object|embed|option|style)/i,Tt=new RegExp("<(?:"+vt+")","i"),Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ct=/\/(java|ecma)script/i,kt=/^\s*<!(?:\[CDATA\[|\-\-)/,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},At=T(D);Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,B.support.htmlSerialize||(Lt._default=[1,"div<div>","</div>"]),B.fn.extend({text:function(e){return B.isFunction(e)?this.each(function(t){var n=B(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||D).createTextNode(e)):B.text(this)},wrapAll:function(e){if(B.isFunction(e))return this.each(function(t){B(this).wrapAll(e.call(this,t))});if(this[0]){var t=B(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return B.isFunction(e)?this.each(function(t){B(this).wrapInner(e.call(this,t))}):this.each(function(){var t=B(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=B.isFunction(e);return this.each(function(n){B(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){B.nodeName(this,"body")||B(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=B.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,B.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||B.filter(e,[r]).length)!t&&r.nodeType===1&&(B.cleanData(r.getElementsByTagName("*")),B.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&B.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return B.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(mt,""):null;if(typeof e=="string"&&!St.test(e)&&(B.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this
[n].nodeType===1&&(B.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else B.isFunction(e)?this.each(function(t){var n=B(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?B.isFunction(e)?this.each(function(t){var n=B(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=B(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;B(this).remove(),t?B(t).before(e):B(n).append(e)})):this.length?this.pushStack(B(B.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,s,o,u,a=e[0],f=[];if(!B.support.checkClone&&arguments.length===3&&typeof a=="string"&&Nt.test(a))return this.each(function(){B(this).domManip(e,n,r,!0)});if(B.isFunction(a))return this.each(function(i){var s=B(this);e[0]=a.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){u=a&&a.parentNode,B.support.parentNode&&u&&u.nodeType===11&&u.childNodes.length===this.length?i={fragment:u}:i=B.buildFragment(e,this,f),o=i.fragment,o.childNodes.length===1?s=o=o.firstChild:s=o.firstChild;if(s){n=n&&B.nodeName(s,"tr");for(var l=0,c=this.length,h=c-1;l<c;l++)r.call(n?x(this[l],s):this[l],i.cacheable||c>1&&l<h?B.clone(o,!0,!0):o)}f.length&&B.each(f,m)}return this}}),B.buildFragment=function(e,t,n){var r,i,s,o,u=e[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=D),e.length===1&&typeof u=="string"&&u.length<512&&o===D&&u.charAt(0)==="<"&&!xt.test(u)&&(B.support.checkClone||!Nt.test(u))&&(B.support.html5Clone||!Tt.test(u))&&(i=!0,s=B.fragments[u],s&&s!==1&&(r=s)),r||(r=o.createDocumentFragment(),B.clean(e,o,r,n)),i&&(B.fragments[u]=s?r:1),{fragment:r,cacheable:i}},B.fragments={},B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){B.fn[e]=function(n){var r=[],i=B(n),s=this.length===1&&this[0].parentNode;if(s&&s.nodeType===11&&s.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var o=0,u=i.length;o<u;o++){var a=(o>0?this.clone(!0):this).get();B(i[o])[t](a),r=r.concat(a)}return this.pushStack(r,e,i.selector)}}),B.extend({clone:function(e,t,n){var r,i,s,o=B.support.html5Clone||!Tt.test("<"+e.nodeName)?e.cloneNode(!0):g(e);if((!B.support.noCloneEvent||!B.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!B.isXMLDoc(e)){E(e,o),r=w(e),i=w(o);for(s=0;r[s];++s)i[s]&&E(r[s],i[s])}if(t){S(e,o);if(n){r=w(e),i=w(o);for(s=0;r[s];++s)S(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var i;t=t||D,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||D);var s=[],o;for(var u=0,a;(a=e[u])!=null;u++){typeof a=="number"&&(a+="");if(!a)continue;if(typeof a=="string")if(!Et.test(a))a=t.createTextNode(a);else{a=a.replace(yt,"<$1></$2>");var f=(bt.exec(a)||["",""])[1].toLowerCase(),l=Lt[f]||Lt._default,c=l[0],h=t.createElement("div");t===D?At.appendChild(h):T(t).appendChild(h),h.innerHTML=l[1]+a+l[2];while(c--)h=h.lastChild;if(!B.support.tbody){var p=wt.test(a),d=f==="table"&&!p?h.firstChild&&h.firstChild.childNodes:l[1]==="<table>"&&!p?h.childNodes:[];for(o=d.length-1;o>=0;--o)B.nodeName(d[o],"tbody")&&!d[o].childNodes.length&&d[o].parentNode.removeChild(d[o])}!B.support.leadingWhitespace&&gt.test(a)&&h.insertBefore(t.createTextNode(gt.exec(a)[0]),h.firstChild),a=h.childNodes}var v;if(!B.support.appendChecked)if(a[0]&&typeof (v=a.length)=="number")for(o=0;o<v;o++)y(a[o]);else y(a);a.nodeType?s.push(a):s=B.merge(s,a)}if(n){i=function(e){return!e.type||Ct.test(e.type)};for(u=0;s[u];u++)if(r&&B.nodeName(s[u],"script")&&(!s[u].type||s[u].type.toLowerCase()==="text/javascript"))r.push(s[u].parentNode?s[u].parentNode.removeChild(s[u]):s[u]);else{if(s[u].nodeType===1){var m=B.grep(s[u].getElementsByTagName("script"),i);s.splice.apply(s,[u+1,0].concat(m))}n.appendChild(s[u])}}return s},cleanData:function(e){var t,n,r=B.cache,i=B.event.special,s=B.support.deleteExpando;for(var o=0,u;(u=e[o])!=null;o++){if(u.nodeName&&B.noData[u.nodeName.toLowerCase()])continue;n=u[B.expando];if(n){t=r[n];if(t&&t.events){for(var a in t.events)i[a]?B.event.remove(u,a):B.removeEvent(u,a,t.handle);t.handle&&(t.handle.elem=null)}s?delete u[B.expando]:u.removeAttribute&&u.removeAttribute(B.expando),delete r[n]}}}});var Ot=/alpha\([^)]*\)/i,Mt=/opacity=([^)]*)/,_t=/([A-Z]|^ms)/g,Dt=/^-?\d+(?:px)?$/i,Pt=/^-?\d/,Ht=/^([\-+])=([\-+.\de]+)/,Bt={position:"absolute",visibility:"hidden",display:"block"},jt=["Left","Right"],Ft=["Top","Bottom"],It,qt,Rt;B.fn.css=function(e,n){return arguments.length===2&&n===t?this:B.access(this,e,n,!0,function(e,n,r){return r!==t?B.style(e,n,r):B.css(e,n)})},B.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=It(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":B.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!!e&&e.nodeType!==3&&e.nodeType!==8&&!!e.style){var s,o,u=B.camelCase(n),a=e.style,f=B.cssHooks[u];n=B.cssProps[u]||u;if(r===t)return f&&"get"in f&&(s=f.get(e,!1,i))!==t?s:a[n];o=typeof r,o==="string"&&(s=Ht.exec(r))&&(r=+(s[1]+1)*+s[2]+parseFloat(B.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!B.cssNumber[u]&&(r+="px");if(!f||!("set"in f)||(r=f.set(e,r))!==t)try{a[n]=r}catch(l){}}},css:function(e,n,r){var i,s;n=B.camelCase(n),s=B.cssHooks[n],n=B.cssProps[n]||n,n==="cssFloat"&&(n="float");if(s&&"get"in s&&(i=s.get(e,!0,r))!==t)return i;if(It)return It(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),B.curCSS=B.css,B.each(["height","width"],function(e,t){B.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?v(e,t,r):(B.swap(e,Bt,function(){i=v(e,t,r)}),i)},set:function(e,t){if(!Dt.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),B.support.opacity||(B.cssHooks.opacity={get:function(e,t){return Mt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=B.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&B.trim(s.replace(Ot,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Ot.test(s)?s.replace(Ot,i):s+" "+i}}),B(function(){B.support.reliableMarginRight||(B.cssHooks.marginRight={get:function(e,t){var n;return B.swap(e,{display:"inline-block"},function(){t?n=It(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),D.defaultView&&D.defaultView.getComputedStyle&&(qt=function(e,t){var n,r,i;return t=t.replace(_t,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!B.contains(e.ownerDocument.documentElement,e)&&(n=B.style(e,t))),n}),D.documentElement.currentStyle&&(Rt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!Dt.test(s)&&Pt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),It=qt||Rt,B.expr&&B.expr.filters&&(B.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!B.support.reliableHiddenOffsets&&(e.style&&e.style.display||B.css(e,"display"))==="none"},B.expr.filters.visible=function(e){return!B.expr.filters.hidden(e)});var Ut=/%20/g,zt=/\[\]$/,Wt=/\r?\n/g,Xt=/#.*$/,Vt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$t=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Jt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Kt=/^(?:GET|HEAD)$/,Qt=/^\/\//,Gt=/\?/,Yt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Zt=/^(?:select|textarea)/i,en=/\s+/,tn=/([?&])_=[^&]*/,nn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,rn=B.fn.load,sn={},on={},un,an,fn=["*/"]+["*"];try{un=H.href}catch(ln){un=D.createElement("a"),un.href="",un=un.href}an=nn.exec(un.toLowerCase())||[],B.fn.extend({load:function(e,n,r){if(typeof e!="string"&&rn)return rn.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var s=e.slice(i,e.length);e=e.slice(0,i)}var o="GET";n&&(B.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=B.param(n,B.ajaxSettings.traditional),o="POST"));var u=this;return B.ajax({url:e,type:o,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),u.html(s?B("<div>").append(n.replace(Yt,"")).find(s):n)),r&&u.each(r,[n,t,e])}}),this},serialize:function(){return B.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?B.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Zt.test(this.nodeName)||$t.test(this.type))}).map(function(e,t){var n=B(this).val();return n==null?null:B.isArray(n)?B.map(n,function(e,n){return{name:t.name,value:e.replace(Wt,"\r\n")}}):{name:t.name,value:n.replace(Wt,"\r\n")}}).get()}}),B.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){B.fn[t]=function(e){return this.on(t,e)}}),B.each(["get","post"],function(e,n){B[n]=function(e,r,i,s){return B.isFunction(r)&&(s=s||i,i=r,r=t),B.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),B.extend({getScript:function(e,n){return B.get(e,t,n,"script")},getJSON:function(e,t,n){return B.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?h(e,B.ajaxSettings):(t=e,e=B.ajaxSettings),h(e,t),e},ajaxSettings:{url:un,isLocal:Jt.test(an[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":fn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":B.parseJSON,"text xml":B.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:d(sn),ajaxTransport:d(on),ajax:function(e,n){function r(e,n,r,p){if(E!==2){E=2,b&&clearTimeout(b),y=t,m=p||"",T.readyState=e>0?4:0;var d,v,g,w=n,x=r?l(i,T,r):t,N,C;if(e>=200&&e<300||e===304){if(i.ifModified){if(N=T.getResponseHeader("Last-Modified"))B.lastModified[h]=N;if(C=T.getResponseHeader("Etag"))B.etag[h]=C}if(e===304)w="notmodified",d=!0;else try{v=f(i,x),w="success",d=!0}catch(k){w="parsererror",g=k}}else{g=w;if(!w||e)w="error",e<0&&(e=0)}T.status=e,T.statusText=""+(n||w),d?u.resolveWith(s,[v,w,T]):u.rejectWith(s,[T,w,g]),T.statusCode(c),c=t,S&&o.trigger("ajax"+(d?"Success":"Error"),[T,i,d?v:g]),a.fireWith(s,[T,w]),S&&(o.trigger("ajaxComplete",[T,i]),--B.active||B.event.trigger("ajaxStop"))}}typeof e=="object"&&(n=e,e=t),n=n||{};var i=B.ajaxSetup({},n),s=i.context||i,o=s!==i&&(s.nodeType||s instanceof B)?B(s):B.event,u=B.Deferred(),a=B.Callbacks("once memory"),c=i.statusCode||{},h,d={},v={},m,g,y,b,w,E=0,S,x,T={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=v[n]=v[n]||e,d[e]=t}return this},getAllResponseHeaders:function(){return E===2?m:null},getResponseHeader:function(e){var n;if(E===2){if(!g){g={};while(n=Vt.exec(m))g[n[1].toLowerCase()]=n[2]}n=g[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(i.mimeType=e),this},abort:function(e){return e=e||"abort",y&&y.abort(e),r(0,e),this}};u.promise(T),T.success=T.done,T.error=T.fail,T.complete=a.add,T.statusCode=function(e){if(e){var t;if(E<2)for(t in e)c[t]=[c[t],e[t]];else t=e[T.status],T.then(t,t)}return this},i.url=((e||i.url)+"").replace(Xt,"").replace(Qt,an[1]+"//"),i.dataTypes=B.trim(i.dataType||"*").toLowerCase().split(en),i.crossDomain==null&&(w=nn.exec(i.url.toLowerCase()),i.crossDomain=!(!w||w[1]==an[1]&&w[2]==an[2]&&(w[3]||(w[1]==="http:"?80:443))==(an[3]||(an[1]==="http:"?80:443)))),i.data&&i.processData&&typeof i.data!="string"&&(i.data=B.param(i.data,i.traditional)),p(sn,i,n,T);if(E===2)return!1;S=i.global,i.type=i.type.toUpperCase(),i.hasContent=!Kt.test(i.type),S&&B.active++===0&&B.event.trigger("ajaxStart");if(!i.hasContent){i.data&&(i.url+=(Gt.test(i.url)?"&":"?")+i.data,delete i.data),h=i.url;if(i.cache===!1){var N=B.now(),C=i.url.replace(tn,"$1_="+N);i.url=C+(C===i.url?(Gt.test(i.url)?"&":"?")+"_="+N:"")}}(i.data&&i.hasContent&&i.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",i.contentType),i.ifModified&&(h=h||i.url,B.lastModified[h]&&T.setRequestHeader("If-Modified-Since",B.lastModified[h]),B.etag[h]&&T.setRequestHeader("If-None-Match",B.etag[h])),T.setRequestHeader("Accept",i.dataTypes[0]&&i.accepts[i.dataTypes[0]]?i.accepts[i.dataTypes[0]]+(i.dataTypes[0]!=="*"?", "+fn+"; q=0.01":""):i.accepts["*"]);for(x in i.headers)T.setRequestHeader(x,i.headers[x]);if(!i.beforeSend||i.beforeSend.call(s,T,i)!==!1&&E!==2){for(x in{success:1,error:1,complete:1})T[x](i[x]);y=p(on,i,n,T);if(!y)r(-1,"No Transport");else{T.readyState=1,S&&o.trigger("ajaxSend",[T,i]),i.async&&i.timeout>0&&(b=setTimeout(function(){T.abort("timeout")},i.timeout));try{E=1,y.send(d,r)}catch(k){if(!(E<2))throw k;r(-1,k)}}return T}return T.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=B.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=B.ajaxSettings.traditional);if(B.isArray(e)||e.jquery&&!B.isPlainObject(e))B.each(e,function(){i(this.name,this.value)});else for(var s in e)c(s,e[s],n,i);return r.join("&").replace(Ut,"+")}}),B.extend({active:0,lastModified:{},etag:{}});var cn=B.now(),hn=/(\=)\?(&|$)|\?\?/i;B.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return B.expando+"_"+cn++}}),B.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(hn.test(t.url)||i&&hn.test(t.data))){var s,o=t.jsonpCallback=B.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u=e[o],a=t.url,f=t.data,l="$1"+o+"$2";return t.jsonp!==!1&&(a=a.replace(hn,l),t.url===a&&(i&&(f=f.replace(hn,l)),t.data===f&&(a+=(/\?/.test(a)?"&":"?")+t.jsonp+"="+o))),t.url=a,t.data=f,e[o]=function(e){s=[e]},r.always(function(){e[o]=u,s&&B.isFunction(u)&&e[o](s[0])}),t.converters["script json"]=function(){return s||B.error(o+" was not called"),s[0]},t.dataTypes[0]="json","script"}}),B.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return B.globalEval(e),e}}}),B.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),B.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=D.head||D.getElementsByTagName("head")[0]||D.documentElement;return{send:function(i,s){n=D.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var pn=e.ActiveXObject?function(){for(var e in vn)vn[e](0,1)}:!1,dn=0,vn;B.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&a()||u()}:a,function(e){B.extend(B.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(B.ajaxSettings.xhr()),B.support.ajax&&B.ajaxTransport(function(n){if(!n.crossDomain||B.support.cors){var r;return{send:function(i,s){var o=n.xhr(),u,a;n.username?o.open(n.type,n.url,n.async,n.username,n.password):o.open(n.type,n.url,n.async);if(n.xhrFields)for(a in n.xhrFields)o[a]=n.xhrFields[a];n.mimeType&&o.overrideMimeType&&o.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(a in i)o.setRequestHeader(a,i[a])}catch(f){}o.send(n.hasContent&&n.data||null),r=function(e,i){var a,f,l,c,h;try{if(r&&(i||o.readyState===4)){r=t,u&&(o.onreadystatechange=B.noop,pn&&delete vn[u]);if(i)o.readyState!==4&&o.abort();else{a=o.status,l=o.getAllResponseHeaders(),c={},h=o.responseXML,h&&h.documentElement&&(c.xml=h),c.text=o.responseText;try{f=o.statusText}catch(p){f=""}!a&&n.isLocal&&!n.crossDomain?a=c.text?200:404:a===1223&&(a=204)}}}catch(d){i||s(-1,d)}c&&s(a,f,c,l)},!n.async||o.readyState===4?r():(u=++dn,pn&&(vn||(vn={},B(e).unload(pn)),vn[u]=r),o.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var mn={},gn,yn,bn=/^(?:toggle|show|hide)$/,wn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,En,Sn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],xn;B.fn.extend({show:function(e,t,n){var s,o;if(e||e===0)return this.animate(i("show",3),e,t,n);for(var u=0,a=this.length;u<a;u++)s=this[u],s.style&&(o=s.style.display,!B._data(s,"olddisplay")&&o==="none"&&(o=s.style.display=""),o===""&&B.css(s,"display")==="none"&&B._data(s,"olddisplay",r(s.nodeName)));for(u=0;u<a;u++){s=this[u];if(s.style){o=s.style.display;if(o===""||o==="none")s.style.display=B._data(s,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(i("hide",3),e,t,n);var r,s,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(s=B.css(r,"display"),s!=="none"&&!B._data(r,"olddisplay")&&B._data(r,"olddisplay",s));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:B.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return B.isFunction(e)&&B.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:B(this).is(":hidden");B(this)[t?"show":"hide"]()}):this.animate(i("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,i){function s(){o.queue===!1&&B._mark(this);var t=B.extend({},o),n=this.nodeType===1,i=n&&B(this).is(":hidden"),s,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){s=B.camelCase(a),a!==s&&(e[s]=e[a],delete e[a]),u=e[s],B.isArray(u)?(t.animatedProperties[s]=u[1],u=e[s]=u[0]):t.animatedProperties[s]=t.specialEasing&&t.specialEasing[s]||t.easing||"swing";if(u==="hide"&&i||u==="show"&&!i)return t.complete.call(this);n&&(s==="height"||s==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],B.css(this,"display")==="inline"&&B.css(this,"float")==="none"&&(!B.support.inlineBlockNeedsLayout||r(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new B.fx(this,t,a),u=e[a],bn.test(u)?(d=B._data(this,"toggle"+a)||(u==="toggle"?i?"show":"hide":0),d?(B._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=wn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(B.cssNumber[a]?"":"px"),p!=="px"&&(B.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,B.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var o=B.speed(t,n,i);return B.isEmptyObject(e)?this.each(o.complete,[!1]):(e=B.extend({},e),o.queue===!1?this.each(s):this.queue(o.queue,s))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,n){var i=t[n];B.removeData(e,n,!0),i.stop(r)}var n,i=!1,s=B.timers,o=B._data(this);r||B._unmark(!0,this);if(e==null)for(n in o)o[n]&&o[n].stop&&n.indexOf(".run")===n.length-4&&t(this,o,n);else o[n=e+".run"]&&o[n].stop&&t(this,o,n);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(r?s[n](!0):s[n].saveState(),i=!0,s.splice(n,1));(!r||!i)&&B.dequeue(this,e)})}}),B.each({slideDown:i("show",1),slideUp:i("hide",1),slideToggle:i("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){B.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),B.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?B.extend({},e):{complete:n||!n&&t||B.isFunction(e)&&e,duration:e,easing:n&&t||t&&!B.isFunction(t)&&t};r.duration=B.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in B.fx.speeds?B.fx.speeds[r.duration]:B.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){B.isFunction(r.old)&&r.old.call(this),r.queue?B.dequeue(this,r.queue):e!==!1&&B._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),B.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(B.fx.step[this.prop]||B.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=B.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function i(e){return s.step(e)}var s=this,u=B.fx;this.startTime=xn||o(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(B.cssNumber[this.prop]?"":"px"),i.queue=this.options.queue,i.elem=this.elem,i.saveState=function(){s.options.hide&&B._data(s.elem,"fxshow"+s.prop)===t&&B._data(s.elem,"fxshow"+s.prop,s.start)},i()&&B.timers.push(i)&&!En&&(En=setInterval(u.tick,u.interval))},show:function(){var e=B._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||B.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),B(this.elem).show()},hide:function(){this.options.orig[this.prop]=B._data(this.elem,"fxshow"+this.prop)||B.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=xn||o(),s=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(s=!1);if(s){a.overflow!=null&&!B.support.shrinkWrapBlocks&&B.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&B(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)B.style(u,t,a.orig[t]),B.removeData(u,"fxshow"+t,!0),B.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=B.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},B.extend(B.fx,{tick:function(){var e,t=B.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||B.fx.stop()},interval:13,stop:function(){clearInterval(En),En=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){B.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),B.each(["width","height"],function(e,t){B.fx.step[t]=function(e){B.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),B.expr&&B.expr.filters&&(B.expr.filters.animated=function(e){return B.grep(B.timers,function(t){return e===t.elem}).length});var Tn=/^t(?:able|d|h)$/i,Nn=/^(?:body|html)$/i;"getBoundingClientRect"in D.documentElement?B.fn.offset=function(e){var t=this[0],r;if(e)return this.each(function(t){B.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return B.offset.bodyOffset(t);try{r=t.getBoundingClientRect()}catch(i){}var s=t.ownerDocument,o=s.documentElement;if(!r||!B.contains(o,t))return r?{top:r.top,left:r.left}:{top:0,left:0};var u=s.body,a=n(s),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||B.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||B.support.boxModel&&o.scrollLeft||u.scrollLeft,p=r.top+c-f,d=r.left+h-l;return{top:p,left:d}}:B.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){B.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return B.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,s=t.ownerDocument,o=s.documentElement,u=s.body,a=s.defaultView,f=a?a.getComputedStyle(t,null):t.currentStyle,l=t.offsetTop,c=t.offsetLeft;while((t=t.parentNode)&&t!==u&&t!==o){if(B.support.fixedPosition&&f.position==="fixed")break;n=a?a.getComputedStyle(t,null):t.currentStyle,l-=t.scrollTop,c-=t.scrollLeft,t===r&&(l+=t.offsetTop,c+=t.offsetLeft,B.support.doesNotAddBorder&&(!B.support.doesAddBorderForTableAndCells||!Tn.test(t.nodeName))&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),B.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),f=n}if(f.position==="relative"||f.position==="static")l+=u.offsetTop,c+=u.offsetLeft;return B.support.fixedPosition&&f.position==="fixed"&&(l+=Math.max(o.scrollTop,u.scrollTop),c+=Math.max(o.scrollLeft,u.scrollLeft)),{top:l,left:c}},B.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return B.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(B.css(e,"marginTop"))||0,n+=parseFloat(B.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=B.css(e,"position");r==="static"&&(e.style.position="relative");var i=B(e),s=i.offset(),o=B.css(e,"top"),u=B.css(e,"left"),a=(r==="absolute"||r==="fixed")&&B.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),B.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},B.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Nn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(B.css(e,"marginTop"))||0,n.left-=parseFloat(B.css(e,"marginLeft"))||0,r.top+=parseFloat(B.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(B.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||D.body;while(e&&!Nn.test(e.nodeName)&&B.css(e,"position")==="static")e=e.offsetParent;return e})}}),B.each(["Left","Top"],function(e,r){var i="scroll"+r;B.fn[i]=function(r){var s,o;return r===t?(s=this[0],s?(o=n(s),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:B.support.boxModel&&o.document.documentElement[i]||o.document.body[i]:s[i]):null):this.each(function(){o=n(this),o?o.scrollTo(e?B(o).scrollLeft():r,e?r:B(o).scrollTop()):this[i]=r})}}),B.each(["Height","Width"],function(e,n){var r=n.toLowerCase();B.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(B.css(e,r,"padding")):this[r]():null},B.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(B.css(t,r,e?"margin":"border")):this[r]():null},B.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(B.isFunction(e))return this.each(function(t){var n=B(this);n[r](e.call(this,t,n[r]()))});if(B.isWindow(i)){var s=i.document.documentElement["client"+n],o=i.document.body;return i.document.compatMode==="CSS1Compat"&&s||o&&o["client"+n]||s}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var u=B.css(i,r),a=parseFloat(u);return B.isNumeric(a)?a:u}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=B,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return B})})(window);/*!
 * jQuery UI 1.8.17
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */(function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),s&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))}),u)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which==1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.ui=e.ui||{};var n=/left|center|right/,r=/top|center|bottom/,i="center",s={},o=e.fn.position,u=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return o.apply(this,arguments);t=e.extend({},t);var u=e(t.of),a=u[0],f=(t.collision||"flip").split(" "),l=t.offset?t.offset.split(" "):[0,0],c,h,p;return a.nodeType===9?(c=u.width(),h=u.height(),p={top:0,left:0}):a.setTimeout?(c=u.width(),h=u.height(),p={top:u.scrollTop(),left:u.scrollLeft()}):a.preventDefault?(t.at="left top",c=h=0,p={top:t.of.pageY,left:t.of.pageX}):(c=u.outerWidth(),h=u.outerHeight(),p=u.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");e.length===1&&(e=n.test(e[0])?e.concat([i]):r.test(e[0])?[i].concat(e):[i,i]),e[0]=n.test(e[0])?e[0]:i,e[1]=r.test(e[1])?e[1]:i,t[this]=e}),f.length===1&&(f[1]=f[0]),l[0]=parseInt(l[0],10)||0,l.length===1&&(l[1]=l[0]),l[1]=parseInt(l[1],10)||0,t.at[0]==="right"?p.left+=c:t.at[0]===i&&(p.left+=c/2),t.at[1]==="bottom"?p.top+=h:t.at[1]===i&&(p.top+=h/2),p.left+=l[0],p.top+=l[1],this.each(function(){var n=e(this),r=n.outerWidth(),o=n.outerHeight(),u=parseInt(e.curCSS(this,"marginLeft",!0))||0,a=parseInt(e.curCSS(this,"marginTop",!0))||0,d=r+u+(parseInt(e.curCSS(this,"marginRight",!0))||0),v=o+a+(parseInt(e.curCSS(this,"marginBottom",!0))||0),m=e.extend({},p),g;t.my[0]==="right"?m.left-=r:t.my[0]===i&&(m.left-=r/2),t.my[1]==="bottom"?m.top-=o:t.my[1]===i&&(m.top-=o/2),s.fractions||(m.left=Math.round(m.left),m.top=Math.round(m.top)),g={left:m.left-u,top:m.top-a},e.each(["left","top"],function(n,i){e.ui.position[f[n]]&&e.ui.position[f[n]][i](m,{targetWidth:c,targetHeight:h,elemWidth:r,elemHeight:o,collisionPosition:g,collisionWidth:d,collisionHeight:v,offset:l,my:t.my,at:t.at})}),e.fn.bgiframe&&n.bgiframe(),n.offset(e.extend(m,{using:t.using}))})},e.ui.position={fit:{left:function(t,n){var r=e(window),i=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft();t.left=i>0?t.left-i:Math.max(t.left-n.collisionPosition.left,t.left)},top:function(t,n){var r=e(window),i=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop();t.top=i>0?t.top-i:Math.max(t.top-n.collisionPosition.top,t.top)}},flip:{left:function(t,n){if(n.at[0]===i)return;var r=e(window),s=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft(),o=n.my[0]==="left"?-n.elemWidth:n.my[0]==="right"?n.elemWidth:0,u=n.at[0]==="left"?n.targetWidth:-n.targetWidth,a=-2*n.offset[0];t.left+=n.collisionPosition.left<0?o+u+a:s>0?o+u+a:0},top:function(t,n){if(n.at[1]===i)return;var r=e(window),s=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop(),o=n.my[1]==="top"?-n.elemHeight:n.my[1]==="bottom"?n.elemHeight:0,u=n.at[1]==="top"?n.targetHeight:-n.targetHeight,a=-2*n.offset[1];t.top+=n.collisionPosition.top<0?o+u+a:s>0?o+u+a:0}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var r=e(t),i=r.offset(),s=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,u={top:n.top-i.top+s,left:n.left-i.left+o};"using"in n?n.using.call(t,u):r.css(u)},e.fn.offset=function(t){var n=this[0];return!n||!n.ownerDocument?null:t?this.each(function(){e.offset.setOffset(this,t)}):u.call(this)}),function(){var t=document.getElementsByTagName("body")[0],n=document.createElement("div"),r,i,o,u,a;r=document.createElement(t?"div":"body"),o={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},t&&jQuery.extend(o,{position:"absolute",left:"-1000px",top:"-1000px"});for(var f in o)r.style[f]=o[f];r.appendChild(n),i=t||document.documentElement,i.insertBefore(r,i.firstChild),n.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",u=e(n).offset(function(e,t){return t}).offset(),r.innerHTML="",i.removeChild(r),a=u.top+u.left+(t?2e3:0),s.fractions=a>21&&a<22}()}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t=this,n=this.element[0].ownerDocument,r;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(t.options.disabled||t.element.propAttr("readOnly"))return;r=!1;var i=e.ui.keyCode;switch(n.keyCode){case i.PAGE_UP:t._move("previousPage",n);break;case i.PAGE_DOWN:t._move("nextPage",n);break;case i.UP:t._move("previous",n),n.preventDefault();break;case i.DOWN:t._move("next",n),n.preventDefault();break;case i.ENTER:case i.NUMPAD_ENTER:t.menu.active&&(r=!0,n.preventDefault());case i.TAB:if(!t.menu.active)return;t.menu.select(n);break;case i.ESCAPE:t.element.val(t.term),t.close(n);break;default:clearTimeout(t.searching),t.searching=setTimeout(function(){t.term!=t.element.val()&&(t.selectedItem=null,t.search(null,n))},t.options.delay)}}).bind("keypress.autocomplete",function(e){r&&(r=!1,e.preventDefault())}).bind("focus.autocomplete",function(){if(t.options.disabled)return;t.selectedItem=null,t.previous=t.element.val()}).bind("blur.autocomplete",function(e){if(t.options.disabled)return;clearTimeout(t.searching),t.closing=setTimeout(function(){t.close(e),t._change(e)},150)}),this._initSource(),this.response=function(){return t._response.apply(t,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(n){var r=t.menu.element[0];e(n.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(n){n.target!==t.element[0]&&n.target!==r&&!e.ui.contains(r,n.target)&&t.close()})},1),setTimeout(function(){clearTimeout(t.closing)},13)}).menu({focus:function(e,n){var r=n.item.data("item.autocomplete");!1!==t._trigger("focus",e,{item:r})&&/^key/.test(e.originalEvent.type)&&t.element.val(r.value)},selected:function(e,r){var i=r.item.data("item.autocomplete"),s=t.previous;t.element[0]!==n.activeElement&&(t.element.focus(),t.previous=s,setTimeout(function(){t.previous=s,t.selectedItem=i},1)),!1!==t._trigger("select",e,{item:i})&&t.element.val(i.value),t.term=t.element.val(),t.close(e),t.selectedItem=i,window.location=t.options.url+i.value},blur:function(e,n){t.menu.element.is(":visible")&&t.element.val()!==t.term&&t.element.val(t.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),t.beforeunloadHandler=function(){t.element.removeAttr("autocomplete")},e(window).bind("beforeunload",t.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t==="source"&&this._initSource(),t==="appendTo"&&this.menu.element.appendTo(e(n||"body",this.element[0].ownerDocument)[0]),t==="disabled"&&n&&this.xhr&&this.xhr.abort()},_initSource:function(){var t=this,r,i;e.isArray(this.options.source)?(r=this.options.source,this.source=function(t,n){n(e.ui.autocomplete.filter(r,t.term))}):typeof this.options.source=="string"?(i=this.options.source,this.source=function(r,s){t.xhr&&t.xhr.abort(),t.xhr=e.ajax({url:i,data:r,dataType:"json",autocompleteRequest:++n,success:function(e,t){this.autocompleteRequest===n&&s(e)},error:function(){this.autocompleteRequest===n&&s([])}})}):this.source=this.options.source},search:function(e,t){e=e!=null?e:this.element.val(),this.term=this.element.val();if(e.length<this.options.minLength)return this.close(t);clearTimeout(this.closing);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this.response)},_response:function(e){console.log(e),e=this._normalize(e),this._suggest(e),this._trigger("open"),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(100);this._renderMenu(n,t),this.menu.deactivate(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position));var r=parseInt(e(this.element).css("padding-top").replace("px",""))+1,i=parseInt(e(this.element).css("padding-bottom").replace("px",""))+1,s=parseInt(e(this.element).css("padding-left").replace("px","")),o=parseInt(e(this.element).css("padding-right").replace("px","")),u=e(this.element).width()+14+o+s,a=e(this.element).height()+(r+i);n.css({left:"-=7px",top:"-="+(a+7)+"px",width:u+"px","padding-top":a+14+"px"}),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;n&&n.length?e.each(n,function(e,n){r._renderItem(t,n)}):r._renderEmpty(t)},_renderItem:function(t,n){return e("<li></li>").data("item.autocomplete",n).append(e('<a href="'+this.options.url+n.label+'"></a>').html(this._highlight(n.label,this.term)+'<span style="width:'+(n.per||50)+'%" class="bar"></span>')).appendTo(t)},_renderEmpty:function(t){return e("<li></li>").append("<p>Your search - <strong>"+this.term+"</strong> - did not match any countries</p>").appendTo(t)},_highlight:function(t,n){var r=new RegExp("("+e.ui.autocomplete.escapeRegex(n)+")","ig");return t.replace(r,"<strong>$1</strong>")},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)){this.element.val(this.term),this.menu.deactivate();return}this.menu[e](t)},widget:function(){return this.menu.element}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(n){if(!e(n.target).closest(".ui-menu-item a").length)return;n.preventDefault(),t.select(n)}),this.refresh()},refresh:function(){var t=this,n=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");n.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(n){t.activate(n,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){this.deactivate();if(this.hasScroll()){var n=t.offset().top-this.element.offset().top,r=this.element.scrollTop(),i=this.element.height();n<0?this.element.scrollTop(r+n):n>=i&&this.element.scrollTop(r+n-i+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,n){if(!this.active){this.activate(n,this.element.children(t));return}var r=this.active[e+"All"](".ui-menu-item").eq(0);r.length?this.activate(n,r):this.activate(n,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last()){this.activate(t,this.element.children(".ui-menu-item:first"));return}var n=this.active.offset().top,r=this.element.height(),i=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n-r+e(this).height();return t<10&&t>-10});i.length||(i=this.element.children(".ui-menu-item:last")),this.activate(t,i)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first()){this.activate(t,this.element.children(".ui-menu-item:last"));return}var n=this.active.offset().top,r=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n+r-e(this).height();return t<10&&t>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(t,result)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=r.values&&r.values.length||1,u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&r.values.length!==2&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:"")));for(var a=i.length;a<o;a+=1)u.push(s);this.handles=i.add(e(u.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){r.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(r){var i=!0,s=e(this).data("index.ui-slider-handle"),o,u,a,f;if(t.options.disabled)return;switch(r.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:i=!1;if(!t._keySliding){t._keySliding=!0,e(this).addClass("ui-state-active"),o=t._start(r,s);if(o===!1)return}}f=t.options.step,t.options.values&&t.options.values.length?u=a=t.values(s):u=a=t.value();switch(r.keyCode){case e.ui.keyCode.HOME:a=t._valueMin();break;case e.ui.keyCode.END:a=t._valueMax();break;case e.ui.keyCode.PAGE_UP:a=t._trimAlignValue(u+(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:a=t._trimAlignValue(u-(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(u===t._valueMax())return;a=t._trimAlignValue(u+f);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(u===t._valueMin())return;a=t._trimAlignValue(u-f)}return t._slide(r,s,a),i}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,r),t._change(n,r),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options,r,i,s,o,u,a,f,l,c;return n.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,u=this,this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),a=t)}),n.range===!0&&this.values(1)===n.min&&(a+=1,o=e(this.handles[a])),f=this._start(t,a),f===!1?!1:(this._mouseSliding=!0,u._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,n=this.options,r=this,i=this._animateOff?!1:n.animate,s,o={},u,a,f,l;this.options.values&&this.options.values.length?this.handles.each(function(t,a){s=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",e(this).stop(1,1)[i?"animate":"css"](o,n.animate),r.options.range===!0&&(r.orientation==="horizontal"?(t===0&&r.range.stop(1,1)[i?"animate":"css"]({left:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({width:s-u+"%"},{queue:!1,duration:n.animate})):(t===0&&r.range.stop(1,1)[i?"animate":"css"]({bottom:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({height:s-u+"%"},{queue:!1,duration:n.animate}))),u=s}):(a=this.value(),f=this._valueMin(),l=this._valueMax(),s=l!==f?(a-f)/(l-f)*100:0,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",this.handle.stop(1,1)[i?"animate":"css"](o,n.animate),t==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[i?"animate":"css"]({width:s+"%"},n.animate),t==="max"&&this.orientation==="horizontal"&&this.range[i?"animate":"css"]({width:100-s+"%"},{queue:!1,duration:n.animate
}),t==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[i?"animate":"css"]({height:s+"%"},n.animate),t==="max"&&this.orientation==="vertical"&&this.range[i?"animate":"css"]({height:100-s+"%"},{queue:!1,duration:n.animate}))}}),e.extend(e.ui.slider,{version:"1.8.17"})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=this,o=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==s)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==s&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var u=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(u=!0)});if(!u)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options,s=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,s._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=r.placeholder.offset();r.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=this,r=[],i=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],this.widgetName);f&&f!=this&&!f.options.disabled&&i.push([e.isFunction(f.options.items)?f.options.items.call(f.element):e(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=this,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],this.widgetName);f&&f!=this&&!f.options.disabled&&(i.push([e.isFunction(f.options.items)?f.options.items.call(f.element[0],t,{item:this.currentItem}):e(f.options.items,f.element),f]),this.containers.push(f))}}for(var o=i.length-1;o>=0;o--){var l=i[o][1],c=i[o][0];for(var a=0,h=c.length;a<h;a++){var p=e(c[a]);p.data(this.widgetName+"-item",l),n.push({item:p,instance:l,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,r=n.options;if(!r.placeholder||r.placeholder.constructor==String){var i=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(e,t){if(i&&!r.forcePlaceholderSize)return;t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=e(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.ui.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.ui.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){var s=1e4,o=null,u=this.positionAbs[this.containers[r].floating?"left":"top"];for(var a=this.items.length-1;a>=0;a--){if(!e.ui.contains(this.containers[r].element[0],this.items[a].item[0]))continue;var f=this.items[a][this.containers[r].floating?"left":"top"];Math.abs(f-u)<s&&(s=Math.abs(f-u),o=this.items[a])}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this,s=this.counter;window.setTimeout(function(){s==i.counter&&i.refreshPositions(!r)},0)},_clear:function(t,n){this.reverting=!1;var r=[],i=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)if(this._storedCSS[s]=="auto"||this._storedCSS[s]=="static")this._storedCSS[s]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var s=this.containers.length-1;s>=0;s--)e.ui.contains(this.containers[s].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[s])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[s])))}for(var s=this.containers.length-1;s>=0;s--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.17"})}(jQuery);/**
* Bootstrap.js by @fat & @mdo
* plugins: bootstrap-transition.js, bootstrap-modal.js
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){function t(){var t=this,r=setTimeout(function(){t.$element.off(e.support.transition.end),n.call(t)},500);this.$element.one(e.support.transition.end,function(){clearTimeout(r),n.call(t)})}function n(e){this.$element.hide().trigger("hidden"),r.call(this)}function r(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),s?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(i,this)):i.call(this)):t&&t()}function i(){this.$backdrop.remove(),this.$backdrop=null}function s(){var t=this;this.isShown&&this.options.keyboard?e(document).on("keyup.dismiss.modal",function(e){e.which==27&&t.hide()}):this.isShown||e(document).off("keyup.dismiss.modal")}var o=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this))};o.prototype={constructor:o,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open"),this.isShown=!0,s.call(this),r.call(this,function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in"),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(r){r&&r.preventDefault();var i=this;r=e.Event("hide"),this.$element.trigger(r);if(!this.isShown||r.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),s.call(this),this.$element.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?t.call(this):n.call(this)}},e.fn.modal=function(t){return this.each(function(){var n=e(this),r=n.data("modal"),i=e.extend({},e.fn.modal.defaults,n.data(),typeof t=="object"&&t);r||n.data("modal",r=new o(this,i)),typeof t=="string"?r[t]():i.show&&r.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=o,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({},i.data(),n.data());t.preventDefault(),i.modal(s)})})}(window.jQuery);(function(e){function n(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=!0,o=0,u=0;return t=e.event.fix(n),t.type="mousewheel",t.wheelDelta&&(i=t.wheelDelta/120),t.detail&&(i=-t.detail/3),u=i,n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS&&(u=0,o=-1*i),n.wheelDeltaY!==undefined&&(u=n.wheelDeltaY/120),n.wheelDeltaX!==undefined&&(o=-1*n.wheelDeltaX/120),r.unshift(t,i,o,u),e.event.handle.apply(this,r)}var t=["DOMMouseScroll","mousewheel"];e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],n,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})(jQuery);(function(e,t,n){e.fn.jScrollPane=function(t){function r(t,r){function $(r){var s,g,y,E,S,T,N=!1,C=!1;i=r;if(o===n)S=t.scrollTop(),T=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),u=t.innerWidth()+I,a=t.innerHeight(),t.width(u),o=e('<div class="jspPane" />').css("padding",F).append(t.children()),f=e('<div class="jspContainer" />').css({width:u+"px",height:a+"px"}).append(o).appendTo(t);else{t.css("width",""),N=i.stickToBottom&&mt(),C=i.stickToRight&&gt(),E=t.innerWidth()+I!=u||t.outerHeight()!=a,E&&(u=t.innerWidth()+I,a=t.innerHeight(),f.css({width:u+"px",height:a+"px"}));if(!E&&q==l&&o.outerHeight()==h){t.width(u);return}q=l,o.css("width",""),t.width(u),f.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}o.css("overflow","auto"),r.contentWidth?l=r.contentWidth:l=o[0].scrollWidth,h=o[0].scrollHeight,o.css("overflow",""),p=l/u,d=h/a,v=d>1,m=p>1,!m&&!v?(t.removeClass("jspScrollable"),o.css({top:0,width:f.width()-I}),bt(),St(),Tt(),rt(),Ct()):(t.addClass("jspScrollable"),s=i.maintainPosition&&(w||x),s&&(g=dt(),y=vt()),J(),Q(),Y(),s&&(ht(C?l-u:g,!1),ct(N?h-a:y,!1)),Et(),yt(),Lt(),i.enableKeyboardNavigation&&xt(),i.clickOnTrack&&nt(),Nt(),i.hijackInternalLinks&&kt()),i.autoReinitialise&&!j?j=setInterval(function(){$(i)},i.autoReinitialiseDelay):!i.autoReinitialise&&j&&clearInterval(j),S&&t.scrollTop(0)&&ct(S,!1),T&&t.scrollLeft(0)&&ht(T,!1),t.trigger("jsp-initialised",[m||v])}function J(){v&&(f.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),T=f.find(">.jspVerticalBar"),N=T.find(">.jspTrack"),g=N.find(">.jspDrag"),i.showArrows&&(A=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",et(0,-1)).bind("click.jsp",wt),O=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",et(0,1)).bind("click.jsp",wt),i.arrowScrollOnHover&&(A.bind("mouseover.jsp",et(0,-1,A)),O.bind("mouseover.jsp",et(0,1,O))),Z(N,i.verticalArrowPositions,A,O)),k=a,f.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){k-=e(this).outerHeight()}),g.hover(function(){g.addClass("jspHover")},function(){g.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",wt),g.addClass("jspActive");var n=t.pageY-g.position().top;return e("html").bind("mousemove.jsp",function(e){st(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",it),!1}),K())}function K(){N.height(k+"px"),w=0,C=i.verticalGutter+N.outerWidth(),o.width(u-C-I);try{T.position().left===0&&o.css("margin-left",C+"px")}catch(e){}}function Q(){m&&(f.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),M=f.find(">.jspHorizontalBar"),_=M.find(">.jspTrack"),E=_.find(">.jspDrag"),i.showArrows&&(H=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",et(-1,0)).bind("click.jsp",wt),B=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",et(1,0)).bind("click.jsp",wt),i.arrowScrollOnHover&&(H.bind("mouseover.jsp",et(-1,0,H)),B.bind("mouseover.jsp",et(1,0,B))),Z(_,i.horizontalArrowPositions,H,B)),E.hover(function(){E.addClass("jspHover")},function(){E.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",wt),E.addClass("jspActive");var n=t.pageX-E.position().left;return e("html").bind("mousemove.jsp",function(e){ut(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",it),!1}),D=f.innerWidth(),G())}function G(){f.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){D-=e(this).outerWidth()}),_.width(D+"px"),x=0}function Y(){if(m&&v){var t=_.outerHeight(),n=N.outerWidth();k-=t,e(M).find(">.jspCap:visible,>.jspArrow").each(function(){D+=e(this).outerWidth()}),D-=n,a-=n,u-=t,_.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),K(),G()}m&&o.width(f.outerWidth()-I+"px"),h=o.outerHeight(),d=h/a,m&&(P=Math.ceil(1/p*D),P>i.horizontalDragMaxWidth?P=i.horizontalDragMaxWidth:P<i.horizontalDragMinWidth&&(P=i.horizontalDragMinWidth),E.width(P+"px"),S=D-P,at(x)),v&&(L=Math.ceil(1/d*k),L>i.verticalDragMaxHeight?L=i.verticalDragMaxHeight:L<i.verticalDragMinHeight&&(L=i.verticalDragMinHeight),g.height(L+"px"),y=k-L,ot(w))}function Z(e,t,n,r){var i="before",s="after",o;t=="os"&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==i?s=t:t==s&&(i=t,o=n,n=r,r=o),e[i](n)[s](r)}function et(e,t,n){return function(){return tt(e,t,this,n),this.blur(),!1}}function tt(t,n,r,o){r=e(r).addClass("jspActive");var u,a,f=!0,l=function(){t!==0&&s.scrollByX(t*i.arrowButtonSpeed),n!==0&&s.scrollByY(n*i.arrowButtonSpeed),a=setTimeout(l,f?i.initialDelay:i.arrowRepeatFreq),f=!1};l(),u=o?"mouseout.jsp":"mouseup.jsp",o=o||e("html"),o.bind(u,function(){r.removeClass("jspActive"),a&&clearTimeout(a),a=null,o.unbind(u)})}function nt(){rt(),v&&N.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),o=r.offset(),u=t.pageY-o.top-w,f,l=!0,p=function(){var e=r.offset(),n=t.pageY-e.top-L/2,o=a*i.scrollPagePercent,c=y*o/(h-a);if(u<0)w-c>n?s.scrollByY(-o):st(n);else{if(!(u>0)){d();return}w+c<n?s.scrollByY(o):st(n)}f=setTimeout(p,l?i.initialDelay:i.trackClickRepeatFreq),l=!1},d=function(){f&&clearTimeout(f),f=null,e(document).unbind("mouseup.jsp",d)};return p(),e(document).bind("mouseup.jsp",d),!1}}),m&&_.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),o=r.offset(),a=t.pageX-o.left-x,f,h=!0,p=function(){var e=r.offset(),n=t.pageX-e.left-P/2,o=u*i.scrollPagePercent,c=S*o/(l-u);if(a<0)x-c>n?s.scrollByX(-o):ut(n);else{if(!(a>0)){d();return}x+c<n?s.scrollByX(o):ut(n)}f=setTimeout(p,h?i.initialDelay:i.trackClickRepeatFreq),h=!1},d=function(){f&&clearTimeout(f),f=null,e(document).unbind("mouseup.jsp",d)};return p(),e(document).bind("mouseup.jsp",d),!1}})}function rt(){_&&_.unbind("mousedown.jsp"),N&&N.unbind("mousedown.jsp")}function it(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),g&&g.removeClass("jspActive"),E&&E.removeClass("jspActive")}function st(e,t){if(!v)return;e<0?e=0:e>y&&(e=y),t===n&&(t=i.animateScroll),t?s.animate(g,"top",e,ot):(g.css("top",e),ot(e))}function ot(e){e===n&&(e=g.position().top),f.scrollTop(0),w=e;var r=w===0,i=w==y,s=e/y,u=-s*(h-a);if(R!=r||z!=i)R=r,z=i,t.trigger("jsp-arrow-change",[R,z,U,W]);ft(r,i),o.css("top",u),t.trigger("jsp-scroll-y",[-u,r,i]).trigger("scroll")}function ut(e,t){if(!m)return;e<0?e=0:e>S&&(e=S),t===n&&(t=i.animateScroll),t?s.animate(E,"left",e,at):(E.css("left",e),at(e))}function at(e){e===n&&(e=E.position().left),f.scrollTop(0),x=e;var r=x===0,i=x==S,s=e/S,a=-s*(l-u);if(U!=r||W!=i)U=r,W=i,t.trigger("jsp-arrow-change",[R,z,U,W]);lt(r,i),o.css("left",a),t.trigger("jsp-scroll-x",[-a,r,i]).trigger("scroll")}function ft(e,t){i.showArrows&&(A[e?"addClass":"removeClass"]("jspDisabled"),O[t?"addClass":"removeClass"]("jspDisabled"))}function lt(e,t){i.showArrows&&(H[e?"addClass":"removeClass"]("jspDisabled"),B[t?"addClass":"removeClass"]("jspDisabled"))}function ct(e,t){var n=e/(h-a);st(n*y,t)}function ht(e,t){var n=e/(l-u);ut(n*S,t)}function pt(t,n,r){var s,o,l,c=0,h=0,p,d,v,m,g,y;try{s=e(t)}catch(w){return}o=s.outerHeight(),l=s.outerWidth(),f.scrollTop(0),f.scrollLeft(0);while(!s.is(".jspPane")){c+=s.position().top,h+=s.position().left,s=s.offsetParent();if(/^body|html$/i.test(s[0].nodeName))return}p=vt(),v=p+a,c<p||n?g=c-i.verticalGutter:c+o>v&&(g=c-a+o+i.verticalGutter),g&&ct(g,r),d=dt(),m=d+u,h<d||n?y=h-i.horizontalGutter:h+l>m&&(y=h-u+l+i.horizontalGutter),y&&ht(y,r)}function dt(){return-o.position().left}function vt(){return-o.position().top}function mt(){var e=h-a;return e>20&&e-vt()<10}function gt(){var e=l-u;return e>20&&e-dt()<10}function yt(){f.unbind(V).bind(V,function(e,t,n,r){var o=x,u=w;return s.scrollBy(n*i.mouseWheelSpeed,-r*i.mouseWheelSpeed,!1),o==x&&u==w})}function bt(){f.unbind(V)}function wt(){return!1}function Et(){o.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){pt(e.target,!1)})}function St(){o.find(":input,a").unbind("focus.jsp")}function xt(){function l(){var e=x,t=w;switch(n){case 40:s.scrollByY(i.keyboardSpeed,!1);break;case 38:s.scrollByY(-i.keyboardSpeed,!1);break;case 34:case 32:s.scrollByY(a*i.scrollPagePercent,!1);break;case 33:s.scrollByY(-a*i.scrollPagePercent,!1);break;case 39:s.scrollByX(i.keyboardSpeed,!1);break;case 37:s.scrollByX(-i.keyboardSpeed,!1)}return r=e!=x||t!=w,r}var n,r,u=[];m&&u.push(M[0]),v&&u.push(T[0]),o.focus(function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target!==this&&(!u.length||!e(t.target).closest(u).length))return;var i=x,s=w;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=t.keyCode,l();break;case 35:ct(h-a),n=null;break;case 36:ct(0),n=null}return r=t.keyCode==n&&i!=x||s!=w,!r}).bind("keypress.jsp",function(e){return e.keyCode==n&&l(),!r}),i.hideFocus?(t.css("outline","none"),"hideFocus"in f[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in f[0]&&t.attr("hideFocus",!1))}function Tt(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function Nt(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash);try{t=e(r)}catch(i){return}t.length&&o.find(r)&&(f.scrollTop()===0?n=setInterval(function(){f.scrollTop()>0&&(pt(r,!0),e(document).scrollTop(f.position().top),clearInterval(n))},50):(pt(r,!0),e(document).scrollTop(f.position().top)))}}function Ct(){e("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function kt(){Ct(),e("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var e=this.href.split("#"),t;if(e.length>1){t=e[1];if(t.length>0&&o.find("#"+t).length>0)return pt("#"+t,!0),!1}})}function Lt(){var e,t,n,r,i,o=!1;f.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(s){var u=s.originalEvent.touches[0];e=dt(),t=vt(),n=u.pageX,r=u.pageY,i=!1,o=!0}).bind("touchmove.jsp",function(u){if(!o)return;var a=u.originalEvent.touches[0],f=x,l=w;return s.scrollTo(e+n-a.pageX,t+r-a.pageY),i=i||Math.abs(n-a.pageX)>5||Math.abs(r-a.pageY)>5,f==x&&l==w}).bind("touchend.jsp",function(e){o=!1}).bind("click.jsp-touchclick",function(e){if(i)return i=!1,!1})}function At(){var e=vt(),n=dt();t.removeClass("jspScrollable").unbind(".jsp"),t.replaceWith(X.append(o.children())),X.scrollTop(e),X.scrollLeft(n)}var i,s=this,o,u,a,f,l,h,p,d,v,m,g,y,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R=!0,U=!0,z=!1,W=!1,X=t.clone(!1,!1).empty(),V=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";F=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),I=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0),e.extend(s,{reinitialise:function(t){t=e.extend({},i,t),$(t)},scrollToElement:function(e,t,n){pt(e,t,n)},scrollTo:function(e,t,n){ht(e,n),ct(t,n)},scrollToX:function(e,t){ht(e,t)},scrollToY:function(e,t){ct(e,t)},scrollToPercentX:function(e,t){ht(e*(l-u),t)},scrollToPercentY:function(e,t){ct(e*(h-a),t)},scrollBy:function(e,t,n){s.scrollByX(e,n),s.scrollByY(t,n)},scrollByX:function(e,t){var n=dt()+Math[e<0?"floor":"ceil"](e),r=n/(l-u);ut(r*S,t)},scrollByY:function(e,t){var n=vt()+Math[e<0?"floor":"ceil"](e),r=n/(h-a);st(r*y,t)},positionDragX:function(e,t){ut(e,t)},positionDragY:function(e,t){st(e,t)},animate:function(e,t,n,r){var s={};s[t]=n,e.animate(s,{duration:i.animateDuration,easing:i.animateEase,queue:!1,step:r})},getContentPositionX:function(){return dt()},getContentPositionY:function(){return vt()},getContentWidth:function(){return l},getContentHeight:function(){return h},getPercentScrolledX:function(){return dt()/(l-u)},getPercentScrolledY:function(){return vt()/(h-a)},getIsScrollableH:function(){return m},getIsScrollableV:function(){return v},getContentPane:function(){return o},scrollToBottom:function(e){st(y,e)},hijackInternalLinks:function(){kt()},destroy:function(){At()}}),$(r)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var n=e(this),i=n.data("jsp");i?i.reinitialise(t):(i=new r(n,t),n.data("jsp",i))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}})(jQuery,this);//
(function(e,t,n){e.fn.jScrollPane=function(t){function r(t,r){function X(r){var s,m,g,b,w,S,x=!1,T=!1;i=r;if(o===n)w=t.scrollTop(),S=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),u=t.innerWidth()+j,a=t.innerHeight(),t.width(u),o=e('<div class="jspPane" />').css("padding",B).append(t.children()),f=e('<div class="jspContainer" />').css({width:u+"px",height:a+"px"}).append(o).appendTo(t);else{t.css("width",""),x=i.stickToBottom&&vt(),T=i.stickToRight&&mt(),b=t.innerWidth()+j!=u||t.outerHeight()!=a,b&&(u=t.innerWidth()+j,a=t.innerHeight(),f.css({width:u+"px",height:a+"px"}));if(!b&&F==l&&o.outerHeight()==c){t.width(u);return}F=l,o.css("width",""),t.width(u),f.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}o.css("overflow","auto"),r.contentWidth?l=r.contentWidth:l=o[0].scrollWidth,c=o[0].scrollHeight,o.css("overflow",""),h=l/u,p=c/a,d=p>1,v=h>1,!v&&!d?(t.removeClass("jspScrollable"),o.css({top:0,width:f.width()-j}),yt(),Et(),xt(),nt(),Nt()):(t.addClass("jspScrollable"),s=i.maintainPosition&&(y||E),s&&(m=pt(),g=dt()),V(),K(),G(),s&&(ct(T?l-u:m,!1),lt(x?c-a:g,!1)),wt(),gt(),kt(),i.enableKeyboardNavigation&&St(),i.clickOnTrack&&tt(),Tt(),i.hijackInternalLinks&&Ct()),i.autoReinitialise&&!H?H=setInterval(function(){X(i)},i.autoReinitialiseDelay):!i.autoReinitialise&&H&&clearInterval(H),w&&t.scrollTop(0)&&lt(w,!1),S&&t.scrollLeft(0)&&ct(S,!1),t.trigger("jsp-initialised",[v||d])}function V(){d&&(f.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),S=f.find(">.jspVerticalBar"),x=S.find(">.jspTrack"),m=x.find(">.jspDrag"),i.showArrows&&(k=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",Z(0,-1)).bind("click.jsp",bt),L=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",Z(0,1)).bind("click.jsp",bt),i.arrowScrollOnHover&&(k.bind("mouseover.jsp",Z(0,-1,k)),L.bind("mouseover.jsp",Z(0,1,L))),Y(x,i.verticalArrowPositions,k,L)),N=a,f.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){N-=e(this).outerHeight()}),m.hover(function(){m.addClass("jspHover")},function(){m.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",bt),m.addClass("jspActive");var n=t.pageY-m.position().top;return e("html").bind("mousemove.jsp",function(e){it(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",rt),!1}),J())}function J(){x.height(N+"px"),y=0,T=i.verticalGutter+x.outerWidth(),o.width(u-T-j);try{S.position().left===0&&o.css("margin-left",T+"px")}catch(e){}}function K(){v&&(f.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),A=f.find(">.jspHorizontalBar"),O=A.find(">.jspTrack"),b=O.find(">.jspDrag"),i.showArrows&&(D=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",Z(-1,0)).bind("click.jsp",bt),P=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",Z(1,0)).bind("click.jsp",bt),i.arrowScrollOnHover&&(D.bind("mouseover.jsp",Z(-1,0,D)),P.bind("mouseover.jsp",Z(1,0,P))),Y(O,i.horizontalArrowPositions,D,P)),b.hover(function(){b.addClass("jspHover")},function(){b.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",bt),b.addClass("jspActive");var n=t.pageX-b.position().left;return e("html").bind("mousemove.jsp",function(e){ot(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",rt),!1}),M=f.innerWidth(),Q())}function Q(){f.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){M-=e(this).outerWidth()}),O.width(M+"px"),E=0}function G(){if(v&&d){var t=O.outerHeight(),n=x.outerWidth();N-=t,e(A).find(">.jspCap:visible,>.jspArrow").each(function(){M+=e(this).outerWidth()}),M-=n,a-=n,u-=t,O.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),J(),Q()}v&&o.width(f.outerWidth()-j+"px"),c=o.outerHeight(),p=c/a,v&&(_=Math.ceil(1/h*M),_>i.horizontalDragMaxWidth?_=i.horizontalDragMaxWidth:_<i.horizontalDragMinWidth&&(_=i.horizontalDragMinWidth),b.width(_+"px"),w=M-_,ut(E)),d&&(C=Math.ceil(1/p*N),C>i.verticalDragMaxHeight?C=i.verticalDragMaxHeight:C<i.verticalDragMinHeight&&(C=i.verticalDragMinHeight),m.height(C+"px"),g=N-C,st(y))}function Y(e,t,n,r){var i="before",s="after",o;t=="os"&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==i?s=t:t==s&&(i=t,o=n,n=r,r=o),e[i](n)[s](r)}function Z(e,t,n){return function(){return et(e,t,this,n),this.blur(),!1}}function et(t,n,r,o){r=e(r).addClass("jspActive");var u,a,f=!0,l=function(){t!==0&&s.scrollByX(t*i.arrowButtonSpeed),n!==0&&s.scrollByY(n*i.arrowButtonSpeed),a=setTimeout(l,f?i.initialDelay:i.arrowRepeatFreq),f=!1};l(),u=o?"mouseout.jsp":"mouseup.jsp",o=o||e("html"),o.bind(u,function(){r.removeClass("jspActive"),a&&clearTimeout(a),a=null,o.unbind(u)})}function tt(){nt(),d&&x.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),o=r.offset(),u=t.pageY-o.top-y,f,l=!0,h=function(){var e=r.offset(),n=t.pageY-e.top-C/2,o=a*i.scrollPagePercent,d=g*o/(c-a);if(u<0)y-d>n?s.scrollByY(-o):it(n);else{if(!(u>0)){p();return}y+d<n?s.scrollByY(o):it(n)}f=setTimeout(h,l?i.initialDelay:i.trackClickRepeatFreq),l=!1},p=function(){f&&clearTimeout(f),f=null,e(document).unbind("mouseup.jsp",p)};return h(),e(document).bind("mouseup.jsp",p),!1}}),v&&O.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),o=r.offset(),a=t.pageX-o.left-E,f,c=!0,h=function(){var e=r.offset(),n=t.pageX-e.left-_/2,o=u*i.scrollPagePercent,d=w*o/(l-u);if(a<0)E-d>n?s.scrollByX(-o):ot(n);else{if(!(a>0)){p();return}E+d<n?s.scrollByX(o):ot(n)}f=setTimeout(h,c?i.initialDelay:i.trackClickRepeatFreq),c=!1},p=function(){f&&clearTimeout(f),f=null,e(document).unbind("mouseup.jsp",p)};return h(),e(document).bind("mouseup.jsp",p),!1}})}function nt(){O&&O.unbind("mousedown.jsp"),x&&x.unbind("mousedown.jsp")}function rt(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),m&&m.removeClass("jspActive"),b&&b.removeClass("jspActive")}function it(e,t){if(!d)return;e<0?e=0:e>g&&(e=g),t===n&&(t=i.animateScroll),t?s.animate(m,"top",e,st):(m.css("top",e),st(e))}function st(e){e===n&&(e=m.position().top),f.scrollTop(0),y=e;var r=y===0,i=y==g,s=e/g,u=-s*(c-a);if(I!=r||R!=i)I=r,R=i,t.trigger("jsp-arrow-change",[I,R,q,U]);at(r,i),o.css("top",u),t.trigger("jsp-scroll-y",[-u,r,i]).trigger("scroll")}function ot(e,t){if(!v)return;e<0?e=0:e>w&&(e=w),t===n&&(t=i.animateScroll),t?s.animate(b,"left",e,ut):(b.css("left",e),ut(e))}function ut(e){e===n&&(e=b.position().left),f.scrollTop(0),E=e;var r=E===0,i=E==w,s=e/w,a=-s*(l-u);if(q!=r||U!=i)q=r,U=i,t.trigger("jsp-arrow-change",[I,R,q,U]);ft(r,i),o.css("left",a),t.trigger("jsp-scroll-x",[-a,r,i]).trigger("scroll")}function at(e,t){i.showArrows&&(k[e?"addClass":"removeClass"]("jspDisabled"),L[t?"addClass":"removeClass"]("jspDisabled"))}function ft(e,t){i.showArrows&&(D[e?"addClass":"removeClass"]("jspDisabled"),P[t?"addClass":"removeClass"]("jspDisabled"))}function lt(e,t){var n=e/(c-a);it(n*g,t)}function ct(e,t){var n=e/(l-u);ot(n*w,t)}function ht(t,n,r){var s,o,l,c=0,h=0,p,d,v,m,g,y;try{s=e(t)}catch(b){return}o=s.outerHeight(),l=s.outerWidth(),f.scrollTop(0),f.scrollLeft(0);while(!s.is(".jspPane")){c+=s.position().top,h+=s.position().left,s=s.offsetParent();if(/^body|html$/i.test(s[0].nodeName))return}p=dt(),v=p+a,c<p||n?g=c-i.verticalGutter:c+o>v&&(g=c-a+o+i.verticalGutter),g&&lt(g,r),d=pt(),m=d+u,h<d||n?y=h-i.horizontalGutter:h+l>m&&(y=h-u+l+i.horizontalGutter),y&&ct(y,r)}function pt(){return-o.position().left}function dt(){return-o.position().top}function vt(){var e=c-a;return e>20&&e-dt()<10}function mt(){var e=l-u;return e>20&&e-pt()<10}function gt(){f.unbind(W).bind(W,function(e,t,n,r){var o=E,u=y;return s.scrollBy(n*i.mouseWheelSpeed,-r*i.mouseWheelSpeed,!1),o==E&&u==y})}function yt(){f.unbind(W)}function bt(){return!1}function wt(){o.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){ht(e.target,!1)})}function Et(){o.find(":input,a").unbind("focus.jsp")}function St(){function l(){var e=E,t=y;switch(n){case 40:s.scrollByY(i.keyboardSpeed,!1);break;case 38:s.scrollByY(-i.keyboardSpeed,!1);break;case 34:case 32:s.scrollByY(a*i.scrollPagePercent,!1);break;case 33:s.scrollByY(-a*i.scrollPagePercent,!1);break;case 39:s.scrollByX(i.keyboardSpeed,!1);break;case 37:s.scrollByX(-i.keyboardSpeed,!1)}return r=e!=E||t!=y,r}var n,r,u=[];v&&u.push(A[0]),d&&u.push(S[0]),o.focus(function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target!==this&&(!u.length||!e(t.target).closest(u).length))return;var i=E,s=y;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=t.keyCode,l();break;case 35:lt(c-a),n=null;break;case 36:lt(0),n=null}return r=t.keyCode==n&&i!=E||s!=y,!r}).bind("keypress.jsp",function(e){return e.keyCode==n&&l(),!r}),i.hideFocus?(t.css("outline","none"),"hideFocus"in f[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in f[0]&&t.attr("hideFocus",!1))}function xt(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function Tt(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash);try{t=e(r)}catch(i){return}t.length&&o.find(r)&&(f.scrollTop()===0?n=setInterval(function(){f.scrollTop()>0&&(ht(r,!0),e(document).scrollTop(f.position().top),clearInterval(n))},50):(ht(r,!0),e(document).scrollTop(f.position().top)))}}function Nt(){e("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function Ct(){Nt(),e("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var e=this.href.split("#"),t;if(e.length>1){t=e[1];if(t.length>0&&o.find("#"+t).length>0)return ht("#"+t,!0),!1}})}function kt(){var e,t,n,r,i,o=!1;f.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(s){var u=s.originalEvent.touches[0];e=pt(),t=dt(),n=u.pageX,r=u.pageY,i=!1,o=!0}).bind("touchmove.jsp",function(u){if(!o)return;var a=u.originalEvent.touches[0],f=E,l=y;return s.scrollTo(e+n-a.pageX,t+r-a.pageY),i=i||Math.abs(n-a.pageX)>5||Math.abs(r-a.pageY)>5,f==E&&l==y}).bind("touchend.jsp",function(e){o=!1}).bind("click.jsp-touchclick",function(e){if(i)return i=!1,!1})}function Lt(){var e=dt(),n=pt();t.removeClass("jspScrollable").unbind(".jsp"),t.replaceWith(z.append(o.children())),z.scrollTop(e),z.scrollLeft(n)}var i,s=this,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I=!0,q=!0,R=!1,U=!1,z=t.clone(!1,!1).empty(),W=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";B=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),j=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0),e.extend(s,{reinitialise:function(t){t=e.extend({},i,t),X(t)},scrollToElement:function(e,t,n){ht(e,t,n)},scrollTo:function(e,t,n){ct(e,n),lt(t,n)},scrollToX:function(e,t){ct(e,t)},scrollToY:function(e,t){lt(e,t)},scrollToPercentX:function(e,t){ct(e*(l-u),t)},scrollToPercentY:function(e,t){lt(e*(c-a),t)},scrollBy:function(e,t,n){s.scrollByX(e,n),s.scrollByY(t,n)},scrollByX:function(e,t){var n=pt()+Math[e<0?"floor":"ceil"](e),r=n/(l-u);ot(r*w,t)},scrollByY:function(e,t){var n=dt()+Math[e<0?"floor":"ceil"](e),r=n/(c-a);it(r*g,t)},positionDragX:function(e,t){ot(e,t)},positionDragY:function(e,t){it(e,t)},animate:function(e,t,n,r){var s={};s[t]=n,e.animate(s,{duration:i.animateDuration,easing:i.animateEase,queue:!1,step:r})},getContentPositionX:function(){return pt()},getContentPositionY:function(){return dt()},getContentWidth:function(){return l},getContentHeight:function(){return c},getPercentScrolledX:function(){return pt()/(l-u)},getPercentScrolledY:function(){return dt()/(c-a)},getIsScrollableH:function(){return v},getIsScrollableV:function(){return d},getContentPane:function(){return o},scrollToBottom:function(e){it(g,e)},hijackInternalLinks:function(){Ct()},destroy:function(){Lt()}}),X(r)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var n=e(this),i=n.data("jsp");i?i.reinitialise(t):(i=new r(n,t),n.data("jsp",i))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}})(jQuery,this);(function(){function e(t,n,r){if(t===n)return t!==0||1/t==1/n;if(t==null||n==null)return t===n;t._chain&&(t=t._wrapped),n._chain&&(n=n._wrapped);if(t.isEqual&&E.isFunction(t.isEqual))return t.isEqual(n);if(n.isEqual&&E.isFunction(n.isEqual))return n.isEqual(t);var i=a.call(t);if(i!=a.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:t==0?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if(typeof t!="object"||typeof n!="object")return!1;for(var s=r.length;s--;)if(r[s]==t)return!0;r.push(t);var s=0,o=!0;if(i=="[object Array]"){if(s=t.length,o=s==n.length)for(;s--;)if(!(o=s in t==s in n&&e(t[s],n[s],r)))break}else{if("constructor"in t!="constructor"in n||t.constructor!=n.constructor)return!1;for(var u in t)if(E.has(t,u)&&(s++,!(o=E.has(n,u)&&e(t[u],n[u],r))))break;if(o){for(u in n)if(E.has(n,u)&&!(s--))break;o=!s}}return r.pop(),o}var t=this,n=t._,r={},i=Array.prototype,s=Object.prototype,o=i.slice,u=i.unshift,a=s.toString,f=s.hasOwnProperty,l=i.forEach,c=i.map,h=i.reduce,p=i.reduceRight,d=i.filter,v=i.every,m=i.some,g=i.indexOf,y=i.lastIndexOf,s=Array.isArray,b=Object.keys,w=Function.prototype.bind,E=function(e){return new L(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=E),exports._=E):t._=E,E.VERSION="1.3.1";var S=E.each=E.forEach=function(e,t,n){if(e!=null)if(l&&e.forEach===l)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(n,e[i],i,e)===r)break}else for(i in e)if(E.has(e,i)&&t.call(n,e[i],i,e)===r)break};E.map=E.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(S(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},E.reduce=E.foldl=E.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=E.bind(t,r)),i?e.reduce(t,n):e.reduce(t);S(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},E.reduceRight=E.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=E.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=E.toArray(e).reverse();return r&&!i&&(t=E.bind(t,r)),i?E.reduce(s,t,n,r):E.reduce(s,t)},E.find=E.detect=function(e,t,n){var r;return x(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},E.filter=E.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(S(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},E.reject=function(e,t,n){var r=[];return e==null?r:(S(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},E.every=E.all=function(e,t,n){var i=!0;return e==null?i:v&&e.every===v?e.every(t,n):(S(e,function(e,s,o){if(!(i=i&&t.call(n,e,s,o)))return r}),i)};var x=E.some=E.any=function(e,t,n){t||(t=E.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,n):(S(e,function(e,s,o){if(i||(i=t.call(n,e,s,o)))return r}),!!i)};E.include=E.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:n=x(e,function(e){return e===t})},E.invoke=function(e,t){var n=o.call(arguments,2);return E.map(e,function(e){return(E.isFunction(t)?t||e:e[t]).apply(e,n)})},E.pluck=function(e,t){return E.map(e,function(e){return e[t]})},E.max=function(e,t,n){if(!t&&E.isArray(e))return Math.max.apply(Math,e);if(!t&&E.isEmpty(e))return-Infinity;var r={computed:-Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i>=r.computed&&(r={value:e,computed:i})}),r.value},E.min=function(e,t,n){if(!t&&E.isArray(e))return Math.min.apply(Math,e);if(!t&&E.isEmpty(e))return Infinity;var r={computed:Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i<r.computed&&(r={value:e,computed:i})}),r.value},E.shuffle=function(e){var t=[],n;return S(e,function(e,r){r==0?t[0]=e:(n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e)}),t},E.sortBy=function(e,t,n){return E.pluck(E.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")},E.groupBy=function(e,t){var n={},r=E.isFunction(t)?t:function(e){return e[t]};return S(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},E.sortedIndex=function(e,t,n){n||(n=E.identity);for(var r=0,i=e.length;r<i;){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},E.toArray=function(e){return e?e.toArray?e.toArray():E.isArray(e)?o.call(e):E.isArguments(e)?o.call(e):E.values(e):[]},E.size=function(e){return E.toArray(e).length},E.first=E.head=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},E.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},E.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},E.rest=E.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},E.compact=function(e){return E.filter(e,function(e){return!!e})},E.flatten=function(e,t){return E.reduce(e,function(e,n){return E.isArray(n)?e.concat(t?n:E.flatten(n)):(e[e.length]=n,e)},[])},E.without=function(e){return E.difference(e,o.call(arguments,1))},E.uniq=E.unique=function(e,t,n){var n=n?E.map(e,n):e,r=[];return E.reduce(n,function(n,i,s){if(0==s||(t===!0?E.last(n)!=i:!E.include(n,i)))n[n.length]=i,r[r.length]=e[s];return n},[]),r},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=E.intersect=function(e){var t=o.call(arguments,1);return E.filter(E.uniq(e),function(e){return E.every(t,function(t){return E.indexOf(t,e)>=0})})},E.difference=function(e){var t=E.flatten(o.call(arguments,1));return E.filter(e,function(e){return!E.include(t,e)})},E.zip=function(){for(var e=o.call(arguments),t=E.max(E.pluck(e,"length")),n=Array(t),r=0;r<t;r++)n[r]=E.pluck(e,""+r);return n},E.indexOf=function(e,t,n){if(e==null)return-1;var r;if(n)return n=E.sortedIndex(e,t),e[n]===t?n:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(n in e&&e[n]===t)return n;return-1},E.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);for(var n=e.length;n--;)if(n in e&&e[n]===t)return n;return-1},E.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0);for(var n=arguments[2]||1,r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);i<r;)s[i++]=e,e+=n;return s};var T=function(){};E.bind=function(e,t){var n,r;if(e.bind===w&&w)return w.apply(e,o.call(arguments,1));if(!E.isFunction(e))throw new TypeError;return r=o.call(arguments,2),n=function(){if(this instanceof n){T.prototype=e.prototype;var i=new T,s=e.apply(i,r.concat(o.call(arguments)));return Object(s)===s?s:i}return e.apply(t,r.concat(o.call(arguments)))}},E.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=E.functions(e)),S(t,function(t){e[t]=E.bind(e[t],e)}),e},E.memoize=function(e,t){var n={};return t||(t=E.identity),function(){var r=t.apply(this,arguments);return E.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},E.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(o.call(arguments,1)))},E.throttle=function(e,t){var n,r,i,s,o,u=E.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var a;i||(i=setTimeout(function(){i=null,o&&e.apply(n,r),u()},t)),s?o=!0:e.apply(n,r),u(),s=!0}},E.debounce=function(e,t){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(r,i)},t)}},E.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},E.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},E.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},E.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},E.keys=b||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[],n;for(n in e)E.has(e,n)&&(t[t.length]=n);return t},E.values=function(e){return E.map(e,E.identity)},E.functions=E.methods=function(e){var t=[],n;for(n in e)E.isFunction(e[n])&&t.push(n);return t.sort()},E.extend=function(e){return S(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},E.defaults=function(e){return S(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e},E.isEqual=function(t,n){return e(t,n,[])},E.isEmpty=function(e){if(E.isArray(e)||E.isString(e))return e.length===0;for(var t in e)if(E.has(e,t))return!1;return!0},E.isElement=function(e){return!!e&&e.nodeType==1},E.isArray=s||function(e){return a.call(e)=="[object Array]"},E.isObject=function(e){return e===Object(e)},E.isArguments=function(e){return a.call(e)=="[object Arguments]"},E.isArguments(arguments)||(E.isArguments=function(e){return!!e&&!!E.has(e,"callee")}),E.isFunction=function(e){return a.call(e)=="[object Function]"},E.isString=function(e){return a.call(e)=="[object String]"},E.isNumber=function(e){return a.call(e)=="[object Number]"},E.isNaN=function(e){return e!==e},E.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},E.isDate=function(e){return a.call(e)=="[object Date]"},E.isRegExp=function(e){return a.call(e)=="[object RegExp]"},E.isNull=function(e){return e===null},E.isUndefined=function(e){return e===void 0},E.has=function(e,t){return f.call(e,t)},E.noConflict=function(){return t._=n,this},E.identity=function(e){return e},E.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},E.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},E.mixin=function(e){S(E.functions(e),function(t){O(t,E[t]=e[t])})};var N=0;E.uniqueId=function(e){var t=N++;return e?e+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,k=function(e){return e.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};E.template=function(e,t){var n=E.templateSettings,n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.escape||C,function(e,t){return"',_.escape("+k(t)+"),'"}).replace(n.interpolate||C,function(e,t){return"',"+k(t)+",'"}).replace(n.evaluate||C,function(e,t){return"');"+k(t).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",r=new Function("obj","_",n);return t?r(t,E):function(e){return r.call(this,e,E)}},E.chain=function(e){return E(e).chain()};var L=function(e){this._wrapped=e};E.prototype=L.prototype;var A=function(e,t){return t?E(e).chain():e},O=function(e,t){L.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),A(t.apply(E,e),this._chain)}};E.mixin(E),S("pop,push,reverse,shift,sort,splice,unshift".split(","),function(e){var t=i[e];L.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],A(n,this._chain)}}),S(["concat","join","slice"],function(e){var t=i[e];L.prototype[e]=function(){return A(t.apply(this._wrapped,arguments),this._chain)}}),L.prototype.chain=function(){return this._chain=!0,this},L.prototype.value=function(){return this._wrapped}}).call(this);/* Simple JavaScript Inheritance
 * By John Resig http://ejohn.org/
 * MIT Licensed.
 */// Inspired by base2 and Prototype
(function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=Class.implement=function(n){function o(){!e&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;e=!0;var i=new this;e=!1;for(var s in n)i[s]=typeof n[s]=="function"&&typeof r[s]=="function"&&t.test(n[s])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(s,n[s]):n[s];return o.prototype=i,o.constructor=o,o.extend=arguments.callee,o.implement=arguments.callee,o}})();// Backbone.js 0.5.3
// (c) 2010 Jeremy Ashkenas, DocumentCloud Inc.
// Backbone may be freely distributed under the MIT license.
// For all details and documentation:
// http://documentcloud.github.com/backbone
(function(){var e=this,t=e.Backbone,n;n=typeof exports!="undefined"?exports:e.Backbone={},n.VERSION="0.5.3";var r=e._;!r&&typeof require!="undefined"&&(r=require("underscore")._);var i=e.jQuery||e.Zepto;n.noConflict=function(){return e.Backbone=t,this},n.emulateHTTP=!1,n.emulateJSON=!1,n.Events={bind:function(e,t,n){var r=this._callbacks||(this._callbacks={});return(r[e]||(r[e]=[])).push([t,n]),this},unbind:function(e,t){var n;if(e){if(n=this._callbacks)if(t){n=n[e];if(!n)return this;for(var r=0,i=n.length;r<i;r++)if(n[r]&&t===n[r][0]){n[r]=null;break}}else n[e]=[]}else this._callbacks={};return this},trigger:function(e){var t,n,r,i,s=2;if(!(n=this._callbacks))return this;for(;s--;)if(t=s?e:"all",t=n[t])for(var o=0,u=t.length;o<u;o++)(r=t[o])?(i=s?Array.prototype.slice.call(arguments,1):arguments,r[0].apply(r[1]||this,i)):(t.splice(o,1),o--,u--);return this}},n.Model=function(e,t){var n;e||(e={});if(n=this.defaults)r.isFunction(n)&&(n=n.call(this)),e=r.extend({},n,e);this.attributes={},this._escapedAttributes={},this.cid=r.uniqueId("c"),this.set(e,{silent:!0}),this._changed=!1,this._previousAttributes=r.clone(this.attributes),t&&t.collection&&(this.collection=t.collection),this.initialize(e,t)},r.extend(n.Model.prototype,n.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return r.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;return(t=this._escapedAttributes[e])?t:(t=this.attributes[e],this._escapedAttributes[e]=(t==null?"":""+t).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"))},has:function(e){return this.attributes[e]!=null},set:function(e,t){t||(t={});if(!e)return this;e.attributes&&(e=e.attributes);var n=this.attributes,i=this._escapedAttributes;if(!t.silent&&this.validate&&!this._performValidation(e,t))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var s=this._changing;this._changing=!0;for(var o in e){var u=e[o];r.isEqual(n[o],u)||(n[o]=u,delete i[o],this._changed=!0,t.silent||this.trigger("change:"+o,this,u,t))}return!s&&!t.silent&&this._changed&&this.change(t),this._changing=!1,this},unset:function(e,t){if(e in this.attributes){t||(t={});var n={};return n[e]=void 0,!t.silent&&this.validate&&!this._performValidation(n,t)?!1:(delete this.attributes[e],delete this._escapedAttributes[e],e==this.idAttribute&&delete this.id,this._changed=!0,t.silent||(this.trigger("change:"+e,this,void 0,t),this.change(t)),this)}return this},clear:function(e){e||(e={});var t,n=this.attributes,r={};for(t in n)r[t]=void 0;if(!e.silent&&this.validate&&!this._performValidation(r,e))return!1;this.attributes={},this._escapedAttributes={},this._changed=!0;if(!e.silent){for(t in n)this.trigger("change:"+t,this,void 0,e);this.change(e)}return this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){if(!t.set(t.parse(n,s),e))return!1;r&&r(t,n)},e.error=y(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},save:function(e,t){t||(t={});if(e&&!this.set(e,t))return!1;var r=this,i=t.success;t.success=function(e,n,s){if(!r.set(r.parse(e,s),t))return!1;i&&i(r,e,s)},t.error=y(t.error,r,t);var s=this.isNew()?"create":"update";return(this.sync||n.sync).call(this,s,this,t)},destroy:function(e){e||(e={});if(this.isNew())return this.trigger("destroy",this,this.collection,e);var t=this,r=e.success;return e.success=function(n){t.trigger("destroy",t,t.collection,e),r&&r(t,n)},e.error=y(e.error,t,e),(this.sync||n.sync).call(this,"delete",this,e)},url:function(){var e=m(this.collection)||this.urlRoot||g();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(e){this.trigger("change",this,e),this._previousAttributes=r.clone(this.attributes),this._changed=!1},hasChanged:function(e){return e?this._previousAttributes[e]!=this.attributes[e]:this._changed},changedAttributes:function(e){e||(e=this.attributes);var t=this._previousAttributes,n=!1,i;for(i in e)r.isEqual(t[i],e[i])||(n=n||{},n[i]=e[i]);return n},previous:function(e){return!e||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return r.clone(this._previousAttributes)},_performValidation:function(e,t){var n=this.validate(e);return n?(t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}}),n.Collection=function(e,t){t||(t={}),t.comparator&&(this.comparator=t.comparator),r.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),e&&this.reset(e,{silent:!0}),this.initialize.apply(this,arguments)},r.extend(n.Collection.prototype,n.Events,{model:n.Model,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._add(e[n],t);else this._add(e,t);return this},remove:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._remove(e[n],t);else this._remove(e,t);return this},get:function(e){return e==null?null:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(e){e||(e={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return r.map(this.models,function(t){return t.get(e)})},reset:function(e,t){return e||(e=[]),t||(t={}),this.each(this._removeReference),this._reset(),this.add(e,{silent:!0}),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){t[e.add?"add":"reset"](t.parse(n,s),e),r&&r(t,n)},e.error=y(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var r=t.success;return t.success=function(e,i,s){n.add(e,t),r&&r(e,i,s)},e.save(null,t),e},parse:function(e){return e},chain:function(){return r(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof n.Model)e.collection||(e.collection=this);else{var r=e;e=new this.model(r,{collection:this}),e.validate&&!e._performValidation(r,t)&&(e=!1)}return e},_add:function(e,t){t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var n=this.getByCid(e);if(n)throw Error(["Can't add the same model to a set twice",n.id]);return this._byId[e.id]=e,this._byCid[e.cid]=e,this.models.splice(t.at!=null?t.at:this.comparator?this.sortedIndex(e,this.comparator):this.length,0,e),e.bind("all",this._onModelEvent),this.length++,t.silent||e.trigger("add",e,this,t),e},_remove:function(e,t){return t||(t={}),e=this.getByCid(e)||this.get(e),e?(delete this._byId[e.id],delete this._byCid[e.cid],this.models.splice(this.indexOf(e),1),this.length--,t.silent||e.trigger("remove",e,this,t),this._removeReference(e),e):null},_removeReference:function(e){this==e.collection&&delete e.collection,e.unbind("all",this._onModelEvent)},_onModelEvent:function(e,t,n,r){(e=="add"||e=="remove")&&n!=this||(e=="destroy"&&this._remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments))}}),r.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"],function(e){n.Collection.prototype[e]=function(){return r[e].apply(r,[this.models].concat(r.toArray(arguments)))}}),n.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var s=/:([\w\d]+)/g,o=/\*([\w\d]+)/g,u=/[-[\]{}()+?.,\\^$|#\s]/g;r.extend(n.Router.prototype,n.Events,{initialize:function(){},route:function(e,t,i){n.history||(n.history=new n.History),r.isRegExp(e)||(e=this._routeToRegExp(e)),n.history.route(e,r.bind(function(n){n=this._extractParameters(e,n),i.apply(this,n),this.trigger.apply(this,["route:"+t].concat(n))},this))},navigate:function(e,t){n.history.navigate(e,t)},_bindRoutes:function(){if(this.routes){var e=[],t;for(t in this.routes)e.unshift([t,this.routes[t]]);t=0;for(var n=e.length;t<n;t++)this.route(e[t][0],e[t][1],this[e[t][1]])}},_routeToRegExp:function(e){return e=e.replace(u,"\\$&").replace(s,"([^/]*)").replace(o,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}}),n.History=function(){this.handlers=[],r.bindAll(this,"checkUrl")};var a=/^#*/,f=/msie [\w.]+/,l=!1;r.extend(n.History.prototype,{interval:50,getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n),e.indexOf(this.options.root)==0&&(e=e.substr(this.options.root.length))}else e=window.location.hash;return decodeURIComponent(e.replace(a,""))},start:function(e){if(l)throw Error("Backbone.history has already been started");this.options=r.extend({},{root:"/"},this.options,e),this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState),e=this.getFragment();var t=document.documentMode;if(t=f.exec(navigator.userAgent.toLowerCase())&&(!t||t<=7))this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e);this._hasPushState?i(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!t?i(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=e,l=!0,e=window.location,t=e.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!t)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&t&&e.hash&&(this.fragment=e.hash.replace(a,""),window.history.replaceState({},document.title,e.protocol+"//"+e.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();e==this.fragment&&this.iframe&&(e=this.getFragment(this.iframe.location.hash));if(e==this.fragment||e==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return r.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){var n=(e||"").replace(a,"");if(this.fragment!=n&&this.fragment!=decodeURIComponent(n)){if(this._hasPushState){var r=window.location;n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history.pushState({},document.title,r.protocol+"//"+r.host+n)}else if(window.location.hash=this.fragment=n,this.iframe&&n!=this.getFragment(this.iframe.location.hash))this.iframe.document.open().close(),this.iframe.location.hash=n;t&&this.loadUrl(e)}}}),n.View=function(e){this.cid=r.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var c=/^(\S+)\s*(.*)$/,h=["model","collection","el","id","attributes","className","tagName"];r.extend(n.View.prototype,n.Events,{tagName:"div",$:function(e){return i(e,this.el)},initialize:function(){},render:function(){return this},remove:function(){return i(this.el).remove(),this},make:function(e,t,n){return e=document.createElement(e),t&&i(e).attr(t),n&&i(e).html(n),e},delegateEvents:function(e){if(e||(e=this.events))for(var t in r.isFunction(e)&&(e=e.call(this)),i(this.el).unbind(".delegateEvents"+this.cid),e){var n=this[e[t]];if(!n)throw Error('Event "'+e[t]+'" does not exist');var s=t.match(c),o=s[1];s=s[2],n=r.bind(n,this),o+=".delegateEvents"+this.cid,s===""?i(this.el).bind(o,n):i(this.el).delegate(s,o,n)}},_configure:function(e){this.options&&(e=r.extend({},this.options,e));for(var t=0,n=h.length;t<n;t++){var i=h[t];e[i]&&(this[i]=e[i])}this.options=e},_ensureElement:function(){if(this.el)r.isString(this.el)&&(this.el=i(this.el).get(0));else{var e=this.attributes||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.el=this.make(this.tagName,e)}}}),n.Model.extend=n.Collection.extend=n.Router.extend=n.View.extend=function(e,t){var n=v(this,e,t);return n.extend=this.extend,n};var p={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};n.sync=function(e,t,s){var o=p[e];return s=r.extend({type:o,dataType:"json"},s),s.url||(s.url=m(t)||g()),!s.data&&t&&(e=="create"||e=="update")&&(s.contentType="application/json",s.data=JSON.stringify(t.toJSON())),n.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),n.emulateHTTP&&(o==="PUT"||o==="DELETE")&&(n.emulateJSON&&(s.data._method=o),s.type="POST",s.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",o)}),s.type!=="GET"&&!n.emulateJSON&&(s.processData=!1),i.ajax(s)};var d=function(){},v=function(e,t,n){var i;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},r.extend(i,e),d.prototype=e.prototype,i.prototype=new d,t&&r.extend(i.prototype,t),n&&r.extend(i,n),i.prototype.constructor=i,i.__super__=e.prototype,i},m=function(e){return!e||!e.url?null:r.isFunction(e.url)?e.url():e.url},g=function(){throw Error('A "url" property or function must be specified')},y=function(e,t,n){return function(r){e?e(t,r,n):t.trigger("error",t,r,n)}}}).call(this);/// This code is licensed under the MIT License.  See LICENSE for more details.
/// Does the environment support web workers?  If not, let's fake it.
if(!Worker)var Worker=function(e){var t,n={};return typeof window!="undefined"?t=window:global&&(t=global),t.document&&!t.require&&(t.require=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}),n.onmessage=function(){},n.postMessage=function(e){setTimeout(function(){t.onmessage({data:e})},10)},t.postMessage=function(e){n.onmessage({data:e,type:"message"})},require(e),n};this.LZMA=function(e){var t=1,n=2,r=3,i={},s=new Worker(typeof e=="undefined"?"./lzma_worker.js":e);return s.onmessage=function(e){e.data.action===r?i[e.data.callback_num]&&typeof i[e.data.callback_num].on_progress=="function"&&i[e.data.callback_num].on_progress(e.data.result):i[e.data.callback_num]&&typeof i[e.data.callback_num].on_finish=="function"&&(i[e.data.callback_num].on_finish(e.data.result),delete i[e.data.callback_num])},s.onerror=function(e){throw new Error(e.message+" ("+e.filename+":"+e.lineno+")")},function(){function e(e,t,n,r,o){var u;do u=Math.floor(Math.random()*1e7);while(typeof i[u]!="undefined");i[u]={on_finish:r,on_progress:o},s.postMessage({action:e,callback_num:u,data:t,mode:n})}return{compress:function(n,r,i,s){e(t,String(n),r,i,s)},decompress:function(t,r,i){e(n,t,!1,r,i)}}}()};/* wax - 4.1.3 - 1.0.4-477-gba3b176 *//*!
  * Reqwest! A general purpose XHR connection manager
  * copyright Dustin Diaz 2011
  * https://github.com/ded/reqwest
  * license MIT
  */!function(context,win){function serial(e){var t=e.name;if(e.disabled||!t)return"";t=enc(t);switch(e.tagName.toLowerCase()){case"input":switch(e.type){case"reset":case"button":case"image":case"file":return"";case"checkbox":case"radio":return e.checked?t+"="+(e.value?enc(e.value):!0)+"&":"";default:return t+"="+(e.value?enc(e.value):"")+"&"}break;case"textarea":return t+"="+enc(e.value)+"&";case"select":return t+"="+enc(e.options[e.selectedIndex].value)+"&"}return""}function enc(e){return encodeURIComponent(e)}function reqwest(e,t){return new Reqwest(e,t)}function init(o,fn){function error(e){o.error&&o.error(e),complete(e)}function success(resp){o.timeout&&clearTimeout(self.timeout)&&(self.timeout=null);var r=resp.responseText;if(r)switch(type){case"json":resp=win.JSON?win.JSON.parse(r):eval("("+r+")");break;case"js":resp=eval(r);break;case"html":resp=r}fn(resp),o.success&&o.success(resp),complete(resp)}function complete(e){o.complete&&o.complete(e)}this.url=typeof o=="string"?o:o.url,this.timeout=null;var type=o.type||setType(this.url),self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort(),error()},o.timeout)),this.request=getRequest(o,success,error)}function setType(e){return/\.json$/.test(e)?"json":/\.jsonp$/.test(e)?"jsonp":/\.js$/.test(e)?"js":/\.html?$/.test(e)?"html":/\.xml$/.test(e)?"xml":"js"}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function getRequest(e,t,n){if(e.type!="jsonp"){var r=xhr();return r.open(e.method||"GET",typeof e=="string"?e:e.url,!0),setHeaders(r,e),r.onreadystatechange=handleReadyState(r,t,n),e.before&&e.before(r),r.send(e.data||null),r}var i=doc.createElement("script"),s=0;win[getCallbackName(e)]=generalCallback,i.type="text/javascript",i.src=e.url,i.async=!0,i.onload=i.onreadystatechange=function(){if(i[readyState]&&i[readyState]!=="complete"&&i[readyState]!=="loaded"||s)return!1;i.onload=i.onreadystatechange=null,e.success&&e.success(lastValue),lastValue=undefined,head.removeChild(i),s=1},head.appendChild(i)}function generalCallback(e){lastValue=e}function getCallbackName(e){var t=e.jsonpCallback||"callback";if(e.url.slice(-(t.length+2))==t+"=?"){var n="reqwest_"+uniqid++;return e.url=e.url.substr(0,e.url.length-1)+n,n}var r=new RegExp(t+"=([\\w]+)");return e.url.match(r)[1]}function setHeaders(e,t){var n=t.headers||{};n.Accept=n.Accept||"text/javascript, text/html, application/xml, text/xml, */*",t.crossOrigin||(n["X-Requested-With"]=n["X-Requested-With"]||"XMLHttpRequest"),n[contentType]=n[contentType]||"application/x-www-form-urlencoded";for(var r in n)n.hasOwnProperty(r)&&e.setRequestHeader(r,n[r],!1)}function handleReadyState(e,t,n){return function(){e&&e[readyState]==4&&(twoHundo.test(e.status)?t(e):n(e))}}var twoHundo=/^20\d$/,doc=document,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",head=doc[byTag]("head")[0],uniqid=0,lastValue,xhr="XMLHttpRequest"in win?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};Reqwest.prototype={abort:function(){this.request.abort()},retry:function(){init.call(this,this.o,this.fn)}},reqwest.serialize=function(e){var t=[e[byTag]("input"),e[byTag]("select"),e[byTag]("textarea")],n=[],r,i;for(r=0,l=t.length;r<l;++r)for(i=0,l2=t[r].length;i<l2;++i)n.push(serial(t[r][i]));return n.join("").replace(/&$/,"")},reqwest.serializeArray=function(e){for(var t=this.serialize(e).split("&"),n=0,r=t.length,i=[],s;n<r;n++)t[n]&&(s=t[n].split("="))&&i.push({name:s[0],value:s[1]});return i};var old=context.reqwest;reqwest.noConflict=function(){return context.reqwest=old,this},typeof module!="undefined"?module.exports=reqwest:context.reqwest=reqwest}(this,window);var html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10},html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0},html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128},html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,nobr:0,noembed:4,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},html4.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},html4.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"body::background":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0},html4.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},html4.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"body::background":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2};var html=function(e){function o(e){e=t(e);if(n.hasOwnProperty(e))return n[e];var r=e.match(i);return r?String.fromCharCode(parseInt(r[1],10)):(r=e.match(s))?String.fromCharCode(parseInt(r[1],16)):""}function u(e,t){return o(t)}function f(e){return e.replace(a,"")}function c(e){return e.replace(l,u)}function y(e){return e.replace(h,"&amp;").replace(d,"&lt;").replace(v,"&gt;").replace(m,"&#34;").replace(g,"&#61;")}function b(e){return e.replace(p,"&amp;$1").replace(d,"&lt;").replace(v,"&gt;")}function S(n){return function(i,s){i=String(i);var o=null,u=!1,a=[],l=void 0,h=void 0,p=void 0;n.startDoc&&n.startDoc(s);while(i){var d=i.match(u?w:E);i=i.substring(d[0].length);if(u){if(d[1]){var v=t(d[1]),m;if(d[2]){var g=d[3];switch(g.charCodeAt(0)){case 34:case 39:g=g.substring(1,g.length-1)}m=c(f(g))}else m=v;a.push(v,m)}else if(d[4]){h!==void 0&&(p?n.startTag&&n.startTag(l,a,s):n.endTag&&n.endTag(l,s));if(p&&h&(e.eflags.CDATA|e.eflags.RCDATA)){o===null?o=t(i):o=o.substring(o.length-i.length);var y=o.indexOf("</"+l);y<0&&(y=i.length),y&&(h&e.eflags.CDATA?n.cdata&&n.cdata(i.substring(0,y),s):n.rcdata&&n.rcdata(b(i.substring(0,y)),s),i=i.substring(y))}l=h=p=void 0,a.length=0,u=!1}}else if(d[1])n.pcdata&&n.pcdata(d[0],s);else if(d[3])p=!d[2],u=!0,l=t(d[3]),h=e.ELEMENTS.hasOwnProperty(l)?e.ELEMENTS[l]:void 0;else if(d[4])n.pcdata&&n.pcdata(d[4],s);else if(d[5]&&n.pcdata){var S=d[5];n.pcdata(S==="<"?"&lt;":S===">"?"&gt;":"&amp;",s)}}n.endDoc&&n.endDoc(s)}}function x(t){var n,r;return S({startDoc:function(e){n=[],r=!1},startTag:function(i,s,o){if(r)return;if(!e.ELEMENTS.hasOwnProperty(i))return;var u=e.ELEMENTS[i];if(u&e.eflags.FOLDABLE)return;if(u&e.eflags.UNSAFE){r=!(u&e.eflags.EMPTY);return}s=t(i,s);if(s){u&e.eflags.EMPTY||n.push(i),o.push("<",i);for(var a=0,f=s.length;a<f;a+=2){var l=s[a],c=s[a+1];c!==null&&c!==void 0&&o.push(" ",l,'="',y(c),'"')}o.push(">")}},endTag:function(t,i){if(r){r=!1;return}if(!e.ELEMENTS.hasOwnProperty(t))return;var s=e.ELEMENTS[t];if(!(s&(e.eflags.UNSAFE|e.eflags.EMPTY|e.eflags.FOLDABLE))){var o;if(s&e.eflags.OPTIONAL_ENDTAG)for(o=n.length;--o>=0;){var u=n[o];if(u===t)break;if(!(e.ELEMENTS[u]&e.eflags.OPTIONAL_ENDTAG))return}else for(o=n.length;--o>=0;)if(n[o]===t)break;if(o<0)return;for(var a=n.length;--a>o;){var u=n[a];e.ELEMENTS[u]&e.eflags.OPTIONAL_ENDTAG||i.push("</",u,">")}n.length=o,i.push("</",t,">")}},pcdata:function(e,t){r||t.push(e)},rcdata:function(e,t){r||t.push(e)},cdata:function(e,t){r||t.push(e)},endDoc:function(e){for(var t=n.length;--t>=0;)e.push("</",n[t],">");n.length=0}})}function N(t,n,i){var s=[];return x(function(s,o){for(var u=0;u<o.length;u+=2){var a=o[u],f=o[u+1],l=null,c;if((c=s+"::"+a,e.ATTRIBS.hasOwnProperty(c))||(c="*::"+a,e.ATTRIBS.hasOwnProperty(c)))l=e.ATTRIBS[c];if(l!==null)switch(l){case e.atype.NONE:break;case e.atype.SCRIPT:case e.atype.STYLE:f=null;break;case e.atype.ID:case e.atype.IDREF:case e.atype.IDREFS:case e.atype.GLOBAL_NAME:case e.atype.LOCAL_NAME:case e.atype.CLASSES:f=i?i(f):f;break;case e.atype.URI:var h=(""+f).match(T);h?!h[1]||r.test(h[1])?f=n&&n(f):f=null:f=null;break;case e.atype.URI_FRAGMENT:f&&"#"===f.charAt(0)?(f=i?i(f):f,f&&(f="#"+f)):f=null;break;default:f=null}else f=null;o[u+1]=f}return o})(t,s),s.join("")}var t;"script"==="SCRIPT".toLowerCase()?t=function(e){return e.toLowerCase()}:t=function(e){return e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)|32)})};var n={lt:"<",gt:">",amp:"&",nbsp:" ",quot:'"',apos:"'"},r=/^(?:https?|mailto|data)$/i,i=/^#(\d+)$/,s=/^#x([0-9A-Fa-f]+)$/,a=/\0/g,l=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,h=/&/g,p=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,d=/</g,v=/>/g,m=/\"/g,g=/\=/g,w=new RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[\\s\\S][^a-z\\s>]*)","i"),E=new RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<!--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i"),T=new RegExp("^(?:([^:/?#]+):)?");return{escapeAttrib:y,makeHtmlSanitizer:x,makeSaxParser:S,normalizeRCData:b,sanitize:N,unescapeEntities:c}}(html4),html_sanitize=html.sanitize;typeof window!="undefined"&&(window.html=html,window.html_sanitize=html_sanitize),html4.ATTRIBS["*::style"]=0,html4.ELEMENTS.style=0;var Mustache=function(){var e={},t=function(){};return t.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(e,t,n,r){r||(this.context=t,this.buffer=[]);if(!this.includes("",e)){if(r)return e;this.send(e);return}e=this.render_pragmas(e);var i=this.render_section(e,t,n);i===!1&&(i=this.render_tags(e,t,n,r));if(r)return i;this.sendLines(i)},send:function(e){e!==""&&this.buffer.push(e)},sendLines:function(e){if(e){var t=e.split("\n");for(var n=0;n<t.length;n++)this.send(t[n])}},render_pragmas:function(e){if(!this.includes("%",e))return e;var t=this,n=this.getCachedRegex("render_pragmas",function(e,t){return new RegExp(e+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+t,"g")});return e.replace(n,function(e,n,r){if(!t.pragmas_implemented[n])throw{message:"This implementation of mustache doesn't understand the '"+n+"' pragma"};t.pragmas[n]={};if(r){var i=r.split("=");t.pragmas[n][i[0]]=i[1]}return""})},render_partial:function(e,t,n){e=this.trim(e);if(!n||n[e]===undefined)throw{message:"unknown_partial '"+e+"'"};return typeof t[e]!="object"?this.render(n[e],t,n,!0):this.render(n[e],t[e],n,!0)},render_section:function(e,t,n){if(!this.includes("#",e)&&!this.includes("^",e))return!1;var r=this,i=this.getCachedRegex("render_section",function(e,t){return new RegExp("^([\\s\\S]*?)"+e+"(\\^|\\#)\\s*(.+)\\s*"+t+"\n*([\\s\\S]*?)"+e+"\\/\\s*\\3\\s*"+t+"\\s*([\\s\\S]*)$","g")});return e.replace(i,function(e,i,s,o,u,a){var f=i?r.render_tags(i,t,n,!0):"",l=a?r.render(a,t,n,!0):"",c,h=r.find(o,t);return s==="^"?!h||r.is_array(h)&&h.length===0?c=r.render(u,t,n,!0):c="":s==="#"&&(r.is_array(h)?c=r.map(h,function(e){return r.render(u,r.create_context(e),n,!0)}).join(""):r.is_object(h)?c=r.render(u,r.create_context(h),n,!0):typeof h=="function"?c=h.call(t,u,function(e){return r.render(e,t,n,!0)}):h?c=r.render(u,t,n,!0):c=""),f+c+l})},render_tags:function(e,t,n,r){var i=this,s=function(){return i.getCachedRegex("render_tags",function(e,t){return new RegExp(e+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+t+"+","g")})},o=s(),u=function(e,r,u){switch(r){case"!":return"";case"=":return i.set_delimiters(u),o=s(),"";case">":return i.render_partial(u,t,n);case"{":return i.find(u,t);default:return i.escape(i.find(u,t))}},a=e.split("\n");for(var f=0;f<a.length;f++)a[f]=a[f].replace(o,u,this),r||this.send(a[f]);if(r)return a.join("\n")},set_delimiters:function(e){var t=e.split(" ");this.otag=this.escape_regex(t[0]),this.ctag=this.escape_regex(t[1])},escape_regex:function(e){if(!arguments.callee.sRE){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(arguments.callee.sRE,"\\$1")},find:function(e,t){function n(e){return e===!1||e===0||e}e=this.trim(e);var r;return n(t[e])?r=t[e]:n(this.context[e])&&(r=this.context[e]),typeof r=="function"?r.apply(t):r!==undefined?r:""},includes:function(e,t){return t.indexOf(this.otag+e)!=-1},escape:function(e){return e=String(e===null?"":e),e.replace(/&(?!\w+;)|["'<>\\]/g,function(e){switch(e){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return e}})},create_context:function(e){if(this.is_object(e))return e;var t=".";this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator);var n={};return n[t]=e,n},is_object:function(e){return e&&typeof e=="object"},is_array:function(e){return Object.prototype.toString.call(e)==="[object Array]"},trim:function(e){return e.replace(/^\s*|\s*$/g,"")},map:function(e,t){if(typeof e.map=="function")return e.map(t);var n=[],r=e.length;for(var i=0;i<r;i++)n.push(t(e[i]));return n},getCachedRegex:function(t,n){var r=e[this.otag];r||(r=e[this.otag]={});var i=r[this.ctag];i||(i=r[this.ctag]={});var s=i[t];return s||(s=i[t]=n(this.otag,this.ctag)),s}},{name:"mustache.js",version:"0.4.0-dev",to_html:function(e,n,r,i){var s=new t;i&&(s.send=i),s.render(e,n||{},r);if(!i)return s.buffer.join("\n")}}}();wax=wax||{},wax.attribution=function(){function n(e){if(/^(https?:\/\/|data:image)/.test(e))return e}function r(e){return e}var e,t={};return t.set=function(t){if(typeof t=="undefined")return;return e.innerHTML=html_sanitize(t,n,r),this},t.element=function(){return e},t.init=function(){return e=document.createElement("div"),e.className="wax-attribution",this},t.init()},wax=wax||{},wax.bwdetect=function(e,t){function a(){wax.bw=-1;var e=new Image;e.src=s;var t=!0,i=setTimeout(function(){t&&wax.bw==-1&&(n.bw(0),t=!1)},r);e.onload=function(){t&&wax.bw==-1&&(clearTimeout(i),n.bw(1),t=!1)}}var n={},r=e.threshold||400,s="http://a.tiles.mapbox.com/mapbox/1.0.0/blue-marble-topo-bathy-jul/0/0/0.png?preventcache="+ +(new Date),o=1,u=e.auto===undefined?!0:e.auto;return n.bw=function(e){if(!arguments.length)return o;var n=o;wax.bwlisteners&&wax.bwlisteners.length&&function(){listeners=wax.bwlisteners,wax.bwlisteners=[];for(i=0;i<listeners;i++)listeners[i](e)}(),wax.bw=e,o!=(o=e)&&t(e)},n.add=function(){return u&&a(),this},wax.bw==-1?(wax.bwlisteners=wax.bwlisteners||[],wax.bwlisteners.push(n.bw)):wax.bw!==undefined?n.bw(wax.bw):n.add(),n},wax.formatter=function(x){function urlX(e){if(/^(https?:\/\/|data:image)/.test(e))return e}function idX(e){return e}var formatter={},f;if(x&&typeof x=="string")try{eval("f = "+x)}catch(e){console&&console.log(e)}else x&&typeof x=="function"?f=x:f=function(){};return formatter.format=function(e,t){try{return html_sanitize(f(e,t),urlX,idX)}catch(n){console&&console.log(n)}},formatter},wax.GridInstance=function(e,t,n){function o(e){return e>=93&&e--,e>=35&&e--,e-=32,e}n=n||{};var r={},i=n.resolution||4,s=n.tileSize||256;return r.grid_tile=function(){return e},r.getKey=function(t,n){if(!e||!e.grid)return;if(n<0||t<0)return;if(Math.floor(n)>=s||Math.floor(t)>=s)return;return o(e.grid[Math.floor(n/i)].charCodeAt(Math.floor(t/i)))},r.gridFeature=function(t,n){var r=this.getKey(t,n),i=e.keys;if(i&&i[r]&&e.data[i[r]])return e.data[i[r]]},r.tileFeature=function(n,r,i,s){if(!e)return;var o=wax.util.offset(i);feature=this.gridFeature(n-o.left,r-o.top);if(feature)return t.format(s,feature)},r},wax.GridManager=function(e){function u(e){return typeof e=="string"&&(e=[e]),function(n){if(!n)return;var r=/(\d+)\/(\d+)\/(\d+)\.[\w\._]+/g.exec(n);if(!r)return;return e[parseInt(r[2],10)%e.length].replace("{z}",r[1]).replace("{x}",r[2]).replace("{y}",r[3])}}e=e||{};var t=e.resolution||4,n=e.version||"1.1",r={},i={},s,o=function(e){return e.replace(/(\.png|\.jpg|\.jpeg)(\d*)/,".grid.json")};return i.formatter=function(e){return arguments.length?(s=wax.formatter(e),i):s},i.template=function(e){return arguments.length?(s=wax.template(e),i):s},i.gridUrl=function(e){return arguments.length?(o=typeof e=="function"?e:u(e),i):o},i.getGrid=function(e,n){var r=o(e);return!s||!r?n(null,null):(wax.request.get(r,function(e,r){if(e)return n(e,null);n(null,wax.GridInstance(r,s,{resolution:t||4}))}),i)},i.add=function(e){return e.template?i.template(e.template):e.formatter&&i.formatter(e.formatter),e.grids&&i.gridUrl(e.grids),this},i.add(e)},wax=wax||{},wax.hash=function(e){function t(){return location.hash.substring(1)}function n(e){location.hash="#"+e}function o(t){var n=t.split("/");for(var r=0;r<n.length;r++){n[r]=Number(n[r]);if(isNaN(n[r]))return!0}if(n.length<3)return!0;n.length==3&&e.setCenterZoom(n)}function u(){var t=e.getCenterZoom();r!==t&&(r=t,n(r))}function a(e){if(e===r)return;o(r=e)&&u()}e=e||{};var r,i={},s=90-1e-8,f=wax.util.throttle(u,500);return i.add=function(){return a(t()),e.bindChange(f),this},i.remove=function(){return e.unbindChange(f),this},i.add()};var wax=wax||{};wax.legend=function(){function r(e){if(/^(https?:\/\/|data:image)/.test(e))return e}function i(e){return e}var e,t={},n;return t.element=function(){return n},t.content=function(t){return arguments.length?(t?(e.innerHTML=html_sanitize(t,r,i),e.style.display="block"):(e.innerHTML="",e.style.display="none"),this):e.innerHTML},t.add=function(){return n=document.createElement("div"),n.className="wax-legends",e=document.createElement("div"),e.className="wax-legend",e.style.display="none",n.appendChild(e),this},t.add()};var w=function(e){return e.melt=function(t,n){return t.apply(n,[e,n])},e},wax=wax||{};wax.movetip={},wax.movetip=function(e){function o(e){return e&&e.className.indexOf("wax-popup")!==-1}function u(e,t){var n=document.createElement("div");return n.className="wax-movetip",n.style.cssText="position:absolute;",n.innerHTML=e,t.appendChild(n),r=t,_tooltipOffset=wax.util.offset(n),_contextOffset=wax.util.offset(r),n}function a(e){if(!n)return;var t=wax.util.eventoffset(e);n.className="wax-movetip",_tooltipOffset.height+t.y>_contextOffset.top+_contextOffset.height&&_contextOffset.height>_tooltipOffset.height&&(t.y-=_tooltipOffset.height,n.className+=" flip-y"),_tooltipOffset.width+t.x>_contextOffset.left+_contextOffset.width&&(t.x-=_tooltipOffset.width,n.className+=" flip-x"),n.style.left=t.x+"px",n.style.top=t.y+"px"}function f(e){if(!e)return;var t,n=function(){this.parentNode&&this.parentNode.removeChild(this)};e.style["-webkit-transition"]!==undefined&&i?t="webkitTransitionEnd":e.style.MozTransition!==undefined&&i&&(t="transitionend"),t?(e.addEventListener(t,n,!1),e.addEventListener("transitionend",n,!1),e.className+=" "+i):e.parentNode&&e.parentNode.removeChild(e)}function l(e,t){n&&(f(n),n=undefined);var r=u(e,t);r.className+=" wax-popup",r.innerHTML=e;var i=document.createElement("a");i.href="#close",i.className="close",i.innerHTML="Close",r.appendChild(i);var s=function(e){return f(r),n=undefined,e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1};i.addEventListener?i.addEventListener("click",s,!1):i.attachEvent&&i.attachEvent("onclick",s),n=r}e=e||{};var t={},n=undefined,r=undefined,i=e.animationOut,s=e.animationIn;return t.over=function(e,t,r){if(!e)return;t.style.cursor="pointer";if(o(n))return;n=u(e,t),a(r),t.addEventListener&&t.addEventListener("mousemove",a)},t.out=function(e){e.style.cursor="default";if(o(n))return;n&&(f(n),e.removeEventListener&&e.removeEventListener("mousemove",a),n=undefined)},t};var wax=wax||{};wax.request={cache:{},locks:{},promises:{},get:function(e,t){if(this.cache[e])return t(this.cache[e][0],this.cache[e][1]);this.promises[e]=this.promises[e]||[],this.promises[e].push(t);if(this.locks[e])return;var n=this;this.locks[e]=!0,reqwest({url:e+(~e.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:function(t){n.locks[e]=!1,n.cache[e]=[null,t];for(var r=0;r<n.promises[e].length;r++)n.promises[e][r](n.cache[e][0],n.cache[e][1])},error:function(t){n.locks[e]=!1,n.cache[e]=[t,null];for(var r=0;r<n.promises[e].length;r++)n.promises[e][r](n.cache[e][0],n.cache[e][1])}})}},wax.template=function(e){function n(e){if(/^(https?:\/\/|data:image)/.test(e))return e}function r(e){return e}var t={};return t.format=function(t,i){var s={};for(var o in i)s[o]=i[o];return t.format&&(s["__"+t.format+"__"]=!0),html_sanitize(Mustache.to_html(e,s),n,r)},t};if(!wax)var wax={};wax.tilejson=function(e,t){reqwest({url:e+(~e.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:t,error:t})};var wax=wax||{};wax.tooltip={},wax.tooltip=function(e){this._currentTooltip=undefined,e=e||{},e.animationOut&&(this.animationOut=e.animationOut),e.animationIn&&(this.animationIn=e.animationIn)},wax.tooltip.prototype.isPopup=function(e){return e&&e.className.indexOf("wax-popup")!==-1},wax.tooltip.prototype.getTooltip=function(e,t){var n=document.createElement("div");return n.className="wax-tooltip wax-tooltip-0",n.innerHTML=e,t.appendChild(n),n},wax.tooltip.prototype.hideTooltip=function(e){if(!e)return;var t,n=function(){this.parentNode&&this.parentNode.removeChild(this)};e.style["-webkit-transition"]!==undefined&&this.animationOut?t="webkitTransitionEnd":e.style.MozTransition!==undefined&&this.animationOut&&(t="transitionend"),t?(e.addEventListener(t,n,!1),e.addEventListener("transitionend",n,!1),e.className+=" "+this.animationOut):e.parentNode&&e.parentNode.removeChild(e)},wax.tooltip.prototype.click=function(e,t){this._currentTooltip&&(this.hideTooltip(this._currentTooltip),this._currentTooltip=undefined);var n=this.getTooltip(e,t);n.className+=" wax-popup",n.innerHTML=e;var r=document.createElement("a");r.href="#close",r.className="close",r.innerHTML="Close",n.appendChild(r);var i=wax.util.bind(function(e){return this.hideTooltip(n),this._currentTooltip=undefined,e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},this);r.addEventListener?r.addEventListener("click",i,!1):r.attachEvent&&r.attachEvent("onclick",i),this._currentTooltip=n},wax.tooltip.prototype.over=function(e,t){if(!e)return;t.style.cursor="pointer";if(this.isPopup(this._currentTooltip))return;this._currentTooltip=this.getTooltip(e,t)},wax.tooltip.prototype.out=function(e){e.style.cursor="default";if(this.isPopup(this._currentTooltip))return;this._currentTooltip&&(this.hideTooltip(this._currentTooltip),this._currentTooltip=undefined)};var wax=wax||{};wax.util=wax.util||{},wax.util={offset:function(e){var t=e.offsetWidth||parseInt(e.style.width,10),n=e.offsetHeight||parseInt(e.style.height,10),r=document.body,i=0,s=0,o=function(e){if(e===r||e===document.documentElement)return;i+=e.offsetTop,s+=e.offsetLeft;var t=e.style.transform||e.style.WebkitTransform||e.style.OTransform||e.style.MozTransform||e.style.msTransform;if(t)if(match=t.match(/translate\((.+)px, (.+)px\)/))i+=parseInt(match[2],10),s+=parseInt(match[1],10);else if(match=t.match(/translate3d\((.+)px, (.+)px, (.+)px\)/))i+=parseInt(match[2],10),s+=parseInt(match[1],10);else if(match=t.match(/matrix3d\(([\-\d,\s]+)\)/)){var n=match[1].split(",");i+=parseInt(n[13],10),s+=parseInt(n[12],10)}else if(match=t.match(/matrix\(.+, .+, .+, .+, (.+), (.+)\)/))i+=parseInt(match[2],10),s+=parseInt(match[1],10)};o(e);try{while(e=e.offsetParent)o(e)}catch(u){}i+=r.offsetTop,s+=r.offsetLeft,i+=r.parentNode.offsetTop,s+=r.parentNode.offsetLeft;var a=document.defaultView?window.getComputedStyle(r.parentNode,null):r.parentNode.currentStyle;return r.parentNode.offsetTop!==parseInt(a.marginTop,10)&&!isNaN(parseInt(a.marginTop,10))&&(i+=parseInt(a.marginTop,10),s+=parseInt(a.marginLeft,10)),{top:i,left:s,height:n,width:t}},$:function(e){return typeof e=="string"?document.getElementById(e):e},bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}},isString:function(e){return!!(e===""||e&&e.charCodeAt&&e.substr)},indexOf:function(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;var r,i;if(n&&e.indexOf===n)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},keys:Object.keys||function(e){var t=Object.prototype.hasOwnProperty;if(e!==Object(e))throw new TypeError("Invalid object");var n=[];for(var r in e)t.call(e,r)&&(n[n.length]=r);return n},eventoffset:function(e){var t=0,n=0;if(!e)var e=window.event;if(e.pageX||e.pageY)return{x:e.pageX,y:e.pageY};if(e.clientX||e.clientY){var r=document.documentElement,i=document.body,s=document.body.parentNode.currentStyle,o=parseInt(s.marginTop,10)||0,u=parseInt(s.marginLeft,10)||0;return{x:e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0)+u,y:e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)+o}}if(e.touches&&e.touches.length===1)return{x:e.touches[0].pageX,y:e.touches[0].pageY}},limit:function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}},throttle:function(e,t){return this.limit(e,t,!1)},parseUri:function(e){var t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},i=14;while(i--)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,i){n&&(r[t.q.name][n]=i)}),r},addUrlData:function(e,t){return e+=this.parseUri(e).query?"&":"?",e+=t}},wax=wax||{},wax.g=wax.g||{},wax.g.attribution=function(e,t){t=t||{};var n,r={};return r.element=function(){return n.element()},r.appendTo=function(e){return wax.util.$(e).appendChild(n.element()),this},r.init=function(){return n=wax.attribution(),n.set(t.attribution),n.element().className="wax-attribution wax-g",this},r.init()},wax=wax||{},wax.g=wax.g||{},wax.g.bwdetect=function(e,t){t=t||{};var n=t.png||".png128",r=t.jpg||".jpg70";if(!e.mapTypes["mb-low"]){var i=e.mapTypes.mb,s={tiles:[],scheme:i.options.scheme,blankImage:i.options.blankImage,minzoom:i.minZoom,maxzoom:i.maxZoom,name:i.name,description:i.description};for(var o=0;o<i.options.tiles.length;o++)s.tiles.push(i.options.tiles[o].replace(".png",n).replace(".jpg",r));m.mapTypes.set("mb-low",new wax.g.connector(s))}return wax.bwdetect(t,function(t){e.setMapTypeId(t?"mb":"mb-low")})},wax=wax||{},wax.g=wax.g||{},wax.g.hash=function(e){return wax.hash({getCenterZoom:function(){var t=e.getCenter(),n=e.getZoom(),r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2));return[n.toFixed(2),t.lat().toFixed(r),t.lng().toFixed(r)].join("/")},setCenterZoom:function(n){e.setCenter(new google.maps.LatLng(n[1],n[2])),e.setZoom(n[0])},bindChange:function(t){google.maps.event.addListener(e,"idle",t)},unbindChange:function(t){google.maps.event.removeListener(e,"idle",t)}})},wax=wax||{},wax.g=wax.g||{},wax.g.interaction=function(e,t,n){t=t||{},n=n||{};var r={waxGM:new wax.GridManager(t),callbacks:n.callbacks||new wax.tooltip,clickAction:n.clickAction||"full",eventHandlers:{},add:function(){return this.eventHandlers.tileloaded=google.maps.event.addListener(e,"tileloaded",wax.util.bind(this.clearTileGrid,this)),this.eventHandlers.idle=google.maps.event.addListener(e,"idle",wax.util.bind(this.clearTileGrid,this)),this.eventHandlers.mousemove=google.maps.event.addListener(e,"mousemove",this.onMove()),this.eventHandlers.click=google.maps.event.addListener(e,"click",this.click()),this},remove:function(){return google.maps.event.removeListener(this.eventHandlers.tileloaded),google.maps.event.removeListener(this.eventHandlers.idle),google.maps.event.removeListener(this.eventHandlers.mousemove),google.maps.event.removeListener(this.eventHandlers.click),this},getTileGrid:function(){if(!this._getTileGrid){this._getTileGrid=[];var t=e.getZoom(),n=wax.util.offset(e.getDiv()),r=wax.util.bind(function(e){if(!e.interactive)return;for(var r in e.cache){if(r.split("/")[0]!=t)continue;var i=wax.util.offset(e.cache[r]);this._getTileGrid.push([i.top-n.top,i.left-n.left,e.cache[r]])}},this);for(var i in e.mapTypes)r(e.mapTypes[
i]);e.overlayMapTypes.forEach(r)}return this._getTileGrid},clearTileGrid:function(e,t){this._getTileGrid=null},getTile:function(e){var t,n=this.getTileGrid();for(var r=0;r<n.length;r++)if(n[r][0]<e.pixel.y&&n[r][0]+256>e.pixel.y&&n[r][1]<e.pixel.x&&n[r][1]+256>e.pixel.x){t=n[r][2];break}return t||!1},onMove:function(t){return this._onMove||(this._onMove=wax.util.bind(function(t){var n=this.getTile(t);n&&this.waxGM.getGrid(n.src,wax.util.bind(function(r,i){if(r||!i)return;var s=i.tileFeature(t.pixel.x+wax.util.offset(e.getDiv()).left,t.pixel.y+wax.util.offset(e.getDiv()).top,n,{format:"teaser"});s&&this.feature!==s?(this.feature=s,this.callbacks.out(e.getDiv()),this.callbacks.over(s,e.getDiv(),0,t)):s||(this.feature=null,this.callbacks.out(e.getDiv()))},this))},this)),this._onMove},click:function(t){return this._onClick||(this._onClick=wax.util.bind(function(t){if(window.event&&window.event.cancelBubble)return!1;var n=this.getTile(t);n&&this.waxGM.getGrid(n.src,wax.util.bind(function(r,i){if(r||!i)return;var s=i.tileFeature(t.pixel.x+wax.util.offset(e.getDiv()).left,t.pixel.y+wax.util.offset(e.getDiv()).top,n,{format:this.clickAction});if(s){window.event||(window.event={},setTimeout(function(){window.event=null},150)),window.event.cancelBubble=!0;switch(this.clickAction){case"full":this.callbacks.click(s,e.getDiv(),0,t);break;case"location":window.location=s}}},this))},this)),this._onClick}};return r.add(e)},wax=wax||{},wax.g=wax.g||{},wax.g.legend=function(e,t){t=t||{};var n,r={};return r.add=function(){return n=wax.legend().content(t.legend||""),this},r.element=function(){return n.element()},r.appendTo=function(e){return wax.util.$(e).appendChild(n.element()),this},r.add()};var wax=wax||{};wax.g=wax.g||{},wax.g.connector=function(e){e=e||{},this.options={tiles:e.tiles,scheme:e.scheme||"xyz",blankImage:e.blankImage},this.minZoom=e.minzoom||0,this.maxZoom=e.maxzoom||22,this.name=e.name||"",this.description=e.description||"",this.interactive=!0,this.tileSize=new google.maps.Size(256,256),this.cache={}},wax.g.connector.prototype.getTile=function(e,t,n){var r=t+"/"+e.x+"/"+e.y;if(!this.cache[r]){var i=this.cache[r]=new Image(256,256);this.cache[r].src=this.getTileUrl(e,t),this.cache[r].setAttribute("gTileKey",r),this.cache[r].onerror=function(){i.style.display="none"}}return this.cache[r]},wax.g.connector.prototype.releaseTile=function(e){var t=e.getAttribute("gTileKey");this.cache[t]&&delete this.cache[t],e.parentNode&&e.parentNode.removeChild(e)},wax.g.connector.prototype.getTileUrl=function(e,t){var n=Math.pow(2,t),r=this.options.scheme==="tms"?n-1-e.y:e.y,i=e.x%n;return i=i<0?e.x%n+n:i,r<0?this.options.blankImage:this.options.tiles[parseInt(i+r,10)%this.options.tiles.length].replace("{z}",t).replace("{x}",i).replace("{y}",r)};var CartoDBLayer=function(e,t,n,r){this.user_name=e,this.query=t||"select * from "+n,this.table=n,this.name=n,this.style=r,this.showing=!0,this.editable=!0,this.create_layer()};CartoDBLayer.prototype.create_layer=function(){var e=this,t={tiles:{},getTile:function(t,n){var r=new Image,i="http://"+e.user_name+".cartodb.com/tiles/"+e.table+"/"+n+"/"+t.x+"/"+t.y+".png?sql="+e.query;e.style&&(i+="&style="+encodeURIComponent(e.style.replace("\n",""))),r.src=i;var s=t.x+"_"+t.y+"_"+n;return r.setAttribute("id",s),this.tiles[s]=r,r},releaseTile:function(e){var t=e.getAttribute("id");delete this.tiles[t]},show:function(t){for(var n in this.tiles)this.tiles[n].style.display=t?"block":"none";e.showing=t},tileSize:new google.maps.Size(256,256),name:this.query,description:!1};this.layer=t},CartoDBLayer.prototype.show=function(e){this.layer.show(e)},CartoDBLayer.prototype.update_sql=function(e){this.query=e},CartoDBLayer.prototype.update=CartoDBLayer.prototype.update_sql;// A simple module to replace `Backbone.sync` with *localStorage*-based
// persistence. Models are given GUIDS, and saved into a JSON object. Simple
// as that.
// Generate four random hex digits.
function S4(){return((1+Math.random())*65536|0).toString(16).substring(1)}function guid(){return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()}var Store=function(e){this.name=e;var t=localStorage.getItem(this.name);this.data=t&&JSON.parse(t)||{}};_.extend(Store.prototype,{save:function(){localStorage.setItem(this.name,JSON.stringify(this.data))},create:function(e){return e.id||(e.id=e.attributes.id=guid()),this.data[e.id]=e,this.save(),e},update:function(e){return this.data[e.id]=e,this.save(),e},find:function(e){return this.data[e.id]},findAll:function(){return _.values(this.data)},destroy:function(e){return delete this.data[e.id],this.save(),e}}),Backbone.sync=function(e,t,n){var r,i=t.localStorage||t.collection.localStorage;switch(e){case"read":r=t.id?i.find(t):i.findAll();break;case"create":r=i.create(t);break;case"update":r=i.update(t);break;case"delete":r=i.destroy(t)}r?n.success(r):n.error("Record not found")};function CartoShader(e){this.compiled={},this.compile(e)}function shader_test(){}CartoShader.prototype.compile=function(shader){typeof shader=="string"&&(shader=eval("(function() { return "+shader+"; })()"));var mapper={"point-color":"fillStyle","line-color":"strokeStyle","line-width":"lineWidth","polygon-fill":"fillStyle"};for(var attr in shader){var c=mapper[attr];c&&(this.compiled[c]=eval("(function() { return shader[attr]; })();"))}},CartoShader.prototype.apply=function(e,t,n){var r=this.compiled;for(var i in r){var s=r[i];typeof s=="function"&&(s=s(t,n)),e[i]=s}};function bound(e,t,n){return t!=null&&(e=Math.max(e,t)),n!=null&&(e=Math.min(e,n)),e}function degreesToRadians(e){return e*(Math.PI/180)}function radiansToDegrees(e){return e/(Math.PI/180)}function MercatorProjection(){this.pixelOrigin_=new google.maps.Point(TILE_SIZE/2,TILE_SIZE/2),this.pixelsPerLonDegree_=TILE_SIZE/360,this.pixelsPerLonRadian_=TILE_SIZE/(2*Math.PI)}var TILE_SIZE=256;MercatorProjection.prototype.fromLatLngToPoint=function(e,t){var n=this,r=t||new google.maps.Point(0,0),i=n.pixelOrigin_;r.x=i.x+e.lng()*n.pixelsPerLonDegree_;var s=bound(Math.sin(degreesToRadians(e.lat())),-0.9999,.9999);return r.y=i.y+.5*Math.log((1+s)/(1-s))*-n.pixelsPerLonRadian_,r},MercatorProjection.prototype.fromPointToLatLng=function(e){var t=this,n=t.pixelOrigin_,r=(e.x-n.x)/t.pixelsPerLonDegree_,i=(e.y-n.y)/-t.pixelsPerLonRadian_,s=radiansToDegrees(2*Math.atan(Math.exp(i))-Math.PI/2);return new google.maps.LatLng(s,r)},MercatorProjection.prototype.tileBBox=function(e,t,n){var r=1<<n,i=TILE_SIZE/r,s=e*TILE_SIZE/r,o=t*TILE_SIZE/r;return[this.fromPointToLatLng(new google.maps.Point(s,o+i)),this.fromPointToLatLng(new google.maps.Point(s+i,o))]},MercatorProjection.prototype.tilePoint=function(e,t,n){var r=1<<n,i=e*TILE_SIZE,s=t*TILE_SIZE;return[i,s]},MercatorProjection.prototype.latLngToTilePoint=function(e,t,n,r){var i=1<<r,s=this,o=s.fromLatLngToPoint(e),u=new google.maps.Point(o.x*i,o.y*i),a=this.tilePoint(t,n,r);return new google.maps.Point(Math.floor(u.x-a[0]),Math.floor(u.y-a[1]))},MercatorProjection.prototype.latLngToTile=function(e,t){var n=1<<t,r=this,i=r.fromLatLngToPoint(e),s=new google.maps.Point(i.x*n,i.y*n);return new google.maps.Point(Math.floor(s.x/TILE_SIZE),Math.floor(s.y/TILE_SIZE))};function CanvasTileLayer(e,t){this.tileSize=new google.maps.Size(256,256),this.maxZoom=19,this.name="Tile #s",this.alt="Canvas tile layer",this.tiles={},this.canvas_setup=e,this.render=t,t||(this.render=e)}CanvasTileLayer.prototype.create_tile_canvas=function(e,t,n){var r=n.createElement("canvas"),i=n.createElement("canvas");r.style.border=i.style.border="none",r.style.margin=i.style.margin="0",r.style.padding=i.style.padding="0";var s=r.getContext("2d");s.width=r.width=this.tileSize.width,s.height=r.height=this.tileSize.height;var o=i.getContext("2d");i.width=o.width=this.tileSize.width,i.height=o.height=this.tileSize.height;var u=e.x+"_"+e.y+"_"+t;return r.setAttribute("id",u),i.setAttribute("id",u),u in this.tiles&&delete this.tiles[u],this.tiles[u]={canvas:r,ctx:s,hit_canvas:i,hit_ctx:o,coord:e,zoom:t,primitives:null},this.canvas_setup&&this.canvas_setup(this.tiles[u],e,t),r},CanvasTileLayer.prototype.each=function(e){for(var t in this.tiles){var n=this.tiles[t];e(n)}},CanvasTileLayer.prototype.recreate=function(){for(var e in this.tiles){var t=this.tiles[e];this.canvas_setup(t,t.coord,t.zoom)}},CanvasTileLayer.prototype.redraw_tile=function(e){this.render(e,e.coord,e.zoom)},CanvasTileLayer.prototype.redraw=function(){for(var e in this.tiles){var t=this.tiles[e];this.render(t,t.coord,t.zoom)}},CanvasTileLayer.prototype.getTile=function(e,t,n){return this.create_tile_canvas(e,t,n)},CanvasTileLayer.prototype.releaseTile=function(e){var t=e.getAttribute("id");delete this.tiles[t]};function CartoDB(e){this.options=e,this.projection=new MercatorProjection,this.shader=new CartoShader(this.options.shader||'{ point-color: "#000" }'),this.cache=localStorage,this.hit_shader=new CartoShader({"line-color":"#FFF","line-width":2,"polygon-fill":function(e,t){return"rgb("+Int2RGB(t.id).join(",")+")"}});if(!e.user||!e.table)throw Exception("CartoDB user and table must be specified");this.base_url="http://"+e.user+".cartodb.com/api/v2/sql",this._init_layer()}function test(){console.log("EYY")}function Renderer(){var e=this,t=this.primitive_render={Point:function(e,t){e.save();var n=2,r=t;e.translate(r.x,r.y),e.beginPath(),e.arc(n,n,n,0,Math.PI*2,!0),e.closePath(),e.fill(),e.stroke(),e.restore()},MultiPoint:function(e,n){var r=t.Point;for(var i=0;i<n.length;++i)r(e,zoom,n[i])},Polygon:function(e,t){e.beginPath();var n=t[0][0];e.moveTo(n.x,n.y);for(var r=0;r<t[0].length;++r)n=t[0][r],e.lineTo(n.x,n.y);e.closePath(),e.fill(),e.stroke()},MultiPolygon:function(e,n){var r=t.Polygon;for(var i=0;i<n.length;++i)r(e,n[i])}}}CartoDB.prototype.set_css=function(e){this.shader=new CartoShader(e),this.layer.redraw()},CartoDB.prototype.sql=function(e,t){var n=this;this.options.debug&&console.log(e),data=this.cache.getItem(e),$.getJSON(this.base_url+"?q="+encodeURIComponent(e)+"&format=geojson&dp=6",function(r){try{n.cache.setItem(e,JSON.stringify(r))}catch(i){}t(r)})},CartoDB.prototype.tile_data=function(e,t,n,r){var i=this.options,s=new MercatorProjection,o=s.tileBBox(e,t,n),u="the_geom",a;n>=17?a=u:n>=14?a='ST_SimplifyPreserveTopology("'+u+'",0.000001) as the_geom':n>=10?a='ST_SimplifyPreserveTopology("'+u+'",0.0001) as the_geom':n>=6?a='ST_SimplifyPreserveTopology("'+u+'",0.001) as the_geom':n>=4?a='ST_SimplifyPreserveTopology("'+u+'",1.0) as the_geom':a='ST_SimplifyPreserveTopology("'+u+'",4.0) as the_geom',a='ST_SimplifyPreserveTopology("'+u+'", 0.5) as the_geom',a=u;var f=[a].concat(i.columns).join(","),l="select "+f+" from "+i.table+" WHERE the_geom && ST_SetSRID(ST_MakeBox2D(";l+="ST_Point("+o[0].lng()+","+o[0].lat()+"),",l+="ST_Point("+o[1].lng()+","+o[1].lat()+")), 4326)",this.options.where&&(l+=" AND "+this.options.where),this.sql(l,r)},Renderer.prototype.render=function(e,t,n,r,i){var s=this.primitive_render;e.canvas.width=e.canvas.width;if(t.length)for(var o=0;o<t.length;++o){var u=s[t[o].geometry.type];if(u){var a={zoom:r,id:o};i.apply(e,t[o].properties,a),u(e,t[o].geometry.projected)}}},CartoDB.prototype.convert_geometry=function(e,t,n,r){function s(e,t,n,r){return e=new google.maps.LatLng(e[1],e[0]),i.projection.latLngToTilePoint(e,t,n,r)}var i=this,o=this.primitive_conversion={Point:function(e,t,n,r){return s(r,e,t,n)},MultiPoint:function(e,t,n,r){var i=[],s=o.Point;for(var u=0;u<r.length;++u)i.push(s(e,t,n,r[u]));return i},Polygon:function(e,t,n,r){var i=[];if(r.length===0)return[];for(var o=0;o<r[0].length;++o)i.push(s(r[0][o],e,t,n));return[i]},MultiPolygon:function(e,t,n,r){var i=[],s=o.Polygon;for(var u=0;u<r.length;++u){var a=s(e,t,n,r[u]);a.length>0&&i.push(a)}return i}},u=this.primitive_conversion[e.type];if(u)return u(n,r,t,e.coordinates)},CartoDB.prototype._init_layer=function(){var e=this,t=new Renderer;t.projection=e.projection,this.layer=new CanvasTileLayer(function(n,i,s){var o=n.ctx,u=n.hit_ctx;e.tile_data(i.x,i.y,s,function(a){var f=n.primitives=a.features;for(var l=0;l<f.length;++l){var c=f[l];c.geometry.projected===undefined&&(c.geometry.projected=e.convert_geometry(c.geometry,s,i.x,i.y))}t.render(o,f,i,s,e.shader),t.render(u,f,i,s,e.hit_shader)})})},CartoDB.prototype.geometry_at=function(e,t,n){var r=this,i=r.projection.latLngToTile(e,n);t=r.projection.fromLatLngToPoint(e);var s=i.x+"_"+i.y+"_"+n,o=r.layer.tiles[s];if(!o)return;var u=1<<n,a=new google.maps.Point(Math.floor(t.x*u%256),Math.floor(t.y*u%256)),f=o.hit_ctx,l=f.getImageData(a.x,a.y,1,1).data;if(l[3]!==0){var c=RGB2Int(l[0],l[1],l[2]);if(o.primitives&&o.primitives[c]){var h=o.primitives[c];return h}}},RGB2Int=function(e,t,n){return e+256*t+65536*n},Int2RGB=function(e){var t=e%256,n=parseInt(e/256)%256,r=parseInt(e/256/256)%256;return[t,n,r]};var GeoJSON=function(e,t){var n=function(e,t,i){var s;switch(e.type){case"Point":t.position=new google.maps.LatLng(e.coordinates[1],e.coordinates[0]),s=new google.maps.Marker(t),i&&s.set("geojsonProperties",i);break;case"MultiPoint":s=[];for(var o=0;o<e.coordinates.length;o++)t.position=new google.maps.LatLng(e.coordinates[o][1],e.coordinates[o][0]),s.push(new google.maps.Marker(t));if(i)for(var u=0;u<s.length;u++)s[u].set("geojsonProperties",i);break;case"LineString":var a=[];for(var o=0;o<e.coordinates.length;o++){var f=e.coordinates[o],l=new google.maps.LatLng(f[1],f[0]);a.push(l)}t.path=a,s=new google.maps.Polyline(t),i&&s.set("geojsonProperties",i);break;case"MultiLineString":s=[];for(var o=0;o<e.coordinates.length;o++){var a=[];for(var c=0;c<e.coordinates[o].length;c++){var f=e.coordinates[o][c],l=new google.maps.LatLng(f[1],f[0]);a.push(l)}t.path=a,s.push(new google.maps.Polyline(t))}if(i)for(var u=0;u<s.length;u++)s[u].set("geojsonProperties",i);break;case"Polygon":var h=[];for(var o=0;o<e.coordinates.length;o++){var a=[];for(var c=0;c<e.coordinates[o].length;c++){var l=new google.maps.LatLng(e.coordinates[o][c][1],e.coordinates[o][c][0]);a.push(l)}h.push(a)}t.paths=h,s=new google.maps.Polygon(t),i&&s.set("geojsonProperties",i);break;case"MultiPolygon":s=[];for(var o=0;o<e.coordinates.length;o++){var h=[];for(var c=0;c<e.coordinates[o].length;c++){var a=[];for(var u=0;u<e.coordinates[o][c].length;u++){var l=new google.maps.LatLng(e.coordinates[o][c][u][1],e.coordinates[o][c][u][0]);a.push(l)}h.push(a)}t.paths=h,s.push(new google.maps.Polygon(t))}if(i)for(var u=0;u<s.length;u++)s[u].set("geojsonProperties",i);break;case"GeometryCollection":s=[];if(!e.geometries)s=r('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');else for(var o=0;o<e.geometries.length;o++)s.push(n(e.geometries[o],t,i||null));break;default:s=r('Invalid GeoJSON object: Geometry object must be one of "Point", "LineString", "Polygon" or "MultiPolygon".')}return s},r=function(e){return{type:"Error",message:e}},i,s=t||{};switch(e.type){case"FeatureCollection":if(!e.features)i=r('Invalid GeoJSON object: FeatureCollection object missing "features" member.');else{i=[];for(var o=0;o<e.features.length;o++)i.push(n(e.features[o].geometry,s,e.features[o].properties))}break;case"GeometryCollection":if(!e.geometries)i=r('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');else{i=[];for(var o=0;o<e.geometries.length;o++)i.push(n(e.geometries[o],s))}break;case"Feature":!e.properties||!e.geometry?i=r('Invalid GeoJSON object: Feature object missing "properties" or "geometry" member.'):i=n(e.geometry,s,e.properties);break;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":i=e.coordinates?i=n(e,s):r('Invalid GeoJSON object: Geometry object missing "coordinates" member.');break;default:i=r('Invalid GeoJSON object: GeoJSON object must be one of "Point", "LineString", "Polygon", "MultiPolygon", "Feature", "FeatureCollection" or "GeometryCollection".')}return i};var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS",this.isValid(this)||(window.location="/html5")},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;this.versionSearchString=e[t].versionSearch||e[t].identity;if(n){if(n.indexOf(e[t].subString)!=-1)return e[t].identity}else if(r)return e[t].identity}},isValid:function(e){return location.search.indexOf("debug=true")!=-1?!0:e.browser=="Safari"&&e.version>3.2?!0:e.browser=="unknown"?!0:e.browser=="Firefox"&&e.version>3.5?!0:e.browser=="Chrome"&&e.version>3?!0:!1},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t==-1)return;return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();function App(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e[0]&&typeof e[0]=="string"?e:e[0],r,i,s,o;if(this instanceof App){if(!n||n==="*"){n=[];for(r in App.modules)App.modules.hasOwnProperty(r)&&n.push(r)}for(r=0;r<n.length;r+=1){i=n[r],App.modules[i](this);if(this[i].hasOwnProperty("submodules"))for(o in this[i].submodules)App.modules[i][this[i].submodules[o]](this)}return t(this),this}return new App(n,t)}$(function(){$(".read-more").on("click",function(e){e.preventDefault(),$("#read-more").modal({show:!0})})}),App.modules={},String.prototype.format=function(e,t,n){function r(){var r=this,s=arguments.length+1;for(e=0;e<s;n=arguments[e++])t=typeof n=="object"?JSON.stringify(n):n,r=r.replace(RegExp("\\{"+(e-1)+"\\}","g"),t);return r}return r.native=String.prototype.format,r}();/*
 =============================================
 log module wrapper
 =============================================
*/App.modules.Log=function(e){var t=function(){};t.prototype.error=function(){},t.prototype.log=function(){},typeof console!="undefined"?_console=console:_console=new t,window.onerror=function(t,n,r){e.Log.to_server(n+"("+r+"):"+t)},e.Log={error:function(){_console.error.apply(_console,arguments)},log:function(){_console.log.apply(_console,arguments)},debug:function(){_console.log.apply(_console,arguments)},to_server:function(){var e=[];jQuery.each(jQuery.browser,function(t,n){e.push(t+":"+n)}),$.post("/api/v0/error",e.join(",")+"=>"+Array.prototype.slice.call(arguments).join(""))}}};// application config
App.modules.Config=function(e){e.Config={API_URL:"/api/v0/m",LOCAL_STORAGE:!1,MAP_LAYERS:[]}};App.modules.Bus=function(e){e.Bus=Class.extend({init:function(){_.extend(this,Backbone.Events)},on:function(e,t){this.bind(e,t)},emit:function(){this.trigger.apply(this,arguments)},link:function(t,n){var r=this;_(n).each(function(n,i){var s=t[n];typeof s=="function"?r.on(i,s):e.Log.log("error finding: ",n)})},attach:function(e,t){var n=this;e.bind(t,function(){var e=Array.prototype.slice.call(arguments);n.emit.apply(n,[t].concat(e))})}})};/*
 ===============================================
 control map related things
 ===============================================
*/App.modules.Map=function(e){var t=Backbone.View.extend({el:$(".area_popup"),initialize:function(){_.bindAll(this,"show","hide"),this.map=this.options.mapview},show:function(e,t){var n=this,r=this.map.projector.transformCoordinates(e);this.set_pos(r),this.$("h1").html(t.zone),t.events?this.$("h2").html(t.events+" hotspots this month"):this.$("h2").html("no hotspots")},set_pos:function(e){this.el.css({top:e.y-20-50,left:e.x}),this.el.show()},hide:function(){this.el.hide()}});e.Map=Class.extend({init:function(n){_.bindAll(this,"enable_layer","reorder_layers","show_area_info","zoom_changed");var r=this;this.bus=n,this.map=new MapView({el:$(".map_container")}),this.popup=new t({mapview:this.map}),this.movement_timeout=-1,this.report_polygons={},this.month=0,_(e.Config.MAP_LAYERS).each(function(e){r.map.add_layer(e.name,e),r.map.enable_layer(e.name,e.enabled)}),this.layer_editor=new LayerEditor({el:$(".layers"),bus:n,layers:this.map.get_layers()}),this.layer_editor.bind("layer_changed",function(e){r.country_layer.tilemill.toggle(e)}),this.map.bind("changed:layers",function(){r.layer_editor.layers=r.map.get_layers(),r.layer_editor.render()}),this.map.bind("zoom_changed",this.zoom_changed),r.country_layer=new e.CountryLayer(r),r.country_layer.bind("mouse_on",this.show_area_info),r.country_layer.bind("mouse_out",r.popup.hide),r.map.bind("zoom_changed",r.popup.hide),r.grid_layer=new TimePlayer("global_32x"),r.map.add_layer("time",{name:"t"},{layer:r.grid_layer}),r.map.enable_layer("time",!0),r.show_controls(!1)},show_area_info:function(e,t){self=this;var n=t.properties.cumm,r=n&&n[self.month];this.popup.show(e.latLng,{zone:t.properties.name_1,events:r})},set_time:function(e){this.month=e,this.grid_layer.set_time(e)},center_map_on:function(e){var t=new google.maps.LatLngBounds;_(e.coordinates[0]).each(function(e){t.extend(new google.maps.LatLng(e[1],e[0]))}),this.map.map.fitBounds(t)},displace:function(e,t){var n=this.map.projector.transformCoordinates(this.map.get_center());n.x+=e,n.y+=t;var r=this.map.projector.untransformCoordinates(n);this.map.set_center(r)},zoom_changed:function(e){var t=this;console.log("zoom: ",e);var n=32,r="global_64x_grid";e==5?(n=32,r="global_32x_grid"):e==6?(n=16,r="global_16x_grid"):e==7?(n=8,r="global_8x_grid"):e>=8&&(n=4,r="global_4x_grid"),t.grid_layer.set_table(r,n),console.log("table_name: ",r)},enable_layer:function(e,t){this.map.enable_layer(e,t)},reorder_layers:function(e){this.map.reorder_layers(e),this.layer_editor.render()},show_country:function(e,t){this.country_layer.show_country(e,t),this.grid_layer.set_country_iso(t)},enter_on:function(e){},show_controls:function(e){e?this.map.show_controls():this.map.hide_controls()}})};// 
Projector=function(e){this.setMap(e),this.map=e},Projector.prototype=new google.maps.OverlayView,Projector.prototype.draw=function(){},Projector.prototype.transformCoordinates=function(e){return this.getProjection().fromLatLngToContainerPixel(e)},Projector.prototype.untransformCoordinates=function(e){return this.getProjection().fromContainerPixelToLatLng(e)};App.modules.Model=function(e){var t=Backbone.Model.extend({urlRoot:e.Config.API_URL,initialize:function(){}});e.Model=t};App.modules.CartoDB=function(e){function r(t,i,s){var o=n,u=!0;s&&(o="api/v0/proxy/"+n,u=!1),t.length>1500?$.ajax({url:o,crossDomain:u,type:"POST",dataType:"json",data:"q="+encodeURIComponent(t),success:i,error:function(){s?i():(e.Log.log("failed cross POST, using proxy"),r(t,i,!0))}}):$.getJSON(n+"?q="+encodeURIComponent(t)+"&callback=?").success(i).fail(function(){i()}).complete(function(){})}var t="wri-01.cartodb.com/api/v1/sql",n="https://"+t,i=localStorage||{setItem:function(e,t){},getItem:function(e){return null},removeItem:function(e){}},s=Backbone.Model.extend({_create_sql:function(){var e=" where {0} = '{1}'".format(this.what,this.get(this.what).replace("'","''")),t=[];for(var n in this.columns){var r=this.columns[n];r.indexOf("ST_")!==-1?t.push("ST_AsGeoJSON({1}) as {0}".format(n,r)):t.push("{1} as {0}".format(n,r))}var i="select "+t.join(",")+" from "+this.table+e;return i},_parse_columns:function(e){for(var t in e){var n=e[t],r=this.columns[t];r.indexOf("ST_")!==-1&&(e[t]=JSON.parse(n))}return e},fetch:function(){var t=this;e.CartoDB.query(this._create_sql(),function(e){t.set(t._parse_columns(e.rows[0]))})}}),o=Backbone.Collection.extend({_create_sql:function(){var e=this.table;_.isArray(this.table)||(e=[this.table]),e=e.join(",");var t="select "+this.columns.join(",")+" from "+e;return this.where&&(t+=" WHERE "+this.where),t},fetch:function(){var t=this,n=this.sql||this._create_sql();typeof n=="function"&&(n=n.call(this));var r=this.cache?i.getItem(n):!1;r?t.reset(JSON.parse(r)):e.CartoDB.query(n,function(e){if(this.cache)try{i.setItem(n,JSON.stringify(e.rows))}catch(r){}t.reset(e.rows)})}});e.CartoDB={query:r,CartoDBCollection:o,CartoDBModel:s}};App.modules.Country=function(e){var t=e.CartoDB.CartoDBModel.extend({table:"country_attributes_live",columns:{id:"cartodb_id",name:"name_engli",center:"ST_Centroid(the_geom)",bbox:"ST_Envelope(the_geom)",sqkm:"sqkm",unregion1:"unregion1",unregion2:"unregion2",cumm:"cumm",iso:"iso",total_incr:"total_incr",start_value:"start_value",description:"description"},what:"name_engli",center:function(){return c=this.get("center"),c?c:JSON.parse(this.get("the_geom")).coordinates},time_series:function(){return this.get("cumm")},time_series_deltas:function(){var e=this.time_series(),t=[];for(var n=2,r=e.length;n<r;++n)t.push(e[n]-e[n-1]);var i=function(e,t,n){return n<e?0:n>t?t:n},s=[],o=6;for(n=0,r=t.length;n<r;++n){var u=0;for(var a=0;a<o;++a)u+=t[i(0,r-1,n+a-(o/2>>0))];s.push(1e5*u/(o*this.get("sqkm")))}return this._time_series_deltas=s,s},slug:function(){return this.get("name_engli")},max_deforestation:function(){return _.max(this.time_series())},gen_normalized_deforestation:function(e){this.set({time_series_normalized:_(this.time_series()).map(function(t){return t/e})})},def_percent_in_month:function(e){return Math.sqrt(this.get("time_series_normalized")[e])*100},change_since:function(e,t){var n=this.time_series(),r=n[Math.max(0,e)],i=n[t];return(i-r)/r}}),n=e.CartoDB.CartoDBCollection.extend({cache:!0,initialize:function(){this.bind("reset",function(){this.each(function(e){e.set({bbox:JSON.parse(e.get("bbox"))},{silent:!0})})})},sql:function(){var e="WITH foo AS (SELECT ST_AsGeoJSON(ST_Centroid(ST_Envelope(admin1_attributes_live.the_geom))) as center, ST_AsGeoJSON(ST_Envelope(admin1_attributes_live.the_geom)) as bbox, name_1 as name, id1 FROM admin1_attributes_live WHERE admin1_attributes_live.iso = '{0}') SELECT center, bbox, foo.name, foo.id1, sum(global_4x_grid.total_incr) as total FROM foo,global_4x_grid WHERE global_4x_grid.iso='{0}' AND global_4x_grid.id1 = foo.id1 group by foo.id1, foo.name, center, bbox ORDER BY total DESC";return e.format(this.country_iso)},set_iso:function(e){this.country_iso=e},normalize:function(){var e=this.map(function(e){return e.get("total")}),t=_.max(e);t>0&&this.each(function(e){e.set({normalized:e.get("total")/t})})}}),r=e.CartoDB.CartoDBCollection.extend({model:t,table:"country_attributes_live",columns:["unregion1","unregion2","name_engli","cumm","sqkm","total_incr","start_value","iso","ST_AsGeoJSON(ST_Centroid(the_geom)) as the_geom"],where:"start_value is not NULL",cache:!0,initialize:function(){this.bind("reset",this.normalize_deforestation)},inside:function(e){return _.isArray(e)||(e=[e]),this.filter(function(t){return _.indexOf(e,t.get("unregion1"))>=0})},normalize_deforestation:function(){var e=this.map(function(e){return e.max_deforestation()}),t=_.max(e);this.each(function(e){e.gen_normalized_deforestation(t)})},next_country:function(e){var t=this.models;for(var n=0;n<t.length;++n){var r=t[n];if(r.get("name_engli")===e){var i=n-1;i<0&&(i+=t.length),i%=t.length;var s=(n+1)%t.length;return[t[i],t[s]]}}return null}});e.Country=t,e.Countries=r,e.Regions=n};App.modules.Stories=function(e){var t=Backbone.View.extend({tagName:"li",initialize:function(){this.template_id=this.options.template_id||"#story-template"},render:function(){var e=_.template($(this.template_id).html());return $(this.el).html(e(this.model.toJSON())),this}}),n=Backbone.View.extend({initialize:function(){this.stories=this.options.stories,this.stories.bind("reset",this.render,this)},render:function(){var e=this.stories.map(function(e){return{name:e.get("title"),url:e.get("viewport")}});this.el.dropdown({source:e})}}),r=e.CartoDB.CartoDBCollection.extend({table:"geostories",columns:["iso","text","title","picture_url","picture_large_url","name_engli","viewport"],cache:!0,random:function(e){var t=this.models;return _(_.shuffle(_.range(this.models.length)).slice(0,e)).map(function(e){return t[e]})}});e.Stories=r,e.StoryView=t,e.StoryListView=n};/**
 * bubbels map
 */App.modules.MainMap=function(e){var t=1100,n=562;merc=d3.geo.mercator().scale(1100).translate([(t>>1)-60,(n>>1)+30]);var r=Class.extend({init:function(e){_.bindAll(this,"render","set_time","update"),this.month=0,this.countries=e,this.countries.bind("reset",this.render)},def_to_size:function(e){return 2+Math.pow(e,.5)*2},update:function(){var e=this,t=e.countries_data,n=Math.abs,r=e.month,i=.03,s=this.svg.selectAll("g.node").attr("transform",function(n){var s=n.pos,o=e.def_to_size(n.time_series_deltas()[r]),u=!1;for(var a=0,f=t.length;a<f;++a){var l=t[a];if(n.cid!==l.cid){var c=l.pos,h=s[0]-c[0],p=s[1]-c[1],d=Math.sqrt(h*h+p*p),v=e.def_to_size(l.time_series_deltas()[r]),m=o+v+2,g=(d-m)/d;if(d<=m){var y=o/m,b=v/m;s[0]-=i*b*g*h,s[1]-=i*b*g*p,c[0]+=i*y*g*h,c[1]+=i*y*g*p,u=!0}}}if(!u){var w=merc(n.center());s[0]+=(w[0]-s[0])*2*i,s[1]+=(w[1]-s[1])*2*i}return"translate("+s.join(",")+")"})},set_time:function(e){var t=this;if(e===this.month)return;var n=this.countries;this.month=e;var r=this.svg.selectAll("g.node").select("circle").transition().duration(500).ease("cubic").attr("r",function(n){return t.def_to_size(n.time_series_deltas()[e])});r=this.svg.selectAll("g.node").select("text.small").text(function(t){var n=t.time_series_deltas();return e==0?"":n[e]-n[e-1]>0?"going up":"going down"})},render:function(){var e=this,r=this.countries,i=d3.select(".bubble_map").append("svg:svg").attr("width",t).attr("height",n);this.countries_data=r.filter(function(e){return e.get("cumm")}),this.svg=i;var s=i.selectAll("g.node").data(this.countries_data).enter().append("g").attr("class","node").attr("transform",function(e){var t=e.center(),n=merc(t);return e.pos=n,"translate("+n.join(",")+")"});s.append("circle").attr("r",function(t){return e.def_to_size(t.time_series_deltas()[e.month])}),s.append("a").attr("xlink:href",function(e){return"/country#"+e.slug()}).append("text").attr("width",100).attr("text-anchor","middle").each(function(e){var t=this,n=e.get("name_engli").toUpperCase().split(" ");e.words=n.length;var r=(e.words-1)*26/2;_.each(n,function(e,n){d3.select(t).append("tspan").attr("y",26*n-r).attr("x","0").text(e)});var i=t.getBBox().height}),s.append("text").attr("text-anchor","middle").attr("class","small").each(function(e){d3.select(this).attr("transform","translate (0, "+e.words*14+")").text("GOING UP")}),setInterval(this.update,30),s.selectAll("text").style("display","none"),i.selectAll("g.node").on("mouseover",function(e,t){var n=e.center(),r=d3.select(this);i.selectAll("g.node").sort(function(t,n){return t.cid==e.cid?1:n.cid==e.cid?-1:0}),d3.select(this).transition().select("circle").attr("r",100),d3.select(this).selectAll("text").style("display","block").transition().delay(100).style("opacity",1)}).on("mouseout",function(t,n){d3.select(this).transition().select("circle").attr("r",function(t){return e.def_to_size(t.time_series_deltas()[e.month])}),d3.select(this).selectAll("text").transition().delay(100).style("opacity",0).each("end",function(){d3.select(this).style("display","none")})})}});_.extend(r.prototype,Backbone.Event),e.MainMap=r};/*
 ===============================================
 information panel control
 ===============================================
*/App.modules.StatsPanel=function(e){var t=Backbone.View.extend({initialize:function(){},set_info:function(e){var t=this.$(".info");t.html("");for(var n in e){var r="<dl><DT>"+n;r+="<DD>"+e[n]+"</dl>",t.append(r)}}});e.StatsPanel=t};App.modules.State=function(e){e.State=Backbone.Model.extend({initialize:function(){},set_router:function(e){var t=this;t.router=e},save:function(){this.serialize()},fetch:function(t){var n=this;if(t){var r;try{r=atob(t)}catch(i){e.Log.error("error parsing state");return}n.set(JSON.parse(r))}},serialize:function(){var e=this,t=JSON.stringify(this.toJSON()),n=location.hash.replace(/\/s\/[a-zA-Z0-9=]+/,"");e.router.navigate(n+"/s/"+btoa(t),!1)}})};/**
 * quick'n'dirty tilemill on top of cartodb
 */var MiniTilemill=function(e,t){this.layers={},this.user_name=e,this.map=t,this.use_cartodb_styles=!1};MiniTilemill.prototype.addLayer=function(e,t,n,r){var i=new CartoDBLayer(this.user_name,r,t,e);return this.layers[n]=i,this.map.add_layer(n,{name:t,enabled:!0},i),i},MiniTilemill.prototype.toggle=function(e){var t=this.layers[e];t.show(!t.showing)},MiniTilemill.prototype.update_layers=function(){for(var e in this.layers)this.map.update_layer(e)},App.modules.CountryLayer=function(e){var t=Class.extend({LEVEL_COUNTRY:1,LEVEL_REGION:2,init:function(e){_.bindAll(this,"mousemove","map_click");var t=this;t.level=this.LEVEL_COUNTRY,t.state=[],t.map=e,t.zoom_country=8,this.tilemill=new MiniTilemill("wri-01",e.map);var n=new CartoDB({user:"wri-01",table:"admin1_attributes_live",columns:["iso","shape_area","cartodb_id","cumm"],debug:!1,where:"forma=true",shader:{"point-color":"#fff","line-color":"rgba(0,0,0,0)","line-width":"0","polygon-fill":"rgba(255,255, 255,0.01)"}});e.map.add_layer("vector0",{name:"v0",enabled:!0},n),t.layer=n,this.pas_layer=this.tilemill.addLayer(null,"selected_countries_pas","Protected Areas"),this.rivers=this.tilemill.addLayer(null,"rivers","Rivers"),this.country_border=this.tilemill.addLayer($("#border_style").html(),"country_attributes_live","Borders","select 0 as lid,'dummy' as name_1, 0 as shape_area, the_geom_webmercator from country_attributes_live limit 1"),this.places=this.tilemill.addLayer(null,"places","Populated places"),this.map.map.bind("mousemove",this.mousemove),this.map.map.bind("click",this.map_click),this.map.map.bind("zoom_changed",function(e){e<=t.zoom_country&&t.enable_map_interaction()})},map_click:function(e){var t=this,n=t.layer.geometry_at(e.latLng,e.point,t.map.map.get_zoom());if(n){var r=n.geometry,i=new GeoJSON(r);i.length||(i=[i]);var s=new google.maps.LatLngBounds;_(i).each(function(e){e.getPath().forEach(function(e,t){s.extend(e)})}),t._enter(s,n)}},get_country_zoom:function(e){var t=new google.maps.LatLngBounds;_(e.coordinates[0]).each(function(e){t.extend(new google.maps.LatLng(e[1],e[0]))});var n=256,r=t.getSouthWest().lat(),i=t.getNorthEast().lat(),s=i-r;s<0&&(s+=360);var o=$(this.map.map.map.getDiv()).height(),u=Math.round(Math.log(o*180/s/n)/Math.LN2);return u},show_country:function(e,t){var n=this;n.zoom_country=n.get_country_zoom(e.get("bbox")),n.map.map.set_min_zoom(n.zoom_country),console.log("country zoom",n.zoom_country),_.extend(n.layer.options,{where:"name_0 = '{0}'".format(e.get("name_engli").replace("'","''")),table:"admin1_attributes_live",columns:["name_0","name_1","cartodb_id","cumm"]}),n.map.enable_layer("vector0",!0),n.layer.layer.redraw();var r="select 0 as lid, the_geom_webmercator, 'dummy' as name_1, 0 as shape_area from country_attributes_live where iso = '{0}'";r+=" UNION ",r+="select 1 as lid, the_geom_webmercator, name_1, shape_area from admin1_attributes_live where iso = '{0}'",r=r.format(t),n.country_border.update(r),r="select the_geom_webmercator, is_point from selected_countries_pas where iso = '{0}'",r=r.format(t),n.pas_layer.update(r),r="SELECT rivers.the_geom_webmercator, scalerank FROM rivers, simple_countries where ST_Intersects(rivers.the_geom,simple_countries.the_geom) and simple_countries.iso = '{0}'".format(t),n.rivers.update(r),r="select the_geom_webmercator, name, pop_max from places where iso='{0}' order by gn_pop limit 20".format(t),n.places.update(r),this.tilemill.update_layers(),this.enable_map_interaction()},enable_map_interaction:function(){this.map.map.unbind("mousemove",this.mousemove),this.map.map.bind("mousemove",this.mousemove),this.map.map.unbind("click",this.map_click),this.map.map.bind("click",this.map_click)},disable_map_interaction:function(){this.map.map.unbind("mousemove",this.mousemove),this.map.map.unbind("click",this.map_click)},_enter:function(e,t){this.level==this.LEVEL_COUNTRY&&(this.map.map.map.fitBounds(e),this.disable_map_interaction(),this.map.displace(250,0)),this.remove_hover()},mousemove:function(e){var t=this,n=t.layer.geometry_at(e.latLng,e.point,t.map.map.get_zoom());if(n){if(t.current_geom==n.properties.cartodb_id)return;t.trigger("mouse_on",e,n);var r=t.current_geom=n.properties.cartodb_id,i=n.geometry;this.show_hover(i)}else t.remove_hover(),t.current_geom=null,t.trigger("mouse_out")},show_hover:function(e){var t=this,n={strokeColor:"#FFFFFF",strokeOpacity:.8,strokeWeight:6,fillColor:"#FFF366",fillOpacity:0,clickable:!1};t.remove_hover(),t.vec=new GeoJSON(e,n),t.vec.length||(t.vec=[t.vec]),t.vec.forEach(function(e){e.setMap(t.map.map.map)})},remove_hover:function(){var e=this;e.vec&&e.vec.forEach(function(e){e.setMap(null)})}});_.extend(t.prototype,Backbone.Events),e.CountryLayer=t};App.modules.Search=function(e){var t=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","set_time"),this.countries=this.options.countries,this.countries.bind("reset",this.render),this.el.autocomplete({source:[],minLength:2,url:"/country#"})},set_time:function(e){this.month=e,this.render()},render:function(){var e=this,t=this.countries.map(function(t){return{label:t.get("name_engli"),per:t.def_percent_in_month(e.month)}});this.el.autocomplete("option","source",t)}});e.Search=t};/*
 ====================
 this class renders deforestation data in a given time
 ====================
*/function TimePlayer(e){this.time=0,this.canvas_setup=this.get_time_data,this.render=this.render_time,this.cells=[],this.table=e,this.base_url="http://sql.wri-01.cartodb.com/api/v2/sql"}function meterToPixels(e,t,n){var r=initialResolution/(1<<n),i=(e+originShift)/r,s=(t+originShift)/r;return[i,s]}function meterToPixelsDist(e,t,n){var r=initialResolution/(1<<n),i=e/r,s=t/r;return[i,s]}TimePlayer.prototype=new CanvasTileLayer,TimePlayer.prototype.set_time=function(e){this.time=e,this.redraw()},TimePlayer.prototype.set_table=function(e,t){if(this.table===e)return;this.table=e,this.pixel_size=t,this.recreate(),this.redraw()},TimePlayer.prototype.set_country_iso=function(e){this.country=e,this.recreate(),this.redraw()},TimePlayer.prototype.sql=function(e,t){var n=this;$.getJSON(this.base_url+"?q="+encodeURIComponent(e),function(e){t(e)})},TimePlayer.prototype.pre_cache_months=function(e){var t,n=[],r;for(var i in e){t=e[i];var s=[],o=t.cummulative,u=this.pixel_size*this.pixel_size,a=u>>4;for(r=0,l=o.length;r<l;++r)o[r]-o[0]>a?s[r]=1+(3*((o[r]-o[0])/(u-o[0]))>>0):s[r]=0;var f=t.time_series,c=t.time_series,h=-10;c[0]=0,c[1]=0;for(r=2;r<f.length;++r)f[r]>0&&(h=r),c[r]=0,s[r]>0&&(c[r]=Math.max(0,3-(r-h)));n[i]={x:t.upper_left_x,y:t.upper_left_y,w:t.cell_width,h:t.cell_width,months_accum:s,months:t.time_series}}return n},TimePlayer.prototype.get_time_data=function(e,t,n){var r=this;if(!r.table||!r.country)return;var i=new MercatorProjection,s=i.tileBBox(t.x,t.y,n),o="SELECT upper_left_x, upper_left_y, cell_width, cummulative, time_series FROM "+this.table;o+=" WHERE iso = '{0}'".format(r.country),o+=" AND {0}.the_geom && ST_SetSRID(ST_MakeBox2D(".format(r.table),o+="ST_Point("+s[0].lng()+","+s[0].lat()+"),",o+="ST_Point("+s[1].lng()+","+s[1].lat()+")), 4326)",this.sql(o,function(t){e.cells=r.pre_cache_months(t.rows),r.redraw_tile(e)})};var originShift=2*Math.PI*6378137/2,initialResolution=2*Math.PI*6378137/256;TimePlayer.prototype.render_time=function(e,t,n){var r=new MercatorProjection,i=1+this.time>>0,s=e.canvas.width,o=e.canvas.height,u=e.ctx,a,f,l,c,h,p,d,v=256<<n,m=e.cells;if(!m||m.length===0)return;var g,y,c,h;e.canvas.width=s,u.fillStyle="#000",y=r.tilePoint(t.x,t.y,n);var b=["rgba(84, 48, 59, 0.6)","rgba(104, 48, 59, 0.6)","rgba(170, 52, 51, 0.6)","rgba(255, 51, 51, 0.9)"],w=0,E;d=meterToPixelsDist(m[0].w,m[0].w,n);for(f=0;f<m.length;++f){g=m[f],w=0,pixels=meterToPixels(g.x,g.y,n),pixels[1]=v-pixels[1],c=pixels[0]-y[0],h=pixels[1]-y[1],E="rgba(255, 255, 255, 1.0)";if(g.months){var S=g.months[i],x=g.months_accum[i];S===3&&(w=1);if(x===0)continue;E=b[Math.max(0,Math.min(3,x+S))]}var T=d[0]>>0;T+=w,u.fillStyle=E,u.fillRect(c,h,T,T)}};/*
 ===========================================
 generic tool for polygon drawing over google maps map
 ===========================================
*/var PolygonDrawTool=Backbone.View.extend({initialize:function(){_.bindAll(this,"add_vertex","create_polygon","reset","editing_state","_add_vertex","edit_polygon"),this.mapview=this.options.mapview,this.map=this.mapview.map,this.listeners=[],this.reset(),this.image=new google.maps.MarkerImage("/img/sprite.png",new google.maps.Size(13,13),new google.maps.Point(457,1234),new google.maps.Point(6,6))},editing_state:function(e){this.reset(),this.mapview.unbind("click",this.add_vertex),e&&this.mapview.bind("click",this.add_vertex)},reset:function(){var e=this;this.polyline!==undefined&&(_(this.listeners).each(function(e){google.maps.event.removeListener(e)}),this.listeners=[],this.polyline.setMap(null),delete this.polyline,this.polygon.setMap(null),delete this.polygon),this.markers!==undefined&&_.each(this.markers,function(e){e.setMap(null)}),this.markers=[],this.vertex=[],this.polyline=new google.maps.Polygon({path:[],strokeColor:"#FFF",strokeOpacity:1,fillOpacity:.3,fillColor:"#66CCCC",strokeWeight:1,map:this.map}),this.polygon=new google.maps.Polygon({path:[],strokeColor:"#DC143C",strokeOpacity:.8,strokeWeight:0,map:this.map}),this.listeners.push(google.maps.event.addListener(this.polygon,"click",function(t){e.trigger("polygon_click",this,this.getPath(),t.latLng)})),this.listeners.push(google.maps.event.addListener(this.polyline,"mouseover",function(t){e.trigger("mouseover",this,t)})),this.listeners.push(google.maps.event.addListener(this.polyline,"mouseout",function(t){e.trigger("mouseout",this,t)})),this.listeners.push(google.maps.event.addListener(this.polyline,"mousemove",function(t){e.trigger("mousemove",this,t)}))},edit_polygon:function(e){var t=this;t.reset();var n=_.map(e,function(e){return _.map(e,function(e){return new google.maps.LatLng(e[0],e[1])})});t.polyline.setPaths(n),t.polyline.setMap(t.map),_.each(e,function(n,r){_.each(n,function(n,i){var s=new google.maps.Marker({position:new google.maps.LatLng(n[0],n[1]),map:t.map,icon:t.image,draggable:!0,flat:!0,raiseOnDrag:!1});s.path_index=r,s.index=i,t.markers.push(s),google.maps.event.addListener(s,"dragstart",function(e){t.trigger("dragstart")}),google.maps.event.addListener(s,"drag",function(e){t.polyline.getPath(this.path_index).setAt(this.index,e.latLng)}),google.maps.event.addListener(s,"dragend",function(t){e[this.path_index][this.index]=[t.latLng.lat(),t.latLng.lng()]})})})},_add_vertex:function(e){var t=new google.maps.Marker({position:e,map:this.map,icon:this.image,draggable:!1});return t.index=this.vertex.length,this.markers.push(t),this.vertex.push(e),this.polyline.setPath(this.vertex),this.polygon.setPath(this.vertex),t},add_vertex:function(e){var t=e.latLng,n=this._add_vertex(t),r=this;this.vertex.length===1&&(r.trigger("first_vertex"),google.maps.event.addListener(n,"click",function(){r.vertex.length>=3&&(r.create_polygon(r.vertex),r.reset())}))},create_polygon:function(e){var t=_.map(e,function(e){return[e.lat(),e.lng()]});this.trigger("polygon",{paths:[t]})}}),PolygonDrawEditTool=PolygonDrawTool.extend({initialize:function(){this.constructor.__super__.initialize.call(this),this.final_polygon=new google.maps.Polygon({path:[],strokeColor:"#0099CC",strokeOpacity:1,fillColor:"rgba(102, 204, 204, 0.3)",fillOpacity:.5,strokeWeight:1,map:this.map})},editing_state:function(e){e?this.mapview.bind("click",this.add_vertex):(this.reset(),this.final_polygon.setPath([]),this.mapview.unbind("click",this.add_vertex))},add_vertex:function(e){this.final_polygon.setPath([]);var t=e.latLng,n=this._add_vertex(t),r=this;this.vertex.length===1&&google.maps.event.addListener(n,"click",function(){r.create_polygon(r.vertex)})},create_polygon:function(e){this.final_polygon.setPath(this.polyline.getPath()),this.reset();var t=_.map(e,function(e){return[e.lat(),e.lng()]});this.trigger("polygon",{path:t})}});var Layer=Backbone.View.extend({template:_.template('<a href="#"><%= name %></a>'),tagName:"li",events:{click:"toggle"},initialize:function(e){var t=this;this.layer=this.options.layer},render:function(){var e=$(this.el),t=_.extend(this.layer,{normalized_name:this.layer.name.replace(" ","_")});return e.html(this.template(t)).addClass("sortable").attr("id",this.layer.name),this.layer.enabled&&e.addClass("enabled"),this},toggle:function(e){e.preventDefault();var e=!this.layer.showing,t=$(this.el);e?t.addClass("enabled"):t.removeClass("enabled"),this.trigger("changed",this.layer.name)},close:function(){this.unbind(),this.remove()}}),LayerEditor=Backbone.View.extend({events:{click:"open"},initialize:function(){var e=this;this.layers=this.options.layers,this.open=!1,this.views={},this.render()},render:function(e,t){var n=this,r=this.$("ul");return _(this.layers).each(function(e){if(e.editable){var t=n.views[e.name];t&&t.close(),t=new Layer({layer:e}),t.bind("changed",function(e){n.trigger("layer_changed",e)}),n.views[e.name]=t,r.append(t.render().el)}}),this},sortLayers:function(){var e=[];this.$("li").each(function(t,n){e.push($(n).attr("id"))}),this.trigger("layers_changed")},open:function(e){e&&e.preventDefault(),this.el.addClass("open"),this.el.css("z-index","100"),this.open=!0},close:function(e){this.el.removeClass("open"),this.el.css("z-index","10"),this.open=!1},sort_by:function(e){this.layers.sort(function(t,n){return _(e).indexOf(t.name)-_(e).indexOf(n.name)}),this.open=!0}});/**
 * footer slider
 */var Slider=Backbone.View.extend({START:new Date(2006,0,1),initialize:function(){_.bindAll(this,"startDrag","onDrag","endDrag");var e=this;this.el.wriSlider({start:"February 1, 2006 00:00:00",end:"January 1, 2012 00:00:00",value:"January 1, 2012 00:00:00"}),this.dragging=!1,this.marker=this.$(".marker"),this.el.bind("change.wriSlider",function(t,n){var r=e.START,i=new Date(n),s=12*(i.getFullYear()-r.getFullYear())+i.getMonth();e.trigger("change",s>>0)})},month_to_date:function(e){var t=e%12,n=e/12>>0;return new Date(this.START.getFullYear()+n,this.START.getMonth()+t,1)},stop:function(){this.el.wriSlider("stop")},set_time:function(e){var t=this,n=this.month_to_date(e);t.el.wriSlider("update",n.getTime())},startDrag:function(e){return this.dragging=!0,this.startPos=this.marker.position(),this.startMousePos=e.clientX,$(document).mousemove(this.onDrag),$(document).mouseup(this.endDrag),!1},onDrag:function(e){if(!this.dragging)return;var t=this.el.width(),n=e.clientX-this.startMousePos,r=this.startPos.left+n;return r=Math.max(0,r),r=Math.min(t-this.marker.width(),r),this.marker.css({left:r}),this.trigger("change",r/t),!1},endDrag:function(e){return this.dragging=!1,$(document).unbind("mousemove",this.onDrag),$(document).unbind("mouseup",this.onDrag),!1}}),HTML5Slider=Backbone.View.extend({events:{change:"slide"},initialize:function(){_.bind(this,"slide","set_values")},slide:function(e){this.trigger("change",this.el.val())},set_value:function(e){this.el.slider("value",0,low)}});/**
 * graph shown in the country page
 */var Graph=Backbone.View.extend({initialize:function(){this.w=500,this.h=160;var e=d3.select(this.el[0]).append("svg").attr("width",this.w).attr("height",this.h);this.vis=e,this.month=10},set_country:function(e){this.time_series=e.time_series_deltas(),this.render()},date_range:function(){var e=(new Date(2006,0,1)).getTime(),t=(new Date).getTime()-e;return t/2592e6>>0},set_time:function(e){var t=this;this.month=e;var n=this.time_series,r=this.x_scale,i=this.y_scale;this.vis.select(".time_line").attr("x1",r(this.month)).attr("y1",0).attr("x2",r(this.month)).attr("y2",-1*this.h),this.vis.select(".time_circle").attr("cx",r(this.month)).attr("cy",function(e){return-1*i(n[t.month])})},render:function(){var e=this,t=this.time_series;this.vis.selectAll().remove();var n=this.vis.append("svg:g").attr("transform","translate(0, "+this.h+")"),r=d3.scale.linear().domain([0,d3.max(t)]).range([0,this.h-30]),i=d3.scale.linear().domain([0,e.date_range()]).range([0,this.w]);this.x_scale=i,this.y_scale=r;var s=d3.svg.line().x(function(e,t){return i(t)}).y(function(e){return-1*r(e)});n.append("svg:path").attr("d",s(t)).style("stroke","#FF2222").style("fill","none").style("stroke-width",2),n.append("svg:line").attr("class","time_line").style("stroke","#FF2222").style("stroke-dasharray","5,5").style("fill","none").style("stroke-width",1).attr("x1",i(this.month)).attr("y1",0).attr("x2",i(this.month)).attr("y2",-1*this.h),n.append("svg:circle").attr("class","time_circle").style("fill","#FF2222").attr("cx",i(this.month)).attr("cy",function(n){return-1*r(t[e.month])}).attr("r",3)}});//=======================================
// map layer
//
//  a map layer is defined by its name and its source
//=======================================
// base tile layer
function CoordMapType(){}CoordMapType.prototype.tileSize=new google.maps.Size(256,256),CoordMapType.prototype.maxZoom=8,CoordMapType.prototype.minZoom=5,CoordMapType.prototype.getTile=function(e,t,n){var r=new Image,i="http://wri-basemap.s3.amazonaws.com/tiles/{z}/{x}/{y}.png",s=1<<t;return r.src=i.replace("{x}",e.x).replace("{y}",s-e.y-1).replace("{z}",t),r},CoordMapType.prototype.name="Tile #s",CoordMapType.prototype.alt="Tile Coordinate Map Type";var MapView=Backbone.View.extend({mapOptions:{zoom:5,center:new google.maps.LatLng(-22.616552001620068,14.735100097651177),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggableCursor:"default",scrollwheel:!1,mapTypeControl:!1},events:{"click .zoom_in":"zoom_in","click .zoom_out":"zoom_out","click .fullscreen":"fullscreen"},initialize:function(){_.bindAll(this,"center_changed","ready","click","set_center","zoom_changed","zoom_in","zoom_out","adjustSize","set_zoom_silence","set_center_silence");var e=this;this.layers={},this.hide_controls(),this.map=new google.maps.Map(this.$(".map")[0],this.mapOptions);var t=new CoordMapType;this.coordinateMapType=t,this.map.mapTypes.set("coordinate",t),this.map.setMapTypeId("coordinate"),google.maps.event.addListener(this.map,"center_changed",this.center_changed),google.maps.event.addListener(this.map,"zoom_changed",this.zoom_changed),google.maps.event.addListener(this.map,"click",this.click),google.maps.event.addListener(this.map,"mousemove",function(t){e.trigger("mousemove",t)}),this.projector=new Projector(this.map),this.projector.draw=this.ready,this.signals_on=!0,setTimeout(function(){$(".map").find('img[src="http://maps.gstatic.com/mapfiles/google_white.png"]').closest("a").hide(),$(".map").find('a:contains("Terms of Use")').closest("div").hide()},2e3),$(document).scroll(function(e){$(this).scrollTop()>142?$("body").hasClass("scrolled")||$("body").addClass("scrolled"):$("body").hasClass("scrolled")&&$("body").removeClass("scrolled")})},adjustSize:function(){google.maps.event.trigger(this.map,"resize")},fullscreen:function(){return this.trigger("fullscreen"),!1},hide_controls:function(){this.$(".layer_editor").hide(),this.$(".zoom_control").hide()},show_zoom_control:function(){this.$(".zoom_control").show()},hide_zoom_control:function(){this.$(".zoom_control").hide()},show_layers_control:function(){this.$(".layer_editor").show()},hide_layers_control:function(){this.$(".layer_editor").hide()},show_controls:function(){this.$(".layer_editor").show(),this.$(".zoom_control").show()},center_changed:function(){this.signals_on&&this.trigger("center_changed",this.map.getCenter())},zoom_in:function(e){e.preventDefault(),this.map.setZoom(this.map.getZoom()+1)},zoom_out:function(e){e.preventDefault();var t=this.map.getZoom()-1;t>=this.coordinateMapType.minZoom&&this.map.setZoom(t)},zoom_changed:function(){var e=this.map.getZoom();this.signals_on&&this.trigger("zoom_changed",e),this.$(".zoom_in").css({opacity:1}),this.$(".zoom_out").css({opacity:1}),e==this.coordinateMapType.minZoom?this.$(".zoom_out").css({opacity:.2}):e==this.coordinateMapType.maxZoom&&this.$(".zoom_in").css({opacity:.2})},set_min_zoom:function(e){this.coordinateMapType.minZoom=e,e==this.coordinateMapType.minZoom&&this.$(".zoom_out").css({opacity:.2})},set_center:function(e,t){this.signals_on=t===undefined?!0:t,this.map.setCenter(e),this.signals_on=!0},set_center_silence:function(e){this.set_center(e,!1)},get_center:function(){return this.map.getCenter()},set_zoom:function(e,t){this.signals_on=t===undefined?!0:t,this.map.setZoom(e),this.signals_on=!0},get_zoom:function(){return this.map.getZoom()},set_zoom_silence:function(e){this.set_zoom(e,!1)},click:function(e){this.trigger("click",e)},crosshair:function(e){var t=this.$(".crosshair");e?t.show():t.hide()},ready:function(){this.projector.draw=function(){},this.trigger("ready")},add_layer:function(e,t,n){n.name=e,n.enabled=!0,this.layers[e]=n,this.reorder_layers(),this.trigger("changed:layers")},get_layers:function(){return this.layers},update_layer:function(e){var t=this.layers[e];this.map.overlayMapTypes.setAt(t.idx,t.layer)},enable_layer:function(e,t){var n=this.layers[e];n.enabled=t,this.map.overlayMapTypes.setAt(n.idx,t?n.layer:null)},toggle_layer:function(e){this.enable_layer(e,!this.layers[e].enabled)},reorder_layers:function(e){var t=this,n=0;t.map.overlayMapTypes.clear(),_(t.layers).each(function(e){e.enabled&&(t.map.overlayMapTypes.setAt(n,e.layer),e.idx=n),n++})},remove_layer:function(e){}});/*
 ===============================================
 main enter point
 ===============================================
*/App.modules.WRI=function(e){function n(e,t){for(var n in t)e=e.replace(new RegExp("{"+n+"}","g"),t[n]);return e}var t=Backbone.Router.extend({routes:{":country":"country",":country/s/*state":"country"},country:function(t,n){e.Log.log("route: country"+t+" "+n)}}),r=Backbone.View.extend({tagName:"li",events:{"click .region":"click"},initialize:function(){},click:function(e){e.preventDefault(),this.trigger("move_to",this.model)},render:function(){var e=this.model;return $(this.el).html('<a href="#" class="region">{0}<span style="width:{1}%" class="bar"></span></a></li>'.format(e.get("name"),70*e.get("normalized"))),this},close:function(){this.unbind(),this.remove()}}),i=Backbone.View.extend({START:new Date(2006,0,1),MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],events:{},initialize:function(){this.showing=!0,this.template=this.el.html(),this.model.bind("change",this.render,this),this.stories=this.options.stories,this.regions=new e.Regions,this.regions.bind("reset",this.render_regions,this),this.model.bind("change",function(){this.regions.set_iso(this.model.get("iso")),this.regions.fetch()},this),this.time=0,this.regions_views=[]},set_time:function(e){this.time=e,this.graph.set_time(e),this.set_headlines()},month_to_date:function(e){var t=e%12,n=e/12>>0;return new Date(this.START.getFullYear()+n,this.START.getMonth()+t,1)},set_headlines:function(){var e=100*this.model.change_since(this.time-6,this.time),t=100*this.model.change_since(this.time-1,this.time),n={".inc_last_six_months":e.toFixed(0),".inc_last_month":t.toFixed(0)};_(n).each(function(e,t){this.$(t).html(e),(e|0)>0?this.$(t+"_percent").removeClass("green").addClass("red"):this.$(t+"_percent").addClass("green").removeClass("red")});var r=this.month_to_date(this.time);this.$(".inc_date").html(this.MONTHS[r.getMonth()]+" "+r.getFullYear())},render_regions:function(){var e=this;this.regions.normalize();var t=this.$(".countries");t.html(""),_(this.regions_views).each(function(e){e.close()}),this.regions_views=[],this.regions.each(function(n){var i=new r({model:n});e.regions_views.push(i),i.bind("move_to",e.move_map_to,e),t.append(i.render().el)})},render:function(){var t=this,r=this.model,i=n(this.template,{country:r.get("name_engli"),description:r.get("description")});this.el.fadeOut(300,function(){t.el.html(i),t.graph=new Graph({el:t.$("#graph")}),t.graph.set_country(t.model),t.$(".stories").append((new e.StoryView({model:t.stories.random(1)[0],template_id:"#story-template-large"})).render().el),t.showing&&t.el.fadeIn(),t.set_time(t.time)})},move_map_to:function(e){this.trigger("move_to",e)},hide:function(){this.el.fadeOut(),this.showing=!1},show:function(){this.el.fadeIn(),this.showing=!0}}),s=Backbone.View.extend({initialize:function(){this.countries=this.options.countries,this.country=this.options.country,this.countries.bind("reset",function(){this.continent&&this.render()},this),this.country.bind("change",function(){this.continent=this.country.get("unregion1"),this.countries.models.length>0&&this.render()},this),this.el.dropdown({source:[]})},render:function(){var e=this,t=_(this.countries.inside(this.continent)).map(function(e){return{name:e.get("name_engli"),url:"/country#"+e.get("name_engli")}});t=_(t).filter(function(t){return t.name!=e.country.get("name_engli")}),this.el.dropdown("update",t),this.$(".init").html(this.continent)}});e.WRI=Class.extend({init:function(){_.bindAll(this,"on_route"),$("body").css({"overflow-x":"hidden","overflow-y":"auto"})},run:function(){_.bindAll(this,"on_route_to","_state_url","set_state");var n=this;this.bus=new e.Bus,e.bus=this.bus,this.stories=new e.Stories,this.country=new e.Country({name_engli:""}),this.countries=new e.Countries;var r=new e.StoryListView({el:$("#stories_drop"),stories:this.stories}),o=new s({el:$("#continent_drop"),countries:this.countries,country:this.country}),u=new e.Search({el:$("#autocomplete"),countries:this.countries}),a=_.after(2,function(){var e=n.countries.next_country(n.country.get("name_engli"));if(e){var t=e[0],r=e[1];$(".pag.left").attr("href","country#"+t.get("name_engli")).animate({left:0}),$(".pag.right").attr("href","country#"+r.get("name_engli")).animate({right:0})}});this.countries.bind("reset",a),this.country.bind("change",a),this.stories.fetch(),this.countries.fetch(),this.map=new e.Map(this.bus),this.router=new t,this.router.bind("route:country",this.on_route),this.app_state=new e.State,this.app_state.set_router(this.router),this.state_url=_.debounce(this._state_url,200),this.panel=new i({el:$("#country_info"),model:this.country,stories:this.stories}),this.state=[],this.level=0,this.slider=new Slider({el:$(".slider")}),this.slider.set_time(0),this.slider.bind("change",function(e){n.map.set_time(e),n.panel.set_time(e)}),this.bus.on("app:route_to",this.on_route_to),this.map.map.bind("center_changed",this.state_url),this.map.map.bind("zoom_changed",this.state_url),this.map.show_controls(!0),this.app_state.bind("change:map",this.set_state),this.app_state.bind("change:fullscreen",function(){n.app_state.get("fullscreen")&&n.go_fullscreen(!0)}),this.map.map.bind("fullscreen",this.go_fullscreen,this),this.panel.bind("move_to",this.move_map_to,this),Backbone.history.start()},go_fullscreen:function(e){var t=this;$("body").addClass("fullscreen"),e||t.map.displace(-255,0),$("a.fullscreen").html("Normal map"),this.map.map.unbind("fullscreen",this.go_fullscreen),this.map.map.bind("fullscreen",this.go_normal,this),t.app_state.set({fullscreen:!0},{silent:!0}),t.app_state.save({silent:!0})},go_normal:function(){$("body").removeClass("fullscreen");var e=this;e.map.displace(255,0),$("a.fullscreen").html("Fullscreen map"),this.map.map.unbind("fullscreen",this.go_normal),this.map.map.bind("fullscreen",this.go_fullscreen,this),e.app_state.set({fullscreen:!1},{silent:!0}),e.app_state.save({silent:!0})},_state_url:function(){var e=this,t=e.map.map.get_center();e.app_state.set({map:{center:{lat:t.lat(),lon:t.lng()},zoom:e.map.map.get_zoom()}}),e.app_state.save()},set_state:function(e){var t=this,n=e.get("map");t.map.map.set_center(new google.maps.LatLng(n.center.lat,n.center.lon)),t.map.map.set_zoom(n.zoom)},country_changed:function(){var e=this,t=this.country;e.map.show_country(t,t.get("iso"))},move_map_to:function(e){var t=this;t.map.center_map_on(e.get("bbox")),t.map.displace(255,0)},on_route:function(e,t){var n=this;this.slider.stop();var r=this.country;r.set({name_engli:e},{silent:!0}),t?this.app_state.fetch(t):(r.unbind("change",this.move_map_to),r.bind("change",this.move_map_to,this)),r.unbind("change",this.country_changed),r.bind("change",this.country_changed,n),r.fetch()},on_route_to:function(t){e.Log.debug("route => ",t),this.router.navigate(t,!0)}})};/*
 ===============================================
 WRIHome manages /
 ===============================================
*/App.modules.WRIHome=function(e){var t=Backbone.View.extend({tagName:"li",template:'<a href="/country#{0}">{1}<span style="width:50%" class="bar"></span></a>',initialize:function(){_.bindAll(this,"_remove_growing"),this.country=this.options.country,this.timeout=null,this.remove_growing=_.debounce(this._remove_growing,300)},_remove_growing:function(){this.$("span").removeClass("growing")},set_time:function(e){var t=this.country.def_percent_in_month(e);this.$("span").css({width:t+"%"}),Math.abs(t-this.old_percent)>.1&&(this.$("span").addClass("growing"),this.remove_growing()),this.old_percent=t},render:function(){return $(this.el).append(this.template.format(this.country.slug(),this.country.get("name_engli"))),this.set_time(0),this}}),n=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","set_time"),this.countries=this.options.countries,this.area=this.options.area,this.countries.bind("reset",this.render),this.country_views=[]},set_time:function(e){this.month=e,_(this.country_views).each(function(t){t.set_time(e)})},render:function(){var e=this;return this.el.html(""),_(this.countries.inside(this.area)).each(function(n){var r=new t({country:n});e.country_views.push(r),e.el.append(r.render().el)}),this}});e.WRIHome=Class.extend({set_headline:function(){var e=["Monitoring the world's forests","Keeping an eye on the world's forests","Monitor deforestation hotspots in the tropics","Monthly deforestation hotspots in the tropics"],t=e[Math.random()*e.length>>0];$("section.title").find("h2").html(t)},run:function(){var t=this,r=new e.Countries,i=new e.Stories,s=new e.MainMap(r);this.slider=new Slider({el:$(".slider")});var o=new e.Search({el:$("#autocomplete"),countries:r}),u=new e.StoryListView({el:$("span.select"),stories:i});this.slider.bind("change",s.set_time),this.slider.bind("change",o.set_time),i.bind("reset",function(){_(i.random(2)).each(function(t){$("#featured_stories").append((new e.StoryView({model:t})).render().el)})});var a=[{el:$("#south_america"),area:"South America",countries:r},{el:$("#africa"),area:["Eastern Africa","Western Africa","Middle Africa"],countries:r},{el:$("#south_east_asia"),area:["Southern Asia","South-Eastern Asia"],countries:r}];_(a).each(function(e){var r=new n(e);t.slider.bind("change",r.set_time)}),r.fetch(),i.fetch(),r.bind("reset",function(){this.slider.set_time(0)},this)}})};App.modules.WRIAbout=function(e){e.WRIAbout=Class.extend({init:function(){},run:function(){var t=new e.Countries,n=new e.Stories,r=new e.Search({el:$("#autocomplete"),countries:t}),i=new e.StoryListView({el:$("#stories_drop"),stories:n});t.fetch(),n.fetch()}})};/**************************************************************************
* WRI SLIDER PLUGIN
**************************************************************************/(function(e,t,n){var r=!0,i=!0,s=null,o="wriSlider",u,a,f,l={globalEvents:[],monthNames:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],animation_time:250,step:1296e6};u={pluginName:o,options:null,_init:function(t){return u.options=e.extend(!0,l,t),this.each(function(){var t=e(this);u._addCanvas(t),u._bind(t)})},_bind:function(e){e.find("a.animation").bind({click:u._animate})},_trigger:function(t,n,r){var i=e.inArray(t,u.options.globalEvents)>=0,t=t+"."+u.pluginName;i?e.event.trigger(t,n):r.trigger(t,n)},_addCanvas:function(e){e.append('<span class="canvas"></span><span class="shadow"></span><div class="horizontal"></div>');var t="<table><tbody><tr>";for(var n=2006,r=2013;n<r;n++)n!=2012?t+='<td width="16%"><div><label>'+n+"</label></div></td>":t+='<td width="2%"><div><label>'+n+"</label></div></td>";t+="</tr></tbody></table>",e.find("span.canvas").append(t),u._initializeButton(e),u._initializeSlider(e)},_initializeButton:function(e){e.append('<a href="#play" class="animation"><span>play</span></a>')},_initializeSlider:function(t){t.find("div.horizontal").slider({min:(new Date(u.options.start)).getTime(),max:(new Date(u.options.end)).getTime(),value:(new Date(u.options.value)).getTime(),step:u.options.step,create:function(t,n){var r=new Date(u.options.value),i=u.options.monthNames[r.getMonth()]+" "+r.getFullYear();e(t.target).find("a.ui-slider-handle").text(i)},slide:function(t,n){var r=u.options.monthNames[(new Date(n.value)).getMonth()]+" "+(new Date(n.value)).getFullYear();e(t.target).find("a.ui-slider-handle").text(r);var i=e(t.target).closest(".slider").find("a.animation");u._stopAnimation(i),u._trigger("change",[n.value],e(t.target))},change:function(t,n){var r=u.options.monthNames[(new Date(n.value)).getMonth()]+" "+(new Date(n.value)).getFullYear();e(t.target).find("a.ui-slider-handle").text(r),u._trigger("change",[n.value],e(t.target))}})},_resetSlider:function(e){},_animate:function(t){t&&t.preventDefault();var n=e(t.target).closest("a");n.hasClass("play")?u._stopAnimation(n):u._startAnimation(n)},_stopAnimation:function(e){e.removeClass("play"),e.find("span").text("play"),clearInterval(e.data("interval")),e.data("interval",null)},_startAnimation:function(e){e.addClass("play"),e.find("span").text("pause");var t=e.closest(".slider").find("div.horizontal"),n=t.slider("option","max");t.slider("value")==n&&t.slider("value",0);var r=setInterval(function(){var r=t.slider("value");r<n?t.slider("value",r+u.options.step):r>n?t.slider("value",n):u._stopAnimation(e)},u.options.animation_time);e.data("interval",r)}},a={update:function(e){var t=this.find("div.horizontal");t.slider("value",e)},stop:function(){var e=this.find("a.animation");u._stopAnimation(e)}},f={},e.fn[o]=function(t){if(e.type(t)==="string"&&a[t])return a[t].apply(this,Array.prototype.slice.call(arguments,1));if(e.type(t)==="object"||!t)return u._init.apply(this,arguments);e.error("You cannot invoke "+o+" jQuery plugin with the arguments: "+t)}})(jQuery,window),function(e,t,n){var r=!0,i=!0,s=null,o="dropdown",u,a,f,l={globalEvents:[]};u={pluginName:o,options:null,_init:function(t){return u.options=e.extend(!0,l,t),this.each(function(){var t=e(this);u._createElements(t),u._bind(t)})},_bind:function(e){e.find("a.init").bind({click:u._onClick}),e.find("ul").on("click","a",function(e){u._onListClick(e)})},_trigger:function(t,n,r){var i=e.inArray(t,u.options.globalEvents)>=0,t=t+"."+u.pluginName;i?e.event.trigger(t,n):r.trigger(t,n)},_createElements:function(e){var t=e.text();e.html('<a class="init" href="#'+t+'">'+t+"</a>"+'<div class="options">'+'<div class="t"></div>'+'<div class="b"></div>'+"<ul></ul>"+"</div>"),u._addItems(e)},_addItems:function(e){var t=e.find("ul");t.html(""),_.each(u.options.source,function(e,n){t.append('<li><a href="'+e.url+'">'+e.name+"</a></li>")})},_onClick:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("span.select");n.hasClass("active")?u._close(n):u._open(n)},_onListClick:function(t){var n=e(t.target).closest("span.select");u._close(n)},_open:function(t){e(".select").removeClass("active"),t.addClass("active"),e("body").click(function(n){e(n.target).closest("span.select").length||(u._close(t),e("body").unbind("click"))})},_close:function(t){t.removeClass("active"),e("body").unbind("click")}},a={update:function(t){u.options.source=t,u._addItems(e(this))}},e.fn[o]=function(t){if(e.type(t)==="string"&&a[t])return a[t].apply(this,Array.prototype.slice.call(arguments,1));if(e.type(t)==="object"||!t)return u._init.apply(this,arguments);e.error("You cannot invoke "+o+" jQuery plugin with the arguments: "+t)}}(jQuery,window);function S4(){return((1+Math.random())*65536|0).toString(16).substring(1)}function guid(){return S4()+S4()+"-"+S4()+"-"+S4()+"-"+S4()+"-"+S4()+S4()+S4()}function CartoShader(e){this.compiled={},this.compile(e)}function shader_test(){}function bound(e,t,n){return t!=null&&(e=Math.max(e,t)),n!=null&&(e=Math.min(e,n)),e}function degreesToRadians(e){return e*(Math.PI/180)}function radiansToDegrees(e){return e/(Math.PI/180)}function MercatorProjection(){this.pixelOrigin_=new google.maps.Point(TILE_SIZE/2,TILE_SIZE/2),this.pixelsPerLonDegree_=TILE_SIZE/360,this.pixelsPerLonRadian_=TILE_SIZE/(2*Math.PI)}function CanvasTileLayer(e,t){this.tileSize=new google.maps.Size(256,256),this.maxZoom=19,this.name="Tile #s",this.alt="Canvas tile layer",this.tiles={},this.canvas_setup=e,this.render=t,t||(this.render=e)}function CartoDB(e){this.options=e,this.projection=new MercatorProjection,this.shader=new CartoShader(this.options.shader||'{ point-color: "#000" }'),this.cache=localStorage,this.hit_shader=new CartoShader({"line-color":"#FFF","line-width":2,"polygon-fill":function(e,t){return"rgb("+Int2RGB(t.id).join(",")+")"}});if(!e.user||!e.table)throw Exception("CartoDB user and table must be specified");this.base_url="http://"+e.user+".cartodb.com/api/v2/sql",this._init_layer()}function test(){console.log("EYY")}function Renderer(){var e=this,t=this.primitive_render={Point:function(e,t){e.save();var n=2,r=t;e.translate(r.x,r.y),e.beginPath(),e.arc(n,n,n,0,Math.PI*2,!0),e.closePath(),e.fill(),e.stroke(),e.restore()},MultiPoint:function(e,n){var r=t.Point;for(var i=0;i<n.length;++i)r(e,zoom,n[i])},Polygon:function(e,t){e.beginPath();var n=t[0][0];e.moveTo(n.x,n.y);for(var r=0;r<t[0].length;++r)n=t[0][r],e.lineTo(n.x,n.y);e.closePath(),e.fill(),e.stroke()},MultiPolygon:function(e,n){var r=t.Polygon;for(var i=0;i<n.length;++i)r(e,n[i])}}}function App(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e[0]&&typeof e[0]=="string"?e:e[0],r,i,s,o;if(this instanceof App){if(!n||n==="*"){n=[];for(r in App.modules)App.modules.hasOwnProperty(r)&&n.push(r)}for(r=0;r<n.length;r+=1){i=n[r],App.modules[i](this);if(this[i].hasOwnProperty("submodules"))for(o in this[i].submodules)App.modules[i][this[i].submodules[o]](this)}return t(this),this}return new App(n,t)}function TimePlayer(e){this.time=0,this.canvas_setup=this.get_time_data,this.render=this.render_time,this.cells=[],this.table=e,this.base_url="http://sql.wri-01.cartodb.com/api/v2/sql"}function meterToPixels(e,t,n){var r=initialResolution/(1<<n),i=(e+originShift)/r,s=(t+originShift)/r;return[i,s]}function meterToPixelsDist(e,t,n){var r=initialResolution/(1<<n),i=e/r,s=t/r;return[i,s]}function CoordMapType(){}(function(){function e(e){var t=-1,n=e.length,r=[];while(++t<n)r.push(e[t]);return r}function t(e){return Array.prototype.slice.call(e)}function n(){return this}function r(e,t,n){return function(){var r=n.apply(t,arguments);return arguments.length?e:r}}function i(e){return e!=null&&!isNaN(e)}function s(e){return e.length}function o(e){return e==null}function u(e){return e.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function a(){}function f(){function e(){var e=t,n=-1,r=e.length,i;while(++n<r)(i=e[n].on)&&i.apply(this,arguments)}var t=[],n={};return e.on=function(r,i){var s,o;if(arguments.length<2)return(s=n[r])&&s.on;if(s=n[r])s.on=null,t=t.slice(0,o=t.indexOf(s)).concat(t.slice(o+1)),delete n[r];return i&&t.push(n[r]={on:i}),e},e}function l(e,t){return t-(e?1+Math.floor(Math.log(e+Math.pow(10,1+Math.floor(Math.log(e)/Math.LN10)-t))/Math.LN10):1)}function c(e){return e+""}function h(e){var t=e.lastIndexOf("."),n=t>=0?e.substring(t):(t=e.length,""),r=[];while(t>0)r.push(e.substring(t-=3,t+3));return r.reverse().join(",")+n}function p(e,t){return{scale:Math.pow(10,(8-t)*3),symbol:e}}function d(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function v(e){return function(t){return 1-e(1-t)}}function m(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function g(e){return e}function y(e){return function(t){return Math.pow(t,e)}}function b(e){return 1-Math.cos(e*Math.PI/2)}function w(e){return Math.pow(2,10*(e-1))}function E(e){return 1-Math.sqrt(1-e*e)}function S(e,t){var n;return arguments.length<2&&(t=.45),arguments.length<1?(e=1,n=t/4):n=t/(2*Math.PI)*Math.asin(1/e),function(r){return 1+e*Math.pow(2,10*-r)*Math.sin((r-n)*2*Math.PI/t)}}function x(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function T(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function N(){d3.event.stopPropagation(),d3.event.preventDefault()}function C(e){return e=="transform"?d3.interpolateTransform:d3.interpolate}function k(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return(n-e)*t}}function L(e,t){return t=t-(e=+e)?1/(t-e):0,function(n){return Math.max(0,Math.min(1,(n-e)*t))}}function A(e,t,n){return new O(e,t,n)}function O(e,t,n){this.r=e,this.g=t,this.b=n}function M(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function _(e,t,n){var r=0,i=0,s=0,o,u,a;o=/([a-z]+)\((.*)\)/i.exec(e);if(o){u=o[2].split(",");switch(o[1]){case"hsl":return n(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(P(u[0]),P(u[1]),P(u[2]))}}return(a=Qn[e])?t(a.r,a.g,a.b):(e!=null&&e.charAt(0)==="#"&&(e.length===4?(r=e.charAt(1),r+=r,i=e.charAt(2),i+=i,s=e.charAt(3),s+=s):e.length===7&&(r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7)),r=parseInt(r,16),i=parseInt(i,16),s=parseInt(s,16)),t(r,i,s))}function D(e,t,n){var r=Math.min(e/=255,t/=255,n/=255),i=Math.max(e,t,n),s=i-r,o,u,a=(i+r)/2;return s?(u=a<.5?s/(i+r):s/(2-i-r),e==i?o=(t-n)/s+(t<n?6:0):t==i?o=(n-e)/s+2:o=(e-t)/s+4,o*=60):u=o=0,H(o,u,a)}function P(e){var t=parseFloat(e);return e.charAt(e.length-1)==="%"?Math.round(t*2.55):t}function H(e,t,n){return new B(e,t,n)}function B(e,t,n){this.h=e,this.s=t,this.l=n}function j(e,t,n){function r(e){return e>360?e-=360:e<0&&(e+=360),e<60?s+(o-s)*e/60:e<180?o:e<240?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(r(e)*255)}var s,o;return e%=360,e<0&&(e+=360),t=t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,o=n<=.5?n*(1+t):n+t-n*t,s=2*n-o,A(i(e+120),i(e),i(e-120))}function F(e){return In(e,rr),e}function I(e){return function(){return Yn(e,this)}}function q(e){return function(){return Zn(e,this)}}function R(e,t){function n(){if(t=this.classList)return t.add(e);var t=this.className,n=t.baseVal!=null,r=n?t.baseVal:t;s.lastIndex=0,s.test(r)||(r=u(r+" "+e),n?t.baseVal=r:this.className=r)}function r(){if(t=this.classList)return t.remove(e);var t=this.className,n=t.baseVal!=null,r=n?t.baseVal:t;r=u(r.replace(s," ")),n?t.baseVal=r:this.className=r}function i(){(t.apply(this,arguments)?n:r).call(this)}var s=new RegExp("(^|\\s+)"+d3.requote(e)+"(\\s+|$)","g");if(arguments.length<2){var o=this.node();if(a=o.classList)return a.contains(e);var a=o.className;return s.lastIndex=0,s.test(a.baseVal!=null?a.baseVal:a)}return this.each(typeof t=="function"?i:t?n:r)}function U(e){return{__data__:e}}function z(e){return function(){return nr(this,e)}}function W(e){return arguments.length||(e=d3.ascending),function(t,n){return e(t&&t.__data__,n&&n.__data__)}}function X(e){return In(e,or),e}function V(e,t,n){In(e,ar);var r={},i=d3.dispatch("start","end"),s=cr;return e.id=t,e.time=n,e.tween=function(t,n){return arguments.length<2?r[t]:(n==null?delete r[t]:r[t]=n,e)},e.ease=function(t){return arguments.length?(s=typeof t=="function"?t:d3.ease.apply(d3,arguments),e):s},e.each=function(t,n){return arguments.length<2?K.call(e,t):(i.on(t,n),e)},d3.timer(function(o){return e.each(function(u,a,f){function l(e){if(g.active>t)return h();g.active=t;for(var s in r)(s=r[s].call(d,u,a))&&p.push(s);return i.start.call(d,u,a),c(e)||d3.timer(c,0,n),1}function c(e){if(g.active!==t)return h();var n=(e-v)/m,r=s(n),o=p.length;while(o>0)p[--o].call(d,r);if(n>=1)return h(),lr=t,i.end.call(d,u,a),lr=0,1}function h(){return--g.count||delete d.__transition__,1}var p=[],d=this,v=e[f][a].delay,m=e[f][a].duration,g=d.__transition__||(d.__transition__={active:0,count:0});++g.count,v<=o?l(o):d3.timer(l,v,n)}),1},0,n),e}function $(e,t,n){return n!=""&&ur}function J(e,t){function n(e,n,r){var s=t.call(this,e,n);return s==null?r!=""&&ur:r!=s&&i(r,s)}function r(e,n,r){return r!=t&&i(r,t)}var i=C(e);return typeof t=="function"?n:t==null?$:(t+="",r)}function K(e){for(var t=0,n=this.length;t<n;t++)for(var r=this[t],i=0,s=r.length;i<s;i++){var o=r[i];o&&e.call(o=o.node,o.__data__,i,t)}return this}function Q(){var e,t=Date.now(),n=hr;while(n)e=t-n.then,e>=n.delay&&(n.flush=n.callback(e)),n=n.next;var r=G()-t;r>24?(isFinite(r)&&(clearTimeout(dr),dr=setTimeout(Q,r)),pr=0):(pr=1,vr(Q))}function G(){var e=null,t=hr,n=Infinity;while(t)t.flush?t=e?e.next=t.next:hr=t.next:(n=Math.min(n,t.then+t.delay),t=(e=t).next);return n}function Y(e){var t=[e.a,e.b],n=[e.c,e.d],r=et(t),i=Z(t,n),s=et(tt(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*mr,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*mr:0}function Z(e,t){return e[0]*t[0]+e[1]*t[1]}function et(e){var t=Math.sqrt(Z(e,e));return t&&(e[0]/=t,e[1]/=t),t}function tt(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function nt(){}function rt(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function it(e){return e.rangeExtent?e.rangeExtent():rt(e.range())}function st(e,t){var n=0,r=e.length-1,i=e[n],s=e[r],o;s<i&&(o=n,n=r,r=o,o=i,i=s,s=o);if(o=s-i)t=t(o),e[n]=t.floor(i),e[r]=t.ceil(s);return e}function ot(){return Math}function ut(e,t,n,r){function i(){var i=e.length==2?pt:dt,a=r?L:k;return o=i(e,t,a,n),u=i(t,e,a,d3.interpolate),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(d3.interpolateRound)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return ct(e,t)},s.tickFormat=function(t){return ht(e,t)},s.nice=function(){return st(e,ft),i()},s.copy=function(){return ut(e,t,n,r)},i()}function at(e,t){return d3.rebind(e,t,"range","rangeRound","interpolate","clamp")}function ft(e){return e=Math.pow(10,Math.round(Math.log(e)/Math.LN10)-1),{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}}function lt(e,t){var n=rt(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return s<=.15?i*=10:s<=.35?i*=5:s<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+i*.5,n[2]=i,n}function ct(e,t){return d3.range.apply(d3,lt(e,t))}function ht(e,t){return d3.format(",."+Math.max(0,-Math.floor(Math.log(lt(e,t)[2])/Math.LN10+.01))+"f")}function pt(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function dt(e,t,n,r){var i=[],s=[],o=0,u=e.length;while(++o<u)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=d3.bisect(e,t,1,e.length-1)-1;return s[n](i[n](t))}}function vt(e,t){function n(n){return e(t(n))}var r=t.pow;return n.invert=function(t){return r(e.invert(t))},n.domain=function(i){return arguments.length?(t=i[0]<0?gt:mt,r=t.pow,e.domain(i.map(t)),n):e.domain().map(r)},n.nice=function(){return e.domain(st(e.domain(),ot)),n},n.ticks=function(){var n=rt(e.domain()),i=[];if(n.every(isFinite)){var s=Math.floor(n[0]),o=Math.ceil(n[1]),u=r(n[0]),a=r(n[1]);if(t===gt){i.push(r(s));for(;s++<o;)for(var f=9;f>0;f--)i.push(r(s)*f)}else{for(;s<o;s++)for(var f=1;f<10;f++)i.push(r(s)*f);i.push(r(s))}for(s=0;i[s]<u;s++);for(o=i.length;i[o-1]>a;o--);i=i.slice(s,o)}return i},n.tickFormat=function(e,i){arguments.length<2&&(i=gr);if(arguments.length<1)return i;var s=e/n.ticks().length,o=t===gt?(u=-1e-12,Math.floor):(u=1e-12,Math.ceil),u;return function(e){return e/r(o(t(e)+u))<s?i(e):""}},n.copy=function(){return vt(e.copy(),t)},at(n,e)}function mt(e){return Math.log(e<0?0:e)/Math.LN10}function gt(e){return-Math.log(e>0?0:-e)/Math.LN10}function yt(e,t){function n(t){return e(r(t))}var r=bt(t),i=bt(1/t);return n.invert=function(t){return i(e.invert(t))},n.domain=function(t){return arguments.length?(e.domain(t.map(r)),n):e.domain().map(i)},n.ticks=function(e){return ct(n.domain(),e)},n.tickFormat=function(e){return ht(n.domain(),e)},n.nice=function(){return n.domain(st(n.domain(),ft))},n.exponent=function(e){if(!arguments.length)return t;var s=n.domain();return r=bt(t=e),i=bt(1/t),n.domain(s)},n.copy=function(){return yt(e.copy(),t)},at(n,e)}function bt(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function wt(e,t){function n(t){return s[((i[t]||(i[t]=e.push(t)))-1)%s.length]}function r(t,n){return d3.range(e.length).map(function(e){return t+n*e})}var i,s,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i={};var s=-1,o=r.length,u;while(++s<o)i[u=r[s]]||(i[u]=e.push(u));return n[t.t](t.x,t.p)},n.range=function(e){return arguments.length?(s=e,o=0,t={t:"range",x:e},n):s},n.rangePoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=(f-a)/(e.length-1+u);return s=r(e.length<2?(a+f)/2:a+l*u/2,l),o=0,t={t:"rangePoints",x:i,p:u},n},n.rangeBands=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=(f-a)/(e.length+u);return s=r(a+l*u,l),o=l*(1-u),t={t:"rangeBands",x:i,p:u},n},n.rangeRoundBands=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=Math.floor((f-a)/(e.length+u));return s=r(a+Math.round((f-a-(e.length-u)*l)/2),l),o=Math.round(l*(1-u)),t={t:"rangeRoundBands",x:i,p:u},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return t.t==="range"?rt(t.x):t.x},n.copy=function(){return wt(e,t)},n.domain(e)}function Et(e,t){function n(){var n=0,s=e.length,o=t.length;i=[];while(++n<o)i[n-1]=d3.quantile(e,n/o);return r}function r(e){return isNaN(e=+e)?NaN:t[d3.bisect(i,e)]}var i;return r.domain=function(t){return arguments.length?(e=t.filter(function(e){return!isNaN(e)}).sort(d3.ascending),n()):e},r.range=function(e){return arguments.length?(t=e,n()):t},r.quantiles=function(){return i},r.copy=function(){return Et(e,t)},n()}function St(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.copy=function(){return St(e,t,n)},i()}function xt(e){return e.innerRadius}function Tt(e){return e.outerRadius}function Nt(e){return e.startAngle}function Ct(e){return e.endAngle}function kt(e){function t(t){return t.length<1?null:"M"+s(e(Lt(this,t,n,r)),o)}var n=At,r=Ot,i="linear",s=Tr[i],o=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.interpolate=function(e){return arguments.length?(s=Tr[i=e],t):i},t.tension=function(e){return arguments.length?(o=e,t):o},t}function Lt(e,t,n,r){var i=[],s=-1,o=t.length,u=typeof n=="function",a=typeof r=="function",f;if(u&&a)while(++s<o)i.push([n.call(e,f=t[s],s),r.call(e,f,s)]);else if(u)while(++s<o)i.push([n.call(e,t[s],s),r]);else if(a)while(++s<o)i.push([n,r.call(e,t[s],s)]);else while(++s<o)i.push([n,r]);return i}function At(e){return e[0]}function Ot(e){return e[1]}function Mt(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("L",(r=e[t])[0],",",r[1]);return i.join("")}function _t(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Dt(e){var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];while(++t<n)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Pt(e,t){return e.length<4?Mt(e):e[1]+jt(e.slice(1,e.length-1),Ft(e,t))}function Ht(e,t){return e.length<3?Mt(e):e[0]+jt((e.push(e[0]),e),Ft([e[e.length-2]].concat(e,[e[1]]),t))}function Bt(e,t,n){return e.length<3?Mt(e):e[0]+jt(e,Ft(e,t))}function jt(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return Mt(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;n&&(r+="Q"+(s[0]-o[0]*2/3)+","+(s[1]-o[1]*2/3)+","+s[0]+","+s[1],i=e[1],a=2);if(t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+u[0]*2/3)+","+(s[1]+u[1]*2/3)+","+l[0]+","+l[1]}return r}function Ft(e,t){var n=[],r=(1-t)/2,i,s=e[0],o=e[1],u=1,a=e.length;while(++u<a)i=s,s=o,o=e[u],n.push([r*(o[0]-i[0]),r*(o[1]-i[1])]);return n}function It(e){if(e.length<3)return Mt(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s];Wt(a,o,u);while(++t<n)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Wt(a,o,u);t=-1;while(++t<2)o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Wt(a,o,u);return a.join("")}function qt(e){if(e.length<4)return Mt(e);var t=[],n=-1,r=e.length,i,s=[0],o=[0];while(++n<3)i=e[n],s.push(i[0]),o.push(i[1]);t.push(zt(kr,s)+","+zt(kr,o)),--n;while(++n<r)i=e[n],s.shift(),s.push(i[0]),o.shift(),o.push(i[1]),Wt(t,s,o);return t.join("")}function Rt(e){var t,n=-1,r=e.length,i=r+4,s,o=[],u=[];while(++n<4)s=e[n%r],o.push(s[0]),u.push(s[1]);t=[zt(kr,o),",",zt(kr,u)],--n;while(++n<i)s=e[n%r],o.shift(),o.push(s[0]),u.shift(),u.push(s[1]),Wt(t,o,u);return t.join("")}function Ut(e,t){var n=e.length-1,r=e[0][0],i=e[0][1],s=e[n][0]-r,o=e[n][1]-i,u=-1,a,f;while(++u<=n)a=e[u],f=u/n,a[0]=t*a[0]+(1-t)*(r+f*s),a[1]=t*a[1]+(1-t)*(i+f*o);return It(e)}function zt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Wt(e,t,n){e.push("C",zt(Nr,t),",",zt(Nr,n),",",zt(Cr,t),",",zt(Cr,n),",",zt(kr,t),",",zt(kr,n))}function Xt(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Vt(e){var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=Xt(i,s);while(++t<n)r[t]=o+(o=Xt(i=s,s=e[t+1]));return r[t]=o,r}function $t(e){var t=[],n,r,i,s,o=Vt(e),u=-1,a=e.length-1;while(++u<a)n=Xt(e[u],e[u+1]),Math.abs(n)<1e-6?o[u]=o[u+1]=0:(r=o[u]/n,i=o[u+1]/n,s=r*r+i*i,s>9&&(s=n*3/Math.sqrt(s),o[u]=s*r,o[u+1]=s*i));u=-1;while(++u<=a)s=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),t.push([s||0,o[u]*s||0]);return t}function Jt(e){return e.length<3?Mt(e):e[0]+jt(e,$t(e))}function Kt(e){var t,n=-1,r=e.length,i,s;while(++n<r)t=e[n],i=t[0],s=t[1]+Sr,t[0]=i*Math.cos(s),t[1]=i*Math.sin(s);return e}function Qt(e){function t(t){if(t.length<1)return null;var o=Lt(this,t,n,i),l=Lt(this,t,n===r?Gt(o):r,i===s?Yt(o):s);return"M"+u(e(l),f)+"L"+a(e(o.reverse()),f)+"Z"}var n=At,r=At,i=0,s=Ot,o,u,a,f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.interpolate=function(e){return arguments.length?(u=Tr[o=e],a=u.reverse||u,t):o},t.tension=function(e){return arguments.length?(f=e,t):f},t.interpolate("linear")}function Gt(e){return function(t,n){return e[n][0]}}function Yt(e){return function(t,n){return e[n][1]}}function Zt(e){return e.source}function en(e){return e.target}function tn(e){return e.radius}function nn(e){return e.startAngle}function rn(e){return e.endAngle}function sn(e){return[e.x,e.y]}function on(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]+Sr;return[n*Math.cos(r),n*Math.sin(r)]}}function un(e,t){var n=(e.ownerSVGElement||e).createSVGPoint();if(Lr<0&&(window.scrollX||window.scrollY)){var r=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0),i=r[0][0].getScreenCTM();Lr=!i.f&&!i.e,r.remove()}return Lr?(n.x=t.pageX,n.y=t.pageY):(n.x=t.clientX,n.y=t.clientY),n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}function an(){return 64}function fn(){return"circle"}function ln(e,t){e.attr("transform",function(e){return"translate("+t(e)+",0)"})}function cn(e,t){e.attr("transform",function(e){return"translate(0,"+t(e)+")"})}function hn(e,t,n){i=[];if(n&&t.length>1){var r=rt(e.domain()),i,s=-1,o=t.length,u=(t[1]-t[0])/++n,a,f;while(++s<o)for(a=n;--a>0;)(f=+t[s]-a*u)>=r[0]&&i.push(f);for(--s,a=0;++a<n&&(f=+t[s]+a*u)<r[1];)i.push(f)}return i}function pn(e,t){e.select(".extent").attr("x",t[0][0]),e.selectAll(".n,.s,.w,.nw,.sw").attr("x",t[0][0]-2),e.selectAll(".e,.ne,.se").attr("x",t[1][0]-3),e.selectAll(".extent,.n,.s").attr("width",t[1][0]-t[0][0])}function dn(e,t){e.select(".extent").attr("y",t[0][1]),e.selectAll(".n,.e,.w,.nw,.ne").attr("y",t[0][1]-3),e.selectAll(".s,.se,.sw").attr("y",t[1][1]-4),e.selectAll(".extent,.e,.w").attr("height",t[1][1]-t[0][1])}function vn(){d3.event.keyCode==32&&Pr&&!Fr&&(qr=null,Rr[0]-=jr[1][0],Rr[1]-=jr[1][1],Fr=2,N())}function mn(){d3.event.keyCode==32&&Fr==2&&(Rr[0]+=jr[1][0],Rr[1]+=jr[1][1],Fr=0,N())}function gn(){if(Rr){var e=d3.svg.mouse(Pr),t=d3.select(Pr);Fr||(d3.event.altKey?(qr||(qr=[(jr[0][0]+jr[1][0])/2,(jr[0][1]+jr[1][1])/2]),Rr[0]=jr[+(e[0]<qr[0])][0],Rr[1]=jr[+(e[1]<qr[1])][1]):qr=null),Hr&&(yn(e,Hr,0),pn(t,jr)),Br&&(yn(e,Br,1),dn(t,jr)),Dr("brush")}}function yn(e,t,n){var r=it(t),i=r[0],s=r[1],o=Rr[n],u=jr[1][n]-jr[0][n],a,f;Fr&&(i-=o,s-=u+o),a=Math.max(i,Math.min(s,e[n])),Fr?f=(a+=o)+u:(qr&&(o=Math.max(i,Math.min(s,2*qr[n]-a))),o<a?(f=a,a=o):f=o),jr[0][n]=a,jr[1][n]=f}function bn(){Rr&&(gn(),d3.select(Pr).selectAll(".resize").style("pointer-events",_r.empty()?"none":"all"),Dr("brushend"),_r=Dr=Pr=Hr=Br=jr=Fr=Ir=qr=Rr=null,N())}function wn(e){var t=En(),n=d3.event,r=d3.event={type:e};t&&(r.x=t[0]+$r[0],r.y=t[1]+$r[1],r.dx=t[0]-Jr[0],r.dy=t[1]-Jr[1],Kr|=r.dx|r.dy,Jr=t);try{zr[e].apply(Xr,Vr)}finally{d3.event=n}n.stopPropagation(),n.preventDefault()}function En(){var e=Xr.parentNode,t=d3.event.changedTouches;return e&&(t?d3.svg.touches(e,t)[0]:d3.svg.mouse(e))}function Sn(){if(!Xr)return;var e=Xr.parentNode;if(!e)return xn();wn("drag"),N()}function xn(){if(!Xr)return;wn("dragend"),Kr&&(N(),Kr=d3.event.target===Wr),zr=Wr=Xr=Vr=$r=Jr=null}function Tn(){Kr&&(N(),Kr=0)}function Nn(e){return[e[0]-ti[0],e[1]-ti[1],ti[2]]}function Cn(){Qr||(Qr=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var e=d3.event,t;try{Qr.scrollTop=1e3,Qr.dispatchEvent(e),t=1e3-Qr.scrollTop}catch(n){t=e.wheelDelta||-e.detail*5}return t*.005}function kn(){var e=d3.svg.touches(si),t=-1,n=e.length,r;while(++t<n)Zr[(r=e[t]).identifier]=Nn(r);return e}function Ln(){var e=d3.svg.touches(si);switch(e.length){case 1:var t=e[0];_n(ti[2],t,Zr[t.identifier]);break;case 2:var n=e[0],r=e[1],i=[(n[0]+r[0])/2,(n[1]+r[1])/2],s=Zr[n.identifier],o=Zr[r.identifier],u=[(s[0]+o[0])/2,(s[1]+o[1])/2,s[2]];_n(Math.log(d3.event.scale)/Math.LN2+s[2],i,u)}}function An(){Yr=null,Gr&&(ui=1,_n(ti[2],d3.svg.mouse(si),Gr))}function On(){Gr&&(ui&&(N(),ui=ii===d3.event.target),ti=ni=ri=ii=si=oi=Gr=null)}function Mn(){ui&&(N(),ui=0)}function _n(e,t,n){function r(e,t,n){e.domain(e.range().map(function(r){return e.invert((r-n)*i/s+t)}))}e=Dn(e,2);var i=Math.pow(2,ti[2]),s=Math.pow(2,e),o=Math.pow(2,(ti[2]=e)-n[2]),u=ti[0],a=ti[1],f=ti[0]=Dn(t[0]-n[0]*o,0,s),l=ti[1]=Dn(t[1]-n[1]*o,1,s),c=d3.event;d3.event={scale:s,translate:[f,l],transform:function(e,t){e&&r(e,u,f),t&&r(t,a,l)}};try{ri.apply(si,oi)}finally{d3.event=c}c.preventDefault()}function Dn(e,t,n){var r=ni[t],i=r[0],s=r[1];return arguments.length===3?Math.max(s*(s===Infinity?-Infinity:1/n-1),Math.min(i===-Infinity?Infinity:i,e/n))*n:Math.max(i,Math.min(s,e))}Date.now||(Date.now=function(){return+(new Date)});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(Pn){var Hn=CSSStyleDeclaration.prototype,Bn=Hn.setProperty;Hn.setProperty=function(e,t,n){Bn.call(this,e,t+"",n)}}d3={version:"2.7.2"};var jn=t;try{jn(document.documentElement.childNodes)[0].nodeType}catch(Fn){jn=e}var In=[].__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]};d3.functor=function(e){return typeof e=="function"?e:function(){return e}},d3.rebind=function(e,t){var n=1,i=arguments.length,s;while(++n<i)e[s=arguments[n]]=r(e,t,t[s]);return e},d3.ascending=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},d3.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},d3.mean=function(e,t){var n=e.length,r,s=0,o=-1,u=0;if(arguments.length===1)while(++o<n)i(r=e[o])&&(s+=(r-s)/++u);else while(++o<n)i(r=t.call(e,e[o],o))&&(s+=(r-s)/++u);return u?s:undefined},d3.median=function(e,t){return arguments.length>1&&(e=e.map(t)),e=e.filter(i),e.length?d3.quantile(e.sort(d3.ascending),.5):undefined},d3.min=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&((i=e[n])==null||i!=i))i=undefined;while(++n<r)(s=e[n])!=null&&i>s&&(i=s)}else{while(++n<r&&((i=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&i>s&&(i=s)}return i},d3.max=function(e,t){var n=-1,r=e.length,i,s;if(arguments.length===1){while(++n<r&&((i=e[n])==null||i!=i))i=undefined;while(++n<r)(s=e[n])!=null&&s>i&&(i=s)}else{while(++n<r&&((i=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&s>i&&(i=s)}return i},d3.extent=function(e,t){var n=-1,r=e.length,i,s,o;if(arguments.length===1){while(++n<r&&((i=o=e[n])==null||i!=i))i=o=undefined;while(++n<r)(s=e[n])!=null&&(i>s&&(i=s),o<s&&(o=s))}else{while(++n<r&&((i=o=t.call(e,e[n],n))==null||i!=i))i=undefined;while(++n<r)(s=t.call(e,e[n],n))!=null&&(i>s&&(i=s),o<s&&(o=s))}return[i,o]},d3.random={normal:function(e,t){return arguments.length<2&&(t=1),arguments.length<1&&(e=0),function(){var n,r,i;do n=Math.random()*2-1,r=Math.random()*2-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}}},d3.sum=function(e,t){var n=0,r=e.length,i,s=-1;if(arguments.length===1)while(++s<r)isNaN(i=+e[s])||(n+=i);else while(++s<r)isNaN(i=+t.call(e,e[s],s))||(n+=i);return n},d3.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=e[r-1],s=n-r;return s?i+s*(e[r]-i):i},d3.transpose=function(e){return d3.zip.apply(d3,e)},d3.zip=function(){if(!(i=arguments.length))return[];for(var e=-1,t=d3.min(arguments,s),n=new Array(t);++e<t;)for(var r=-1,i,o=n[e]=new Array(i);++r<i;)o[r]=arguments[r][e];return n},d3.bisectLeft=function(e,t,n,r){arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);while(n<r){var i=n+r>>1;e[i]<t?n=i+1:r=i}return n},d3.bisect=d3.bisectRight=function(e,t,n,r){arguments.length<3&&(n=0),arguments.length<4&&(r=e.length);while(n<r){var i=n+r>>1;t<e[i]?r=i:n=i+1}return n},d3.first=function(e,t){var n=0,r=e.length,i=e[0],s;arguments.length===1&&(t=d3.ascending);while(++n<r)t.call(e,i,s=e[n])>0&&(i=s);return i},d3.last=function(e,t){var n=0,r=e.length,i=e[0],s;arguments.length===1&&(t=d3.ascending);while(++n<r)t.call(e,i,s=e[n])<=0&&(i=s);return i},d3.nest=function(){function e(t,i){if(i>=r.length)return o?o.call(n,t):s?t.sort(s):t;var u=-1,a=t.length,f=r[i++],l,c,h={};while(++u<a)(l=f(c=t[u]))in h?h[l].push(c):h[l]=[c];for(l in h)h[l]=e(h[l],i);return h}function t(e,n){if(n>=r.length)return e;var s=[],o=i[n++],u;for(u in e)s.push({key:u,values:t(e[u],n)});return o&&s.sort(function(e,t){return o(e.key,t.key)}),s}var n={},r=[],i=[],s,o;return n.map=function(t){return e(t,0)},n.entries=function(n){return t(e(n,0),0)},n.key=function(e){return r.push(e),n},n.sortKeys=function(e){return i[r.length-1]=e,n},n.sortValues=function(e){return s=e,n},n.rollup=function(e){return o=e,n},n},d3.keys=function(e){var t=[];for(var n in e)t.push(n);return t},d3.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},d3.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},d3.permute=function(e,t){var n=[],r=-1,i=t.length;while(++r<i)n[r]=e[t[r]];return n},d3.merge=function(e){return Array.prototype.concat.apply([],e)},d3.split=function(e,t){var n=[],r=[],i,s=-1,u=e.length;arguments.length<2&&(t=o);while(++s<u)t.call(r,i=e[s],s)?r=[]:(r.length||n.push(r),r.push(i));return n},d3.range=function(e,t,n){arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0));if((t-e)/n==Infinity)throw new Error("infinite range");var r=[],i=-1,s;if(n<0)while((s=e+n*++i)>t)r.push(s);else while((s=e+n*++i)<t)r.push(s);return r},d3.requote=function(e){return e.replace(qn,"\\$&")};var qn=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(e,t){return t?Math.round(e*Math.pow(10,t))*Math.pow(10,-t):Math.round(e)},d3.xhr=function(e,t,n){var r=new XMLHttpRequest;arguments.length<3?(n=t,t=null):t&&r.overrideMimeType&&r.overrideMimeType(t),r.open("GET",e,!0),t&&r.setRequestHeader("Accept",t),r.onreadystatechange=function(){r.readyState===4&&n(r.status<300?r:null)},r.send(null)},d3.text=function(e,t,n){function r(e){n(e&&e.responseText)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,r)},d3.json=function(e,t){d3.text(e,"application/json",function(e){t(e?JSON.parse(e):null)})},d3.html=function(e,t){d3.text(e,"text/html",function(e){if(e!=null){var n=document.createRange();n.selectNode(document.body),e=n.createContextualFragment(e)}t(e)})},d3.xml=function(e,t,n){function r(e){n(e&&e.responseXML)}arguments.length<3&&(n=t,t=null),d3.xhr(e,t,r)};var Rn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:Rn,qualify:function(e){var t=e.indexOf(":");return t<0?e in Rn?{space:Rn[e],local:e}:e:{space:Rn[e.substring(0,t)],local:e.substring(t+1)}}},d3.dispatch=function(){var e=new a,t=-1,n=arguments.length;while(++t<n)e[arguments[t]]=f();return e},a.prototype.on=function(e,t){var n=e.indexOf("."),r="";return n>0&&(r=e.substring(n+1),e=e.substring(0,n)),arguments.length<2?this[e].on(r):(this[e].on(r,t),this)},d3.format=function(e){var t=Un.exec(e),n=t[1]||" ",r=t[3]||"",i=t[5],s=+t[6],o=t[7],u=t[8],a=t[9],f=1,l="",p=!1;u&&(u=+u.substring(1)),i&&(n="0",o&&(s-=Math.floor((s-1)/4)));switch(a){case"n":o=!0,a="g";break;case"%":f=100,l="%",a="f";break;case"p":f=100,l="%",a="r";break;case"d":p=!0,u=0;break;case"s":f=-1,a="r"}return a=="r"&&!u&&(a="g"),a=zn[a]||c,function(e){if(p&&e%1)return"";var t=e<0&&(e=-e)?"−":r;if(f<0){var c=d3.formatPrefix(e,u);e*=c.scale,l=c.symbol}else e*=f;e=a(e,u);if(i){var d=e.length+t.length;d<s&&(e=(new Array(s-d+1)).join(n)+e),o&&(e=h(e)),e=t+e}else{o&&(e=h(e)),e=t+e;var d=e.length;d<s&&(e=(new Array(s-d+1)).join(n)+e)}return e+l}};var Un=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,zn={g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return d3.round(e,t=l(e,t)).toFixed(Math.max(0,Math.min(20,t)))}},Wn=["y","z","a","f","p","n","μ","m","","k","M","G","T","P","E","Z","Y"].map(p);d3.formatPrefix=function(e,t){var n=0;return e&&(e<0&&(e*=-1),t&&(e=d3.round(e,l(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,Math.floor((n<=0?n+1:n-1)/3)*3))),Wn[8+n/3]};var Xn=y(2),Vn=y(3),$n={linear:function(){return g},poly:y,quad:function(){return Xn},cubic:function(){return Vn},sin:function(){return b},exp:function(){return w},circle:function(){return E},elastic:S,back:x,bounce:function(){return T}},Jn={"in":function(e){return e},out:v,"in-out":m,"out-in":function(e){return m(v(e))}};d3.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.substring(0,t):e,r=t>=0?e.substring(t+1):"in";return d(Jn[r]($n[n].apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(e,t){var n=d3.interpolators.length,r;while(--n>=0&&!(r=d3.interpolators[n](e,t)));return r},d3.interpolateNumber=function(e,t){return t-=e,function(n){return e+t*n}},d3.interpolateRound=function(e,t){return t-=e,function(n){return Math.round(e+t*n)}},d3.interpolateString=function(e,t){var n,r,i,s=0,o=0,u=[],a=[],f,l;Kn.lastIndex=0;for(r=0;n=Kn.exec(t);++r)n.index&&u.push(t.substring(s,o=n.index)),a.push({i:u.length,x:n[0]}),u.push(null),s=Kn.lastIndex;s<t.length&&u.push(t.substring(s));for(r=0,f=a.length;(n=Kn.exec(e))&&r<f;++r){l=a[r];if(l.x==n[0]){if(l.i)if(u[l.i+1]==null){u[l.i-1]+=l.x,u.splice(l.i,1);for(i=r+1;i<f;++i)a[i].i--}else{u[l.i-1]+=l.x+u[l.i+1],u.splice(l.i,2);for(i=r+1;i<f;++i)a[i].i-=2}else if(u[l.i+1]==null)u[l.i]=l.x;else{u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1);for(i=r+1;i<f;++i)a[i].i--}a.splice(r,1),f--,r--}else l.x=d3.interpolateNumber(parseFloat(n[0]),parseFloat(l.x))}while(r<f)l=a.pop(),u[l.i+1]==null?u[l.i]=l.x:(u[l.i]=l.x+u[l.i+1],u.splice(l.i+1,1)),f--;return u.length===1?u[0]==null?a[0].x:function(){return t
}:function(e){for(r=0;r<f;++r)u[(l=a[r]).i]=l.x(e);return u.join("")}},d3.interpolateTransform=function(e,t){return d3.interpolateString(d3.transform(e)+"",d3.transform(t)+"")},d3.interpolateRgb=function(e,t){e=d3.rgb(e),t=d3.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+M(Math.round(n+s*e))+M(Math.round(r+o*e))+M(Math.round(i+u*e))}},d3.interpolateHsl=function(e,t){e=d3.hsl(e),t=d3.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return function(e){return j(n+s*e,r+o*e,i+u*e).toString()}},d3.interpolateArray=function(e,t){var n=[],r=[],i=e.length,s=t.length,o=Math.min(e.length,t.length),u;for(u=0;u<o;++u)n.push(d3.interpolate(e[u],t[u]));for(;u<i;++u)r[u]=e[u];for(;u<s;++u)r[u]=t[u];return function(e){for(u=0;u<o;++u)r[u]=n[u](e);return r}},d3.interpolateObject=function(e,t){var n={},r={},i;for(i in e)i in t?n[i]=C(i)(e[i],t[i]):r[i]=e[i];for(i in t)i in e||(r[i]=t[i]);return function(e){for(i in n)r[i]=n[i](e);return r}};var Kn=/[-+]?(?:\d*\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(e,t){return t instanceof Array&&d3.interpolateArray(e,t)},function(e,t){return(typeof e=="string"||typeof t=="string")&&d3.interpolateString(e+"",t+"")},function(e,t){return(typeof t=="string"?t in Qn||/^(#|rgb\(|hsl\()/.test(t):t instanceof O||t instanceof B)&&d3.interpolateRgb(e,t)},function(e,t){return!isNaN(e=+e)&&!isNaN(t=+t)&&d3.interpolateNumber(e,t)}],d3.rgb=function(e,t,n){return arguments.length===1?e instanceof O?A(e.r,e.g,e.b):_(""+e,A,j):A(~~e,~~t,~~n)},O.prototype.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return!t&&!n&&!r?A(i,i,i):(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),A(Math.min(255,Math.floor(t/e)),Math.min(255,Math.floor(n/e)),Math.min(255,Math.floor(r/e))))},O.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),A(Math.floor(e*this.r),Math.floor(e*this.g),Math.floor(e*this.b))},O.prototype.hsl=function(){return D(this.r,this.g,this.b)},O.prototype.toString=function(){return"#"+M(this.r)+M(this.g)+M(this.b)};var Qn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};for(var Gn in Qn)Qn[Gn]=_(Qn[Gn],A,j);d3.hsl=function(e,t,n){return arguments.length===1?e instanceof B?H(e.h,e.s,e.l):_(""+e,D,H):H(+e,+t,+n)},B.prototype.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),H(this.h,this.s,this.l/e)},B.prototype.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),H(this.h,this.s,e*this.l)},B.prototype.rgb=function(){return j(this.h,this.s,this.l)},B.prototype.toString=function(){return this.rgb().toString()};var Yn=function(e,t){return t.querySelector(e)},Zn=function(e,t){return t.querySelectorAll(e)},er=document.documentElement,tr=er.matchesSelector||er.webkitMatchesSelector||er.mozMatchesSelector||er.msMatchesSelector||er.oMatchesSelector,nr=function(e,t){return tr.call(e,t)};typeof Sizzle=="function"&&(Yn=function(e,t){return Sizzle(e,t)[0]},Zn=function(e,t){return Sizzle.uniqueSort(Sizzle(e,t))},nr=Sizzle.matchesSelector);var rr=[];d3.selection=function(){return sr},d3.selection.prototype=rr,rr.select=function(e){var t=[],n,r,i,s;typeof e!="function"&&(e=I(e));for(var o=-1,u=this.length;++o<u;){t.push(n=[]),n.parentNode=(i=this[o]).parentNode;for(var a=-1,f=i.length;++a<f;)(s=i[a])?(n.push(r=e.call(s,s.__data__,a)),r&&"__data__"in s&&(r.__data__=s.__data__)):n.push(null)}return F(t)},rr.selectAll=function(e){var t=[],n,r;typeof e!="function"&&(e=q(e));for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)if(r=o[u])t.push(n=jn(e.call(r,r.__data__,u))),n.parentNode=r;return F(t)},rr.attr=function(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}e=d3.ns.qualify(e);if(arguments.length<2){var a=this.node();return e.local?a.getAttributeNS(e.space,e.local):a.getAttribute(e)}return this.each(t==null?e.local?r:n:typeof t=="function"?e.local?u:o:e.local?s:i)},rr.classed=function(e,t){var n=e.split(ir),r=n.length,i=-1;if(arguments.length>1){while(++i<r)R.call(this,n[i],t);return this}while(++i<r)if(!R.call(this,n[i]))return!1;return!0};var ir=/\s+/g;rr.style=function(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return arguments.length<3&&(n=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(e):this.each(t==null?r:typeof t=="function"?s:i)},rr.property=function(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}return arguments.length<2?this.node()[e]:this.each(t==null?n:typeof t=="function"?i:r)},rr.text=function(e){return arguments.length<1?this.node().textContent:this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.textContent=t==null?"":t}:e==null?function(){this.textContent=""}:function(){this.textContent=e})},rr.html=function(e){return arguments.length<1?this.node().innerHTML:this.each(typeof e=="function"?function(){var t=e.apply(this,arguments);this.innerHTML=t==null?"":t}:e==null?function(){this.innerHTML=""}:function(){this.innerHTML=e})},rr.append=function(e){function t(){return this.appendChild(document.createElementNS(this.namespaceURI,e))}function n(){return this.appendChild(document.createElementNS(e.space,e.local))}return e=d3.ns.qualify(e),this.select(e.local?n:t)},rr.insert=function(e,t){function n(){return this.insertBefore(document.createElementNS(this.namespaceURI,e),Yn(t,this))}function r(){return this.insertBefore(document.createElementNS(e.space,e.local),Yn(t,this))}return e=d3.ns.qualify(e),this.select(e.local?r:n)},rr.remove=function(){return this.each(function(){var e=this.parentNode;e&&e.removeChild(this)})},rr.data=function(e,t){function n(e,n){var o,u=e.length,a=n.length,f=Math.min(u,a),l=Math.max(u,a),c=[],h=[],p=[],d,v;if(t){var m={},g=[],y,b=n.length;for(o=-1;++o<u;)y=t.call(d=e[o],d.__data__,o),y in m?p[b++]=d:m[y]=d,g.push(y);for(o=-1;++o<a;)d=m[y=t.call(n,v=n[o],o)],d?(d.__data__=v,c[o]=d,h[o]=p[o]=null):(h[o]=U(v),c[o]=p[o]=null),delete m[y];for(o=-1;++o<u;)g[o]in m&&(p[o]=e[o])}else{for(o=-1;++o<f;)d=e[o],v=n[o],d?(d.__data__=v,c[o]=d,h[o]=p[o]=null):(h[o]=U(v),c[o]=p[o]=null);for(;o<a;++o)h[o]=U(n[o]),c[o]=p[o]=null;for(;o<l;++o)p[o]=e[o],h[o]=c[o]=null}h.update=c,h.parentNode=c.parentNode=p.parentNode=e.parentNode,r.push(h),i.push(c),s.push(p)}var r=[],i=[],s=[],o=-1,u=this.length,a;if(typeof e=="function")while(++o<u)n(a=this[o],e.call(a,a.parentNode.__data__,o));else while(++o<u)n(a=this[o],e);var f=F(i);return f.enter=function(){return X(r)},f.exit=function(){return F(s)},f},rr.filter=function(e){var t=[],n,r,i;typeof e!="function"&&(e=z(e));for(var s=0,o=this.length;s<o;s++){t.push(n=[]),n.parentNode=(r=this[s]).parentNode;for(var u=0,a=r.length;u<a;u++)(i=r[u])&&e.call(i,i.__data__,u)&&n.push(i)}return F(t)},rr.map=function(e){return this.each(function(){this.__data__=e.apply(this,arguments)})},rr.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n=this[e],r=n.length-1,i=n[r],s;--r>=0;)if(s=n[r])i&&i!==s.nextSibling&&i.parentNode.insertBefore(s,i),i=s;return this},rr.sort=function(e){e=W.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},rr.on=function(e,t,n){arguments.length<3&&(n=!1);var r="__on"+e,i=e.indexOf(".");return i>0&&(e=e.substring(0,i)),arguments.length<2?(i=this.node()[r])&&i._:this.each(function(i,s){function o(e){var n=d3.event;d3.event=e;try{t.call(u,u.__data__,s)}finally{d3.event=n}}var u=this;u[r]&&u.removeEventListener(e,u[r],n),t&&u.addEventListener(e,u[r]=o,n),o._=t})},rr.each=function(e){for(var t=-1,n=this.length;++t<n;)for(var r=this[t],i=-1,s=r.length;++i<s;){var o=r[i];o&&e.call(o,o.__data__,i,t)}return this},rr.call=function(e){return e.apply(this,(arguments[0]=this,arguments)),this},rr.empty=function(){return!this.node()},rr.node=function(e){for(var t=0,n=this.length;t<n;t++)for(var r=this[t],i=0,s=r.length;i<s;i++){var o=r[i];if(o)return o}return null},rr.transition=function(){var e=[],t,n;for(var r=-1,i=this.length;++r<i;){e.push(t=[]);for(var s=this[r],o=-1,u=s.length;++o<u;)t.push((n=s[o])?{node:n,delay:0,duration:250}:null)}return V(e,lr||++fr,Date.now())};var sr=F([[document]]);sr[0].parentNode=er,d3.select=function(e){return typeof e=="string"?sr.select(e):F([[e]])},d3.selectAll=function(e){return typeof e=="string"?sr.selectAll(e):F([jn(e)])};var or=[];or.append=rr.append,or.insert=rr.insert,or.empty=rr.empty,or.node=rr.node,or.select=function(e){var t=[],n,r,i,s,o;for(var u=-1,a=this.length;++u<a;){i=(s=this[u]).update,t.push(n=[]),n.parentNode=s.parentNode;for(var f=-1,l=s.length;++f<l;)(o=s[f])?(n.push(i[f]=r=e.call(s.parentNode,o.__data__,f)),r.__data__=o.__data__):n.push(null)}return F(t)};var ur={},ar=[],fr=0,lr=0,cr=d3.ease("cubic-in-out");ar.call=rr.call,d3.transition=function(){return sr.transition()},d3.transition.prototype=ar,ar.select=function(e){var t=[],n,r,i;typeof e!="function"&&(e=I(e));for(var s=-1,o=this.length;++s<o;){t.push(n=[]);for(var u=this[s],a=-1,f=u.length;++a<f;)(i=u[a])&&(r=e.call(i.node,i.node.__data__,a))?("__data__"in i.node&&(r.__data__=i.node.__data__),n.push({node:r,delay:i.delay,duration:i.duration})):n.push(null)}return V(t,this.id,this.time).ease(this.ease())},ar.selectAll=function(e){var t=[],n,r,i;typeof e!="function"&&(e=q(e));for(var s=-1,o=this.length;++s<o;)for(var u=this[s],a=-1,f=u.length;++a<f;)if(i=u[a]){r=e.call(i.node,i.node.__data__,a),t.push(n=[]);for(var l=-1,c=r.length;++l<c;)n.push({node:r[l],delay:i.delay,duration:i.duration})}return V(t,this.id,this.time).ease(this.ease())},ar.attr=function(e,t){return this.attrTween(e,J(e,t))},ar.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r===ur?(this.removeAttribute(i),null):r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r===ur?(this.removeAttributeNS(i.space,i.local),null):r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=d3.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},ar.style=function(e,t,n){return arguments.length<3&&(n=""),this.styleTween(e,J(e,t),n)},ar.styleTween=function(e,t,n){return arguments.length<3&&(n=""),this.tween("style."+e,function(r,i){var s=t.call(this,r,i,window.getComputedStyle(this,null).getPropertyValue(e));return s===ur?(this.style.removeProperty(e),null):s&&function(t){this.style.setProperty(e,s(t),n)}})},ar.text=function(e){return this.tween("text",function(t,n){this.textContent=typeof e=="function"?e.call(this,t,n):e})},ar.remove=function(){return this.each("end",function(){var e;!this.__transition__&&(e=this.parentNode)&&e.removeChild(this)})},ar.delay=function(e){var t=this;return t.each(typeof e=="function"?function(n,r,i){t[i][r].delay=+e.apply(this,arguments)}:(e=+e,function(n,r,i){t[i][r].delay=e}))},ar.duration=function(e){var t=this;return t.each(typeof e=="function"?function(n,r,i){t[i][r].duration=+e.apply(this,arguments)}:(e=+e,function(n,r,i){t[i][r].duration=e}))},ar.transition=function(){return this.select(n)};var hr=null,pr,dr;d3.timer=function(e,t,n){var r=!1,i,s=hr;if(arguments.length<3){if(arguments.length<2)t=0;else if(!isFinite(t))return;n=Date.now()}while(s){if(s.callback===e){s.then=n,s.delay=t,r=!0;break}i=s,s=s.next}r||(hr={callback:e,then:n,delay:t,next:hr}),pr||(dr=clearTimeout(dr),pr=1,vr(Q))},d3.timer.flush=function(){var e,t=Date.now(),n=hr;while(n)e=t-n.then,n.delay||(n.flush=n.callback(e)),n=n.next;G()};var vr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,17)};d3.transform=function(e){var t=document.createElementNS(d3.ns.prefix.svg,"g"),n={a:1,b:0,c:0,d:1,e:0,f:0};return(d3.transform=function(e){t.setAttribute("transform",e);var r=t.transform.baseVal.consolidate();return new Y(r?r.matrix:n)})(e)},Y.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var mr=180/Math.PI;d3.scale={},d3.scale.linear=function(){return ut([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return vt(d3.scale.linear(),mt)};var gr=d3.format(".0e");mt.pow=function(e){return Math.pow(10,e)},gt.pow=function(e){return-Math.pow(10,-e)},d3.scale.pow=function(){return yt(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return wt([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(yr)},d3.scale.category20=function(){return d3.scale.ordinal().range(br)},d3.scale.category20b=function(){return d3.scale.ordinal().range(wr)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Er)};var yr=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],br=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],wr=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Er=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return Et([],[])},d3.scale.quantize=function(){return St(0,1,[0,1])},d3.svg={},d3.svg.arc=function(){function e(){var e=t.apply(this,arguments),s=n.apply(this,arguments),o=r.apply(this,arguments)+Sr,u=i.apply(this,arguments)+Sr,a=(u<o&&(a=o,o=u,u=a),u-o),f=a<Math.PI?"0":"1",l=Math.cos(o),c=Math.sin(o),h=Math.cos(u),p=Math.sin(u);return a>=xr?e?"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"M0,"+e+"A"+e+","+e+" 0 1,0 0,"+ -e+"A"+e+","+e+" 0 1,0 0,"+e+"Z":"M0,"+s+"A"+s+","+s+" 0 1,1 0,"+ -s+"A"+s+","+s+" 0 1,1 0,"+s+"Z":e?"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L"+e*h+","+e*p+"A"+e+","+e+" 0 "+f+",0 "+e*l+","+e*c+"Z":"M"+s*l+","+s*c+"A"+s+","+s+" 0 "+f+",1 "+s*h+","+s*p+"L0,0"+"Z"}var t=xt,n=Tt,r=Nt,i=Ct;return e.innerRadius=function(n){return arguments.length?(t=d3.functor(n),e):t},e.outerRadius=function(t){return arguments.length?(n=d3.functor(t),e):n},e.startAngle=function(t){return arguments.length?(r=d3.functor(t),e):r},e.endAngle=function(t){return arguments.length?(i=d3.functor(t),e):i},e.centroid=function(){var e=(t.apply(this,arguments)+n.apply(this,arguments))/2,s=(r.apply(this,arguments)+i.apply(this,arguments))/2+Sr;return[Math.cos(s)*e,Math.sin(s)*e]},e};var Sr=-Math.PI/2,xr=2*Math.PI-1e-6;d3.svg.line=function(){return kt(Object)};var Tr={linear:Mt,"step-before":_t,"step-after":Dt,basis:It,"basis-open":qt,"basis-closed":Rt,bundle:Ut,cardinal:Bt,"cardinal-open":Pt,"cardinal-closed":Ht,monotone:Jt},Nr=[0,2/3,1/3,0],Cr=[0,1/3,2/3,0],kr=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var e=kt(Kt);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},_t.reverse=Dt,Dt.reverse=_t,d3.svg.area=function(){return Qt(Object)},d3.svg.area.radial=function(){var e=Qt(Kt);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},d3.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)+Sr,l=f.call(e,i,r)+Sr;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Math.PI)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=Zt,o=en,u=tn,a=Nt,f=Ct;return e.radius=function(t){return arguments.length?(u=d3.functor(t),e):u},e.source=function(t){return arguments.length?(s=d3.functor(t),e):s},e.target=function(t){return arguments.length?(o=d3.functor(t),e):o},e.startAngle=function(t){return arguments.length?(a=d3.functor(t),e):a},e.endAngle=function(t){return arguments.length?(f=d3.functor(t),e):f},e},d3.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=Zt,n=en,r=sn;return e.source=function(n){return arguments.length?(t=d3.functor(n),e):t},e.target=function(t){return arguments.length?(n=d3.functor(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},d3.svg.diagonal.radial=function(){var e=d3.svg.diagonal(),t=sn,n=e.projection;return e.projection=function(e){return arguments.length?n(on(t=e)):t},e},d3.svg.mouse=function(e){return un(e,d3.event)};var Lr=/WebKit/.test(navigator.userAgent)?-1:0;d3.svg.touches=function(e,t){return arguments.length<2&&(t=d3.event.touches),t?jn(t).map(function(t){var n=un(e,t);return n.identifier=t.identifier,n}):[]},d3.svg.symbol=function(){function e(e,r){return(Ar[t.call(this,e,r)]||Ar.circle)(n.call(this,e,r))}var t=fn,n=an;return e.type=function(n){return arguments.length?(t=d3.functor(n),e):t},e.size=function(t){return arguments.length?(n=d3.functor(t),e):n},e};var Ar={circle:function(e){var t=Math.sqrt(e/Math.PI);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"},cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Mr)),n=t*Mr;return"M0,"+ -t+"L"+n+",0"+" 0,"+t+" "+ -n+",0"+"Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Or),n=t*Or/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Or),n=t*Or/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}};d3.svg.symbolTypes=d3.keys(Ar);var Or=Math.sqrt(3),Mr=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function e(e){e.each(function(l,c,h){var p=d3.select(this),d=e.delay?function(t){var n=lr;try{return lr=e.id,t.transition().delay(e[h][c].delay).duration(e[h][c].duration).ease(e.ease())}finally{lr=n}}:Object,v=t.ticks?t.ticks.apply(t,u):t.domain(),m=a==null?t.tickFormat?t.tickFormat.apply(t,u):String:a,g=hn(t,v,f),y=p.selectAll(".minor").data(g,String),b=y.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),w=d(y.exit()).style("opacity",1e-6).remove(),E=d(y).style("opacity",1),S=p.selectAll("g").data(v,String),x=S.enter().insert("g","path").style("opacity",1e-6),T=d(S.exit()).style("opacity",1e-6).remove(),N=d(S).style("opacity",1),C,k=it(t),L=p.selectAll(".domain").data([0]),A=L.enter().append("path").attr("class","domain"),O=d(L),M=t.copy(),_=this.__chart__||M;this.__chart__=M,x.append("line").attr("class","tick"),x.append("text"),N.select("text").text(m);switch(n){case"bottom":C=ln,b.attr("y2",i),E.attr("x2",0).attr("y2",i),x.select("line").attr("y2",r),x.select("text").attr("y",Math.max(r,0)+o),N.select("line").attr("x2",0).attr("y2",r),N.select("text").attr("x",0).attr("y",Math.max(r,0)+o).attr("dy",".71em").attr("text-anchor","middle"),O.attr("d","M"+k[0]+","+s+"V0H"+k[1]+"V"+s);break;case"top":C=ln,b.attr("y2",-i),E.attr("x2",0).attr("y2",-i),x.select("line").attr("y2",-r),x.select("text").attr("y",-(Math.max(r,0)+o)),N.select("line").attr("x2",0).attr("y2",-r),N.select("text").attr("x",0).attr("y",-(Math.max(r,0)+o)).attr("dy","0em").attr("text-anchor","middle"),O.attr("d","M"+k[0]+","+ -s+"V0H"+k[1]+"V"+ -s);break;case"left":C=cn,b.attr("x2",-i),E.attr("x2",-i).attr("y2",0),x.select("line").attr("x2",-r),x.select("text").attr("x",-(Math.max(r,0)+o)),N.select("line").attr("x2",-r).attr("y2",0),N.select("text").attr("x",-(Math.max(r,0)+o)).attr("y",0).attr("dy",".32em").attr("text-anchor","end"),O.attr("d","M"+ -s+","+k[0]+"H0V"+k[1]+"H"+ -s);break;case"right":C=cn,b.attr("x2",i),E.attr("x2",i).attr("y2",0),x.select("line").attr("x2",r),x.select("text").attr("x",Math.max(r,0)+o),N.select("line").attr("x2",r).attr("y2",0),N.select("text").attr("x",Math.max(r,0)+o).attr("y",0).attr("dy",".32em").attr("text-anchor","start"),O.attr("d","M"+s+","+k[0]+"H0V"+k[1]+"H"+s)}if(t.ticks)x.call(C,_),N.call(C,M),T.call(C,M),b.call(C,_),E.call(C,M),w.call(C,M);else{var D=M.rangeBand()/2,P=function(e){return M(e)+D};x.call(C,P),N.call(C,P)}})}var t=d3.scale.linear(),n="bottom",r=6,i=6,s=6,o=3,u=[10],a,f=0;return e.scale=function(n){return arguments.length?(t=n,e):t},e.orient=function(t){return arguments.length?(n=t,e):n},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickFormat=function(t){return arguments.length?(a=t,e):a},e.tickSize=function(t,n,o){if(!arguments.length)return r;var u=arguments.length-1;return r=+t,i=u>1?+n:r,s=u>0?+arguments[u]:r,e},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(t){return arguments.length?(f=+t,e):f},e},d3.svg.brush=function(){function e(n){var r=i&&s?["n","e","s","w","nw","ne","se","sw"]:i?["e","w"]:s?["n","s"]:[];n.each(function(){var n=d3.select(this).on("mousedown.brush",t),u=n.selectAll(".background").data([,]),a=n.selectAll(".extent").data([,]),f=n.selectAll(".resize").data(r,String),l;u.enter().append("rect").attr("class","background").style("visibility","hidden").style("pointer-events","all").style("cursor","crosshair"),a.enter().append("rect").attr("class","extent").style("cursor","move"),f.enter().append("rect").attr("class",function(e){return"resize "+e}).attr("width",6).attr("height",6).style("visibility","hidden").style("pointer-events",e.empty()?"none":"all").style("cursor",function(e){return Ur[e]}),f.exit().remove(),i&&(l=it(i),u.attr("x",l[0]).attr("width",l[1]-l[0]),pn(n,o)),s&&(l=it(s),u.attr("y",l[0]).attr("height",l[1]-l[0]),dn(n,o))})}function t(){var t=d3.select(d3.event.target);_r=e,Pr=this,jr=o,Rr=d3.svg.mouse(Pr),(Fr=t.classed("extent"))?(Rr[0]=o[0][0]-Rr[0],Rr[1]=o[0][1]-Rr[1]):t.classed("resize")?(Ir=d3.event.target.__data__,Rr[0]=o[+/w$/.test(Ir)][0],Rr[1]=o[+/^n/.test(Ir)][1]):d3.event.altKey&&(qr=Rr.slice()),Hr=!/^(n|s)$/.test(Ir)&&i,Br=!/^(e|w)$/.test(Ir)&&s,Dr=n(this,arguments),Dr("brushstart"),gn(),N()}function n(t,n){return function(i){var s=d3.event;try{d3.event={type:i,target:e},r[i].apply(t,n)}finally{d3.event=s}}}var r=d3.dispatch("brushstart","brush","brushend"),i,s,o=[[0,0],[0,0]];return e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(s=t,e):s},e.extent=function(t){var n,r,u,a,f;return arguments.length?(i&&(n=t[0],r=t[1],s&&(n=n[0],r=r[0]),i.invert&&(n=i(n),r=i(r)),r<n&&(f=n,n=r,r=f),o[0][0]=n,o[1][0]=r),s&&(u=t[0],a=t[1],i&&(u=u[1],a=a[1]),s.invert&&(u=s(u),a=s(a)),a<u&&(f=u,u=a,a=f),o[0][1]=u,o[1][1]=a),e):(i&&(n=o[0][0],r=o[1][0],i.invert&&(n=i.invert(n),r=i.invert(r)),r<n&&(f=n,n=r,r=f)),s&&(u=o[0][1],a=o[1][1],s.invert&&(u=s.invert(u),a=s.invert(a)),a<u&&(f=u,u=a,a=f)),i&&s?[[n,u],[r,a]]:i?[n,r]:s&&[u,a])},e.clear=function(){return o[0][0]=o[0][1]=o[1][0]=o[1][1]=0,e},e.empty=function(){return i&&o[0][0]===o[1][0]||s&&o[0][1]===o[1][1]},d3.select(window).on("mousemove.brush",gn).on("mouseup.brush",bn).on("keydown.brush",vn).on("keyup.brush",mn),d3.rebind(e,r,"on")};var _r,Dr,Pr,Hr,Br,jr,Fr,Ir,qr,Rr,Ur={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};d3.behavior={},d3.behavior.drag=function(){function e(){this.on("mousedown.drag",n).on("touchstart.drag",n),d3.select(window).on("mousemove.drag",Sn).on("touchmove.drag",Sn).on("mouseup.drag",xn,!0).on("touchend.drag",xn,!0).on("click.drag",Tn,!0)}function t(){zr=r,Wr=d3.event.target,Xr=this,Vr=arguments,Jr=En(),i?($r=i.apply(Xr,Vr),$r=[$r.x-Jr[0],$r.y-Jr[1]]):$r=[0,0],Kr=0}function n(){t.apply(this,arguments),wn("dragstart")}var r=d3.dispatch("drag","dragstart","dragend"),i=null;return e.origin=function(t){return arguments.length?(i=t,e):i},d3.rebind(e,r,"on")};var zr,Wr,Xr,Vr,$r,Jr,Kr;d3.behavior.zoom=function(){function e(){this.on("mousedown.zoom",n).on("mousewheel.zoom",r).on("DOMMouseScroll.zoom",r).on("dblclick.zoom",i).on("touchstart.zoom",s),d3.select(window).on("mousemove.zoom",An).on("mouseup.zoom",On).on("touchmove.zoom",Ln).on("touchend.zoom",kn).on("click.zoom",Mn,!0)}function t(){ti=o,ni=a,ri=u.zoom,ii=d3.event.target,si=this,oi=arguments}function n(){t.apply(this,arguments),Gr=Nn(d3.svg.mouse(si)),ui=0,d3.event.preventDefault(),window.focus()}function r(){t.apply(this,arguments),Yr||(Yr=Nn(d3.svg.mouse(si))),_n(Cn()+o[2],d3.svg.mouse(si),Yr)}function i(){t.apply(this,arguments);var e=d3.svg.mouse(si);_n(d3.event.shiftKey?Math.ceil(o[2]-1):Math.floor(o[2]+1),e,Nn(e))}function s(){t.apply(this,arguments);var e=kn(),n,r=Date.now();e.length===1&&r-ei<300&&_n(1+Math.floor(o[2]),n=e[0],Zr[n.identifier]),ei=r}var o=[0,0,0],u=d3.dispatch("zoom"),a=ai;return e.extent=function(t){return arguments.length?(a=t==null?ai:t,e):a},d3.rebind(e,u,"on")};var Qr,Gr,Yr,Zr={},ei=0,ti,ni,ri,ii,si,oi,ui,ai=[[-Infinity,Infinity],[-Infinity,Infinity],[-Infinity,Infinity]]})(),function(){function e(e,t){return function(n){return n&&n.type in e?e[n.type](n):t}}function t(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function n(e,t){e.type in v&&v[e.type](e,t)}function r(e,t){n(e.geometry,t)}function i(e,t){for(var r=e.features,i=0,s=r.length;i<s;i++)n(r[i].geometry,t)}function s(e,t){for(var r=e.geometries,i=0,s=r.length;i<s;i++)n(r[i],t)}function o(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)t.apply(null,n[r])}function u(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var s=n[r],o=0,u=s.length;o<u;o++)t.apply(null,s[o])}function a(e,t){for(var n=e.coordinates,r=0,i=n.length;r<i;r++)for(var s=n[r][0],o=0,u=s.length;o<u;o++)t.apply(null,s[o])}function f(e,t){t.apply(null,e.coordinates)}function l(e,t){for(var n=e.coordinates[0],r=0,i=n.length;r<i;r++)t.apply(null,n[r])}function c(e){return e.source}function h(e){return e.target}function p(e,t){function n(e){var t=Math.sin(m-(e*=m))/g,n=Math.sin(e)/g,r=t*u*i+n*p*l,o=t*u*s+n*p*c,f=t*a+n*v;return[Math.atan2(o,r)/d,Math.atan2(f,Math.sqrt(r*r+o*o))/d]}var r=e[0]*d,i=Math.cos(r),s=Math.sin(r),o=e[1]*d,u=Math.cos(o),a=Math.sin(o),f=t[0]*d,l=Math.cos(f),c=Math.sin(f),h=t[1]*d,p=Math.cos(h),v=Math.sin(h),m=n.d=Math.acos(Math.max(-1,Math.min(1,a*v+u*p*Math.cos(f-r)))),g=Math.sin(m);return n}d3.geo={};var d=Math.PI/180;d3.geo.azimuthal=function(){function e(e){var n=e[0]*d-s,o=e[1]*d,f=Math.cos(n),l=Math.sin(n),c=Math.cos(o),h=Math.sin(o),p=t!=="orthographic"?a*h+u*c*f:null,v,m=t==="stereographic"?1/(1+p):t==="gnomonic"?1/p:t==="equidistant"?(v=Math.acos(p),v?v/Math.sin(v):0):t==="equalarea"?Math.sqrt(2/(1+p)):1,g=m*c*l,y=m*(a*c*f-u*h);return[r*g+i[0],r*y+i[1]]}var t="orthographic",n,r=200,i=[480,250],s,o,u,a;return e.invert=function(e){var n=(e[0]-i[0])/r,o=(e[1]-i[1])/r,f=Math.sqrt(n*n+o*o),l=t==="stereographic"?2*Math.atan(f):t==="gnomonic"?Math.atan(f):t==="equidistant"?f:t==="equalarea"?2*Math.asin(.5*f):Math.asin(f),c=Math.sin(l),h=Math.cos(l);return[(s+Math.atan2(n*c,f*u*h+o*a*c))/d,Math.asin(h*a-(f?o*c*u/f:0))/d]},e.mode=function(n){return arguments.length?(t=n+"",e):t},e.origin=function(t){return arguments.length?(n=t,s=n[0]*d,o=n[1]*d,u=Math.cos(o),a=Math.sin(o),e):n},e.scale=function(t){return arguments.length?(r=+t,e):r},e.translate=function(t){return arguments.length?(i=[+t[0],+t[1]],e):i},e.origin([0,0])},d3.geo.albers=function(){function e(e){var t=u*(d*e[0]-o),n=Math.sqrt(a-2*u*Math.sin(d*e[1]))/u;return[i*n*Math.sin(t)+s[0],i*(n*Math.cos(t)-f)+s[1]]}function t(){var t=d*r[0],i=d*r[1],s=d*n[1],l=Math.sin(t),c=Math.cos(t);return o=d*n[0],u=.5*(l+Math.sin(i)),a=c*c+2*u*l,f=Math.sqrt(a-2*u*Math.sin(s))/u,e}var n=[-98,38],r=[29.5,45.5],i=1e3,s=[480,250],o,u,a,f;return e.invert=function(e){var t=(e[0]-s[0])/i,n=(e[1]-s[1])/i,r=f+n,l=Math.atan2(t,r),c=Math.sqrt(t*t+r*r);return[(o+l/u)/d,Math.asin((a-c*c*u*u)/(2*u))/d]},e.origin=function(e){return arguments.length?(n=[+e[0],+e[1]],t()):n},e.parallels=function(e){return arguments.length?(r=[+e[0],+e[1]],t()):r},e.scale=function(t){return arguments.length?(i=+t,e):i},e.translate=function(t){return arguments.length?(s=[+t[0],+t[1]],e):s},t()},d3.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return(o>50?n:s<-140?r:o<21?i:t)(e)}var t=d3.geo.albers(),n=d3.geo.albers().origin([-160,60]).parallels([55,65]),r=d3.geo.albers().origin([-160,20]).parallels([8,18]),i=d3.geo.albers().origin([-60,10]).parallels([8,18]);return e.scale=function(s){return arguments.length?(t.scale(s),n.scale(s*.6),r.scale(s),i.scale(s*1.5),e.translate(t.translate())):t.scale()},e.translate=function(s){if(!arguments.length)return t.translate();var o=t.scale()/1e3,u=s[0],a=s[1];return t.translate(s),n.translate([u-400*o,a+170*o]),r.translate([u-190*o,a+200*o]),i.translate([u+580*o,a+430*o]),e},e.scale(t.scale())},d3.geo.bonne=function(){function e(e){var u=e[0]*d-r,a=e[1]*d-i;if(s){var f=o+s-a,l=u*Math.cos(a)/f;u=f*Math.sin(l),a=f*Math.cos(l)-o}else u*=Math.cos(a),a*=-1;return[t*u+n[0],t*a+n[1]]}var t=200,n=[480,250],r,i,s,o;return e
.invert=function(e){var i=(e[0]-n[0])/t,u=(e[1]-n[1])/t;if(s){var a=o+u,f=Math.sqrt(i*i+a*a);u=o+s-f,i=r+f*Math.atan2(i,a)/Math.cos(u)}else u*=-1,i/=Math.cos(u);return[i/d,u/d]},e.parallel=function(t){return arguments.length?(o=1/Math.tan(s=t*d),e):s/d},e.origin=function(t){return arguments.length?(r=t[0]*d,i=t[1]*d,e):[r/d,i/d]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function e(e){var r=e[0]/360,i=-e[1]/360;return[t*r+n[0],t*i+n[1]]}var t=500,n=[480,250];return e.invert=function(e){var r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return[360*r,-360*i]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e},d3.geo.mercator=function(){function e(e){var r=e[0]/360,i=-(Math.log(Math.tan(Math.PI/4+e[1]*d/2))/d)/360;return[t*r+n[0],t*Math.max(-0.5,Math.min(.5,i))+n[1]]}var t=500,n=[480,250];return e.invert=function(e){var r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return[360*r,2*Math.atan(Math.exp(-360*i*d))/d-90]},e.scale=function(n){return arguments.length?(t=+n,e):t},e.translate=function(t){return arguments.length?(n=[+t[0],+t[1]],e):n},e},d3.geo.path=function(){function n(e,n){return typeof u=="function"&&(a=t(u.apply(this,arguments))),l(e)||null}function r(e){return f(e).join(",")}function i(e){var t=o(e[0]),n=0,r=e.length;while(++n<r)t-=o(e[n]);return t}function s(e){var t=d3.geom.polygon(e[0].map(f)),n=t.area(),r=t.centroid(n<0?(n*=-1,1):-1),i=r[0],s=r[1],o=n,u=0,a=e.length;while(++u<a)t=d3.geom.polygon(e[u].map(f)),n=t.area(),r=t.centroid(n<0?(n*=-1,1):-1),i-=r[0],s-=r[1],o-=n;return[i,s,6*o]}function o(e){return Math.abs(d3.geom.polygon(e.map(f)).area())}var u=4.5,a=t(u),f=d3.geo.albersUsa(),l=e({FeatureCollection:function(e){var t=[],n=e.features,r=-1,i=n.length;while(++r<i)t.push(l(n[r].geometry));return t.join("")},Feature:function(e){return l(e.geometry)},Point:function(e){return"M"+r(e.coordinates)+a},MultiPoint:function(e){var t=[],n=e.coordinates,i=-1,s=n.length;while(++i<s)t.push("M",r(n[i]),a);return t.join("")},LineString:function(e){var t=["M"],n=e.coordinates,i=-1,s=n.length;while(++i<s)t.push(r(n[i]),"L");return t.pop(),t.join("")},MultiLineString:function(e){var t=[],n=e.coordinates,i=-1,s=n.length,o,u,a;while(++i<s){o=n[i],u=-1,a=o.length,t.push("M");while(++u<a)t.push(r(o[u]),"L");t.pop()}return t.join("")},Polygon:function(e){var t=[],n=e.coordinates,i=-1,s=n.length,o,u,a;while(++i<s){o=n[i],u=-1;if((a=o.length-1)>0){t.push("M");while(++u<a)t.push(r(o[u]),"L");t[t.length-1]="Z"}}return t.join("")},MultiPolygon:function(e){var t=[],n=e.coordinates,i=-1,s=n.length,o,u,a,f,l,c;while(++i<s){o=n[i],u=-1,a=o.length;while(++u<a){f=o[u],l=-1;if((c=f.length-1)>0){t.push("M");while(++l<c)t.push(r(f[l]),"L");t[t.length-1]="Z"}}}return t.join("")},GeometryCollection:function(e){var t=[],n=e.geometries,r=-1,i=n.length;while(++r<i)t.push(l(n[r]));return t.join("")}}),c=n.area=e({FeatureCollection:function(e){var t=0,n=e.features,r=-1,i=n.length;while(++r<i)t+=c(n[r]);return t},Feature:function(e){return c(e.geometry)},Polygon:function(e){return i(e.coordinates)},MultiPolygon:function(e){var t=0,n=e.coordinates,r=-1,s=n.length;while(++r<s)t+=i(n[r]);return t},GeometryCollection:function(e){var t=0,n=e.geometries,r=-1,i=n.length;while(++r<i)t+=c(n[r]);return t}},0),h=n.centroid=e({Feature:function(e){return h(e.geometry)},Polygon:function(e){var t=s(e.coordinates);return[t[0]/t[2],t[1]/t[2]]},MultiPolygon:function(e){var t=0,n=e.coordinates,r,i=0,o=0,u=0,a=-1,f=n.length;while(++a<f)r=s(n[a]),i+=r[0],o+=r[1],u+=r[2];return[i/u,o/u]}});return n.projection=function(e){return f=e,n},n.pointRadius=function(e){return typeof e=="function"?u=e:(u=+e,a=t(u)),n},n},d3.geo.bounds=function(e){var t=Infinity,r=Infinity,i=-Infinity,s=-Infinity;return n(e,function(e,n){e<t&&(t=e),e>i&&(i=e),n<r&&(r=n),n>s&&(s=n)}),[[t,r],[i,s]]};var v={Feature:r,FeatureCollection:i,GeometryCollection:s,LineString:o,MultiLineString:u,MultiPoint:o,MultiPolygon:a,Point:f,Polygon:l};d3.geo.circle=function(){function t(){}function n(e){return a.distance(e)<u}function r(e){var t=-1,n=e.length,r=[],s,o,f,l,c;while(++t<n)c=a.distance(f=e[t]),c<u?(o&&r.push(p(o,f)((l-u)/(l-c))),r.push(f),s=o=null):(o=f,!s&&r.length&&(r.push(p(r[r.length-1],o)((u-l)/(c-l))),s=o)),l=c;return o&&r.length&&(c=a.distance(f=r[0]),r.push(p(o,f)((l-u)/(l-c)))),i(r)}function i(e){var t=0,n=e.length,r,i,s=n?[e[0]]:e,o,u=a.source();while(++t<n){o=a.source(e[t-1])(e[t]).coordinates;for(r=0,i=o.length;++r<i;)s.push(o[r])}return a.source(u),s}var s=[0,0],o=89.99,u=o*d,a=d3.geo.greatArc().target(Object);t.clip=function(e){return a.source(typeof s=="function"?s.apply(this,arguments):s),f(e)};var f=e({FeatureCollection:function(e){var t=e.features.map(f).filter(Object);return t&&(e=Object.create(e),e.features=t,e)},Feature:function(e){var t=f(e.geometry);return t&&(e=Object.create(e),e.geometry=t,e)},Point:function(e){return n(e.coordinates)&&e},MultiPoint:function(e){var t=e.coordinates.filter(n);return t.length&&{type:e.type,coordinates:t}},LineString:function(e){var t=r(e.coordinates);return t.length&&(e=Object.create(e),e.coordinates=t,e)},MultiLineString:function(e){var t=e.coordinates.map(r).filter(function(e){return e.length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},Polygon:function(e){var t=e.coordinates.map(r);return t[0].length&&(e=Object.create(e),e.coordinates=t,e)},MultiPolygon:function(e){var t=e.coordinates.map(function(e){return e.map(r)}).filter(function(e){return e[0].length});return t.length&&(e=Object.create(e),e.coordinates=t,e)},GeometryCollection:function(e){var t=e.geometries.map(f).filter(Object);return t.length&&(e=Object.create(e),e.geometries=t,e)}});return t.origin=function(e){return arguments.length?(s=e,t):s},t.angle=function(e){return arguments.length?(u=(o=+e)*d,t):o},t.precision=function(e){return arguments.length?(a.precision(e),t):a.precision()},t},d3.geo.greatArc=function(){function e(){var e=typeof t=="function"?t.apply(this,arguments):t,i=typeof n=="function"?n.apply(this,arguments):n,s=p(e,i),o=r/s.d,u=0,a=[e];while((u+=o)<1)a.push(s(u));return a.push(i),{type:"LineString",coordinates:a}}var t=c,n=h,r=6*d;return e.distance=function(){var e=typeof t=="function"?t.apply(this,arguments):t,r=typeof n=="function"?n.apply(this,arguments):n;return p(e,r).d},e.source=function(n){return arguments.length?(t=n,e):t},e.target=function(t){return arguments.length?(n=t,e):n},e.precision=function(t){return arguments.length?(r=t*d,e):r/d},e},d3.geo.greatCircle=d3.geo.circle}(),function(e,t){function n(e){return B.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}function r(e){if(!mn[e]){var t=D.body,n=B("<"+e+">").appendTo(t),r=n.css("display");n.remove();if(r==="none"||r===""){gn||(gn=D.createElement("iframe"),gn.frameBorder=gn.width=gn.height=0),t.appendChild(gn);if(!yn||!gn.createElement)yn=(gn.contentWindow||gn.contentDocument).document,yn.write((D.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>"),yn.close();n=yn.createElement(e),yn.body.appendChild(n),r=B.css(n,"display"),t.removeChild(gn)}mn[e]=r}return mn[e]}function i(e,t){var n={};return B.each(Sn.concat.apply([],Sn.slice(0,t)),function(){n[this]=e}),n}function s(){xn=t}function o(){return setTimeout(s,0),xn=B.now()}function u(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function a(){try{return new e.XMLHttpRequest}catch(t){}}function f(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var r=e.dataTypes,i={},s,o,u=r.length,a,f=r[0],l,c,h,p,d;for(s=1;s<u;s++){if(s===1)for(o in e.converters)typeof o=="string"&&(i[o.toLowerCase()]=e.converters[o]);l=f,f=r[s];if(f==="*")f=l;else if(l!=="*"&&l!==f){c=l+" "+f,h=i[c]||i["* "+f];if(!h){d=t;for(p in i){a=p.split(" ");if(a[0]===l||a[0]==="*"){d=i[a[1]+" "+f];if(d){p=i[p],p===!0?h=d:d===!0&&(h=p);break}}}}!h&&!d&&B.error("No conversion from "+c.replace(" "," to ")),h!==!0&&(n=h?h(n):d(p(n)))}}return n}function l(e,n,r){var i=e.contents,s=e.dataTypes,o=e.responseFields,u,a,f,l;for(a in o)a in r&&(n[o[a]]=r[a]);while(s[0]==="*")s.shift(),u===t&&(u=e.mimeType||n.getResponseHeader("content-type"));if(u)for(a in i)if(i[a]&&i[a].test(u)){s.unshift(a);break}if(s[0]in r)f=s[0];else{for(a in r){if(!s[0]||e.converters[a+" "+s[0]]){f=a;break}l||(l=a)}f=f||l}if(f)return f!==s[0]&&s.unshift(f),r[f]}function c(e,t,n,r){if(B.isArray(t))B.each(t,function(t,i){n||zt.test(e)?r(e,i):c(e+"["+(typeof i=="object"||B.isArray(i)?t:"")+"]",i,n,r)});else if(!n&&t!=null&&typeof t=="object")for(var i in t)c(e+"["+i+"]",t[i],n,r);else r(e,t)}function h(e,n){var r,i,s=B.ajaxSettings.flatOptions||{};for(r in n)n[r]!==t&&((s[r]?e:i||(i={}))[r]=n[r]);i&&B.extend(!0,e,i)}function p(e,n,r,i,s,o){s=s||n.dataTypes[0],o=o||{},o[s]=!0;var u=e[s],a=0,f=u?u.length:0,l=e===sn,c;for(;a<f&&(l||!c);a++)c=u[a](n,r,i),typeof c=="string"&&(!l||o[c]?c=t:(n.dataTypes.unshift(c),c=p(e,n,r,i,c,o)));return(l||!c)&&!o["*"]&&(c=p(e,n,r,i,"*",o)),c}function d(e){return function(t,n){typeof t!="string"&&(n=t,t="*");if(B.isFunction(n)){var r=t.toLowerCase().split(en),i=0,s=r.length,o,u,a;for(;i<s;i++)o=r[i],a=/^\+/.test(o),a&&(o=o.substr(1)||"*"),u=e[o]=e[o]||[],u[a?"unshift":"push"](n)}}}function v(e,t,n){var r=t==="width"?e.offsetWidth:e.offsetHeight,i=t==="width"?jt:Ft,s=0,o=i.length;if(r>0){if(n!=="border")for(;s<o;s++)n||(r-=parseFloat(B.css(e,"padding"+i[s]))||0),n==="margin"?r+=parseFloat(B.css(e,n+i[s]))||0:r-=parseFloat(B.css(e,"border"+i[s]+"Width"))||0;return r+"px"}r=It(e,t,t);if(r<0||r==null)r=e.style[t]||0;r=parseFloat(r)||0;if(n)for(;s<o;s++)r+=parseFloat(B.css(e,"padding"+i[s]))||0,n!=="padding"&&(r+=parseFloat(B.css(e,"border"+i[s]+"Width"))||0),n==="margin"&&(r+=parseFloat(B.css(e,n+i[s]))||0);return r+"px"}function m(e,t){t.src?B.ajax({url:t.src,async:!1,dataType:"script"}):B.globalEval((t.text||t.textContent||t.innerHTML||"").replace(kt,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)}function g(e){var t=D.createElement("div");return At.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function y(e){var t=(e.nodeName||"").toLowerCase();t==="input"?b(e):t!=="script"&&typeof e.getElementsByTagName!="undefined"&&B.grep(e.getElementsByTagName("input"),b)}function b(e){if(e.type==="checkbox"||e.type==="radio")e.defaultChecked=e.checked}function w(e){return typeof e.getElementsByTagName!="undefined"?e.getElementsByTagName("*"):typeof e.querySelectorAll!="undefined"?e.querySelectorAll("*"):[]}function E(e,t){var n;if(t.nodeType===1){t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase();if(n==="object")t.outerHTML=e.outerHTML;else if(n!=="input"||e.type!=="checkbox"&&e.type!=="radio"){if(n==="option")t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}else e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value);t.removeAttribute(B.expando)}}function S(e,t){if(t.nodeType===1&&!!B.hasData(e)){var n,r,i,s=B._data(e),o=B._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)B.event.add(t,n+(u[n][r].namespace?".":"")+u[n][r].namespace,u[n][r],u[n][r].data)}o.data&&(o.data=B.extend({},o.data))}}function x(e,t){return B.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function T(e){var t=vt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function N(e,t,n){t=t||0;if(B.isFunction(t))return B.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return B.grep(e,function(e,r){return e===t===n});if(typeof t=="string"){var r=B.grep(e,function(e){return e.nodeType===1});if(ct.test(t))return B.filter(t,r,!n);t=B.filter(t,r)}return B.grep(e,function(e,r){return B.inArray(e,t)>=0===n})}function C(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function k(){return!0}function L(){return!1}function A(e,t,n){var r=t+"defer",i=t+"queue",s=t+"mark",o=B._data(e,r);o&&(n==="queue"||!B._data(e,i))&&(n==="mark"||!B._data(e,s))&&setTimeout(function(){!B._data(e,i)&&!B._data(e,s)&&(B.removeData(e,r,!0),o.fire())},0)}function O(e){for(var t in e){if(t==="data"&&B.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function M(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(q,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:B.isNumeric(r)?parseFloat(r):I.test(r)?B.parseJSON(r):r}catch(s){}B.data(e,n,r)}else r=t}return r}function _(e){var t=j[e]={},n,r;e=e.split(/\s+/);for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}var D=e.document,P=e.navigator,H=e.location,B=function(){function n(){if(!r.isReady){try{D.documentElement.doScroll("left")}catch(e){setTimeout(n,1);return}r.ready()}}var r=function(e,t){return new r.fn.init(e,t,o)},i=e.jQuery,s=e.$,o,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,a=/\S/,f=/^\s+/,l=/\s+$/,c=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,h=/^[\],:{}\s]*$/,p=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,v=/(?:^|:|,)(?:\s*\[)+/g,m=/(webkit)[ \/]([\w.]+)/,g=/(opera)(?:.*version)?[ \/]([\w.]+)/,y=/(msie) ([\w.]+)/,b=/(mozilla)(?:.*? rv:([\w.]+))?/,w=/-([a-z]|[0-9])/ig,E=/^-ms-/,S=function(e,t){return(t+"").toUpperCase()},x=P.userAgent,T,N,C,k=Object.prototype.toString,L=Object.prototype.hasOwnProperty,A=Array.prototype.push,O=Array.prototype.slice,M=String.prototype.trim,_=Array.prototype.indexOf,H={};return r.fn=r.prototype={constructor:r,init:function(e,n,i){var s,o,a,f;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if(e==="body"&&!n&&D.body)return this.context=D,this[0]=D.body,this.selector=e,this.length=1,this;if(typeof e=="string"){e.charAt(0)!=="<"||e.charAt(e.length-1)!==">"||e.length<3?s=u.exec(e):s=[null,e,null];if(s&&(s[1]||!n)){if(s[1])return n=n instanceof r?n[0]:n,f=n?n.ownerDocument||n:D,a=c.exec(e),a?r.isPlainObject(n)?(e=[D.createElement(a[1])],r.fn.attr.call(e,n,!0)):e=[f.createElement(a[1])]:(a=r.buildFragment([s[1]],[f]),e=(a.cacheable?r.clone(a.fragment):a.fragment).childNodes),r.merge(this,e);o=D.getElementById(s[2]);if(o&&o.parentNode){if(o.id!==s[2])return i.find(e);this.length=1,this[0]=o}return this.context=D,this.selector=e,this}return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e)}return r.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),r.makeArray(e,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return O.call(this,0)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return r.isArray(e)?A.apply(i,e):r.merge(i,e),i.prevObject=this,i.context=this.context,t==="find"?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return r.each(this,e,t)},ready:function(e){return r.bindReady(),N.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(O.apply(this,arguments),"slice",O.call(arguments).join(","))},map:function(e){return this.pushStack(r.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:A,sort:[].sort,splice:[].splice},r.fn.init.prototype=r.fn,r.extend=r.fn.extend=function(){var e,n,i,s,o,u,a=arguments[0]||{},f=1,l=arguments.length,c=!1;typeof a=="boolean"&&(c=a,a=arguments[1]||{},f=2),typeof a!="object"&&!r.isFunction(a)&&(a={}),l===f&&(a=this,--f);for(;f<l;f++)if((e=arguments[f])!=null)for(n in e){i=a[n],s=e[n];if(a===s)continue;c&&s&&(r.isPlainObject(s)||(o=r.isArray(s)))?(o?(o=!1,u=i&&r.isArray(i)?i:[]):u=i&&r.isPlainObject(i)?i:{},a[n]=r.extend(c,u,s)):s!==t&&(a[n]=s)}return a},r.extend({noConflict:function(t){return e.$===r&&(e.$=s),t&&e.jQuery===r&&(e.jQuery=i),r},isReady:!1,readyWait:1,holdReady:function(e){e?r.readyWait++:r.ready(!0)},ready:function(e){if(e===!0&&!--r.readyWait||e!==!0&&!r.isReady){if(!D.body)return setTimeout(r.ready,1);r.isReady=!0;if(e!==!0&&--r.readyWait>0)return;N.fireWith(D,[r]),r.fn.trigger&&r(D).trigger("ready").off("ready")}},bindReady:function(){if(!N){N=r.Callbacks("once memory");if(D.readyState==="complete")return setTimeout(r.ready,1);if(D.addEventListener)D.addEventListener("DOMContentLoaded",C,!1),e.addEventListener("load",r.ready,!1);else if(D.attachEvent){D.attachEvent("onreadystatechange",C),e.attachEvent("onload",r.ready);var t=!1;try{t=e.frameElement==null}catch(i){}D.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return r.type(e)==="function"},isArray:Array.isArray||function(e){return r.type(e)==="array"},isWindow:function(e){return e&&typeof e=="object"&&"setInterval"in e},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):H[k.call(e)]||"object"},isPlainObject:function(e){if(!e||r.type(e)!=="object"||e.nodeType||r.isWindow(e))return!1;try{if(e.constructor&&!L.call(e,"constructor")&&!L.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||L.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){if(typeof t!="string"||!t)return null;t=r.trim(t);if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(h.test(t.replace(p,"@").replace(d,"]").replace(v,"")))return(new Function("return "+t))();r.error("Invalid JSON: "+t)},parseXML:function(n){var i,s;try{e.DOMParser?(s=new DOMParser,i=s.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(o){i=t}return(!i||!i.documentElement||i.getElementsByTagName("parsererror").length)&&r.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&a.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(E,"ms-").replace(w,S)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var s,o=0,u=e.length,a=u===t||r.isFunction(e);if(i){if(a){for(s in e)if(n.apply(e[s],i)===!1)break}else for(;o<u;)if(n.apply(e[o++],i)===!1)break}else if(a){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o<u;)if(n.call(e[o],o,e[o++])===!1)break;return e},trim:M?function(e){return e==null?"":M.call(e)}:function(e){return e==null?"":(e+"").replace(f,"").replace(l,"")},makeArray:function(e,t){var n=t||[];if(e!=null){var i=r.type(e);e.length==null||i==="string"||i==="function"||i==="regexp"||r.isWindow(e)?A.call(n,e):r.merge(n,e)}return n},inArray:function(e,t,n){var r;if(t){if(_)return _.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=e.length,i=0;if(typeof n.length=="number")for(var s=n.length;i<s;i++)e[r++]=n[i];else while(n[i]!==t)e[r++]=n[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i;n=!!n;for(var s=0,o=e.length;s<o;s++)i=!!t(e[s],s),n!==i&&r.push(e[s]);return r},map:function(e,n,i){var s,o,u=[],a=0,f=e.length,l=e instanceof r||f!==t&&typeof f=="number"&&(f>0&&e[0]&&e[f-1]||f===0||r.isArray(e));if(l)for(;a<f;a++)s=n(e[a],a,i),s!=null&&(u[u.length]=s);else for(o in e)s=n(e[o],o,i),s!=null&&(u[u.length]=s);return u.concat.apply([],u)},guid:1,proxy:function(e,n){if(typeof n=="string"){var i=e[n];n=e,e=i}if(!r.isFunction(e))return t;var s=O.call(arguments,2),o=function(){return e.apply(n,s.concat(O.call(arguments)))};return o.guid=e.guid=e.guid||o.guid||r.guid++,o},access:function(e,n,i,s,o,u){var a=e.length;if(typeof n=="object"){for(var f in n)r.access(e,f,n[f],s,o,i);return e}if(i!==t){s=!u&&s&&r.isFunction(i);for(var l=0;l<a;l++)o(e[l],n,s?i.call(e[l],l,o(e[l],n)):i,u);return e}return a?o(e[0],n):t},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=m.exec(e)||g.exec(e)||y.exec(e)||e.indexOf("compatible")<0&&b.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}r.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof r&&!(i instanceof e)&&(i=e(i)),r.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(D);return e},browser:{}}),r.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){H["[object "+t+"]"]=t.toLowerCase()}),T=r.uaMatch(x),T.browser&&(r.browser[T.browser]=!0,r.browser.version=T.version),r.browser.webkit&&(r.browser.safari=!0),a.test(" ")&&(f=/^[\s\xA0]+/,l=/[\s\xA0]+$/),o=r(D),D.addEventListener?C=function(){D.removeEventListener("DOMContentLoaded",C,!1),r.ready()}:D.attachEvent&&(C=function(){D.readyState==="complete"&&(D.detachEvent("onreadystatechange",C),r.ready())}),r}(),j={};B.Callbacks=function(e){e=e?j[e]||_(e):{};var n=[],r=[],i,s,o,u,a,f=function(t){var r,i,s,o,u;for(r=0,i=t.length;r<i;r++)s=t[r],o=B.type(s),o==="array"?f(s):o==="function"&&(!e.unique||!c.has(s))&&n.push(s)},l=function(t,f){f=f||[],i=!e.memory||[t,f],s=!0,a=o||0,o=0,u=n.length;for(;n&&a<u;a++)if(n[a].apply(t,f)===!1&&e.stopOnFalse){i=!0;break}s=!1,n&&(e.once?i===!0?c.disable():n=[]:r&&r.length&&(i=r.shift(),c.fireWith(i[0],i[1])))},c={add:function(){if(n){var e=n.length;f(arguments),s?u=n.length:i&&i!==!0&&(o=e,l(i[0],i[1]))}return this},remove:function(){if(n){var t=arguments,r=0,i=t.length;for(;r<i;r++)for(var o=0;o<n.length;o++)if(t[r]===n[o]){s&&o<=u&&(u--,o<=a&&a--),n.splice(o--,1);if(e.unique)break}}return this},has:function(e){if(n){var t=0,r=n.length;for(;t<r;t++)if(e===n[t])return!0}return!1},empty:function(){return n=[],this},disable:function(){return n=r=i=t,this},disabled:function(){return!n},lock:function(){return r=t,(!i||i===!0)&&c.disable(),this},locked:function(){return!r},fireWith:function(t,n){return r&&(s?e.once||r.push([t,n]):(!e.once||!i)&&l(t,n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c};var F=[].slice;B.extend({Deferred:function(e){var t=B.Callbacks("once memory"),n=B.Callbacks("once memory"),r=B.Callbacks("memory"),i="pending",s={resolve:t,reject:n,notify:r},o={done:t.add,fail:n.add,progress:r.add,state:function(){return i},isResolved:t.fired,isRejected:n.fired,then:function(e,t,n){return u.done(e).fail(t).progress(n),this},always:function(){return u.done.apply(u,arguments).fail.apply(u,arguments),this},pipe:function(e,t,n){return B.Deferred(function(r){B.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n=t[0],i=t[1],s;B.isFunction(n)?u[e](function(){s=n.apply(this,arguments),s&&B.isFunction(s.promise)?s.promise().then(r.resolve,r.reject,r.notify):r[i+"With"](this===u?r:this,[s])}):u[e](r[i])})}).promise()},promise:function(e){if(e==null)e=o;else for(var t in o)e[t]=o[t];return e}},u=o.promise({}),a;for(a in s)u[a]=s[a].fire,u[a+"With"]=s[a].fireWith;return u.done(function(){i="resolved"},n.disable,r.lock).fail(function(){i="rejected"},t.disable,r.lock),e&&e.call(u,u),u},when:function(e){function t(e){return function(t){o[e]=arguments.length>1?F.call(arguments,0):t,f.notifyWith(l,o)}}function n(e){return function(t){r[e]=arguments.length>1?F.call(arguments,0):t,--u||f.resolveWith(f,r)}}var r=F.call(arguments,0),i=0,s=r.length,o=Array(s),u=s,a=s,f=s<=1&&e&&B.isFunction(e.promise)?e:B.Deferred(),l=f.promise();if(s>1){for(;i<s;i++)r[i]&&r[i].promise&&B.isFunction(r[i].promise)?r[i].promise().then(n(i),f.reject,t(i)):--u;u||f.resolveWith(f,r)}else f!==e&&f.resolveWith(f,s?[e]:[]);return l}}),B.support=function(){var t,n,r,i,s,o,u,a,f,l,c,h,p,d=D.createElement("div"),v=D.documentElement;d.setAttribute("className","t"),d.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0];if(!n||!n.length||!r)return{};i=D.createElement("select"),s=i.appendChild(D.createElement("option")),o=d.getElementsByTagName("input")[0],t={leadingWhitespace:d.firstChild.nodeType===3,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.55/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:o.value==="on",optSelected:s.selected,getSetAttribute:d.className!=="t",enctype:!!D.createElement("form").enctype,html5Clone:D.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,i.disabled=!0,t.optDisabled=!s.disabled;try{delete d.test}catch(m){t.deleteExpando=!1}!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick")),o=D.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","checked"),d.appendChild(o),a=D.createDocumentFragment(),a.appendChild(d.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,a.removeChild(o),a.appendChild(d),d.innerHTML="",e.getComputedStyle&&(u=D.createElement("div"),u.style.width="0",u.style.marginRight="0",d.style.width="2px",d.appendChild(u),t.reliableMarginRight=(parseInt((e.getComputedStyle(u,null)||{marginRight:0}).marginRight,10)||0)===0);if(d.attachEvent)for(h in{submit:1,change:1,focusin:1})c="on"+h,p=c in d,p||(d.setAttribute(c,"return;"),p=typeof d[c]=="function"),t[h+"Bubbles"]=p;return a.removeChild(d),a=i=s=u=d=o=null,B(function(){var e,n,r,i,s,o,u,a,l,c,h,v=D.getElementsByTagName("body")[0];!v||(u=1,a="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",l="visibility:hidden;border:0;",c="style='"+a+"border:5px solid #000;padding:0;'",h="<div "+c+"><div></div></div>"+"<table "+c+" cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",e=D.createElement("div"),e.style.cssText=l+"width:0;height:0;position:static;top:0;margin-top:"+u+"px",v.insertBefore(e,v.firstChild),d=D.createElement("div"),e.appendChild(d),d.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),p=f[0].offsetHeight===0,f[0].style.display="",f[1].style.display="none",t.reliableHiddenOffsets=p&&f[0].offsetHeight===0,d.innerHTML="",d.style.width=d.style.paddingLeft="1px",B.boxModel=t.boxModel=d.offsetWidth===2,typeof d.style.zoom!="undefined"&&(d.style.display="inline",d.style.zoom=1,t.inlineBlockNeedsLayout=d.offsetWidth===2,d.style.display="",d.innerHTML="<div style='width:4px;'></div>",t.shrinkWrapBlocks=d.offsetWidth!==2),d.style.cssText=a+l,d.innerHTML=h,n=d.firstChild,r=n.firstChild,s=n.nextSibling.firstChild.firstChild,o={doesNotAddBorder:r.offsetTop!==5,doesAddBorderForTableAndCells:s.offsetTop===5},r.style.position="fixed",r.style.top="20px",o.fixedPosition=r.offsetTop===20||r.offsetTop===15,r.style.position=r.style.top="",n.style.overflow="hidden",n.style.position="relative",o.subtractsBorderForOverflowNotVisible=r.offsetTop===-5,o.doesNotIncludeMarginInBodyOffset=v.offsetTop!==u,v.removeChild(e),d=e=null,B.extend(t,o))}),t}();var I=/^(?:\{.*\}|\[.*\])$/,q=/([A-Z])/g;B.extend({cache:{},uuid:0,expando:"jQuery"+(B.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?B.cache[e[B.expando]]:e[B.expando],!!e&&!O(e)},data:function(e,n,r,i){if(!!B.acceptData(e)){var s,o,u,a=B.expando,f=typeof n=="string",l=e.nodeType,c=l?B.cache:e,h=l?e[a]:e[a]&&a,p=n==="events";if((!h||!c[h]||!p&&!i&&!c[h].data)&&f&&r===t)return;h||(l?e[a]=h=++B.uuid:h=a),c[h]||(c[h]={},l||(c[h].toJSON=B.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=B.extend(c[h],n):c[h].data=B.extend(c[h].data,n);return s=o=c[h],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[B.camelCase(n)]=r),p&&!o[n]?s.events:(f?(u=o[n],u==null&&(u=o[B.camelCase(n)])):u=o,u)}},removeData:function(e,t,n){if(!!B.acceptData(e)){var r,i,s,o=B.expando,u=e.nodeType,a=u?B.cache:e,f=u?e[o]:o;if(!a[f])return;if(t){r=n?a[f]:a[f].data;if(r){B.isArray(t)||(t in r?t=[t]:(t=B.camelCase(t),t in r?t=[t]:t=t.split(" ")));for(i=0,s=t.length;i<s;i++)delete r[t[i]];if(!(n?O:B.isEmptyObject)(r))return}}if(!n){delete a[f].data;if(!O(a[f]))return}B.support.deleteExpando||!a.setInterval?delete a[f]:a[f]=null,u&&(B.support.deleteExpando?delete e[o]:e.removeAttribute?e.removeAttribute(o):e[o]=null)}},_data:function(e,t,n){return B.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=B.noData[e.nodeName.toLowerCase()];if(t)return t!==!0&&e.getAttribute("classid")===t}return!0}}),B.fn.extend({data:function(e,n){var r,i,s,o=null;if(typeof e=="undefined"){if(this.length){o=B.data(this[0]);if(this[0].nodeType===1&&!B._data(this[0],"parsedAttrs")){i=this[0].attributes;for(var u=0,a=i.length;u<a;u++)s=i[u].name,s.indexOf("data-")===0&&(s=B.camelCase(s.substring(5)),M(this[0],s,o[s]));B._data(this[0],"parsedAttrs",!0)}}return o}return typeof e=="object"?this.each(function(){B.data(this,e)}):(r=e.split("."),r[1]=r[1]?"."+r[1]:"",n===t?(o=this.triggerHandler("getData"+r[1]+"!",[r[0]]),o===t&&this.length&&(o=B.data(this[0],e),o=M(this[0],e,o)),o===t&&r[1]?this.data(r[0]):o):this.each(function(){var t=B(this),i=[r[0],n];t.triggerHandler("setData"+r[1]+"!",i),B.data(this,e,n),t.triggerHandler("changeData"+r[1]+"!",i)}))},removeData:function(e){return this.each(function(){B.removeData(this,e)})}}),B.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",B._data(e,t,(B._data(e,t)||0)+1))},_unmark:function(e,t,n){e!==!0&&(n=t,t=e,e=!1);if(t){n=n||"fx";var r=n+"mark",i=e?0:(B._data(t,r)||1)-1;i?B._data(t,r,i):(B.removeData(t,r,!0),A(t,n,"mark"))}},queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=B._data(e,t),n&&(!r||B.isArray(n)?r=B._data(e,t,B.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=B.queue(e,t),r=n.shift(),i={};r==="inprogress"&&(r=n.shift()),r&&(t==="fx"&&n.unshift("inprogress"),B._data(e,t+".run",i),r.call(e,function(){B.dequeue(e,t)},i)),n.length||(B.removeData(e,t+"queue "+t+".run",!0),A(e,t,"queue"))}}),B.fn.extend({queue:function(e,n){return typeof e!="string"&&(n=e,e="fx"),n===t?B.queue(this[0],e):this.each(function(){var t=B.queue(this,e,n);e==="fx"&&t[0]!=="inprogress"&&B.dequeue(this,e)})},dequeue:function(e){return this.each(function(){B.dequeue(this,e)})},delay:function(e,t){return e=B.fx?B.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function r(){--u||i.resolveWith(s,[s])}typeof e!="string"&&(n=e,e=t),e=e||"fx";var i=B.Deferred(),s=this,o=s.length,u=1,a=e+"defer",f=e+"queue",l=e+"mark",c;while(o--)if(c=B.data(s[o],a,t,!0)||(B.data(s[o],f,t,!0)||B.data(s[o],l,t,!0))&&B.data(s[o],a,B.Callbacks("once memory"),!0))u++,c.add(r);return r(),i.promise()}});var R=/[\n\t\r]/g,U=/\s+/,z=/\r/g,W=/^(?:button|input)$/i,X=/^(?:button|input|object|select|textarea)$/i,V=/^a(?:rea)?$/i,$=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,J=B.support.getSetAttribute,K,Q,G;B.fn.extend({attr:function(e,t){return B.access(this,e,t,!0,B.attr)},removeAttr:function(e){return this.each(function(){B.removeAttr(this,e)})},prop:function(e,t){return B.access(this,e,t,!0,B.prop)},removeProp:function(e){return e=B.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o,u;if(B.isFunction(e))return this.each(function(t){B(this).addClass(e.call(this,t,this.className))});if(e&&typeof e=="string"){t=e.split(U);for(n=0,r=this.length;n<r;n++){i=this[n];if(i.nodeType===1)if(!i.className&&t.length===1)i.className=e;else{s=" "+i.className+" ";for(o=0,u=t.length;o<u;o++)~s.indexOf(" "+t[o]+" ")||(s+=t[o]+" ");i.className=B.trim(s)}}}return this},removeClass:function(e){var n,r,i,s,o,u,a;if(B.isFunction(e))return this.each(function(t){B(this).removeClass(e.call(this,t,this.className))});if(e&&typeof e=="string"||e===t){n=(e||"").split(U);for(r=0,i=this.length;r<i;r++){s=this[r];if(s.nodeType===1&&s.className)if(e){o=(" "+s.className+" ").replace(R," ");for(u=0,a=n.length;u<a;u++)o=o.replace
(" "+n[u]+" "," ");s.className=B.trim(o)}else s.className=""}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return B.isFunction(e)?this.each(function(n){B(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var i,s=0,o=B(this),u=t,a=e.split(U);while(i=a[s++])u=r?u:!o.hasClass(i),o[u?"addClass":"removeClass"](i)}else if(n==="undefined"||n==="boolean")this.className&&B._data(this,"__className__",this.className),this.className=this.className||e===!1?"":B._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(R," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!!arguments.length)return i=B.isFunction(e),this.each(function(r){var s=B(this),o;if(this.nodeType===1){i?o=e.call(this,r,s.val()):o=e,o==null?o="":typeof o=="number"?o+="":B.isArray(o)&&(o=B.map(o,function(e){return e==null?"":e+""})),n=B.valHooks[this.nodeName.toLowerCase()]||B.valHooks[this.type];if(!n||!("set"in n)||n.set(this,o,"value")===t)this.value=o}});if(s)return n=B.valHooks[s.nodeName.toLowerCase()]||B.valHooks[s.type],n&&"get"in n&&(r=n.get(s,"value"))!==t?r:(r=s.value,typeof r=="string"?r.replace(z,""):r==null?"":r)}}),B.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r,i,s=e.selectedIndex,o=[],u=e.options,a=e.type==="select-one";if(s<0)return null;n=a?s:0,r=a?s+1:u.length;for(;n<r;n++){i=u[n];if(i.selected&&(B.support.optDisabled?!i.disabled:i.getAttribute("disabled")===null)&&(!i.parentNode.disabled||!B.nodeName(i.parentNode,"optgroup"))){t=B(i).val();if(a)return t;o.push(t)}}return a&&!o.length&&u.length?B(u[s]).val():o},set:function(e,t){var n=B.makeArray(t);return B(e).find("option").each(function(){this.selected=B.inArray(B(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,r,i){var s,o,u,a=e.nodeType;if(!!e&&a!==3&&a!==8&&a!==2){if(i&&n in B.attrFn)return B(e)[n](r);if(typeof e.getAttribute=="undefined")return B.prop(e,n,r);u=a!==1||!B.isXMLDoc(e),u&&(n=n.toLowerCase(),o=B.attrHooks[n]||($.test(n)?Q:K));if(r!==t){if(r===null){B.removeAttr(e,n);return}return o&&"set"in o&&u&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,""+r),r)}return o&&"get"in o&&u&&(s=o.get(e,n))!==null?s:(s=e.getAttribute(n),s===null?t:s)}},removeAttr:function(e,t){var n,r,i,s,o=0;if(t&&e.nodeType===1){r=t.toLowerCase().split(U),s=r.length;for(;o<s;o++)i=r[o],i&&(n=B.propFix[i]||i,B.attr(e,i,""),e.removeAttribute(J?i:n),$.test(i)&&n in e&&(e[n]=!1))}},attrHooks:{type:{set:function(e,t){if(W.test(e.nodeName)&&e.parentNode)B.error("type property can't be changed");else if(!B.support.radioValue&&t==="radio"&&B.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return K&&B.nodeName(e,"button")?K.get(e,t):t in e?e.value:null},set:function(e,t,n){if(K&&B.nodeName(e,"button"))return K.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!!e&&u!==3&&u!==8&&u!==2)return o=u!==1||!B.isXMLDoc(e),o&&(n=B.propFix[n]||n,s=B.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):X.test(e.nodeName)||V.test(e.nodeName)&&e.href?0:t}}}}),B.attrHooks.tabindex=B.propHooks.tabIndex,Q={get:function(e,n){var r,i=B.prop(e,n);return i===!0||typeof i!="boolean"&&(r=e.getAttributeNode(n))&&r.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var r;return t===!1?B.removeAttr(e,n):(r=B.propFix[n]||n,r in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},J||(G={name:!0,id:!0},K=B.valHooks.button={get:function(e,n){var r;return r=e.getAttributeNode(n),r&&(G[n]?r.nodeValue!=="":r.specified)?r.nodeValue:t},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=D.createAttribute(n),e.setAttributeNode(r)),r.nodeValue=t+""}},B.attrHooks.tabindex.set=K.set,B.each(["width","height"],function(e,t){B.attrHooks[t]=B.extend(B.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})}),B.attrHooks.contenteditable={get:K.get,set:function(e,t,n){t===""&&(t="false"),K.set(e,t,n)}}),B.support.hrefNormalized||B.each(["href","src","width","height"],function(e,n){B.attrHooks[n]=B.extend(B.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r===null?t:r}})}),B.support.style||(B.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),B.support.optSelected||(B.propHooks.selected=B.extend(B.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),B.support.enctype||(B.propFix.enctype="encoding"),B.support.checkOn||B.each(["radio","checkbox"],function(){B.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),B.each(["radio","checkbox"],function(){B.valHooks[this]=B.extend(B.valHooks[this],{set:function(e,t){if(B.isArray(t))return e.checked=B.inArray(B(e).val(),t)>=0}})});var Y=/^(?:textarea|input|select)$/i,Z=/^([^\.]*)?(?:\.(.+))?$/,et=/\bhover(\.\S+)?\b/,tt=/^key/,nt=/^(?:mouse|contextmenu)|click/,rt=/^(?:focusinfocus|focusoutblur)$/,it=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,st=function(e){var t=it.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},ot=function(e,t){var n=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(n.id||{}).value===t[2])&&(!t[3]||t[3].test((n["class"]||{}).value))},ut=function(e){return B.event.special.hover?e:e.replace(et,"mouseenter$1 mouseleave$1")};B.event={add:function(e,n,r,i,s){var o,u,a,f,l,c,h,p,d,v,m,g;if(!(e.nodeType===3||e.nodeType===8||!n||!r||!(o=B._data(e)))){r.handler&&(d=r,r=d.handler),r.guid||(r.guid=B.guid++),a=o.events,a||(o.events=a={}),u=o.handle,u||(o.handle=u=function(e){return typeof B=="undefined"||!!e&&B.event.triggered===e.type?t:B.event.dispatch.apply(u.elem,arguments)},u.elem=e),n=B.trim(ut(n)).split(" ");for(f=0;f<n.length;f++){l=Z.exec(n[f])||[],c=l[1],h=(l[2]||"").split(".").sort(),g=B.event.special[c]||{},c=(s?g.delegateType:g.bindType)||c,g=B.event.special[c]||{},p=B.extend({type:c,origType:l[1],data:i,handler:r,guid:r.guid,selector:s,quick:st(s),namespace:h.join(".")},d),m=a[c];if(!m){m=a[c]=[],m.delegateCount=0;if(!g.setup||g.setup.call(e,i,h,u)===!1)e.addEventListener?e.addEventListener(c,u,!1):e.attachEvent&&e.attachEvent("on"+c,u)}g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),s?m.splice(m.delegateCount++,0,p):m.push(p),B.event.global[c]=!0}e=null}},global:{},remove:function(e,t,n,r,i){var s=B.hasData(e)&&B._data(e),o,u,a,f,l,c,h,p,d,v,m,g;if(!!s&&!!(p=s.events)){t=B.trim(ut(t||"")).split(" ");for(o=0;o<t.length;o++){u=Z.exec(t[o])||[],a=f=u[1],l=u[2];if(!a){for(a in p)B.event.remove(e,a+t[o],n,r,!0);continue}d=B.event.special[a]||{},a=(r?d.delegateType:d.bindType)||a,m=p[a]||[],c=m.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(h=0;h<m.length;h++)g=m[h],(i||f===g.origType)&&(!n||n.guid===g.guid)&&(!l||l.test(g.namespace))&&(!r||r===g.selector||r==="**"&&g.selector)&&(m.splice(h--,1),g.selector&&m.delegateCount--,d.remove&&d.remove.call(e,g));m.length===0&&c!==m.length&&((!d.teardown||d.teardown.call(e,l)===!1)&&B.removeEvent(e,a,s.handle),delete p[a])}B.isEmptyObject(p)&&(v=s.handle,v&&(v.elem=null),B.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,r,i,s){if(!i||i.nodeType!==3&&i.nodeType!==8){var o=n.type||n,u=[],a,f,l,c,h,p,d,v,m,g;if(rt.test(o+B.event.triggered))return;o.indexOf("!")>=0&&(o=o.slice(0,-1),f=!0),o.indexOf(".")>=0&&(u=o.split("."),o=u.shift(),u.sort());if((!i||B.event.customEvent[o])&&!B.event.global[o])return;n=typeof n=="object"?n[B.expando]?n:new B.Event(o,n):new B.Event(o),n.type=o,n.isTrigger=!0,n.exclusive=f,n.namespace=u.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,p=o.indexOf(":")<0?"on"+o:"";if(!i){a=B.cache;for(l in a)a[l].events&&a[l].events[o]&&B.event.trigger(n,r,a[l].handle.elem,!0);return}n.result=t,n.target||(n.target=i),r=r!=null?B.makeArray(r):[],r.unshift(n),d=B.event.special[o]||{};if(d.trigger&&d.trigger.apply(i,r)===!1)return;m=[[i,d.bindType||o]];if(!s&&!d.noBubble&&!B.isWindow(i)){g=d.delegateType||o,c=rt.test(g+o)?i:i.parentNode,h=null;for(;c;c=c.parentNode)m.push([c,g]),h=c;h&&h===i.ownerDocument&&m.push([h.defaultView||h.parentWindow||e,g])}for(l=0;l<m.length&&!n.isPropagationStopped();l++)c=m[l][0],n.type=m[l][1],v=(B._data(c,"events")||{})[n.type]&&B._data(c,"handle"),v&&v.apply(c,r),v=p&&c[p],v&&B.acceptData(c)&&v.apply(c,r)===!1&&n.preventDefault();return n.type=o,!s&&!n.isDefaultPrevented()&&(!d._default||d._default.apply(i.ownerDocument,r)===!1)&&(o!=="click"||!B.nodeName(i,"a"))&&B.acceptData(i)&&p&&i[o]&&(o!=="focus"&&o!=="blur"||n.target.offsetWidth!==0)&&!B.isWindow(i)&&(h=i[p],h&&(i[p]=null),B.event.triggered=o,i[o](),B.event.triggered=t,h&&(i[p]=h)),n.result}},dispatch:function(n){n=B.event.fix(n||e.event);var r=(B._data(this,"events")||{})[n.type]||[],i=r.delegateCount,s=[].slice.call(arguments,0),o=!n.exclusive&&!n.namespace,u=[],a,f,l,c,h,p,d,v,m,g,y;s[0]=n,n.delegateTarget=this;if(i&&!n.target.disabled&&(!n.button||n.type!=="click")){c=B(this),c.context=this.ownerDocument||this;for(l=n.target;l!=this;l=l.parentNode||this){p={},v=[],c[0]=l;for(a=0;a<i;a++)m=r[a],g=m.selector,p[g]===t&&(p[g]=m.quick?ot(l,m.quick):c.is(g)),p[g]&&v.push(m);v.length&&u.push({elem:l,matches:v})}}r.length>i&&u.push({elem:this,matches:r.slice(i)});for(a=0;a<u.length&&!n.isPropagationStopped();a++){d=u[a],n.currentTarget=d.elem;for(f=0;f<d.matches.length&&!n.isImmediatePropagationStopped();f++){m=d.matches[f];if(o||!n.namespace&&!m.namespace||n.namespace_re&&n.namespace_re.test(m.namespace))n.data=m.data,n.handleObj=m,h=((B.event.special[m.origType]||{}).handle||m.handler).apply(d.elem,s),h!==t&&(n.result=h,h===!1&&(n.preventDefault(),n.stopPropagation()))}}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,s,o=n.button,u=n.fromElement;return e.pageX==null&&n.clientX!=null&&(r=e.target.ownerDocument||D,i=r.documentElement,s=r.body,e.pageX=n.clientX+(i&&i.scrollLeft||s&&s.scrollLeft||0)-(i&&i.clientLeft||s&&s.clientLeft||0),e.pageY=n.clientY+(i&&i.scrollTop||s&&s.scrollTop||0)-(i&&i.clientTop||s&&s.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),!e.which&&o!==t&&(e.which=o&1?1:o&2?3:o&4?2:0),e}},fix:function(e){if(e[B.expando])return e;var n,r,i=e,s=B.event.fixHooks[e.type]||{},o=s.props?this.props.concat(s.props):this.props;e=B.Event(i);for(n=o.length;n;)r=o[--n],e[r]=i[r];return e.target||(e.target=i.srcElement||D),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),s.filter?s.filter(e,i):e},special:{ready:{setup:B.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){B.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=B.extend(new B.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?B.event.trigger(i,null,t):B.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},B.event.handle=B.event.dispatch,B.removeEvent=D.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},B.Event=function(e,t){if(!(this instanceof B.Event))return new B.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?k:L):this.type=e,t&&B.extend(this,t),this.timeStamp=e&&e.timeStamp||B.now(),this[B.expando]=!0},B.Event.prototype={preventDefault:function(){this.isDefaultPrevented=k;var e=this.originalEvent;!e||(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=k;var e=this.originalEvent;!e||(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=k,this.stopPropagation()},isDefaultPrevented:L,isPropagationStopped:L,isImmediatePropagationStopped:L},B.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){B.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n=this,r=e.relatedTarget,i=e.handleObj,s=i.selector,o;if(!r||r!==n&&!B.contains(n,r))e.type=i.origType,o=i.handler.apply(this,arguments),e.type=t;return o}}}),B.support.submitBubbles||(B.event.special.submit={setup:function(){if(B.nodeName(this,"form"))return!1;B.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=B.nodeName(n,"input")||B.nodeName(n,"button")?n.form:t;r&&!r._submit_attached&&(B.event.add(r,"submit._submit",function(e){this.parentNode&&!e.isTrigger&&B.event.simulate("submit",this.parentNode,e,!0)}),r._submit_attached=!0)})},teardown:function(){if(B.nodeName(this,"form"))return!1;B.event.remove(this,"._submit")}}),B.support.changeBubbles||(B.event.special.change={setup:function(){if(Y.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")B.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),B.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,B.event.simulate("change",this,e,!0))});return!1}B.event.add(this,"beforeactivate._change",function(e){var t=e.target;Y.test(t.nodeName)&&!t._change_attached&&(B.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&B.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return B.event.remove(this,"._change"),Y.test(this.nodeName)}}),B.support.focusinBubbles||B.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){B.event.simulate(t,e.target,B.event.fix(e),!0)};B.event.special[t]={setup:function(){n++===0&&D.addEventListener(e,r,!0)},teardown:function(){--n===0&&D.removeEventListener(e,r,!0)}}}),B.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=n,n=t);for(u in e)this.on(u,n,r,e[u],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=L;else if(!i)return this;return s===1&&(o=i,i=function(e){return B().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=B.guid++)),this.each(function(){B.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on.call(this,e,t,n,r,1)},off:function(e,n,r){if(e&&e.preventDefault&&e.handleObj){var i=e.handleObj;return B(e.delegateTarget).off(i.namespace?i.type+"."+i.namespace:i.type,i.selector,i.handler),this}if(typeof e=="object"){for(var s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=L),this.each(function(){B.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return B(this.context).on(e,this.selector,t,n),this},die:function(e,t){return B(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length==1?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){B.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return B.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,n=e.guid||B.guid++,r=0,i=function(n){var i=(B._data(this,"lastToggle"+e.guid)||0)%r;return B._data(this,"lastToggle"+e.guid,i+1),n.preventDefault(),t[i].apply(this,arguments)||!1};i.guid=n;while(r<t.length)t[r++].guid=n;return this.click(i)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),B.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){B.fn[t]=function(e,n){return n==null&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},B.attrFn&&(B.attrFn[t]=!0),tt.test(t)&&(B.event.fixHooks[t]=B.event.keyHooks),nt.test(t)&&(B.event.fixHooks[t]=B.event.mouseHooks)}),function(){function e(e,t,n,r,s,o){for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){var l=!1;f=f[e];while(f){if(f[i]===n){l=r[f.sizset];break}if(f.nodeType===1){o||(f[i]=n,f.sizset=u);if(typeof t!="string"){if(f===t){l=!0;break}}else if(h.filter(t,[f]).length>0){l=f;break}}f=f[e]}r[u]=l}}}function n(e,t,n,r,s,o){for(var u=0,a=r.length;u<a;u++){var f=r[u];if(f){var l=!1;f=f[e];while(f){if(f[i]===n){l=r[f.sizset];break}f.nodeType===1&&!o&&(f[i]=n,f.sizset=u);if(f.nodeName.toLowerCase()===t){l=f;break}f=f[e]}r[u]=l}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,i="sizcache"+(Math.random()+"").replace(".",""),s=0,o=Object.prototype.toString,u=!1,a=!0,f=/\\/g,l=/\r\n/g,c=/\W/;[0,0].sort(function(){return a=!1,0});var h=function(e,t,n,i){n=n||[],t=t||D;var s=t;if(t.nodeType!==1&&t.nodeType!==9)return[];if(!e||typeof e!="string")return n;var u,a,f,l,c,p,m,g,b=!0,w=h.isXML(t),E=[],x=e;do{r.exec(""),u=r.exec(x);if(u){x=u[3],E.push(u[1]);if(u[2]){l=u[3];break}}}while(u);if(E.length>1&&v.exec(e))if(E.length===2&&d.relative[E[0]])a=S(E[0]+E[1],t,i);else{a=d.relative[E[0]]?[t]:h(E.shift(),t);while(E.length)e=E.shift(),d.relative[e]&&(e+=E.shift()),a=S(e,a,i)}else{!i&&E.length>1&&t.nodeType===9&&!w&&d.match.ID.test(E[0])&&!d.match.ID.test(E[E.length-1])&&(c=h.find(E.shift(),t,w),t=c.expr?h.filter(c.expr,c.set)[0]:c.set[0]);if(t){c=i?{expr:E.pop(),set:y(i)}:h.find(E.pop(),E.length!==1||E[0]!=="~"&&E[0]!=="+"||!t.parentNode?t:t.parentNode,w),a=c.expr?h.filter(c.expr,c.set):c.set,E.length>0?f=y(a):b=!1;while(E.length)p=E.pop(),m=p,d.relative[p]?m=E.pop():p="",m==null&&(m=t),d.relative[p](f,m,w)}else f=E=[]}f||(f=a),f||h.error(p||e);if(o.call(f)==="[object Array]")if(!b)n.push.apply(n,f);else if(t&&t.nodeType===1)for(g=0;f[g]!=null;g++)f[g]&&(f[g]===!0||f[g].nodeType===1&&h.contains(t,f[g]))&&n.push(a[g]);else for(g=0;f[g]!=null;g++)f[g]&&f[g].nodeType===1&&n.push(a[g]);else y(f,n);return l&&(h(l,s,n,i),h.uniqueSort(n)),n};h.uniqueSort=function(e){if(w){u=a,e.sort(w);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},h.matches=function(e,t){return h(e,null,null,t)},h.matchesSelector=function(e,t){return h(t,null,null,[e]).length>0},h.find=function(e,t,n){var r,i,s,o,u,a;if(!e)return[];for(i=0,s=d.order.length;i<s;i++){u=d.order[i];if(o=d.leftMatch[u].exec(e)){a=o[1],o.splice(1,1);if(a.substr(a.length-1)!=="\\"){o[1]=(o[1]||"").replace(f,""),r=d.find[u](o,t,n);if(r!=null){e=e.replace(d.match[u],"");break}}}}return r||(r=typeof t.getElementsByTagName!="undefined"?t.getElementsByTagName("*"):[]),{set:r,expr:e}},h.filter=function(e,n,r,i){var s,o,u,a,f,l,c,p,v,m=e,g=[],y=n,b=n&&n[0]&&h.isXML(n[0]);while(e&&n.length){for(u in d.filter)if((s=d.leftMatch[u].exec(e))!=null&&s[2]){l=d.filter[u],c=s[1],o=!1,s.splice(1,1);if(c.substr(c.length-1)==="\\")continue;y===g&&(g=[]);if(d.preFilter[u]){s=d.preFilter[u](s,y,r,g,i,b);if(!s)o=a=!0;else if(s===!0)continue}if(s)for(p=0;(f=y[p])!=null;p++)f&&(a=l(f,s,p,y),v=i^a,r&&a!=null?v?o=!0:y[p]=!1:v&&(g.push(f),o=!0));if(a!==t){r||(y=g),e=e.replace(d.match[u],"");if(!o)return[];break}}if(e===m){if(o!=null)break;h.error(e)}m=e}return y},h.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=h.getText=function(e){var t,n,r=e.nodeType,i="";if(r){if(r===1||r===9){if(typeof e.textContent=="string")return e.textContent;if(typeof e.innerText=="string")return e.innerText.replace(l,"");for(e=e.firstChild;e;e=e.nextSibling)i+=p(e)}else if(r===3||r===4)return e.nodeValue}else for(t=0;n=e[t];t++)n.nodeType!==8&&(i+=p(n));return i},d=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!c.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&h.filter(t,e,!0)},">":function(e,t){var n,r=typeof t=="string",i=0,s=e.length;if(r&&!c.test(t)){t=t.toLowerCase();for(;i<s;i++){n=e[i];if(n){var o=n.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)n=e[i],n&&(e[i]=r?n.parentNode:n.parentNode===t);r&&h.filter(t,e,!0)}},"":function(t,r,i){var o,u=s++,a=e;typeof r=="string"&&!c.test(r)&&(r=r.toLowerCase(),o=r,a=n),a("parentNode",r,u,t,o,i)},"~":function(t,r,i){var o,u=s++,a=e;typeof r=="string"&&!c.test(r)&&(r=r.toLowerCase(),o=r,a=n),a("previousSibling",r,u,t,o,i)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){if(typeof t.getElementsByTagName!="undefined")return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(f,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(f,"")},TAG:function(e,t){return e[1].replace(f,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){e[2]||h.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&h.error(e[0]);return e[0]=s++,e},ATTR:function(e,t,n,r,i,s){var o=e[1]=e[1].replace(f,"");return!s&&d.attrMap[o]&&(e[1]=d.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(f,""),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,i,s){if(e[1]==="not"){if(!((r.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=h.filter(e[3],t,n,!0^s);return n||i.push.apply(i,o),!1}e[3]=h(e[3],null,null,t)}else if(d.match.POS.test(e[0])||d.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!h(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return e.nodeName.toLowerCase()==="input"&&"text"===n&&(t===n||t===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"submit"===e.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return(t==="input"||t==="button")&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&"button"===e.type||t==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=d.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}h.error(i)},CHILD:function(e,t){var n,r,s,o,u,a,f,l=t[1],c=e;switch(l){case"only":case"first":while(c=c.previousSibling)if(c.nodeType===1)return!1;if(l==="first")return!0;c=e;case"last":while(c=c.nextSibling)if(c.nodeType===1)return!1;return!0;case"nth":n=t[2],r=t[3];if(n===1&&r===0)return!0;s=t[0],o=e.parentNode;if(o&&(o[i]!==s||!e.nodeIndex)){a=0;for(c=o.firstChild;c;c=c.nextSibling)c.nodeType===1&&(c.nodeIndex=++a);o[i]=s}return f=e.nodeIndex-r,n===0?f===0:f%n===0&&f/n>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=h.attr?h.attr(e,n):d.attrHandle[n]?d.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":!s&&h.attr?r!=null:s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=d.setFilters[i];if(s)return s(e,n,t,r)}}},v=d.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var g in d.match)d.match[g]=new RegExp(d.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),d.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+d.match[g].source.replace(/\\(\d+)/g,m));var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(D.documentElement.childNodes,0)[0].nodeType}catch(b){y=function(e,t){var n=0,r=t||[];if(o.call(e)==="[object Array]")Array.prototype.push.apply(r,e);else if(typeof e.length=="number")for(var i=e.length;n<i;n++)r.push(e[n]);else for(;e[n];n++)r.push(e[n]);return r}}var w,E;D.documentElement.compareDocumentPosition?w=function(e,t){return e===t?(u=!0,0):!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition?-1:1:e.compareDocumentPosition(t)&4?-1:1}:(w=function(e,t){if(e===t)return u=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],s=[],o=e.parentNode,a=t.parentNode,f=o;if(o===a)return E(e,t);if(!o)return-1;if(!a)return 1;while(f)i.unshift(f),f=f.parentNode;f=a;while(f)s.unshift(f),f=f.parentNode;n=i.length,r=s.length;for(var l=0;l<n&&l<r;l++)if(i[l]!==s[l])return E(i[l],s[l]);return l===n?E(e,s[l],-1):E(i[l],t,1)},E=function(e,t,n){if(e===t)return n;var r=e.nextSibling;while(r){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=D.createElement("div"),n="script"+(new Date).getTime(),r=D.documentElement;e.innerHTML="<a name='"+n+"'/>",r.insertBefore(e,r.firstChild),D.getElementById(n)&&(d.find.ID=function(e,n,r){if(typeof n.getElementById!="undefined"&&!r){var i=n.getElementById(e[1]);return i?i.id===e[1]||typeof i.getAttributeNode!="undefined"&&i.getAttributeNode("id").nodeValue===e[1]?[i]:t:[]}},d.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),r.removeChild(e),r=e=null}(),function(){var e=D.createElement("div");e.appendChild(D.createComment("")),e.getElementsByTagName("*").length>0&&(d.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(d.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),D.querySelectorAll&&function(){var e=h,t=D.createElement("div"),n="__sizzle__";t.innerHTML="<p class='TEST'></p>";if(!t.querySelectorAll||t.querySelectorAll(".TEST").length!==0){h=function(t,r,i,s){r=r||D;if(!s&&!h.isXML(r)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(o&&(r.nodeType===1||r.nodeType===9)){if(o[1])return y(r.getElementsByTagName(t),i);if(o[2]&&d.find.CLASS&&r.getElementsByClassName)return y(r.getElementsByClassName(o[2]),i)}if(r.nodeType===9){if(t==="body"&&r.body)return y([r.body],i);if(o&&o[3]){var u=r.getElementById(o[3]);if(!u||!u.parentNode)return y([],i);if(u.id===o[3])return y([u],i)}try{return y(r.querySelectorAll(t),i)}catch(a){}}else if(r.nodeType===1&&r.nodeName.toLowerCase()!=="object"){var f=r,l=r.getAttribute("id"),c=l||n,p=r.parentNode,v=/^\s*[+~]/.test(t);l?c=c.replace(/'/g,"\\$&"):r.setAttribute("id",c),v&&p&&(r=r.parentNode);try{if(!v||p)return y(r.querySelectorAll("[id='"+c+"'] "+t),i)}catch(m){}finally{l||f.removeAttribute("id")}}}return e(t,r,i,s)};for(var r in e)h[r]=e[r];t=null}}(),function(){var e=D.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(D.createElement("div"),"div"),r=!1;try{t.call(D.documentElement,"[test!='']:sizzle")}catch(i){r=!0}h.matchesSelector=function(e,i){i=i.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!h.isXML(e))try{if(r||!d.match.PSEUDO.test(i)&&!/!=/.test(i)){var s=t.call(e,i);if(s||!n||e.document&&e.document.nodeType!==11)return s}}catch(o){}return h(i,null,null,[e]).length>0}}}(),function(){var e=D.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!e.getElementsByClassName&&e.getElementsByClassName("e").length!==0){e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;d.order.splice(1,0,"CLASS"),d.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}}(),D.documentElement.contains?h.contains=function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:D.documentElement.compareDocumentPosition?h.contains=function(e,t){return!!(e.compareDocumentPosition(t)&16)}:h.contains=function(){return!1},h.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var S=function(e,t,n){var r,i=[],s="",o=t.nodeType?[t]:t;while(r=d.match.PSEUDO.exec(e))s+=r[0],e=e.replace(d.match.PSEUDO,"");e=d.relative[e]?e+"*":e;for(var u=0,a=o.length;u<a;u++)h(e,o[u],i,n);return h.filter(s,i)};h.attr=B.attr,h.selectors.attrMap={},B.find=h,B.expr=h.selectors,B.expr[":"]=B.expr.filters,B.unique=h.uniqueSort,B.text=h.getText,B.isXMLDoc=h.isXML,B.contains=h.contains}();var at=/Until$/,ft=/^(?:parents|prevUntil|prevAll)/,lt=/,/,ct=/^.[^:#\[\.,]*$/,ht=Array.prototype.slice,pt=B.expr.match.POS,dt={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({find
:function(e){var t=this,n,r;if(typeof e!="string")return B(e).filter(function(){for(n=0,r=t.length;n<r;n++)if(B.contains(t[n],this))return!0});var i=this.pushStack("","find",e),s,o,u;for(n=0,r=this.length;n<r;n++){s=i.length,B.find(e,this[n],i);if(n>0)for(o=s;o<i.length;o++)for(u=0;u<s;u++)if(i[u]===i[o]){i.splice(o--,1);break}}return i},has:function(e){var t=B(e);return this.filter(function(){for(var e=0,n=t.length;e<n;e++)if(B.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(N(this,e,!1),"not",e)},filter:function(e){return this.pushStack(N(this,e,!0),"filter",e)},is:function(e){return!!e&&(typeof e=="string"?pt.test(e)?B(e,this.context).index(this[0])>=0:B.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n=[],r,i,s=this[0];if(B.isArray(e)){var o=1;while(s&&s.ownerDocument&&s!==t){for(r=0;r<e.length;r++)B(s).is(e[r])&&n.push({selector:e[r],elem:s,level:o});s=s.parentNode,o++}return n}var u=pt.test(e)||typeof e!="string"?B(e,t||this.context):0;for(r=0,i=this.length;r<i;r++){s=this[r];while(s){if(u?u.index(s)>-1:B.find.matchesSelector(s,e)){n.push(s);break}s=s.parentNode;if(!s||!s.ownerDocument||s===t||s.nodeType===11)break}}return n=n.length>1?B.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?typeof e=="string"?B.inArray(this[0],B(e)):B.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?B(e,t):B.makeArray(e&&e.nodeType?[e]:e),r=B.merge(this.get(),n);return this.pushStack(C(n[0])||C(r[0])?r:B.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),B.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return B.dir(e,"parentNode")},parentsUntil:function(e,t,n){return B.dir(e,"parentNode",n)},next:function(e){return B.nth(e,2,"nextSibling")},prev:function(e){return B.nth(e,2,"previousSibling")},nextAll:function(e){return B.dir(e,"nextSibling")},prevAll:function(e){return B.dir(e,"previousSibling")},nextUntil:function(e,t,n){return B.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return B.dir(e,"previousSibling",n)},siblings:function(e){return B.sibling(e.parentNode.firstChild,e)},children:function(e){return B.sibling(e.firstChild)},contents:function(e){return B.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:B.makeArray(e.childNodes)}},function(e,t){B.fn[e]=function(n,r){var i=B.map(this,t,n);return at.test(e)||(r=n),r&&typeof r=="string"&&(i=B.filter(r,i)),i=this.length>1&&!dt[e]?B.unique(i):i,(this.length>1||lt.test(r))&&ft.test(e)&&(i=i.reverse()),this.pushStack(i,e,ht.call(arguments).join(","))}}),B.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?B.find.matchesSelector(t[0],e)?[t[0]]:[]:B.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!B(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},nth:function(e,t,n,r){t=t||1;var i=0;for(;e;e=e[n])if(e.nodeType===1&&++i===t)break;return e},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var vt="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:\d+|null)"/g,gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style)/i,xt=/<(?:script|object|embed|option|style)/i,Tt=new RegExp("<(?:"+vt+")","i"),Nt=/checked\s*(?:[^=]|=\s*.checked.)/i,Ct=/\/(java|ecma)script/i,kt=/^\s*<!(?:\[CDATA\[|\-\-)/,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},At=T(D);Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,B.support.htmlSerialize||(Lt._default=[1,"div<div>","</div>"]),B.fn.extend({text:function(e){return B.isFunction(e)?this.each(function(t){var n=B(this);n.text(e.call(this,t,n.text()))}):typeof e!="object"&&e!==t?this.empty().append((this[0]&&this[0].ownerDocument||D).createTextNode(e)):B.text(this)},wrapAll:function(e){if(B.isFunction(e))return this.each(function(t){B(this).wrapAll(e.call(this,t))});if(this[0]){var t=B(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return B.isFunction(e)?this.each(function(t){B(this).wrapInner(e.call(this,t))}):this.each(function(){var t=B(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=B.isFunction(e);return this.each(function(n){B(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){B.nodeName(this,"body")||B(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){this.nodeType===1&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=B.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,B.clean(arguments)),e}},remove:function(e,t){for(var n=0,r;(r=this[n])!=null;n++)if(!e||B.filter(e,[r]).length)!t&&r.nodeType===1&&(B.cleanData(r.getElementsByTagName("*")),B.cleanData([r])),r.parentNode&&r.parentNode.removeChild(r);return this},empty:function(){for(var e=0,t;(t=this[e])!=null;e++){t.nodeType===1&&B.cleanData(t.getElementsByTagName("*"));while(t.firstChild)t.removeChild(t.firstChild)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return B.clone(this,e,t)})},html:function(e){if(e===t)return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(mt,""):null;if(typeof e=="string"&&!St.test(e)&&(B.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(var n=0,r=this.length;n<r;n++)this[n].nodeType===1&&(B.cleanData(this[n].getElementsByTagName("*")),this[n].innerHTML=e)}catch(i){this.empty().append(e)}}else B.isFunction(e)?this.each(function(t){var n=B(this);n.html(e.call(this,t,n.html()))}):this.empty().append(e);return this},replaceWith:function(e){return this[0]&&this[0].parentNode?B.isFunction(e)?this.each(function(t){var n=B(this),r=n.html();n.replaceWith(e.call(this,t,r))}):(typeof e!="string"&&(e=B(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;B(this).remove(),t?B(t).before(e):B(n).append(e)})):this.length?this.pushStack(B(B.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){var i,s,o,u,a=e[0],f=[];if(!B.support.checkClone&&arguments.length===3&&typeof a=="string"&&Nt.test(a))return this.each(function(){B(this).domManip(e,n,r,!0)});if(B.isFunction(a))return this.each(function(i){var s=B(this);e[0]=a.call(this,i,n?s.html():t),s.domManip(e,n,r)});if(this[0]){u=a&&a.parentNode,B.support.parentNode&&u&&u.nodeType===11&&u.childNodes.length===this.length?i={fragment:u}:i=B.buildFragment(e,this,f),o=i.fragment,o.childNodes.length===1?s=o=o.firstChild:s=o.firstChild;if(s){n=n&&B.nodeName(s,"tr");for(var l=0,c=this.length,h=c-1;l<c;l++)r.call(n?x(this[l],s):this[l],i.cacheable||c>1&&l<h?B.clone(o,!0,!0):o)}f.length&&B.each(f,m)}return this}}),B.buildFragment=function(e,t,n){var r,i,s,o,u=e[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=D),e.length===1&&typeof u=="string"&&u.length<512&&o===D&&u.charAt(0)==="<"&&!xt.test(u)&&(B.support.checkClone||!Nt.test(u))&&(B.support.html5Clone||!Tt.test(u))&&(i=!0,s=B.fragments[u],s&&s!==1&&(r=s)),r||(r=o.createDocumentFragment(),B.clean(e,o,r,n)),i&&(B.fragments[u]=s?r:1),{fragment:r,cacheable:i}},B.fragments={},B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){B.fn[e]=function(n){var r=[],i=B(n),s=this.length===1&&this[0].parentNode;if(s&&s.nodeType===11&&s.childNodes.length===1&&i.length===1)return i[t](this[0]),this;for(var o=0,u=i.length;o<u;o++){var a=(o>0?this.clone(!0):this).get();B(i[o])[t](a),r=r.concat(a)}return this.pushStack(r,e,i.selector)}}),B.extend({clone:function(e,t,n){var r,i,s,o=B.support.html5Clone||!Tt.test("<"+e.nodeName)?e.cloneNode(!0):g(e);if((!B.support.noCloneEvent||!B.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!B.isXMLDoc(e)){E(e,o),r=w(e),i=w(o);for(s=0;r[s];++s)i[s]&&E(r[s],i[s])}if(t){S(e,o);if(n){r=w(e),i=w(o);for(s=0;r[s];++s)S(r[s],i[s])}}return r=i=null,o},clean:function(e,t,n,r){var i;t=t||D,typeof t.createElement=="undefined"&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||D);var s=[],o;for(var u=0,a;(a=e[u])!=null;u++){typeof a=="number"&&(a+="");if(!a)continue;if(typeof a=="string")if(!Et.test(a))a=t.createTextNode(a);else{a=a.replace(yt,"<$1></$2>");var f=(bt.exec(a)||["",""])[1].toLowerCase(),l=Lt[f]||Lt._default,c=l[0],h=t.createElement("div");t===D?At.appendChild(h):T(t).appendChild(h),h.innerHTML=l[1]+a+l[2];while(c--)h=h.lastChild;if(!B.support.tbody){var p=wt.test(a),d=f==="table"&&!p?h.firstChild&&h.firstChild.childNodes:l[1]==="<table>"&&!p?h.childNodes:[];for(o=d.length-1;o>=0;--o)B.nodeName(d[o],"tbody")&&!d[o].childNodes.length&&d[o].parentNode.removeChild(d[o])}!B.support.leadingWhitespace&&gt.test(a)&&h.insertBefore(t.createTextNode(gt.exec(a)[0]),h.firstChild),a=h.childNodes}var v;if(!B.support.appendChecked)if(a[0]&&typeof (v=a.length)=="number")for(o=0;o<v;o++)y(a[o]);else y(a);a.nodeType?s.push(a):s=B.merge(s,a)}if(n){i=function(e){return!e.type||Ct.test(e.type)};for(u=0;s[u];u++)if(r&&B.nodeName(s[u],"script")&&(!s[u].type||s[u].type.toLowerCase()==="text/javascript"))r.push(s[u].parentNode?s[u].parentNode.removeChild(s[u]):s[u]);else{if(s[u].nodeType===1){var m=B.grep(s[u].getElementsByTagName("script"),i);s.splice.apply(s,[u+1,0].concat(m))}n.appendChild(s[u])}}return s},cleanData:function(e){var t,n,r=B.cache,i=B.event.special,s=B.support.deleteExpando;for(var o=0,u;(u=e[o])!=null;o++){if(u.nodeName&&B.noData[u.nodeName.toLowerCase()])continue;n=u[B.expando];if(n){t=r[n];if(t&&t.events){for(var a in t.events)i[a]?B.event.remove(u,a):B.removeEvent(u,a,t.handle);t.handle&&(t.handle.elem=null)}s?delete u[B.expando]:u.removeAttribute&&u.removeAttribute(B.expando),delete r[n]}}}});var Ot=/alpha\([^)]*\)/i,Mt=/opacity=([^)]*)/,_t=/([A-Z]|^ms)/g,Dt=/^-?\d+(?:px)?$/i,Pt=/^-?\d/,Ht=/^([\-+])=([\-+.\de]+)/,Bt={position:"absolute",visibility:"hidden",display:"block"},jt=["Left","Right"],Ft=["Top","Bottom"],It,qt,Rt;B.fn.css=function(e,n){return arguments.length===2&&n===t?this:B.access(this,e,n,!0,function(e,n,r){return r!==t?B.style(e,n,r):B.css(e,n)})},B.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=It(e,"opacity","opacity");return n===""?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":B.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!!e&&e.nodeType!==3&&e.nodeType!==8&&!!e.style){var s,o,u=B.camelCase(n),a=e.style,f=B.cssHooks[u];n=B.cssProps[u]||u;if(r===t)return f&&"get"in f&&(s=f.get(e,!1,i))!==t?s:a[n];o=typeof r,o==="string"&&(s=Ht.exec(r))&&(r=+(s[1]+1)*+s[2]+parseFloat(B.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!B.cssNumber[u]&&(r+="px");if(!f||!("set"in f)||(r=f.set(e,r))!==t)try{a[n]=r}catch(l){}}},css:function(e,n,r){var i,s;n=B.camelCase(n),s=B.cssHooks[n],n=B.cssProps[n]||n,n==="cssFloat"&&(n="float");if(s&&"get"in s&&(i=s.get(e,!0,r))!==t)return i;if(It)return It(e,n)},swap:function(e,t,n){var r={};for(var i in t)r[i]=e.style[i],e.style[i]=t[i];n.call(e);for(i in t)e.style[i]=r[i]}}),B.curCSS=B.css,B.each(["height","width"],function(e,t){B.cssHooks[t]={get:function(e,n,r){var i;if(n)return e.offsetWidth!==0?v(e,t,r):(B.swap(e,Bt,function(){i=v(e,t,r)}),i)},set:function(e,t){if(!Dt.test(t))return t;t=parseFloat(t);if(t>=0)return t+"px"}}}),B.support.opacity||(B.cssHooks.opacity={get:function(e,t){return Mt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=B.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if(t>=1&&B.trim(s.replace(Ot,""))===""){n.removeAttribute("filter");if(r&&!r.filter)return}n.filter=Ot.test(s)?s.replace(Ot,i):s+" "+i}}),B(function(){B.support.reliableMarginRight||(B.cssHooks.marginRight={get:function(e,t){var n;return B.swap(e,{display:"inline-block"},function(){t?n=It(e,"margin-right","marginRight"):n=e.style.marginRight}),n}})}),D.defaultView&&D.defaultView.getComputedStyle&&(qt=function(e,t){var n,r,i;return t=t.replace(_t,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(i=r.getComputedStyle(e,null))&&(n=i.getPropertyValue(t),n===""&&!B.contains(e.ownerDocument.documentElement,e)&&(n=B.style(e,t))),n}),D.documentElement.currentStyle&&(Rt=function(e,t){var n,r,i,s=e.currentStyle&&e.currentStyle[t],o=e.style;return s===null&&o&&(i=o[t])&&(s=i),!Dt.test(s)&&Pt.test(s)&&(n=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left=t==="fontSize"?"1em":s||0,s=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),s===""?"auto":s}),It=qt||Rt,B.expr&&B.expr.filters&&(B.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return t===0&&n===0||!B.support.reliableHiddenOffsets&&(e.style&&e.style.display||B.css(e,"display"))==="none"},B.expr.filters.visible=function(e){return!B.expr.filters.hidden(e)});var Ut=/%20/g,zt=/\[\]$/,Wt=/\r?\n/g,Xt=/#.*$/,Vt=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,$t=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Jt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Kt=/^(?:GET|HEAD)$/,Qt=/^\/\//,Gt=/\?/,Yt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Zt=/^(?:select|textarea)/i,en=/\s+/,tn=/([?&])_=[^&]*/,nn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,rn=B.fn.load,sn={},on={},un,an,fn=["*/"]+["*"];try{un=H.href}catch(ln){un=D.createElement("a"),un.href="",un=un.href}an=nn.exec(un.toLowerCase())||[],B.fn.extend({load:function(e,n,r){if(typeof e!="string"&&rn)return rn.apply(this,arguments);if(!this.length)return this;var i=e.indexOf(" ");if(i>=0){var s=e.slice(i,e.length);e=e.slice(0,i)}var o="GET";n&&(B.isFunction(n)?(r=n,n=t):typeof n=="object"&&(n=B.param(n,B.ajaxSettings.traditional),o="POST"));var u=this;return B.ajax({url:e,type:o,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),u.html(s?B("<div>").append(n.replace(Yt,"")).find(s):n)),r&&u.each(r,[n,t,e])}}),this},serialize:function(){return B.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?B.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Zt.test(this.nodeName)||$t.test(this.type))}).map(function(e,t){var n=B(this).val();return n==null?null:B.isArray(n)?B.map(n,function(e,n){return{name:t.name,value:e.replace(Wt,"\r\n")}}):{name:t.name,value:n.replace(Wt,"\r\n")}}).get()}}),B.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){B.fn[t]=function(e){return this.on(t,e)}}),B.each(["get","post"],function(e,n){B[n]=function(e,r,i,s){return B.isFunction(r)&&(s=s||i,i=r,r=t),B.ajax({type:n,url:e,data:r,success:i,dataType:s})}}),B.extend({getScript:function(e,n){return B.get(e,t,n,"script")},getJSON:function(e,t,n){return B.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?h(e,B.ajaxSettings):(t=e,e=B.ajaxSettings),h(e,t),e},ajaxSettings:{url:un,isLocal:Jt.test(an[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":fn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":B.parseJSON,"text xml":B.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:d(sn),ajaxTransport:d(on),ajax:function(e,n){function r(e,n,r,p){if(E!==2){E=2,b&&clearTimeout(b),y=t,m=p||"",T.readyState=e>0?4:0;var d,v,g,w=n,x=r?l(i,T,r):t,N,C;if(e>=200&&e<300||e===304){if(i.ifModified){if(N=T.getResponseHeader("Last-Modified"))B.lastModified[h]=N;if(C=T.getResponseHeader("Etag"))B.etag[h]=C}if(e===304)w="notmodified",d=!0;else try{v=f(i,x),w="success",d=!0}catch(k){w="parsererror",g=k}}else{g=w;if(!w||e)w="error",e<0&&(e=0)}T.status=e,T.statusText=""+(n||w),d?u.resolveWith(s,[v,w,T]):u.rejectWith(s,[T,w,g]),T.statusCode(c),c=t,S&&o.trigger("ajax"+(d?"Success":"Error"),[T,i,d?v:g]),a.fireWith(s,[T,w]),S&&(o.trigger("ajaxComplete",[T,i]),--B.active||B.event.trigger("ajaxStop"))}}typeof e=="object"&&(n=e,e=t),n=n||{};var i=B.ajaxSetup({},n),s=i.context||i,o=s!==i&&(s.nodeType||s instanceof B)?B(s):B.event,u=B.Deferred(),a=B.Callbacks("once memory"),c=i.statusCode||{},h,d={},v={},m,g,y,b,w,E=0,S,x,T={readyState:0,setRequestHeader:function(e,t){if(!E){var n=e.toLowerCase();e=v[n]=v[n]||e,d[e]=t}return this},getAllResponseHeaders:function(){return E===2?m:null},getResponseHeader:function(e){var n;if(E===2){if(!g){g={};while(n=Vt.exec(m))g[n[1].toLowerCase()]=n[2]}n=g[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return E||(i.mimeType=e),this},abort:function(e){return e=e||"abort",y&&y.abort(e),r(0,e),this}};u.promise(T),T.success=T.done,T.error=T.fail,T.complete=a.add,T.statusCode=function(e){if(e){var t;if(E<2)for(t in e)c[t]=[c[t],e[t]];else t=e[T.status],T.then(t,t)}return this},i.url=((e||i.url)+"").replace(Xt,"").replace(Qt,an[1]+"//"),i.dataTypes=B.trim(i.dataType||"*").toLowerCase().split(en),i.crossDomain==null&&(w=nn.exec(i.url.toLowerCase()),i.crossDomain=!(!w||w[1]==an[1]&&w[2]==an[2]&&(w[3]||(w[1]==="http:"?80:443))==(an[3]||(an[1]==="http:"?80:443)))),i.data&&i.processData&&typeof i.data!="string"&&(i.data=B.param(i.data,i.traditional)),p(sn,i,n,T);if(E===2)return!1;S=i.global,i.type=i.type.toUpperCase(),i.hasContent=!Kt.test(i.type),S&&B.active++===0&&B.event.trigger("ajaxStart");if(!i.hasContent){i.data&&(i.url+=(Gt.test(i.url)?"&":"?")+i.data,delete i.data),h=i.url;if(i.cache===!1){var N=B.now(),C=i.url.replace(tn,"$1_="+N);i.url=C+(C===i.url?(Gt.test(i.url)?"&":"?")+"_="+N:"")}}(i.data&&i.hasContent&&i.contentType!==!1||n.contentType)&&T.setRequestHeader("Content-Type",i.contentType),i.ifModified&&(h=h||i.url,B.lastModified[h]&&T.setRequestHeader("If-Modified-Since",B.lastModified[h]),B.etag[h]&&T.setRequestHeader("If-None-Match",B.etag[h])),T.setRequestHeader("Accept",i.dataTypes[0]&&i.accepts[i.dataTypes[0]]?i.accepts[i.dataTypes[0]]+(i.dataTypes[0]!=="*"?", "+fn+"; q=0.01":""):i.accepts["*"]);for(x in i.headers)T.setRequestHeader(x,i.headers[x]);if(!i.beforeSend||i.beforeSend.call(s,T,i)!==!1&&E!==2){for(x in{success:1,error:1,complete:1})T[x](i[x]);y=p(on,i,n,T);if(!y)r(-1,"No Transport");else{T.readyState=1,S&&o.trigger("ajaxSend",[T,i]),i.async&&i.timeout>0&&(b=setTimeout(function(){T.abort("timeout")},i.timeout));try{E=1,y.send(d,r)}catch(k){if(!(E<2))throw k;r(-1,k)}}return T}return T.abort(),!1},param:function(e,n){var r=[],i=function(e,t){t=B.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=B.ajaxSettings.traditional);if(B.isArray(e)||e.jquery&&!B.isPlainObject(e))B.each(e,function(){i(this.name,this.value)});else for(var s in e)c(s,e[s],n,i);return r.join("&").replace(Ut,"+")}}),B.extend({active:0,lastModified:{},etag:{}});var cn=B.now(),hn=/(\=)\?(&|$)|\?\?/i;B.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return B.expando+"_"+cn++}}),B.ajaxPrefilter("json jsonp",function(t,n,r){var i=t.contentType==="application/x-www-form-urlencoded"&&typeof t.data=="string";if(t.dataTypes[0]==="jsonp"||t.jsonp!==!1&&(hn.test(t.url)||i&&hn.test(t.data))){var s,o=t.jsonpCallback=B.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u=e[o],a=t.url,f=t.data,l="$1"+o+"$2";return t.jsonp!==!1&&(a=a.replace(hn,l),t.url===a&&(i&&(f=f.replace(hn,l)),t.data===f&&(a+=(/\?/.test(a)?"&":"?")+t.jsonp+"="+o))),t.url=a,t.data=f,e[o]=function(e){s=[e]},r.always(function(){e[o]=u,s&&B.isFunction(u)&&e[o](s[0])}),t.converters["script json"]=function(){return s||B.error(o+" was not called"),s[0]},t.dataTypes[0]="json","script"}}),B.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return B.globalEval(e),e}}}),B.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),B.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=D.head||D.getElementsByTagName("head")[0]||D.documentElement;return{send:function(i,s){n=D.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,i){if(i||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,r&&n.parentNode&&r.removeChild(n),n=t,i||s(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var pn=e.ActiveXObject?function(){for(var e in vn)vn[e](0,1)}:!1,dn=0,vn;B.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&a()||u()}:a,function(e){B.extend(B.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(B.ajaxSettings.xhr()),B.support.ajax&&B.ajaxTransport(function(n){if(!n.crossDomain||B.support.cors){var r;return{send:function(i,s){var o=n.xhr(),u,a;n.username?o.open(n.type,n.url,n.async,n.username,n.password):o.open(n.type,n.url,n.async);if(n.xhrFields)for(a in n.xhrFields)o[a]=n.xhrFields[a];n.mimeType&&o.overrideMimeType&&o.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(a in i)o.setRequestHeader(a,i[a])}catch(f){}o.send(n.hasContent&&n.data||null),r=function(e,i){var a,f,l,c,h;try{if(r&&(i||o.readyState===4)){r=t,u&&(o.onreadystatechange=B.noop,pn&&delete vn[u]);if(i)o.readyState!==4&&o.abort();else{a=o.status,l=o.getAllResponseHeaders(),c={},h=o.responseXML,h&&h.documentElement&&(c.xml=h),c.text=o.responseText;try{f=o.statusText}catch(p){f=""}!a&&n.isLocal&&!n.crossDomain?a=c.text?200:404:a===1223&&(a=204)}}}catch(d){i||s(-1,d)}c&&s(a,f,c,l)},!n.async||o.readyState===4?r():(u=++dn,pn&&(vn||(vn={},B(e).unload(pn)),vn[u]=r),o.onreadystatechange=r)},abort:function(){r&&r(0,1)}}}});var mn={},gn,yn,bn=/^(?:toggle|show|hide)$/,wn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,En,Sn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],xn;B.fn.extend({show:function(e,t,n){var s,o;if(e||e===0)return this.animate(i("show",3),e,t,n);for(var u=0,a=this.length;u<a;u++)s=this[u],s.style&&(o=s.style.display,!B._data(s,"olddisplay")&&o==="none"&&(o=s.style.display=""),o===""&&B.css(s,"display")==="none"&&B._data(s,"olddisplay",r(s.nodeName)));for(u=0;u<a;u++){s=this[u];if(s.style){o=s.style.display;if(o===""||o==="none")s.style.display=B._data(s,"olddisplay")||""}}return this},hide:function(e,t,n){if(e||e===0)return this.animate(i("hide",3),e,t,n);var r,s,o=0,u=this.length;for(;o<u;o++)r=this[o],r.style&&(s=B.css(r,"display"),s!=="none"&&!B._data(r,"olddisplay")&&B._data(r,"olddisplay",s));for(o=0;o<u;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:B.fn.toggle,toggle:function(e,t,n){var r=typeof e=="boolean";return B.isFunction(e)&&B.isFunction(t)?this._toggle.apply(this,arguments):e==null||r?this.each(function(){var t=r?e:B(this).is(":hidden");B(this)[t?"show":"hide"]()}):this.animate(i("toggle",3),e,t,n),this},fadeTo:function(e,t,n,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,i){function s(){o.queue===!1&&B._mark(this);var t=B.extend({},o),n=this.nodeType===1,i=n&&B(this).is(":hidden"),s,u,a,f,l,c,h,p,d;t.animatedProperties={};for(a in e){s=B.camelCase(a),a!==s&&(e[s]=e[a],delete e[a]),u=e[s],B.isArray(u)?(t.animatedProperties[s]=u[1],u=e[s]=u[0]):t.animatedProperties[s]=t.specialEasing&&t.specialEasing[s]||t.easing||"swing";if(u==="hide"&&i||u==="show"&&!i)return t.complete.call(this);n&&(s==="height"||s==="width")&&(t.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],B.css(this,"display")==="inline"&&B.css(this,"float")==="none"&&(!B.support.inlineBlockNeedsLayout||r(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}t.overflow!=null&&(this.style.overflow="hidden");for(a in e)f=new B.fx(this,t,a),u=e[a],bn.test(u)?(d=B._data(this,"toggle"+a)||(u==="toggle"?i?"show":"hide":0),d?(B._data(this,"toggle"+a,d==="show"?"hide":"show"),f[d]()):f[u]()):(l=wn.exec(u),c=f.cur(),l?(h=parseFloat(l[2]),p=l[3]||(B.cssNumber[a]?"":"px"),p!=="px"&&(B.style(this,a,(h||1)+p),c=(h||1)/f.cur()*c,B.style(this,a,c+p)),l[1]&&(h=(l[1]==="-="?-1:1)*h+c),f.custom(c,h,p)):f.custom(c,u,""));return!0}var o=B.speed(t,n,i);return B.isEmptyObject(e)?this.each(o.complete,[!1]):(e=B.extend({},e),o.queue===!1?this.each(s):this.queue(o.queue,s))},stop:function(e,n,r){return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,n){var i=t[n];B.removeData(e,n,!0),i.stop(r)}var n,i=!1,s=B.timers,o=B._data(this);r||B._unmark(!0,this);if(e==null)for(n in o)o[n]&&o[n].stop&&n.indexOf(".run")===n.length-4&&t(this,o,n);else o[n=e+".run"]&&o[n].stop&&t(this,o,n);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(r?s[n](!0):s[n].saveState(),i=!0,s.splice(n,1));(!r||!i)&&B.dequeue(this,e)})}}),B.each({slideDown:i("show",1),slideUp:i("hide",1),slideToggle:i("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){B.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),B.extend({speed:function(e,t,n){var r=e&&typeof e=="object"?B.extend({},e):{complete:n||!n&&t||B.isFunction(e)&&e,duration:e,easing:n&&t||t&&!B.isFunction(t)&&t};r.duration=B.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in B.fx.speeds?B.fx.speeds[r.duration]:B.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(e){B.isFunction(r.old)&&r.old.call(this),r.queue?B.dequeue(this,r.queue):e!==!1&&B._unmark(this)},r},easing:{linear:function(e,t,n,r){return n+r*e},swing:function(e,t,n,r){return(-Math.cos(e*Math.PI)/2+.5)*r+n}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),B.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(B.fx.step[this.prop]||B.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var e,t=B.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?!t||t==="auto"?0:t:e}return this.elem[this.prop]},custom:function(e,n,r){function i(e){return s.step(e)}var s=this,u=B.fx;this.startTime=xn||o(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(B.cssNumber[this.prop]?"":"px"),i.queue=this.options.queue,i.elem=this.elem,i.saveState=function(){s.options.hide&&B._data(s.elem,"fxshow"+s.prop)===t&&B._data(s.elem,"fxshow"+s.prop,s.start)},i()&&B.timers.push(i)&&!En&&(En=setInterval(u.tick,u.interval))},show:function(){var e=B._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||B.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),B(this.elem).show()},hide:function(){this.options.orig[this.prop]=B._data(this.elem,"fxshow"+this.prop)||B.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,r,i=xn||o(),s=!0,u=this.elem,a=this.options;if(e||i>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(s=!1);if(s){a.overflow!=null&&!B.support.shrinkWrapBlocks&&B.each(["","X","Y"],function(e,t){u.style["overflow"+t]=a.overflow[e]}),a.hide&&B(u).hide();if(a.hide||a.show)for(t in a.animatedProperties)B.style(u,t,a.orig[t]),B.removeData(u,"fxshow"+t,!0),B.removeData(u,"toggle"+t,!0);r=a.complete,r&&(a.complete=!1,r.call(u))}return!1}return a.duration==Infinity?this.now=i:(n=i-this.startTime,this.state=n/a.duration,this.pos=B.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},B.extend(B.fx,{tick:function(){var e,t=B.timers,n=0;for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||B.fx.stop()},interval:13,stop:function(){clearInterval(En),En=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){B.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&e.elem.style[e.prop]!=null?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),B.each(["width","height"],function(e,t){B.fx.step[t]=function(e){B.style(e.elem,t,Math.max(0,e.now)+e.unit)}}),B.expr&&B.expr.filters&&(B.expr.filters.animated=function(e){return B.grep(B.timers,function(t){return e===t.elem}).length});var Tn=/^t(?:able|d|h)$/i,Nn=/^(?:body|html)$/i;"getBoundingClientRect"in D.documentElement?B.fn.offset=function(e){var t=this[0],r;if(e)return this.each(function(t){B.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return B.offset.bodyOffset(t);try{r=t.getBoundingClientRect()}catch(i){}var s=t.ownerDocument,o=s.documentElement;if(!r||!B.contains(o,t))return r?{top:r.top,left:r.left}:{top:0,left:0};var u=s.body,a=n(s),f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||B.support.boxModel&&o.scrollTop||u.scrollTop,h=a.pageXOffset||B.support.boxModel&&o.scrollLeft||u.scrollLeft,p=r.top+c-f,d=r.left+h-l;return{top:p,left:d}}:B.fn.offset=function(e){var t=this[0];if(e)return this.each(function(t){B.offset.setOffset(this,e,t)});if(!t||!t.ownerDocument)return null;if(t===t.ownerDocument.body)return B.offset.bodyOffset(t);var n,r=t.offsetParent,i=t,s=t.ownerDocument,o=s.documentElement,u=s.body,a=s.defaultView,f=a?a.getComputedStyle(t,null):t.currentStyle,l=t.offsetTop,c=t.offsetLeft;while((t=t.parentNode)&&t!==u&&t!==o){if(B.support.fixedPosition&&f.position==="fixed")break;n=a?a.getComputedStyle(t,null):t.currentStyle,l-=t.scrollTop,c-=t.scrollLeft,t===r&&(l+=t.offsetTop,c+=t.offsetLeft,B.support.doesNotAddBorder&&(!B.support.doesAddBorderForTableAndCells||!Tn.test(t.nodeName))&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),i=r,r=t.offsetParent),B.support.subtractsBorderForOverflowNotVisible&&n.overflow!=="visible"&&(l+=parseFloat(n.borderTopWidth)||0,c+=parseFloat(n.borderLeftWidth)||0),f=n}if(f.position==="relative"||f.position==="static")l+=u.offsetTop,c+=u.offsetLeft;return B.support.fixedPosition&&f.position==="fixed"&&(l+=Math.max(o.scrollTop,u.scrollTop),c+=Math.max(o.scrollLeft,u.scrollLeft)),{top:l,left:c}},B.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return B.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(B.css(e,"marginTop"))||0,n+=parseFloat(B.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=B.css(e,"position");r==="static"&&(e.style.position="relative");var i=B(e),s=i.offset(),o=B.css(e,"top"),u=B.css(e,"left"),a=(r==="absolute"||r==="fixed")&&B.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),B.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},B.fn.extend({position:function(){if(!this[0])return null
;var e=this[0],t=this.offsetParent(),n=this.offset(),r=Nn.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(B.css(e,"marginTop"))||0,n.left-=parseFloat(B.css(e,"marginLeft"))||0,r.top+=parseFloat(B.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(B.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||D.body;while(e&&!Nn.test(e.nodeName)&&B.css(e,"position")==="static")e=e.offsetParent;return e})}}),B.each(["Left","Top"],function(e,r){var i="scroll"+r;B.fn[i]=function(r){var s,o;return r===t?(s=this[0],s?(o=n(s),o?"pageXOffset"in o?o[e?"pageYOffset":"pageXOffset"]:B.support.boxModel&&o.document.documentElement[i]||o.document.body[i]:s[i]):null):this.each(function(){o=n(this),o?o.scrollTo(e?B(o).scrollLeft():r,e?r:B(o).scrollTop()):this[i]=r})}}),B.each(["Height","Width"],function(e,n){var r=n.toLowerCase();B.fn["inner"+n]=function(){var e=this[0];return e?e.style?parseFloat(B.css(e,r,"padding")):this[r]():null},B.fn["outer"+n]=function(e){var t=this[0];return t?t.style?parseFloat(B.css(t,r,e?"margin":"border")):this[r]():null},B.fn[r]=function(e){var i=this[0];if(!i)return e==null?null:this;if(B.isFunction(e))return this.each(function(t){var n=B(this);n[r](e.call(this,t,n[r]()))});if(B.isWindow(i)){var s=i.document.documentElement["client"+n],o=i.document.body;return i.document.compatMode==="CSS1Compat"&&s||o&&o["client"+n]||s}if(i.nodeType===9)return Math.max(i.documentElement["client"+n],i.body["scroll"+n],i.documentElement["scroll"+n],i.body["offset"+n],i.documentElement["offset"+n]);if(e===t){var u=B.css(i,r),a=parseFloat(u);return B.isNumeric(a)?a:u}return this.css(r,typeof e=="string"?e:e+"px")}}),e.jQuery=e.$=B,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return B})}(window),function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.8.17",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),i&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var s=r==="Width"?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?u["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))}),u)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which==1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.ui=e.ui||{};var n=/left|center|right/,r=/top|center|bottom/,i="center",s={},o=e.fn.position,u=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return o.apply(this,arguments);t=e.extend({},t);var u=e(t.of),a=u[0],f=(t.collision||"flip").split(" "),l=t.offset?t.offset.split(" "):[0,0],c,h,p;return a.nodeType===9?(c=u.width(),h=u.height(),p={top:0,left:0}):a.setTimeout?(c=u.width(),h=u.height(),p={top:u.scrollTop(),left:u.scrollLeft()}):a.preventDefault?(t.at="left top",c=h=0,p={top:t.of.pageY,left:t.of.pageX}):(c=u.outerWidth(),h=u.outerHeight(),p=u.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");e.length===1&&(e=n.test(e[0])?e.concat([i]):r.test(e[0])?[i].concat(e):[i,i]),e[0]=n.test(e[0])?e[0]:i,e[1]=r.test(e[1])?e[1]:i,t[this]=e}),f.length===1&&(f[1]=f[0]),l[0]=parseInt(l[0],10)||0,l.length===1&&(l[1]=l[0]),l[1]=parseInt(l[1],10)||0,t.at[0]==="right"?p.left+=c:t.at[0]===i&&(p.left+=c/2),t.at[1]==="bottom"?p.top+=h:t.at[1]===i&&(p.top+=h/2),p.left+=l[0],p.top+=l[1],this.each(function(){var n=e(this),r=n.outerWidth(),o=n.outerHeight(),u=parseInt(e.curCSS(this,"marginLeft",!0))||0,a=parseInt(e.curCSS(this,"marginTop",!0))||0,d=r+u+(parseInt(e.curCSS(this,"marginRight",!0))||0),v=o+a+(parseInt(e.curCSS(this,"marginBottom",!0))||0),m=e.extend({},p),g;t.my[0]==="right"?m.left-=r:t.my[0]===i&&(m.left-=r/2),t.my[1]==="bottom"?m.top-=o:t.my[1]===i&&(m.top-=o/2),s.fractions||(m.left=Math.round(m.left),m.top=Math.round(m.top)),g={left:m.left-u,top:m.top-a},e.each(["left","top"],function(n,i){e.ui.position[f[n]]&&e.ui.position[f[n]][i](m,{targetWidth:c,targetHeight:h,elemWidth:r,elemHeight:o,collisionPosition:g,collisionWidth:d,collisionHeight:v,offset:l,my:t.my,at:t.at})}),e.fn.bgiframe&&n.bgiframe(),n.offset(e.extend(m,{using:t.using}))})},e.ui.position={fit:{left:function(t,n){var r=e(window),i=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft();t.left=i>0?t.left-i:Math.max(t.left-n.collisionPosition.left,t.left)},top:function(t,n){var r=e(window),i=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop();t.top=i>0?t.top-i:Math.max(t.top-n.collisionPosition.top,t.top)}},flip:{left:function(t,n){if(n.at[0]===i)return;var r=e(window),s=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft(),o=n.my[0]==="left"?-n.elemWidth:n.my[0]==="right"?n.elemWidth:0,u=n.at[0]==="left"?n.targetWidth:-n.targetWidth,a=-2*n.offset[0];t.left+=n.collisionPosition.left<0?o+u+a:s>0?o+u+a:0},top:function(t,n){if(n.at[1]===i)return;var r=e(window),s=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop(),o=n.my[1]==="top"?-n.elemHeight:n.my[1]==="bottom"?n.elemHeight:0,u=n.at[1]==="top"?n.targetHeight:-n.targetHeight,a=-2*n.offset[1];t.top+=n.collisionPosition.top<0?o+u+a:s>0?o+u+a:0}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var r=e(t),i=r.offset(),s=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,u={top:n.top-i.top+s,left:n.left-i.left+o};"using"in n?n.using.call(t,u):r.css(u)},e.fn.offset=function(t){var n=this[0];return!n||!n.ownerDocument?null:t?this.each(function(){e.offset.setOffset(this,t)}):u.call(this)}),function(){var t=document.getElementsByTagName("body")[0],n=document.createElement("div"),r,i,o,u,a;r=document.createElement(t?"div":"body"),o={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},t&&jQuery.extend(o,{position:"absolute",left:"-1000px",top:"-1000px"});for(var f in o)r.style[f]=o[f];r.appendChild(n),i=t||document.documentElement,i.insertBefore(r,i.firstChild),n.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",u=e(n).offset(function(e,t){return t}).offset(),r.innerHTML="",i.removeChild(r),a=u.top+u.left+(t?2e3:0),s.fractions=a>21&&a<22}()}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t=this,n=this.element[0].ownerDocument,r;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(t.options.disabled||t.element.propAttr("readOnly"))return;r=!1;var i=e.ui.keyCode;switch(n.keyCode){case i.PAGE_UP:t._move("previousPage",n);break;case i.PAGE_DOWN:t._move("nextPage",n);break;case i.UP:t._move("previous",n),n.preventDefault();break;case i.DOWN:t._move("next",n),n.preventDefault();break;case i.ENTER:case i.NUMPAD_ENTER:t.menu.active&&(r=!0,n.preventDefault());case i.TAB:if(!t.menu.active)return;t.menu.select(n);break;case i.ESCAPE:t.element.val(t.term),t.close(n);break;default:clearTimeout(t.searching),t.searching=setTimeout(function(){t.term!=t.element.val()&&(t.selectedItem=null,t.search(null,n))},t.options.delay)}}).bind("keypress.autocomplete",function(e){r&&(r=!1,e.preventDefault())}).bind("focus.autocomplete",function(){if(t.options.disabled)return;t.selectedItem=null,t.previous=t.element.val()}).bind("blur.autocomplete",function(e){if(t.options.disabled)return;clearTimeout(t.searching),t.closing=setTimeout(function(){t.close(e),t._change(e)},150)}),this._initSource(),this.response=function(){return t._response.apply(t,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(n){var r=t.menu.element[0];e(n.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(n){n.target!==t.element[0]&&n.target!==r&&!e.ui.contains(r,n.target)&&t.close()})},1),setTimeout(function(){clearTimeout(t.closing)},13)}).menu({focus:function(e,n){var r=n.item.data("item.autocomplete");!1!==t._trigger("focus",e,{item:r})&&/^key/.test(e.originalEvent.type)&&t.element.val(r.value)},selected:function(e,r){var i=r.item.data("item.autocomplete"),s=t.previous;t.element[0]!==n.activeElement&&(t.element.focus(),t.previous=s,setTimeout(function(){t.previous=s,t.selectedItem=i},1)),!1!==t._trigger("select",e,{item:i})&&t.element.val(i.value),t.term=t.element.val(),t.close(e),t.selectedItem=i,window.location=t.options.url+i.value},blur:function(e,n){t.menu.element.is(":visible")&&t.element.val()!==t.term&&t.element.val(t.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),t.beforeunloadHandler=function(){t.element.removeAttr("autocomplete")},e(window).bind("beforeunload",t.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t==="source"&&this._initSource(),t==="appendTo"&&this.menu.element.appendTo(e(n||"body",this.element[0].ownerDocument)[0]),t==="disabled"&&n&&this.xhr&&this.xhr.abort()},_initSource:function(){var t=this,r,i;e.isArray(this.options.source)?(r=this.options.source,this.source=function(t,n){n(e.ui.autocomplete.filter(r,t.term))}):typeof this.options.source=="string"?(i=this.options.source,this.source=function(r,s){t.xhr&&t.xhr.abort(),t.xhr=e.ajax({url:i,data:r,dataType:"json",autocompleteRequest:++n,success:function(e,t){this.autocompleteRequest===n&&s(e)},error:function(){this.autocompleteRequest===n&&s([])}})}):this.source=this.options.source},search:function(e,t){e=e!=null?e:this.element.val(),this.term=this.element.val();if(e.length<this.options.minLength)return this.close(t);clearTimeout(this.closing);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this.response)},_response:function(e){console.log(e),e=this._normalize(e),this._suggest(e),this._trigger("open"),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(100);this._renderMenu(n,t),this.menu.deactivate(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position));var r=parseInt(e(this.element).css("padding-top").replace("px",""))+1,i=parseInt(e(this.element).css("padding-bottom").replace("px",""))+1,s=parseInt(e(this.element).css("padding-left").replace("px","")),o=parseInt(e(this.element).css("padding-right").replace("px","")),u=e(this.element).width()+14+o+s,a=e(this.element).height()+(r+i);n.css({left:"-=7px",top:"-="+(a+7)+"px",width:u+"px","padding-top":a+14+"px"}),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;n&&n.length?e.each(n,function(e,n){r._renderItem(t,n)}):r._renderEmpty(t)},_renderItem:function(t,n){return e("<li></li>").data("item.autocomplete",n).append(e('<a href="'+this.options.url+n.label+'"></a>').html(this._highlight(n.label,this.term)+'<span style="width:'+(n.per||50)+'%" class="bar"></span>')).appendTo(t)},_renderEmpty:function(t){return e("<li></li>").append("<p>Your search - <strong>"+this.term+"</strong> - did not match any countries</p>").appendTo(t)},_highlight:function(t,n){var r=new RegExp("("+e.ui.autocomplete.escapeRegex(n)+")","ig");return t.replace(r,"<strong>$1</strong>")},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)){this.element.val(this.term),this.menu.deactivate();return}this.menu[e](t)},widget:function(){return this.menu.element}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(n){if(!e(n.target).closest(".ui-menu-item a").length)return;n.preventDefault(),t.select(n)}),this.refresh()},refresh:function(){var t=this,n=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");n.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(n){t.activate(n,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){this.deactivate();if(this.hasScroll()){var n=t.offset().top-this.element.offset().top,r=this.element.scrollTop(),i=this.element.height();n<0?this.element.scrollTop(r+n):n>=i&&this.element.scrollTop(r+n-i+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,n){if(!this.active){this.activate(n,this.element.children(t));return}var r=this.active[e+"All"](".ui-menu-item").eq(0);r.length?this.activate(n,r):this.activate(n,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last()){this.activate(t,this.element.children(".ui-menu-item:first"));return}var n=this.active.offset().top,r=this.element.height(),i=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n-r+e(this).height();return t<10&&t>-10});i.length||(i=this.element.children(".ui-menu-item:last")),this.activate(t,i)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first()){this.activate(t,this.element.children(".ui-menu-item:last"));return}var n=this.active.offset().top,r=this.element.height();result=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n+r-e(this).height();return t<10&&t>-10}),result.length||(result=this.element.children(".ui-menu-item:first")),this.activate(t,result)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=r.values&&r.values.length||1,u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&r.values.length!==2&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:"")));for(var a=i.length;a<o;a+=1)u.push(s);this.handles=i.add(e(u.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){r.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(r){var i=!0,s=e(this).data("index.ui-slider-handle"),o,u,a,f;if(t.options.disabled)return;switch(r.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:i=!1;if(!t._keySliding){t._keySliding=!0,e(this).addClass("ui-state-active"),o=t._start(r,s);if(o===!1)return}}f=t.options.step,t.options.values&&t.options.values.length?u=a=t.values(s):u=a=t.value();switch(r.keyCode){case e.ui.keyCode.HOME:a=t._valueMin();break;case e.ui.keyCode.END:a=t._valueMax();break;case e.ui.keyCode.PAGE_UP:a=t._trimAlignValue(u+(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:a=t._trimAlignValue(u-(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(u===t._valueMax())return;a=t._trimAlignValue(u+f);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(u===t._valueMin())return;a=t._trimAlignValue(u-f)}return t._slide(r,s,a),i}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,r),t._change(n,r),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options,r,i,s,o,u,a,f,l,c;return n.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,u=this,this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),a=t)}),n.range===!0&&this.values(1)===n.min&&(a+=1,o=e(this.handles[a])),f=this._start(t,a),f===!1?!1:(this._mouseSliding=!0,u._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length
)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,n=this.options,r=this,i=this._animateOff?!1:n.animate,s,o={},u,a,f,l;this.options.values&&this.options.values.length?this.handles.each(function(t,a){s=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",e(this).stop(1,1)[i?"animate":"css"](o,n.animate),r.options.range===!0&&(r.orientation==="horizontal"?(t===0&&r.range.stop(1,1)[i?"animate":"css"]({left:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({width:s-u+"%"},{queue:!1,duration:n.animate})):(t===0&&r.range.stop(1,1)[i?"animate":"css"]({bottom:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({height:s-u+"%"},{queue:!1,duration:n.animate}))),u=s}):(a=this.value(),f=this._valueMin(),l=this._valueMax(),s=l!==f?(a-f)/(l-f)*100:0,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",this.handle.stop(1,1)[i?"animate":"css"](o,n.animate),t==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[i?"animate":"css"]({width:s+"%"},n.animate),t==="max"&&this.orientation==="horizontal"&&this.range[i?"animate":"css"]({width:100-s+"%"},{queue:!1,duration:n.animate}),t==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[i?"animate":"css"]({height:s+"%"},n.animate),t==="max"&&this.orientation==="vertical"&&this.range[i?"animate":"css"]({height:100-s+"%"},{queue:!1,duration:n.animate}))}}),e.extend(e.ui.slider,{version:"1.8.17"})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=this,o=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==s)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==s&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var u=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(u=!0)});if(!u)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options,s=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,s._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=r.placeholder.offset();r.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=this,r=[],i=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],this.widgetName);f&&f!=this&&!f.options.disabled&&i.push([e.isFunction(f.options.items)?f.options.items.call(f.element):e(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=this,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],this.widgetName);f&&f!=this&&!f.options.disabled&&(i.push([e.isFunction(f.options.items)?f.options.items.call(f.element[0],t,{item:this.currentItem}):e(f.options.items,f.element),f]),this.containers.push(f))}}for(var o=i.length-1;o>=0;o--){var l=i[o][1],c=i[o][0];for(var a=0,h=c.length;a<h;a++){var p=e(c[a]);p.data(this.widgetName+"-item",l),n.push({item:p,instance:l,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,r=n.options;if(!r.placeholder||r.placeholder.constructor==String){var i=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(e,t){if(i&&!r.forcePlaceholderSize)return;t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=e(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.ui.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.ui.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){var s=1e4,o=null,u=this.positionAbs[this.containers[r].floating?"left":"top"];for(var a=this.items.length-1;a>=0;a--){if(!e.ui.contains(this.containers[r].element[0],this.items[a].item[0]))continue;var f=this.items[a][this.containers[r].floating?"left":"top"];Math.abs(f-u)<s&&(s=Math.abs(f-u),o=this.items[a])}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this,s=this.counter;window.setTimeout(function(){s==i.counter&&i.refreshPositions(!r)},0)},_clear:function(t,n){this.reverting=!1;var r=[],i=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)if(this._storedCSS[s]=="auto"||this._storedCSS[s]=="static")this._storedCSS[s]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var s=this.containers.length-1;s>=0;s--)e.ui.contains(this.containers[s].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[s])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[s])))}for(var s=this.containers.length-1;s>=0;s--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.17"})}(jQuery),!function(e){e(function(){e.support.transition=function(){var e=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},n;for(n in t)if(e.style[n]!==undefined)return t[n]}();return e&&{end:e}}()})}(window.jQuery),!function(e){function t(){var t=this,r=setTimeout(function(){t.$element.off(e.support.transition.end),n.call(t)},500);this.$element.one(e.support.transition.end,function(){clearTimeout(r),n.call(t)})}function n(e){this.$element.hide().trigger("hidden"),r.call(this)}function r(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),s?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(i,this)):i.call(this)):t&&t()}function i(){this.$backdrop.remove(),this.$backdrop=null}function s(){var t=this;this.isShown&&this.options.keyboard?e(document).on("keyup.dismiss.modal",function(e){e.which==27&&t.hide()}):this.isShown||e(document).off("keyup.dismiss.modal")}var o=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this))};o.prototype={constructor:o,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,n=e.Event("show");this.$element.trigger(n);if(this.isShown||n.isDefaultPrevented())return;e("body").addClass("modal-open"),this.isShown=!0,s.call(this),r.call(this,function(){var n=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in"),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(r){r&&r.preventDefault();var i=this;r=e.Event("hide"),this.$element.trigger(r);if(!this.isShown||r.isDefaultPrevented())return;this.isShown=!1,e("body").removeClass("modal-open"),s.call(this),this.$element.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?t.call(this):n.call(this)}},e.fn.modal=function(t){return this.each(function(){var n=e(this),r=n.data("modal"),i=e.extend({},e.fn.modal.defaults,n.data(),typeof t=="object"&&t);r||n.data("modal",r=new o(this,i)),typeof t=="string"?r[t]():i.show&&r.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=o,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({},i.data(),n.data());t.preventDefault(),i.modal(s)})})}(window.jQuery),function(e){function t(t){var n=t||window.event,r=[].slice.call(arguments,1),i=0,s=!0,o=0,u=0;return t=e.event.fix(n),t.type="mousewheel",t.wheelDelta&&(i=t.wheelDelta/120),t.detail&&(i=-t.detail/3),u=i,n.axis!==undefined&&n.axis===n.HORIZONTAL_AXIS&&(u=0,o=-1*i),n.wheelDeltaY!==undefined&&(u=n.wheelDeltaY/120),n.wheelDeltaX!==undefined&&(o=-1*n.wheelDeltaX/120),r.unshift(t,i,o,u),e.event.handle.apply(this,r)}var n=["DOMMouseScroll","mousewheel"];e.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var e=n.length;e;)this.addEventListener(n[--e],t,!1);else this.onmousewheel=t},teardown:function(){if(this.removeEventListener)for(var e=n.length;e;)this.removeEventListener(n[--e],t,!1);else this.onmousewheel=null}},e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}(jQuery),function(e,t,n){e.fn.jScrollPane=function(t){function r(t,r){function i(r){var o,a,l,c,h,v,m=!1,g=!1;R=r;if(z===n)h=t.scrollTop(),v=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),W=t.innerWidth()+wt,X=t.innerHeight(),t.width(W),z=e('<div class="jspPane" />').css("padding",bt).append(t.children()),V=e('<div class="jspContainer" />').css({width:W+"px",height:X+"px"}).append(z).appendTo(t);else{t.css("width",""),m=R.stickToBottom&&k(),g=R.stickToRight&&L(),c=t.innerWidth()+wt!=W||t.outerHeight()!=X,c&&(W=t.innerWidth()+wt,X=t.innerHeight(),V.css({width:W+"px",height:X+"px"}));if(!c&&Et==$&&z.outerHeight()==J){t.width(W);return}Et=$,z.css("width",""),t.width(W),V.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}z.css("overflow","auto"),r.contentWidth?$=r.contentWidth:$=z[0].scrollWidth,J=z[0].scrollHeight,z.css("overflow",""),K=$/W,Q=J/X,G=Q>1,Y=K>1,!Y&&!G?(t.removeClass("jspScrollable"),z.css({top:0,width:V.width()-wt}),O(),D(),H(),d(),j()):(t.addClass("jspScrollable"),o=R.maintainPosition&&(tt||it),o&&(a=N(),l=C()),s(),u(),f(),o&&(x(g?$-W:a,!1),S(m?J-X:l,!1)),_(),A(),I(),R.enableKeyboardNavigation&&P(),R.clickOnTrack&&p(),B(),R.hijackInternalLinks&&F()),R.autoReinitialise&&!yt?yt=setInterval(function(){i(R)},R.autoReinitialiseDelay):!R.autoReinitialise&&yt&&clearInterval(yt),h&&t.scrollTop(0)&&S(h,!1),v&&t.scrollLeft(0)&&x(v,!1),t.trigger("jsp-initialised",[Y||G])}function s(){G&&(V.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),st=V.find(">.jspVerticalBar"),ot=st.find(">.jspTrack"),Z=ot.find(">.jspDrag"),R.showArrows&&(lt=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",c(0,-1)).bind("click.jsp",M),ct=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",c(0,1)).bind("click.jsp",M),R.arrowScrollOnHover&&(lt.bind("mouseover.jsp",c(0,-1,lt)),ct.bind("mouseover.jsp",c(0,1,ct))),l(ot,R.verticalArrowPositions,lt,ct)),at=X,V.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){at-=e(this).outerHeight()}),Z.hover(function(){Z.addClass("jspHover")},function(){Z.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",M),Z.addClass("jspActive");var n=t.pageY-Z.position().top;return e("html").bind("mousemove.jsp",function(e){m(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",v),!1}),o())}function o(){ot.height(at+"px"),tt=0,ut=R.verticalGutter+ot.outerWidth(),z.width(W-ut-wt);try{st.position().left===0&&z.css("margin-left",ut+"px")}catch(e){}}function u(){Y&&(V.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),ht=V.find(">.jspHorizontalBar"),pt=ht.find(">.jspTrack"),nt=pt.find(">.jspDrag"),R.showArrows&&(mt=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",c(-1,0)).bind("click.jsp",M),gt=e('<a class="jspArrow jspArrowRight" />'
).bind("mousedown.jsp",c(1,0)).bind("click.jsp",M),R.arrowScrollOnHover&&(mt.bind("mouseover.jsp",c(-1,0,mt)),gt.bind("mouseover.jsp",c(1,0,gt))),l(pt,R.horizontalArrowPositions,mt,gt)),nt.hover(function(){nt.addClass("jspHover")},function(){nt.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",M),nt.addClass("jspActive");var n=t.pageX-nt.position().left;return e("html").bind("mousemove.jsp",function(e){y(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",v),!1}),dt=V.innerWidth(),a())}function a(){V.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){dt-=e(this).outerWidth()}),pt.width(dt+"px"),it=0}function f(){if(Y&&G){var t=pt.outerHeight(),n=ot.outerWidth();at-=t,e(ht).find(">.jspCap:visible,>.jspArrow").each(function(){dt+=e(this).outerWidth()}),dt-=n,X-=n,W-=t,pt.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),o(),a()}Y&&z.width(V.outerWidth()-wt+"px"),J=z.outerHeight(),Q=J/X,Y&&(vt=Math.ceil(1/K*dt),vt>R.horizontalDragMaxWidth?vt=R.horizontalDragMaxWidth:vt<R.horizontalDragMinWidth&&(vt=R.horizontalDragMinWidth),nt.width(vt+"px"),rt=dt-vt,b(it)),G&&(ft=Math.ceil(1/Q*at),ft>R.verticalDragMaxHeight?ft=R.verticalDragMaxHeight:ft<R.verticalDragMinHeight&&(ft=R.verticalDragMinHeight),Z.height(ft+"px"),et=at-ft,g(tt))}function l(e,t,n,r){var i="before",s="after",o;t=="os"&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==i?s=t:t==s&&(i=t,o=n,n=r,r=o),e[i](n)[s](r)}function c(e,t,n){return function(){return h(e,t,this,n),this.blur(),!1}}function h(t,n,r,i){r=e(r).addClass("jspActive");var s,o,u=!0,a=function(){t!==0&&U.scrollByX(t*R.arrowButtonSpeed),n!==0&&U.scrollByY(n*R.arrowButtonSpeed),o=setTimeout(a,u?R.initialDelay:R.arrowRepeatFreq),u=!1};a(),s=i?"mouseout.jsp":"mouseup.jsp",i=i||e("html"),i.bind(s,function(){r.removeClass("jspActive"),o&&clearTimeout(o),o=null,i.unbind(s)})}function p(){d(),G&&ot.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),s=t.pageY-i.top-tt,o,u=!0,a=function(){var e=r.offset(),n=t.pageY-e.top-ft/2,i=X*R.scrollPagePercent,l=et*i/(J-X);if(s<0)tt-l>n?U.scrollByY(-i):m(n);else{if(!(s>0)){f();return}tt+l<n?U.scrollByY(i):m(n)}o=setTimeout(a,u?R.initialDelay:R.trackClickRepeatFreq),u=!1},f=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",f)};return a(),e(document).bind("mouseup.jsp",f),!1}}),Y&&pt.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),s=t.pageX-i.left-it,o,u=!0,a=function(){var e=r.offset(),n=t.pageX-e.left-vt/2,i=W*R.scrollPagePercent,l=rt*i/($-W);if(s<0)it-l>n?U.scrollByX(-i):y(n);else{if(!(s>0)){f();return}it+l<n?U.scrollByX(i):y(n)}o=setTimeout(a,u?R.initialDelay:R.trackClickRepeatFreq),u=!1},f=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",f)};return a(),e(document).bind("mouseup.jsp",f),!1}})}function d(){pt&&pt.unbind("mousedown.jsp"),ot&&ot.unbind("mousedown.jsp")}function v(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Z&&Z.removeClass("jspActive"),nt&&nt.removeClass("jspActive")}function m(e,t){if(!G)return;e<0?e=0:e>et&&(e=et),t===n&&(t=R.animateScroll),t?U.animate(Z,"top",e,g):(Z.css("top",e),g(e))}function g(e){e===n&&(e=Z.position().top),V.scrollTop(0),tt=e;var r=tt===0,i=tt==et,s=e/et,o=-s*(J-X);if(St!=r||Tt!=i)St=r,Tt=i,t.trigger("jsp-arrow-change",[St,Tt,xt,Nt]);w(r,i),z.css("top",o),t.trigger("jsp-scroll-y",[-o,r,i]).trigger("scroll")}function y(e,t){if(!Y)return;e<0?e=0:e>rt&&(e=rt),t===n&&(t=R.animateScroll),t?U.animate(nt,"left",e,b):(nt.css("left",e),b(e))}function b(e){e===n&&(e=nt.position().left),V.scrollTop(0),it=e;var r=it===0,i=it==rt,s=e/rt,o=-s*($-W);if(xt!=r||Nt!=i)xt=r,Nt=i,t.trigger("jsp-arrow-change",[St,Tt,xt,Nt]);E(r,i),z.css("left",o),t.trigger("jsp-scroll-x",[-o,r,i]).trigger("scroll")}function w(e,t){R.showArrows&&(lt[e?"addClass":"removeClass"]("jspDisabled"),ct[t?"addClass":"removeClass"]("jspDisabled"))}function E(e,t){R.showArrows&&(mt[e?"addClass":"removeClass"]("jspDisabled"),gt[t?"addClass":"removeClass"]("jspDisabled"))}function S(e,t){var n=e/(J-X);m(n*et,t)}function x(e,t){var n=e/($-W);y(n*rt,t)}function T(t,n,r){var i,s,o,u=0,a=0,f,l,c,h,p,d;try{i=e(t)}catch(v){return}s=i.outerHeight(),o=i.outerWidth(),V.scrollTop(0),V.scrollLeft(0);while(!i.is(".jspPane")){u+=i.position().top,a+=i.position().left,i=i.offsetParent();if(/^body|html$/i.test(i[0].nodeName))return}f=C(),c=f+X,u<f||n?p=u-R.verticalGutter:u+s>c&&(p=u-X+s+R.verticalGutter),p&&S(p,r),l=N(),h=l+W,a<l||n?d=a-R.horizontalGutter:a+o>h&&(d=a-W+o+R.horizontalGutter),d&&x(d,r)}function N(){return-z.position().left}function C(){return-z.position().top}function k(){var e=J-X;return e>20&&e-C()<10}function L(){var e=$-W;return e>20&&e-N()<10}function A(){V.unbind(kt).bind(kt,function(e,t,n,r){var i=it,s=tt;return U.scrollBy(n*R.mouseWheelSpeed,-r*R.mouseWheelSpeed,!1),i==it&&s==tt})}function O(){V.unbind(kt)}function M(){return!1}function _(){z.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){T(e.target,!1)})}function D(){z.find(":input,a").unbind("focus.jsp")}function P(){function n(){var e=it,t=tt;switch(r){case 40:U.scrollByY(R.keyboardSpeed,!1);break;case 38:U.scrollByY(-R.keyboardSpeed,!1);break;case 34:case 32:U.scrollByY(X*R.scrollPagePercent,!1);break;case 33:U.scrollByY(-X*R.scrollPagePercent,!1);break;case 39:U.scrollByX(R.keyboardSpeed,!1);break;case 37:U.scrollByX(-R.keyboardSpeed,!1)}return i=e!=it||t!=tt,i}var r,i,s=[];Y&&s.push(ht[0]),G&&s.push(st[0]),z.focus(function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target!==this&&(!s.length||!e(t.target).closest(s).length))return;var o=it,u=tt;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:r=t.keyCode,n();break;case 35:S(J-X),r=null;break;case 36:S(0),r=null}return i=t.keyCode==r&&o!=it||u!=tt,!i}).bind("keypress.jsp",function(e){return e.keyCode==r&&n(),!i}),R.hideFocus?(t.css("outline","none"),"hideFocus"in V[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in V[0]&&t.attr("hideFocus",!1))}function H(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function B(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash);try{t=e(r)}catch(i){return}t.length&&z.find(r)&&(V.scrollTop()===0?n=setInterval(function(){V.scrollTop()>0&&(T(r,!0),e(document).scrollTop(V.position().top),clearInterval(n))},50):(T(r,!0),e(document).scrollTop(V.position().top)))}}function j(){e("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function F(){j(),e("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var e=this.href.split("#"),t;if(e.length>1){t=e[1];if(t.length>0&&z.find("#"+t).length>0)return T("#"+t,!0),!1}})}function I(){var e,t,n,r,i,s=!1;V.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(o){var u=o.originalEvent.touches[0];e=N(),t=C(),n=u.pageX,r=u.pageY,i=!1,s=!0}).bind("touchmove.jsp",function(o){if(!s)return;var u=o.originalEvent.touches[0],a=it,f=tt;return U.scrollTo(e+n-u.pageX,t+r-u.pageY),i=i||Math.abs(n-u.pageX)>5||Math.abs(r-u.pageY)>5,a==it&&f==tt}).bind("touchend.jsp",function(e){s=!1}).bind("click.jsp-touchclick",function(e){if(i)return i=!1,!1})}function q(){var e=C(),n=N();t.removeClass("jspScrollable").unbind(".jsp"),t.replaceWith(Ct.append(z.children())),Ct.scrollTop(e),Ct.scrollLeft(n)}var R,U=this,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St=!0,xt=!0,Tt=!1,Nt=!1,Ct=t.clone(!1,!1).empty(),kt=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";bt=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),wt=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0),e.extend(U,{reinitialise:function(t){t=e.extend({},R,t),i(t)},scrollToElement:function(e,t,n){T(e,t,n)},scrollTo:function(e,t,n){x(e,n),S(t,n)},scrollToX:function(e,t){x(e,t)},scrollToY:function(e,t){S(e,t)},scrollToPercentX:function(e,t){x(e*($-W),t)},scrollToPercentY:function(e,t){S(e*(J-X),t)},scrollBy:function(e,t,n){U.scrollByX(e,n),U.scrollByY(t,n)},scrollByX:function(e,t){var n=N()+Math[e<0?"floor":"ceil"](e),r=n/($-W);y(r*rt,t)},scrollByY:function(e,t){var n=C()+Math[e<0?"floor":"ceil"](e),r=n/(J-X);m(r*et,t)},positionDragX:function(e,t){y(e,t)},positionDragY:function(e,t){m(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:R.animateDuration,easing:R.animateEase,queue:!1,step:r})},getContentPositionX:function(){return N()},getContentPositionY:function(){return C()},getContentWidth:function(){return $},getContentHeight:function(){return J},getPercentScrolledX:function(){return N()/($-W)},getPercentScrolledY:function(){return C()/(J-X)},getIsScrollableH:function(){return Y},getIsScrollableV:function(){return G},getContentPane:function(){return z},scrollToBottom:function(e){m(et,e)},hijackInternalLinks:function(){F()},destroy:function(){q()}}),i(r)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var n=e(this),i=n.data("jsp");i?i.reinitialise(t):(i=new r(n,t),n.data("jsp",i))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(e,t,n){e.fn.jScrollPane=function(t){function r(t,r){function i(r){var o,a,l,c,h,v,m=!1,g=!1;R=r;if(z===n)h=t.scrollTop(),v=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),W=t.innerWidth()+wt,X=t.innerHeight(),t.width(W),z=e('<div class="jspPane" />').css("padding",bt).append(t.children()),V=e('<div class="jspContainer" />').css({width:W+"px",height:X+"px"}).append(z).appendTo(t);else{t.css("width",""),m=R.stickToBottom&&k(),g=R.stickToRight&&L(),c=t.innerWidth()+wt!=W||t.outerHeight()!=X,c&&(W=t.innerWidth()+wt,X=t.innerHeight(),V.css({width:W+"px",height:X+"px"}));if(!c&&Et==$&&z.outerHeight()==J){t.width(W);return}Et=$,z.css("width",""),t.width(W),V.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}z.css("overflow","auto"),r.contentWidth?$=r.contentWidth:$=z[0].scrollWidth,J=z[0].scrollHeight,z.css("overflow",""),K=$/W,Q=J/X,G=Q>1,Y=K>1,!Y&&!G?(t.removeClass("jspScrollable"),z.css({top:0,width:V.width()-wt}),O(),D(),H(),d(),j()):(t.addClass("jspScrollable"),o=R.maintainPosition&&(tt||it),o&&(a=N(),l=C()),s(),u(),f(),o&&(x(g?$-W:a,!1),S(m?J-X:l,!1)),_(),A(),I(),R.enableKeyboardNavigation&&P(),R.clickOnTrack&&p(),B(),R.hijackInternalLinks&&F()),R.autoReinitialise&&!yt?yt=setInterval(function(){i(R)},R.autoReinitialiseDelay):!R.autoReinitialise&&yt&&clearInterval(yt),h&&t.scrollTop(0)&&S(h,!1),v&&t.scrollLeft(0)&&x(v,!1),t.trigger("jsp-initialised",[Y||G])}function s(){G&&(V.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),st=V.find(">.jspVerticalBar"),ot=st.find(">.jspTrack"),Z=ot.find(">.jspDrag"),R.showArrows&&(lt=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",c(0,-1)).bind("click.jsp",M),ct=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",c(0,1)).bind("click.jsp",M),R.arrowScrollOnHover&&(lt.bind("mouseover.jsp",c(0,-1,lt)),ct.bind("mouseover.jsp",c(0,1,ct))),l(ot,R.verticalArrowPositions,lt,ct)),at=X,V.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){at-=e(this).outerHeight()}),Z.hover(function(){Z.addClass("jspHover")},function(){Z.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",M),Z.addClass("jspActive");var n=t.pageY-Z.position().top;return e("html").bind("mousemove.jsp",function(e){m(e.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",v),!1}),o())}function o(){ot.height(at+"px"),tt=0,ut=R.verticalGutter+ot.outerWidth(),z.width(W-ut-wt);try{st.position().left===0&&z.css("margin-left",ut+"px")}catch(e){}}function u(){Y&&(V.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),ht=V.find(">.jspHorizontalBar"),pt=ht.find(">.jspTrack"),nt=pt.find(">.jspDrag"),R.showArrows&&(mt=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",c(-1,0)).bind("click.jsp",M),gt=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",c(1,0)).bind("click.jsp",M),R.arrowScrollOnHover&&(mt.bind("mouseover.jsp",c(-1,0,mt)),gt.bind("mouseover.jsp",c(1,0,gt))),l(pt,R.horizontalArrowPositions,mt,gt)),nt.hover(function(){nt.addClass("jspHover")},function(){nt.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",M),nt.addClass("jspActive");var n=t.pageX-nt.position().left;return e("html").bind("mousemove.jsp",function(e){y(e.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",v),!1}),dt=V.innerWidth(),a())}function a(){V.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){dt-=e(this).outerWidth()}),pt.width(dt+"px"),it=0}function f(){if(Y&&G){var t=pt.outerHeight(),n=ot.outerWidth();at-=t,e(ht).find(">.jspCap:visible,>.jspArrow").each(function(){dt+=e(this).outerWidth()}),dt-=n,X-=n,W-=t,pt.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),o(),a()}Y&&z.width(V.outerWidth()-wt+"px"),J=z.outerHeight(),Q=J/X,Y&&(vt=Math.ceil(1/K*dt),vt>R.horizontalDragMaxWidth?vt=R.horizontalDragMaxWidth:vt<R.horizontalDragMinWidth&&(vt=R.horizontalDragMinWidth),nt.width(vt+"px"),rt=dt-vt,b(it)),G&&(ft=Math.ceil(1/Q*at),ft>R.verticalDragMaxHeight?ft=R.verticalDragMaxHeight:ft<R.verticalDragMinHeight&&(ft=R.verticalDragMinHeight),Z.height(ft+"px"),et=at-ft,g(tt))}function l(e,t,n,r){var i="before",s="after",o;t=="os"&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==i?s=t:t==s&&(i=t,o=n,n=r,r=o),e[i](n)[s](r)}function c(e,t,n){return function(){return h(e,t,this,n),this.blur(),!1}}function h(t,n,r,i){r=e(r).addClass("jspActive");var s,o,u=!0,a=function(){t!==0&&U.scrollByX(t*R.arrowButtonSpeed),n!==0&&U.scrollByY(n*R.arrowButtonSpeed),o=setTimeout(a,u?R.initialDelay:R.arrowRepeatFreq),u=!1};a(),s=i?"mouseout.jsp":"mouseup.jsp",i=i||e("html"),i.bind(s,function(){r.removeClass("jspActive"),o&&clearTimeout(o),o=null,i.unbind(s)})}function p(){d(),G&&ot.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),s=t.pageY-i.top-tt,o,u=!0,a=function(){var e=r.offset(),n=t.pageY-e.top-ft/2,i=X*R.scrollPagePercent,l=et*i/(J-X);if(s<0)tt-l>n?U.scrollByY(-i):m(n);else{if(!(s>0)){f();return}tt+l<n?U.scrollByY(i):m(n)}o=setTimeout(a,u?R.initialDelay:R.trackClickRepeatFreq),u=!1},f=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",f)};return a(),e(document).bind("mouseup.jsp",f),!1}}),Y&&pt.bind("mousedown.jsp",function(t){if(t.originalTarget===n||t.originalTarget==t.currentTarget){var r=e(this),i=r.offset(),s=t.pageX-i.left-it,o,u=!0,a=function(){var e=r.offset(),n=t.pageX-e.left-vt/2,i=W*R.scrollPagePercent,l=rt*i/($-W);if(s<0)it-l>n?U.scrollByX(-i):y(n);else{if(!(s>0)){f();return}it+l<n?U.scrollByX(i):y(n)}o=setTimeout(a,u?R.initialDelay:R.trackClickRepeatFreq),u=!1},f=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",f)};return a(),e(document).bind("mouseup.jsp",f),!1}})}function d(){pt&&pt.unbind("mousedown.jsp"),ot&&ot.unbind("mousedown.jsp")}function v(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Z&&Z.removeClass("jspActive"),nt&&nt.removeClass("jspActive")}function m(e,t){if(!G)return;e<0?e=0:e>et&&(e=et),t===n&&(t=R.animateScroll),t?U.animate(Z,"top",e,g):(Z.css("top",e),g(e))}function g(e){e===n&&(e=Z.position().top),V.scrollTop(0),tt=e;var r=tt===0,i=tt==et,s=e/et,o=-s*(J-X);if(St!=r||Tt!=i)St=r,Tt=i,t.trigger("jsp-arrow-change",[St,Tt,xt,Nt]);w(r,i),z.css("top",o),t.trigger("jsp-scroll-y",[-o,r,i]).trigger("scroll")}function y(e,t){if(!Y)return;e<0?e=0:e>rt&&(e=rt),t===n&&(t=R.animateScroll),t?U.animate(nt,"left",e,b):(nt.css("left",e),b(e))}function b(e){e===n&&(e=nt.position().left),V.scrollTop(0),it=e;var r=it===0,i=it==rt,s=e/rt,o=-s*($-W);if(xt!=r||Nt!=i)xt=r,Nt=i,t.trigger("jsp-arrow-change",[St,Tt,xt,Nt]);E(r,i),z.css("left",o),t.trigger("jsp-scroll-x",[-o,r,i]).trigger("scroll")}function w(e,t){R.showArrows&&(lt[e?"addClass":"removeClass"]("jspDisabled"),ct[t?"addClass":"removeClass"]("jspDisabled"))}function E(e,t){R.showArrows&&(mt[e?"addClass":"removeClass"]("jspDisabled"),gt[t?"addClass":"removeClass"]("jspDisabled"))}function S(e,t){var n=e/(J-X);m(n*et,t)}function x(e,t){var n=e/($-W);y(n*rt,t)}function T(t,n,r){var i,s,o,u=0,a=0,f,l,c,h,p,d;try{i=e(t)}catch(v){return}s=i.outerHeight(),o=i.outerWidth(),V.scrollTop(0),V.scrollLeft(0);while(!i.is(".jspPane")){u+=i.position().top,a+=i.position().left,i=i.offsetParent();if(/^body|html$/i.test(i[0].nodeName))return}f=C(),c=f+X,u<f||n?p=u-R.verticalGutter:u+s>c&&(p=u-X+s+R.verticalGutter),p&&S(p,r),l=N(),h=l+W,a<l||n?d=a-R.horizontalGutter:a+o>h&&(d=a-W+o+R.horizontalGutter),d&&x(d,r)}function N(){return-z.position().left}function C(){return-z.position().top}function k(){var e=J-X;return e>20&&e-C()<10}function L(){var e=$-W;return e>20&&e-N()<10}function A(){V.unbind(kt).bind(kt,function(e,t,n,r){var i=it,s=tt;return U.scrollBy(n*R.mouseWheelSpeed,-r*R.mouseWheelSpeed,!1),i==it&&s==tt})}function O(){V.unbind(kt)}function M(){return!1}function _(){z.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){T(e.target,!1)})}function D(){z.find(":input,a").unbind("focus.jsp")}function P(){function n(){var e=it,t=tt;switch(r){case 40:U.scrollByY(R.keyboardSpeed,!1);break;case 38:U.scrollByY(-R.keyboardSpeed,!1);break;case 34:case 32:U.scrollByY(X*R.scrollPagePercent,!1);break;case 33:U.scrollByY(-X*R.scrollPagePercent,!1);break;case 39:U.scrollByX(R.keyboardSpeed,!1);break;case 37:U.scrollByX(-R.keyboardSpeed,!1)}return i=e!=it||t!=tt,i}var r,i,s=[];Y&&s.push(ht[0]),G&&s.push(st[0]),z.focus(function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target!==this&&(!s.length||!e(t.target).closest(s).length))return;var o=it,u=tt;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:r=t.keyCode,n();break;case 35:S(J-X),r=null;break;case 36:S(0),r=null}return i=t.keyCode==r&&o!=it||u!=tt,!i}).bind("keypress.jsp",function(e){return e.keyCode==r&&n(),!i}),R.hideFocus?(t.css("outline","none"),"hideFocus"in V[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in V[0]&&t.attr("hideFocus",!1))}function H(){t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function B(){if(location.hash&&location.hash.length>1){var t,n,r=escape(location.hash);try{t=e(r)}catch(i){return}t.length&&z.find(r)&&(V.scrollTop()===0?n=setInterval(function(){V.scrollTop()>0&&(T(r,!0),e(document).scrollTop(V.position().top),clearInterval(n))},50):(T(r,!0),e(document).scrollTop(V.position().top)))}}function j(){e("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function F(){j(),e("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var e=this.href.split("#"),t;if(e.length>1){t=e[1];if(t.length>0&&z.find("#"+t).length>0)return T("#"+t,!0),!1}})}function I(){var e,t,n,r,i,s=!1;V.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(o){var u=o.originalEvent.touches[0];e=N(),t=C(),n=u.pageX,r=u.pageY,i=!1,s=!0}).bind("touchmove.jsp",function(o){if(!s)return;var u=o.originalEvent.touches[0],a=it,f=tt;return U.scrollTo(e+n-u.pageX,t+r-u.pageY),i=i||Math.abs(n-u.pageX)>5||Math.abs(r-u.pageY)>5,a==it&&f==tt}).bind("touchend.jsp",function(e){s=!1}).bind("click.jsp-touchclick",function(e){if(i)return i=!1,!1})}function q(){var e=C(),n=N();t.removeClass("jspScrollable").unbind(".jsp"),t.replaceWith(Ct.append(z.children())),Ct.scrollTop(e),Ct.scrollLeft(n)}var R,U=this,z,W,X,V,$,J,K,Q,G,Y,Z,et,tt,nt,rt,it,st,ot,ut,at,ft,lt,ct,ht,pt,dt,vt,mt,gt,yt,bt,wt,Et,St=!0,xt=!0,Tt=!1,Nt=!1,Ct=t.clone(!1,!1).empty(),kt=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";bt=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),wt=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0),e.extend(U,{reinitialise:function(t){t=e.extend({},R,t),i(t)},scrollToElement:function(e,t,n){T(e,t,n)},scrollTo:function(e,t,n){x(e,n),S(t,n)},scrollToX:function(e,t){x(e,t)},scrollToY:function(e,t){S(e,t)},scrollToPercentX:function(e,t){x(e*($-W),t)},scrollToPercentY:function(e,t){S(e*(J-X),t)},scrollBy:function(e,t,n){U.scrollByX(e,n),U.scrollByY(t,n)},scrollByX:function(e,t){var n=N()+Math[e<0?"floor":"ceil"](e),r=n/($-W);y(r*rt,t)},scrollByY:function(e,t){var n=C()+Math[e<0?"floor":"ceil"](e),r=n/(J-X);m(r*et,t)},positionDragX:function(e,t){y(e,t)},positionDragY:function(e,t){m(e,t)},animate:function(e,t,n,r){var i={};i[t]=n,e.animate(i,{duration:R.animateDuration,easing:R.animateEase,queue:!1,step:r})},getContentPositionX:function(){return N()},getContentPositionY:function(){return C()},getContentWidth:function(){return $},getContentHeight:function(){return J},getPercentScrolledX:function(){return N()/($-W)},getPercentScrolledY:function(){return C()/(J-X)},getIsScrollableH:function(){return Y},getIsScrollableV:function(){return G},getContentPane:function(){return z},scrollToBottom:function(e){m(et,e)},hijackInternalLinks:function(){F()},destroy:function(){q()}}),i(r)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var n=e(this),i=n.data("jsp");i?i.reinitialise(t):(i=new r(n,t),n.data("jsp",i))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery,this),function(){function e(t,n,r){if(t===n)return t!==0||1/t==1/n;if(t==null||n==null)return t===n;t._chain&&(t=t._wrapped),n._chain&&(n=n._wrapped);if(t.isEqual&&E.isFunction(t.isEqual))return t.isEqual(n);if(n.isEqual&&E.isFunction(n.isEqual))return n.isEqual(t);var i=a.call(t);if(i!=a.call(n))return!1;switch(i){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:t==0?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if(typeof t!="object"||typeof n!="object")return!1;for(var s=r.length;s--;)if(r[s]==t)return!0;r.push(t);var s=0,o=!0;if(i=="[object Array]"){if(s=t.length,o=s==n.length)for(;s--;)if(!(o=s in t==s in n&&e(t[s],n[s],r)))break}else{if("constructor"in t!="constructor"in n||t.constructor!=n.constructor)return!1;for(var u in t)if(E.has(t,u)&&(s++,!(o=E.has(n,u)&&e(t[u],n[u],r))))break;if(o){for(u in n)if(E.has(n,u)&&!(s--))break;o=!s}}return r.pop(),o}var t=this,n=t._,r={},i=Array.prototype,s=Object.prototype,o=i.slice,u=i.unshift,a=s.toString,f=s.hasOwnProperty,l=i.forEach,c=i.map,h=i.reduce,p=i.reduceRight,d=i.filter,v=i.every,m=i.some,g=i.indexOf,y=i.lastIndexOf,s=Array.isArray,b=Object.keys,w=Function.prototype.bind,E=function(e){return new L(e)};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=E),exports._=E):t._=E,E.VERSION="1.3.1";var S=E.each=E.forEach=function(e,t,n){if(e!=null)if(l&&e.forEach===l)e.forEach(t,n);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(i in e&&t.call(n,e[i],i,e)===r)break}else for(i in e)if(E.has(e,i)&&t.call(n,e[i],i,e)===r)break};E.map=E.collect=function(e,t,n){var r=[];return e==null?r:c&&e.map===c?e.map(t,n):(S(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),e.length===+e.length&&(r.length=e.length),r)},E.reduce=E.foldl=E.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(h&&e.reduce===h)return r&&(t=E.bind(t,r)),i?e.reduce(t,n):e.reduce(t);S(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},E.reduceRight=E.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduceRight===p)return r&&(t=E.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=E.toArray(e).reverse();return r&&!i&&(t=E.bind(t,r)),i?E.reduce(s,t,n,r):E.reduce(s,t)},E.find=E.detect=function(e,t,n){var r;return x(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},E.filter=E.select=function(e,t,n){var r=[];return e==null?r:d&&e.filter===d?e.filter(t,n):(S(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},E.reject=function(e,t,n){var r=[];return e==null?r:(S(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},E.every=E.all=function(e,t,n){var i=!0;return e==null?i:v&&e.every===v?e.every(t,n):(S(e,function(e,s,o){if(!(i=i&&t.call(n,e,s,o)))return r}),i)};var x=E.some=E.any=function(e,t,n){t||(t=E.identity);var i=!1;return e==null?i:m&&e.some===m?e.some(t,n):(S(e,function(e,s,o){if(i||(i=t.call(n,e,s,o)))return r}),!!i)};E.include=E.contains=function(e,t){var n=!1;return e==null?n:g&&e.indexOf===g?e.indexOf(t)!=-1:n=x(e,function(e){return e===t})},E.invoke=function(e,t){var n=o.call(arguments,2);return E.map(e,function(e){return(E.isFunction(t)?t||e:e[t]).apply(e,n)})},E.pluck=function(e,t){return E.map(e,function(e){return e[t]})},E.max=function(e,t,n){if(!t&&E.isArray(e))return Math.max.apply(Math,e);if(!t&&E.isEmpty(e))return-Infinity;var r={computed:-Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i>=r.computed&&(r={value:e,computed:i})}),r.value},E.min=function(e,t,n){if(!t&&E.isArray(e))return Math.min.apply(Math,e);if(!t&&E.isEmpty(e))return Infinity;var r={computed:Infinity};return S(e,function(e,i,s){i=t?t.call(n,e,i,s):e,i<r.computed&&(r={value:e,computed:i})}),r.value},E.shuffle=function(e){var t=[],n;return S(e,function(e,r){r==0?t[0]=e:(n=Math.floor(Math.random()*(r+1)),t[r]=t[n],t[n]=e)}),t},E.sortBy=function(e,t,n){return E.pluck(E.map(e,function(e,r,i){return{value:e,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0}),"value")},E.groupBy=function(e,t){var n={},r=E.isFunction(t)?t:function(e){return e[t]};return S(e,function(e,t){var i=r(e,t);(n[i]||(n[i]=[])).push(e)}),n},E.sortedIndex=function(e,t,n){n||(n=E.identity);for(var r=0,i=e.length;r<i;){var s=r+i>>1;n(e[s])<n(t)?r=s+1:i=s}return r},E.toArray=function(e){return e?e.toArray?e.toArray():E.isArray(e)?o.call(e):E.isArguments(e)?o.call(e):E.values(e):[]},E.size=function(e){return E.toArray(e).length},E.first=E.head=function(e,t,n){return t!=null&&!n?o.call(e,0,t):e[0]},E.initial=function(e,t,n){return o.call(e,0,e.length-(t==null||n?1:t))},E.last=function(e,t,n){return t!=null&&!n?o.call(e,Math.max(e.length-t,0)):e[e.length-1]},E.rest=E.tail=function(e,t,n){return o.call(e,t==null||n?1:t)},E.compact=function(e){return E.filter(e,function(e){return!!e})},E.flatten=function(e,t){return E.reduce(e,function(e,n){return E.isArray(n)?e.concat(t?n:E.flatten(n)):(e[e.length]=n,e)},[])},E.without=function(e){return E.difference(e,o.call(arguments,1))},E.uniq=E.unique=function(e,t,n){var n=n?E.map(e,n):e,r=[];return E.reduce(n,function(n,i,s){if(0==s||(t===!0?E.last(n)!=i:!E.include(n,i)))n[n.length]=i,r[r.length]=e[s];return n},[]),r},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=E.intersect=function(e){var t=o.call(arguments,1);return E.filter(E.uniq(e),function(e){return E.every(t,function(t){return E.indexOf(t,e)>=0})})},E.difference=function(e){var t=E.flatten(o.call(arguments,1));return E.filter(e,function(e){return!E.include(t,e)})},E.zip=function(){for(var e=o.call(arguments),t=E.max(E.pluck(e,"length")),n=Array(t),r=0;r<t;r++)n[r]=E.pluck(e,""+r);return n},E.indexOf=function(e,t,n){if(e==null)return-1;var r;if(n)return n=E.sortedIndex(e,t),e[n]===t?n:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(n=0,r=e.length;n<r;n++)if(n in e&&e[n]===t)return n;return-1},E.lastIndexOf=function(e,t){if(e==null)return-1;if(y&&e.lastIndexOf===y)return e.lastIndexOf(t);for(var n=e.length;n--;)if(n in e&&e[n]===t)return n;return-1},E.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0);for(var n=arguments[2]||1,r=Math.max(Math.ceil((t-e)/n),0),i=0,s=Array(r);i<r;)s[i++]=e,e+=n;return s};var T=function(){};E.bind=function(e,t){var n,r;if(e.bind===w&&w)return w.apply(e,o.call(arguments,1));if(!E.isFunction(e))throw new TypeError;return r=o.call(arguments,2),n=function(){if(this instanceof n){T.prototype=e.prototype;var i=new T,s=e.apply(i,r.concat(o.call(arguments)));return Object(s)===s?s:i}return e.apply(t,r.concat(o.call(arguments)))}},E.bindAll=function(e){var t=o.call(arguments,1);return t.length==0&&(t=E.functions(e)),S(t,function(t){e[t]=E.bind(e[t],e)}),e},E.memoize=function(e,t){var n={};return t||(t=E.identity),function(){var r=t.apply(this,arguments);return E.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},E.delay=function(e,t){var n=o.call(arguments,2);return setTimeout(function(){return e.apply(e,n)},t)},E.defer=function(e){return E.delay.apply(E,[e,1].concat(o.call(arguments,1)))},E.throttle=function(e,t){var n,r,i,s,o,u=E.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var a;i||(i=setTimeout(function(){i=null,o&&e.apply(n,r),u()},t)),s?o=!0:e.apply(n,r),u(),s=!0}},E.debounce=function(e,t){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout(function(){n=null,e.apply(r,i)},t)}},E.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments))}},E.wrap=function(e,t){return function(){var n=[e].concat(o.call(arguments,0));return t.apply(this,n)}},E.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},E.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},E.keys=b||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[],n;for(n in e)E.has(e,n)&&(t[t.length]=n);return t},E.values=function(e){return E.map(e,E.identity)},E.functions=E.methods=function(e){var t=[],n;for(n in e)E.isFunction(e[n])&&t.push(n);return t.sort()},E.extend=function(e){return S(o.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},E.defaults=function(e){return S(o.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},E.clone=function(e){return E.isObject(e)?E.isArray(e)?e.slice():E.extend({},e):e},E.tap=function(e,t){return t(e),e},E.isEqual=function(t,n){return e(t,n,[])},E.isEmpty=function(e){if(E.isArray(e)||E.isString(e))return e.length===0;for(var t in e)if(E.has(e,t))return!1;return!0},E.isElement=function(e){return!!e&&e.nodeType==1},E.isArray=s||function(e){return a.call(e)=="[object Array]"},E.isObject=function(e){return e===Object(e)},E.isArguments=function(e){return a.call(e)=="[object Arguments]"},E.isArguments(arguments)||(E.isArguments=function(e){return!!e&&!!E.has(e,"callee")}),E.isFunction=function(e){return a.call(e)=="[object Function]"},E.isString=function(
e){return a.call(e)=="[object String]"},E.isNumber=function(e){return a.call(e)=="[object Number]"},E.isNaN=function(e){return e!==e},E.isBoolean=function(e){return e===!0||e===!1||a.call(e)=="[object Boolean]"},E.isDate=function(e){return a.call(e)=="[object Date]"},E.isRegExp=function(e){return a.call(e)=="[object RegExp]"},E.isNull=function(e){return e===null},E.isUndefined=function(e){return e===void 0},E.has=function(e,t){return f.call(e,t)},E.noConflict=function(){return t._=n,this},E.identity=function(e){return e},E.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},E.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},E.mixin=function(e){S(E.functions(e),function(t){O(t,E[t]=e[t])})};var N=0;E.uniqueId=function(e){var t=N++;return e?e+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var C=/.^/,k=function(e){return e.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};E.template=function(e,t){var n=E.templateSettings,n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(n.escape||C,function(e,t){return"',_.escape("+k(t)+"),'"}).replace(n.interpolate||C,function(e,t){return"',"+k(t)+",'"}).replace(n.evaluate||C,function(e,t){return"');"+k(t).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",r=new Function("obj","_",n);return t?r(t,E):function(e){return r.call(this,e,E)}},E.chain=function(e){return E(e).chain()};var L=function(e){this._wrapped=e};E.prototype=L.prototype;var A=function(e,t){return t?E(e).chain():e},O=function(e,t){L.prototype[e]=function(){var e=o.call(arguments);return u.call(e,this._wrapped),A(t.apply(E,e),this._chain)}};E.mixin(E),S("pop,push,reverse,shift,sort,splice,unshift".split(","),function(e){var t=i[e];L.prototype[e]=function(){var n=this._wrapped;t.apply(n,arguments);var r=n.length;return(e=="shift"||e=="splice")&&r===0&&delete n[0],A(n,this._chain)}}),S(["concat","join","slice"],function(e){var t=i[e];L.prototype[e]=function(){return A(t.apply(this._wrapped,arguments),this._chain)}}),L.prototype.chain=function(){return this._chain=!0,this},L.prototype.value=function(){return this._wrapped}}.call(this),function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=Class.implement=function(n){function r(){!e&&this.init&&this.init.apply(this,arguments)}var i=this.prototype;e=!0;var s=new this;e=!1;for(var o in n)s[o]=typeof n[o]=="function"&&typeof i[o]=="function"&&t.test(n[o])?function(e,t){return function(){var n=this._super;this._super=i[e];var r=t.apply(this,arguments);return this._super=n,r}}(o,n[o]):n[o];return r.prototype=s,r.constructor=r,r.extend=arguments.callee,r.implement=arguments.callee,r}}(),function(){var e=this,t=e.Backbone,n;n=typeof exports!="undefined"?exports:e.Backbone={},n.VERSION="0.5.3";var r=e._;!r&&typeof require!="undefined"&&(r=require("underscore")._);var i=e.jQuery||e.Zepto;n.noConflict=function(){return e.Backbone=t,this},n.emulateHTTP=!1,n.emulateJSON=!1,n.Events={bind:function(e,t,n){var r=this._callbacks||(this._callbacks={});return(r[e]||(r[e]=[])).push([t,n]),this},unbind:function(e,t){var n;if(e){if(n=this._callbacks)if(t){n=n[e];if(!n)return this;for(var r=0,i=n.length;r<i;r++)if(n[r]&&t===n[r][0]){n[r]=null;break}}else n[e]=[]}else this._callbacks={};return this},trigger:function(e){var t,n,r,i,s=2;if(!(n=this._callbacks))return this;for(;s--;)if(t=s?e:"all",t=n[t])for(var o=0,u=t.length;o<u;o++)(r=t[o])?(i=s?Array.prototype.slice.call(arguments,1):arguments,r[0].apply(r[1]||this,i)):(t.splice(o,1),o--,u--);return this}},n.Model=function(e,t){var n;e||(e={});if(n=this.defaults)r.isFunction(n)&&(n=n.call(this)),e=r.extend({},n,e);this.attributes={},this._escapedAttributes={},this.cid=r.uniqueId("c"),this.set(e,{silent:!0}),this._changed=!1,this._previousAttributes=r.clone(this.attributes),t&&t.collection&&(this.collection=t.collection),this.initialize(e,t)},r.extend(n.Model.prototype,n.Events,{_previousAttributes:null,_changed:!1,idAttribute:"id",initialize:function(){},toJSON:function(){return r.clone(this.attributes)},get:function(e){return this.attributes[e]},escape:function(e){var t;return(t=this._escapedAttributes[e])?t:(t=this.attributes[e],this._escapedAttributes[e]=(t==null?"":""+t).replace(/&(?!\w+;|#\d+;|#x[\da-f]+;)/gi,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"))},has:function(e){return this.attributes[e]!=null},set:function(e,t){t||(t={});if(!e)return this;e.attributes&&(e=e.attributes);var n=this.attributes,i=this._escapedAttributes;if(!t.silent&&this.validate&&!this._performValidation(e,t))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var s=this._changing;this._changing=!0;for(var o in e){var u=e[o];r.isEqual(n[o],u)||(n[o]=u,delete i[o],this._changed=!0,t.silent||this.trigger("change:"+o,this,u,t))}return!s&&!t.silent&&this._changed&&this.change(t),this._changing=!1,this},unset:function(e,t){if(e in this.attributes){t||(t={});var n={};return n[e]=void 0,!t.silent&&this.validate&&!this._performValidation(n,t)?!1:(delete this.attributes[e],delete this._escapedAttributes[e],e==this.idAttribute&&delete this.id,this._changed=!0,t.silent||(this.trigger("change:"+e,this,void 0,t),this.change(t)),this)}return this},clear:function(e){e||(e={});var t,n=this.attributes,r={};for(t in n)r[t]=void 0;if(!e.silent&&this.validate&&!this._performValidation(r,e))return!1;this.attributes={},this._escapedAttributes={},this._changed=!0;if(!e.silent){for(t in n)this.trigger("change:"+t,this,void 0,e);this.change(e)}return this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){if(!t.set(t.parse(n,s),e))return!1;r&&r(t,n)},e.error=y(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},save:function(e,t){t||(t={});if(e&&!this.set(e,t))return!1;var r=this,i=t.success;t.success=function(e,n,s){if(!r.set(r.parse(e,s),t))return!1;i&&i(r,e,s)},t.error=y(t.error,r,t);var s=this.isNew()?"create":"update";return(this.sync||n.sync).call(this,s,this,t)},destroy:function(e){e||(e={});if(this.isNew())return this.trigger("destroy",this,this.collection,e);var t=this,r=e.success;return e.success=function(n){t.trigger("destroy",t,t.collection,e),r&&r(t,n)},e.error=y(e.error,t,e),(this.sync||n.sync).call(this,"delete",this,e)},url:function(){var e=m(this.collection)||this.urlRoot||g();return this.isNew()?e:e+(e.charAt(e.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this)},isNew:function(){return this.id==null},change:function(e){this.trigger("change",this,e),this._previousAttributes=r.clone(this.attributes),this._changed=!1},hasChanged:function(e){return e?this._previousAttributes[e]!=this.attributes[e]:this._changed},changedAttributes:function(e){e||(e=this.attributes);var t=this._previousAttributes,n=!1,i;for(i in e)r.isEqual(t[i],e[i])||(n=n||{},n[i]=e[i]);return n},previous:function(e){return!e||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return r.clone(this._previousAttributes)},_performValidation:function(e,t){var n=this.validate(e);return n?(t.error?t.error(this,n,t):this.trigger("error",this,n,t),!1):!0}}),n.Collection=function(e,t){t||(t={}),t.comparator&&(this.comparator=t.comparator),r.bindAll(this,"_onModelEvent","_removeReference"),this._reset(),e&&this.reset(e,{silent:!0}),this.initialize.apply(this,arguments)},r.extend(n.Collection.prototype,n.Events,{model:n.Model,initialize:function(){},toJSON:function(){return this.map(function(e){return e.toJSON()})},add:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._add(e[n],t);else this._add(e,t);return this},remove:function(e,t){if(r.isArray(e))for(var n=0,i=e.length;n<i;n++)this._remove(e[n],t);else this._remove(e,t);return this},get:function(e){return e==null?null:this._byId[e.id!=null?e.id:e]},getByCid:function(e){return e&&this._byCid[e.cid||e]},at:function(e){return this.models[e]},sort:function(e){e||(e={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");return this.models=this.sortBy(this.comparator),e.silent||this.trigger("reset",this,e),this},pluck:function(e){return r.map(this.models,function(t){return t.get(e)})},reset:function(e,t){return e||(e=[]),t||(t={}),this.each(this._removeReference),this._reset(),this.add(e,{silent:!0}),t.silent||this.trigger("reset",this,t),this},fetch:function(e){e||(e={});var t=this,r=e.success;return e.success=function(n,i,s){t[e.add?"add":"reset"](t.parse(n,s),e),r&&r(t,n)},e.error=y(e.error,t,e),(this.sync||n.sync).call(this,"read",this,e)},create:function(e,t){var n=this;t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var r=t.success;return t.success=function(e,i,s){n.add(e,t),r&&r(e,i,s)},e.save(null,t),e},parse:function(e){return e},chain:function(){return r(this.models).chain()},_reset:function(){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(e,t){if(e instanceof n.Model)e.collection||(e.collection=this);else{var r=e;e=new this.model(r,{collection:this}),e.validate&&!e._performValidation(r,t)&&(e=!1)}return e},_add:function(e,t){t||(t={}),e=this._prepareModel(e,t);if(!e)return!1;var n=this.getByCid(e);if(n)throw Error(["Can't add the same model to a set twice",n.id]);return this._byId[e.id]=e,this._byCid[e.cid]=e,this.models.splice(t.at!=null?t.at:this.comparator?this.sortedIndex(e,this.comparator):this.length,0,e),e.bind("all",this._onModelEvent),this.length++,t.silent||e.trigger("add",e,this,t),e},_remove:function(e,t){return t||(t={}),e=this.getByCid(e)||this.get(e),e?(delete this._byId[e.id],delete this._byCid[e.cid],this.models.splice(this.indexOf(e),1),this.length--,t.silent||e.trigger("remove",e,this,t),this._removeReference(e),e):null},_removeReference:function(e){this==e.collection&&delete e.collection,e.unbind("all",this._onModelEvent)},_onModelEvent:function(e,t,n,r){(e=="add"||e=="remove")&&n!=this||(e=="destroy"&&this._remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],this._byId[t.id]=t),this.trigger.apply(this,arguments))}}),r.each(["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","rest","last","without","indexOf","lastIndexOf","isEmpty","groupBy"],function(e){n.Collection.prototype[e]=function(){return r[e].apply(r,[this.models].concat(r.toArray(arguments)))}}),n.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};var s=/:([\w\d]+)/g,o=/\*([\w\d]+)/g,u=/[-[\]{}()+?.,\\^$|#\s]/g;r.extend(n.Router.prototype,n.Events,{initialize:function(){},route:function(e,t,i){n.history||(n.history=new n.History),r.isRegExp(e)||(e=this._routeToRegExp(e)),n.history.route(e,r.bind(function(n){n=this._extractParameters(e,n),i.apply(this,n),this.trigger.apply(this,["route:"+t].concat(n))},this))},navigate:function(e,t){n.history.navigate(e,t)},_bindRoutes:function(){if(this.routes){var e=[],t;for(t in this.routes)e.unshift([t,this.routes[t]]);t=0;for(var n=e.length;t<n;t++)this.route(e[t][0],e[t][1],this[e[t][1]])}},_routeToRegExp:function(e){return e=e.replace(u,"\\$&").replace(s,"([^/]*)").replace(o,"(.*?)"),RegExp("^"+e+"$")},_extractParameters:function(e,t){return e.exec(t).slice(1)}}),n.History=function(){this.handlers=[],r.bindAll(this,"checkUrl")};var a=/^#*/,f=/msie [\w.]+/,l=!1;r.extend(n.History.prototype,{interval:50,getFragment:function(e,t){if(e==null)if(this._hasPushState||t){e=window.location.pathname;var n=window.location.search;n&&(e+=n),e.indexOf(this.options.root)==0&&(e=e.substr(this.options.root.length))}else e=window.location.hash;return decodeURIComponent(e.replace(a,""))},start:function(e){if(l)throw Error("Backbone.history has already been started");this.options=r.extend({},{root:"/"},this.options,e),this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.options.pushState||!window.history||!window.history.pushState),e=this.getFragment();var t=document.documentMode;if(t=f.exec(navigator.userAgent.toLowerCase())&&(!t||t<=7))this.iframe=i('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e);this._hasPushState?i(window).bind("popstate",this.checkUrl):"onhashchange"in window&&!t?i(window).bind("hashchange",this.checkUrl):setInterval(this.checkUrl,this.interval),this.fragment=e,l=!0,e=window.location,t=e.pathname==this.options.root;if(this._wantsPushState&&!this._hasPushState&&!t)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&t&&e.hash&&(this.fragment=e.hash.replace(a,""),window.history.replaceState({},document.title,e.protocol+"//"+e.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();e==this.fragment&&this.iframe&&(e=this.getFragment(this.iframe.location.hash));if(e==this.fragment||e==decodeURIComponent(this.fragment))return!1;this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(window.location.hash)},loadUrl:function(e){var t=this.fragment=this.getFragment(e);return r.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(e,t){var n=(e||"").replace(a,"");if(this.fragment!=n&&this.fragment!=decodeURIComponent(n)){if(this._hasPushState){var r=window.location;n.indexOf(this.options.root)!=0&&(n=this.options.root+n),this.fragment=n,window.history.pushState({},document.title,r.protocol+"//"+r.host+n)}else if(window.location.hash=this.fragment=n,this.iframe&&n!=this.getFragment(this.iframe.location.hash))this.iframe.document.open().close(),this.iframe.location.hash=n;t&&this.loadUrl(e)}}}),n.View=function(e){this.cid=r.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.delegateEvents(),this.initialize.apply(this,arguments)};var c=/^(\S+)\s*(.*)$/,h=["model","collection","el","id","attributes","className","tagName"];r.extend(n.View.prototype,n.Events,{tagName:"div",$:function(e){return i(e,this.el)},initialize:function(){},render:function(){return this},remove:function(){return i(this.el).remove(),this},make:function(e,t,n){return e=document.createElement(e),t&&i(e).attr(t),n&&i(e).html(n),e},delegateEvents:function(e){if(e||(e=this.events))for(var t in r.isFunction(e)&&(e=e.call(this)),i(this.el).unbind(".delegateEvents"+this.cid),e){var n=this[e[t]];if(!n)throw Error('Event "'+e[t]+'" does not exist');var s=t.match(c),o=s[1];s=s[2],n=r.bind(n,this),o+=".delegateEvents"+this.cid,s===""?i(this.el).bind(o,n):i(this.el).delegate(s,o,n)}},_configure:function(e){this.options&&(e=r.extend({},this.options,e));for(var t=0,n=h.length;t<n;t++){var i=h[t];e[i]&&(this[i]=e[i])}this.options=e},_ensureElement:function(){if(this.el)r.isString(this.el)&&(this.el=i(this.el).get(0));else{var e=this.attributes||{};this.id&&(e.id=this.id),this.className&&(e["class"]=this.className),this.el=this.make(this.tagName,e)}}}),n.Model.extend=n.Collection.extend=n.Router.extend=n.View.extend=function(e,t){var n=v(this,e,t);return n.extend=this.extend,n};var p={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};n.sync=function(e,t,s){var o=p[e];return s=r.extend({type:o,dataType:"json"},s),s.url||(s.url=m(t)||g()),!s.data&&t&&(e=="create"||e=="update")&&(s.contentType="application/json",s.data=JSON.stringify(t.toJSON())),n.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),n.emulateHTTP&&(o==="PUT"||o==="DELETE")&&(n.emulateJSON&&(s.data._method=o),s.type="POST",s.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",o)}),s.type!=="GET"&&!n.emulateJSON&&(s.processData=!1),i.ajax(s)};var d=function(){},v=function(e,t,n){var i;return i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},r.extend(i,e),d.prototype=e.prototype,i.prototype=new d,t&&r.extend(i.prototype,t),n&&r.extend(i,n),i.prototype.constructor=i,i.__super__=e.prototype,i},m=function(e){return!e||!e.url?null:r.isFunction(e.url)?e.url():e.url},g=function(){throw Error('A "url" property or function must be specified')},y=function(e,t,n){return function(r){e?e(t,r,n):t.trigger("error",t,r,n)}}}.call(this);if(!Worker)var Worker=function(e){var t,n={};return typeof window!="undefined"?t=window:global&&(t=global),t.document&&!t.require&&(t.require=function(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}),n.onmessage=function(){},n.postMessage=function(e){setTimeout(function(){t.onmessage({data:e})},10)},t.postMessage=function(e){n.onmessage({data:e,type:"message"})},require(e),n};this.LZMA=function(e){var t=1,n=2,r=3,i={},s=new Worker(typeof e=="undefined"?"./lzma_worker.js":e);return s.onmessage=function(e){e.data.action===r?i[e.data.callback_num]&&typeof i[e.data.callback_num].on_progress=="function"&&i[e.data.callback_num].on_progress(e.data.result):i[e.data.callback_num]&&typeof i[e.data.callback_num].on_finish=="function"&&(i[e.data.callback_num].on_finish(e.data.result),delete i[e.data.callback_num])},s.onerror=function(e){throw new Error(e.message+" ("+e.filename+":"+e.lineno+")")},function(){function e(e,t,n,r,o){var u;do u=Math.floor(Math.random()*1e7);while(typeof i[u]!="undefined");i[u]={on_finish:r,on_progress:o},s.postMessage({action:e,callback_num:u,data:t,mode:n})}return{compress:function(n,r,i,s){e(t,String(n),r,i,s)},decompress:function(t,r,i){e(n,t,!1,r,i)}}}()},!function(context,win){function serial(e){var t=e.name;if(e.disabled||!t)return"";t=enc(t);switch(e.tagName.toLowerCase()){case"input":switch(e.type){case"reset":case"button":case"image":case"file":return"";case"checkbox":case"radio":return e.checked?t+"="+(e.value?enc(e.value):!0)+"&":"";default:return t+"="+(e.value?enc(e.value):"")+"&"}break;case"textarea":return t+"="+enc(e.value)+"&";case"select":return t+"="+enc(e.options[e.selectedIndex].value)+"&"}return""}function enc(e){return encodeURIComponent(e)}function reqwest(e,t){return new Reqwest(e,t)}function init(o,fn){function error(e){o.error&&o.error(e),complete(e)}function success(resp){o.timeout&&clearTimeout(self.timeout)&&(self.timeout=null);var r=resp.responseText;if(r)switch(type){case"json":resp=win.JSON?win.JSON.parse(r):eval("("+r+")");break;case"js":resp=eval(r);break;case"html":resp=r}fn(resp),o.success&&o.success(resp),complete(resp)}function complete(e){o.complete&&o.complete(e)}this.url=typeof o=="string"?o:o.url,this.timeout=null;var type=o.type||setType(this.url),self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort(),error()},o.timeout)),this.request=getRequest(o,success,error)}function setType(e){return/\.json$/.test(e)?"json":/\.jsonp$/.test(e)?"jsonp":/\.js$/.test(e)?"js":/\.html?$/.test(e)?"html":/\.xml$/.test(e)?"xml":"js"}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function getRequest(e,t,n){if(e.type!="jsonp"){var r=xhr();return r.open(e.method||"GET",typeof e=="string"?e:e.url,!0),setHeaders(r,e),r.onreadystatechange=handleReadyState(r,t,n),e.before&&e.before(r),r.send(e.data||null),r}var i=doc.createElement("script"),s=0;win[getCallbackName(e)]=generalCallback,i.type="text/javascript",i.src=e.url,i.async=!0,i.onload=i.onreadystatechange=function(){if(i[readyState]&&i[readyState]!=="complete"&&i[readyState]!=="loaded"||s)return!1;i.onload=i.onreadystatechange=null,e.success&&e.success(lastValue),lastValue=undefined,head.removeChild(i),s=1},head.appendChild(i)}function generalCallback(e){lastValue=e}function getCallbackName(e){var t=e.jsonpCallback||"callback";if(e.url.slice(-(t.length+2))==t+"=?"){var n="reqwest_"+uniqid++;return e.url=e.url.substr(0,e.url.length-1)+n,n}var r=new RegExp(t+"=([\\w]+)");return e.url.match(r)[1]}function setHeaders(e,t){var n=t.headers||{};n.Accept=n.Accept||"text/javascript, text/html, application/xml, text/xml, */*",t.crossOrigin||(n["X-Requested-With"]=n["X-Requested-With"]||"XMLHttpRequest"),n[contentType]=n[contentType]||"application/x-www-form-urlencoded";for(var r in n)n.hasOwnProperty(r)&&e.setRequestHeader(r,n[r],!1)}function handleReadyState(e,t,n){return function(){e&&e[readyState]==4&&(twoHundo.test(e.status)?t(e):n(e))}}var twoHundo=/^20\d$/,doc=document,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",head=doc[byTag]("head")[0],uniqid=0,lastValue,xhr="XMLHttpRequest"in win?function(){return new XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")};Reqwest.prototype={abort:function(){this.request.abort()},retry:function(){init.call(this,this.o,this.fn)}},reqwest.serialize=function(e){var t=[e[byTag]("input"),e[byTag]("select"),e[byTag]("textarea")],n=[],r,i;for(r=0,l=t.length;r<l;++r)for(i=0,l2=t[r].length;i<l2;++i)n.push(serial(t[r][i]));return n.join("").replace(/&$/,"")},reqwest.serializeArray=function(e){for(var t=this.serialize(e).split("&"),n=0,r=t.length,i=[],s;n<r;n++)t[n]&&(s=t[n].split("="))&&i.push({name:s[0],value:s[1]});return i};var old=context.reqwest;reqwest.noConflict=function(){return context.reqwest=old,this},typeof module!="undefined"?module.exports=reqwest:context.reqwest=reqwest}(this,window);var html4={};html4.atype={NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10},html4.ATTRIBS={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::tabindex":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0},html4.eflags={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128},html4.ELEMENTS={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:4,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,nobr:0,noembed:4,noframes:20,noscript:20,object:16,ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:84,select:0,small:0,span:0,strike:0,strong:0,style:148,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},html4.ueffects={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},html4.URIEFFECTS={"a::href":2,"area::href":2,"blockquote::cite":0,"body::background":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0},html4.ltypes={UNSANDBOXED:2,SANDBOXED:1,DATA:0},html4.LOADERTYPES={"a::href":2,"area::href":2,"blockquote::cite":2,"body::background":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2};var html=function(e){function t(e){e=l(e);if(c.hasOwnProperty(e))return c[e];var t=e.match(p);return t?String.fromCharCode(parseInt(t[1],10)):(t=e.match(d))?String.fromCharCode(parseInt(t[1],16)):""}function n(e,n){return t(n)}function r(e){return e.replace(v,"")}function i(e){return e.replace(m,n)}function s(e){return e.replace(g,"&amp;").replace(b,"&lt;").replace(w,"&gt;").replace(E,"&#34;").replace(S,"&#61;")}function o(e){return e.replace(y,"&amp;$1").replace(b,"&lt;").replace(w,"&gt;")}function u(t){return function(n,s){n=String(n);var u=null,a=!1,f=[],c=void 0,h=void 0,p=void 0;t.startDoc&&t.startDoc(s);while(n){var d=n.match(a?x:T);n=n.substring(d[0].length);if(a){if(d[1]){var v=l(d[1]),m;if(d[2]){var g=d[3];switch(g.charCodeAt(0)){case 34:case 39:g=g.substring(1,g.length-1)}m=i(r(g))}else m=v;f.push(v,m)}else if(d[4]){h!==void 0&&(p?t.startTag&&t.startTag(c,f,s):t.endTag&&t.endTag(c,s));if(p&&h&(e.eflags.CDATA|e.eflags.RCDATA)){u===null?u=l(n):u=u.substring(u.length-n.length);var y=u.indexOf("</"+c);y<0&&(y=n.length),y&&(h&e.eflags.CDATA?t.cdata&&t.cdata(n.substring(0,y),s):t.rcdata&&t.rcdata(o(n.substring(0,y)),s),n=n.substring(y))}c=h=p=void 0,f.length=0,a=!1}}else if(d[1])t.pcdata&&t.pcdata(d[0],s);else if(d[3])p=!d[2],a=!0,c=l(d[3]),h=e.ELEMENTS.hasOwnProperty(c)?e.ELEMENTS[c]:void 0;else if(d[4])t.pcdata&&t.pcdata(d[4],s);else if(d[5]&&t.pcdata){var b=d[5];t.pcdata(b==="<"?"&lt;":b===">"?"&gt;":"&amp;",s)}}t.endDoc&&t.endDoc(s)}}function a(t){var n,r;return u({startDoc:function(e){n=[],r=!1},startTag:function(i,o,u){if(r)return;if(!e.ELEMENTS.hasOwnProperty(i))return;var a=e.ELEMENTS[i];if(a&e.eflags.FOLDABLE)return;if(a&e.eflags.UNSAFE){r=!(a&e.eflags.EMPTY);return}o=t(i,o);if(o){a&e.eflags.EMPTY||n.push(i),u.push("<",i);for(var f=0,l=o.length;f<l;f+=2){var c=o[f],h=o[f+1];h!==null&&h!==void 0&&u.push(" ",c,'="',s(h),'"')}u.push(">")}},endTag:function(t,i){if(r){r=!1;return}if(!e.ELEMENTS.hasOwnProperty(t))return;var s=e.ELEMENTS[t];if(!(s&(e.eflags.UNSAFE|e.eflags.EMPTY|e.eflags.FOLDABLE))){var o;if(s&e.eflags.OPTIONAL_ENDTAG)for(o=n.length;--o>=0;){var u=n[o];if(u===t)break;if(!(e.ELEMENTS[u]&e.eflags.OPTIONAL_ENDTAG))return}else for(o=n.length;--o>=0;)if(n[o]===t)break;if(o<0)return;for(var a=n.length;--a>o;){var u=n[a];e.ELEMENTS[u]&e.eflags.OPTIONAL_ENDTAG||i.push("</",u,">")}n.length=o,i.push("</",t,">")}},pcdata:function(e,t){r||t.push(e)},rcdata:function(e,t){r||t.push(e)},cdata:function(e,t){r||t.push(e)},endDoc:function(e){for(var t=n.length;--t>=0;)e.push("</",n[t],">");n.length=0}})}function f(t,n,r){var i=[];return a(function(t,i){for(var s=0;s<i.length;s+=2){var o=i[s],u=i[s+1],a=null,f;if((f=t+"::"+o,e.ATTRIBS.hasOwnProperty(f))||(f="*::"+o,e.ATTRIBS.hasOwnProperty(f)))a=e.ATTRIBS[f];if(a!==null)switch(a){case e.atype.NONE:break;case e.atype.SCRIPT:case e.atype.STYLE:u=null;break;case e.atype.ID:case e.atype.IDREF:case e.atype.IDREFS:case e.atype.GLOBAL_NAME:case e.atype.LOCAL_NAME:case e.atype.CLASSES:u=r?r(u):u;break;case e.atype.URI:var l=(""+u).match(N);l?!l[1]||h.test(l[1])?u=n&&n(u):u=null:u=null;break;case e.atype.URI_FRAGMENT:u&&"#"===u.charAt(0)?(u=r?r(u):u,u&&(u="#"+u)):u=null;break;default:u=null}else u=null;i[s+1]=u}return i})(t,i),i.join("")}var l;"script"==="SCRIPT".toLowerCase()?l=function(e){return e.toLowerCase()}:l=function(e){return e.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)|32)})};var c={lt:"<",gt:">",amp:"&",nbsp:" ",quot:'"',apos:"'"},h=/^(?:https?|mailto|data)$/i,p=/^#(\d+)$/,d=/^#x([0-9A-Fa-f]+)$/,v=/\0/g,m=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,g=/&/g,y=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,b=/</g,w=/>/g,E=/\"/g,S=/\=/g,x=new RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[\\s\\S][^a-z\\s>]*)","i"),T=new RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<!--[\\s\\S]*?-->|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i"),N=new RegExp("^(?:([^:/?#]+):)?");return{escapeAttrib:s,makeHtmlSanitizer:a,makeSaxParser:u,normalizeRCData:o,sanitize:f,unescapeEntities:i}}(html4),html_sanitize=html.sanitize;typeof window!="undefined"&&(window.html=html,window.html_sanitize=html_sanitize),html4.ATTRIBS["*::style"]=0,html4.ELEMENTS.style=0;var Mustache=function(){var e={},t=function(){};return t.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(e,t,n,r){r||(this.context=t,this.buffer=[]);if(!this.includes("",e)){if(r)return e;this.send(e);return}e=this.render_pragmas(e);var i=this.render_section(e,t,n);i===!1&&(i=this.render_tags(e,t,n,r));if(r)return i;this.sendLines(i)},send:function(e){e!==""&&this.buffer.push(e)},sendLines:function(e){if(e){var t=e.split("\n");for(var n=0;n<t.length;n++)this.send(t[n])}},render_pragmas:function(e){if(!this.includes("%",e))return e;var t=this,n=this.getCachedRegex("render_pragmas",function(e,t){return new RegExp(e+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+t,"g")});return e.replace(n,function(e,n,r){if(!t.pragmas_implemented[n])throw{message:"This implementation of mustache doesn't understand the '"+n+"' pragma"};t.pragmas[n]={};if(r){var i=r.split("=");t.pragmas[n][i[0]]=i[1]}return""})},render_partial:function(e,t,n){e=this.trim(e);if(!n||n[e]===undefined)throw{message:"unknown_partial '"+e+"'"};return typeof t[e]!="object"?this.render(n[e],t,n,!0):this.render(n[e],t[e],n,!0)},render_section:function(e,t,n){if(!this.includes("#",e)&&!this.includes("^",e))return!1;var r=this,i=this.getCachedRegex("render_section",function(e,t){return new RegExp("^([\\s\\S]*?)"+e+"(\\^|\\#)\\s*(.+)\\s*"+t+"\n*([\\s\\S]*?)"+e+"\\/\\s*\\3\\s*"+t+"\\s*([\\s\\S]*)$","g"
)});return e.replace(i,function(e,i,s,o,u,a){var f=i?r.render_tags(i,t,n,!0):"",l=a?r.render(a,t,n,!0):"",c,h=r.find(o,t);return s==="^"?!h||r.is_array(h)&&h.length===0?c=r.render(u,t,n,!0):c="":s==="#"&&(r.is_array(h)?c=r.map(h,function(e){return r.render(u,r.create_context(e),n,!0)}).join(""):r.is_object(h)?c=r.render(u,r.create_context(h),n,!0):typeof h=="function"?c=h.call(t,u,function(e){return r.render(e,t,n,!0)}):h?c=r.render(u,t,n,!0):c=""),f+c+l})},render_tags:function(e,t,n,r){var i=this,s=function(){return i.getCachedRegex("render_tags",function(e,t){return new RegExp(e+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+t+"+","g")})},o=s(),u=function(e,r,u){switch(r){case"!":return"";case"=":return i.set_delimiters(u),o=s(),"";case">":return i.render_partial(u,t,n);case"{":return i.find(u,t);default:return i.escape(i.find(u,t))}},a=e.split("\n");for(var f=0;f<a.length;f++)a[f]=a[f].replace(o,u,this),r||this.send(a[f]);if(r)return a.join("\n")},set_delimiters:function(e){var t=e.split(" ");this.otag=this.escape_regex(t[0]),this.ctag=this.escape_regex(t[1])},escape_regex:function(e){if(!arguments.callee.sRE){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(arguments.callee.sRE,"\\$1")},find:function(e,t){function n(e){return e===!1||e===0||e}e=this.trim(e);var r;return n(t[e])?r=t[e]:n(this.context[e])&&(r=this.context[e]),typeof r=="function"?r.apply(t):r!==undefined?r:""},includes:function(e,t){return t.indexOf(this.otag+e)!=-1},escape:function(e){return e=String(e===null?"":e),e.replace(/&(?!\w+;)|["'<>\\]/g,function(e){switch(e){case"&":return"&amp;";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return e}})},create_context:function(e){if(this.is_object(e))return e;var t=".";this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator);var n={};return n[t]=e,n},is_object:function(e){return e&&typeof e=="object"},is_array:function(e){return Object.prototype.toString.call(e)==="[object Array]"},trim:function(e){return e.replace(/^\s*|\s*$/g,"")},map:function(e,t){if(typeof e.map=="function")return e.map(t);var n=[],r=e.length;for(var i=0;i<r;i++)n.push(t(e[i]));return n},getCachedRegex:function(t,n){var r=e[this.otag];r||(r=e[this.otag]={});var i=r[this.ctag];i||(i=r[this.ctag]={});var s=i[t];return s||(s=i[t]=n(this.otag,this.ctag)),s}},{name:"mustache.js",version:"0.4.0-dev",to_html:function(e,n,r,i){var s=new t;i&&(s.send=i),s.render(e,n||{},r);if(!i)return s.buffer.join("\n")}}}();wax=wax||{},wax.attribution=function(){function e(e){if(/^(https?:\/\/|data:image)/.test(e))return e}function t(e){return e}var n,r={};return r.set=function(r){if(typeof r=="undefined")return;return n.innerHTML=html_sanitize(r,e,t),this},r.element=function(){return n},r.init=function(){return n=document.createElement("div"),n.className="wax-attribution",this},r.init()},wax=wax||{},wax.bwdetect=function(e,t){function n(){wax.bw=-1;var e=new Image;e.src=o;var t=!0,n=setTimeout(function(){t&&wax.bw==-1&&(r.bw(0),t=!1)},s);e.onload=function(){t&&wax.bw==-1&&(clearTimeout(n),r.bw(1),t=!1)}}var r={},s=e.threshold||400,o="http://a.tiles.mapbox.com/mapbox/1.0.0/blue-marble-topo-bathy-jul/0/0/0.png?preventcache="+ +(new Date),u=1,a=e.auto===undefined?!0:e.auto;return r.bw=function(e){if(!arguments.length)return u;var n=u;wax.bwlisteners&&wax.bwlisteners.length&&function(){listeners=wax.bwlisteners,wax.bwlisteners=[];for(i=0;i<listeners;i++)listeners[i](e)}(),wax.bw=e,u!=(u=e)&&t(e)},r.add=function(){return a&&n(),this},wax.bw==-1?(wax.bwlisteners=wax.bwlisteners||[],wax.bwlisteners.push(r.bw)):wax.bw!==undefined?r.bw(wax.bw):r.add(),r},wax.formatter=function(x){function urlX(e){if(/^(https?:\/\/|data:image)/.test(e))return e}function idX(e){return e}var formatter={},f;if(x&&typeof x=="string")try{eval("f = "+x)}catch(e){console&&console.log(e)}else x&&typeof x=="function"?f=x:f=function(){};return formatter.format=function(e,t){try{return html_sanitize(f(e,t),urlX,idX)}catch(n){console&&console.log(n)}},formatter},wax.GridInstance=function(e,t,n){function r(e){return e>=93&&e--,e>=35&&e--,e-=32,e}n=n||{};var i={},s=n.resolution||4,o=n.tileSize||256;return i.grid_tile=function(){return e},i.getKey=function(t,n){if(!e||!e.grid)return;if(n<0||t<0)return;if(Math.floor(n)>=o||Math.floor(t)>=o)return;return r(e.grid[Math.floor(n/s)].charCodeAt(Math.floor(t/s)))},i.gridFeature=function(t,n){var r=this.getKey(t,n),i=e.keys;if(i&&i[r]&&e.data[i[r]])return e.data[i[r]]},i.tileFeature=function(n,r,i,s){if(!e)return;var o=wax.util.offset(i);feature=this.gridFeature(n-o.left,r-o.top);if(feature)return t.format(s,feature)},i},wax.GridManager=function(e){function t(e){return typeof e=="string"&&(e=[e]),function(t){if(!t)return;var n=/(\d+)\/(\d+)\/(\d+)\.[\w\._]+/g.exec(t);if(!n)return;return e[parseInt(n[2],10)%e.length].replace("{z}",n[1]).replace("{x}",n[2]).replace("{y}",n[3])}}e=e||{};var n=e.resolution||4,r=e.version||"1.1",i={},s={},o,u=function(e){return e.replace(/(\.png|\.jpg|\.jpeg)(\d*)/,".grid.json")};return s.formatter=function(e){return arguments.length?(o=wax.formatter(e),s):o},s.template=function(e){return arguments.length?(o=wax.template(e),s):o},s.gridUrl=function(e){return arguments.length?(u=typeof e=="function"?e:t(e),s):u},s.getGrid=function(e,t){var r=u(e);return!o||!r?t(null,null):(wax.request.get(r,function(e,r){if(e)return t(e,null);t(null,wax.GridInstance(r,o,{resolution:n||4}))}),s)},s.add=function(e){return e.template?s.template(e.template):e.formatter&&s.formatter(e.formatter),e.grids&&s.gridUrl(e.grids),this},s.add(e)},wax=wax||{},wax.hash=function(e){function t(){return location.hash.substring(1)}function n(e){location.hash="#"+e}function r(t){var n=t.split("/");for(var r=0;r<n.length;r++){n[r]=Number(n[r]);if(isNaN(n[r]))return!0}if(n.length<3)return!0;n.length==3&&e.setCenterZoom(n)}function i(){var t=e.getCenterZoom();o!==t&&(o=t,n(o))}function s(e){if(e===o)return;r(o=e)&&i()}e=e||{};var o,u={},a=90-1e-8,f=wax.util.throttle(i,500);return u.add=function(){return s(t()),e.bindChange(f),this},u.remove=function(){return e.unbindChange(f),this},u.add()};var wax=wax||{};wax.legend=function(){function e(e){if(/^(https?:\/\/|data:image)/.test(e))return e}function t(e){return e}var n,r={},i;return r.element=function(){return i},r.content=function(r){return arguments.length?(r?(n.innerHTML=html_sanitize(r,e,t),n.style.display="block"):(n.innerHTML="",n.style.display="none"),this):n.innerHTML},r.add=function(){return i=document.createElement("div"),i.className="wax-legends",n=document.createElement("div"),n.className="wax-legend",n.style.display="none",i.appendChild(n),this},r.add()};var w=function(e){return e.melt=function(t,n){return t.apply(n,[e,n])},e},wax=wax||{};wax.movetip={},wax.movetip=function(e){function t(e){return e&&e.className.indexOf("wax-popup")!==-1}function n(e,t){var n=document.createElement("div");return n.className="wax-movetip",n.style.cssText="position:absolute;",n.innerHTML=e,t.appendChild(n),a=t,_tooltipOffset=wax.util.offset(n),_contextOffset=wax.util.offset(a),n}function r(e){if(!u)return;var t=wax.util.eventoffset(e);u.className="wax-movetip",_tooltipOffset.height+t.y>_contextOffset.top+_contextOffset.height&&_contextOffset.height>_tooltipOffset.height&&(t.y-=_tooltipOffset.height,u.className+=" flip-y"),_tooltipOffset.width+t.x>_contextOffset.left+_contextOffset.width&&(t.x-=_tooltipOffset.width,u.className+=" flip-x"),u.style.left=t.x+"px",u.style.top=t.y+"px"}function i(e){if(!e)return;var t,n=function(){this.parentNode&&this.parentNode.removeChild(this)};e.style["-webkit-transition"]!==undefined&&f?t="webkitTransitionEnd":e.style.MozTransition!==undefined&&f&&(t="transitionend"),t?(e.addEventListener(t,n,!1),e.addEventListener("transitionend",n,!1),e.className+=" "+f):e.parentNode&&e.parentNode.removeChild(e)}function s(e,t){u&&(i(u),u=undefined);var r=n(e,t);r.className+=" wax-popup",r.innerHTML=e;var s=document.createElement("a");s.href="#close",s.className="close",s.innerHTML="Close",r.appendChild(s);var o=function(e){return i(r),u=undefined,e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1};s.addEventListener?s.addEventListener("click",o,!1):s.attachEvent&&s.attachEvent("onclick",o),u=r}e=e||{};var o={},u=undefined,a=undefined,f=e.animationOut,l=e.animationIn;return o.over=function(e,i,s){if(!e)return;i.style.cursor="pointer";if(t(u))return;u=n(e,i),r(s),i.addEventListener&&i.addEventListener("mousemove",r)},o.out=function(e){e.style.cursor="default";if(t(u))return;u&&(i(u),e.removeEventListener&&e.removeEventListener("mousemove",r),u=undefined)},o};var wax=wax||{};wax.request={cache:{},locks:{},promises:{},get:function(e,t){if(this.cache[e])return t(this.cache[e][0],this.cache[e][1]);this.promises[e]=this.promises[e]||[],this.promises[e].push(t);if(this.locks[e])return;var n=this;this.locks[e]=!0,reqwest({url:e+(~e.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:function(t){n.locks[e]=!1,n.cache[e]=[null,t];for(var r=0;r<n.promises[e].length;r++)n.promises[e][r](n.cache[e][0],n.cache[e][1])},error:function(t){n.locks[e]=!1,n.cache[e]=[t,null];for(var r=0;r<n.promises[e].length;r++)n.promises[e][r](n.cache[e][0],n.cache[e][1])}})}},wax.template=function(e){function t(e){if(/^(https?:\/\/|data:image)/.test(e))return e}function n(e){return e}var r={};return r.format=function(r,i){var s={};for(var o in i)s[o]=i[o];return r.format&&(s["__"+r.format+"__"]=!0),html_sanitize(Mustache.to_html(e,s),t,n)},r};if(!wax)var wax={};wax.tilejson=function(e,t){reqwest({url:e+(~e.indexOf("?")?"&":"?")+"callback=grid",type:"jsonp",jsonpCallback:"callback",success:t,error:t})};var wax=wax||{};wax.tooltip={},wax.tooltip=function(e){this._currentTooltip=undefined,e=e||{},e.animationOut&&(this.animationOut=e.animationOut),e.animationIn&&(this.animationIn=e.animationIn)},wax.tooltip.prototype.isPopup=function(e){return e&&e.className.indexOf("wax-popup")!==-1},wax.tooltip.prototype.getTooltip=function(e,t){var n=document.createElement("div");return n.className="wax-tooltip wax-tooltip-0",n.innerHTML=e,t.appendChild(n),n},wax.tooltip.prototype.hideTooltip=function(e){if(!e)return;var t,n=function(){this.parentNode&&this.parentNode.removeChild(this)};e.style["-webkit-transition"]!==undefined&&this.animationOut?t="webkitTransitionEnd":e.style.MozTransition!==undefined&&this.animationOut&&(t="transitionend"),t?(e.addEventListener(t,n,!1),e.addEventListener("transitionend",n,!1),e.className+=" "+this.animationOut):e.parentNode&&e.parentNode.removeChild(e)},wax.tooltip.prototype.click=function(e,t){this._currentTooltip&&(this.hideTooltip(this._currentTooltip),this._currentTooltip=undefined);var n=this.getTooltip(e,t);n.className+=" wax-popup",n.innerHTML=e;var r=document.createElement("a");r.href="#close",r.className="close",r.innerHTML="Close",n.appendChild(r);var i=wax.util.bind(function(e){return this.hideTooltip(n),this._currentTooltip=undefined,e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},this);r.addEventListener?r.addEventListener("click",i,!1):r.attachEvent&&r.attachEvent("onclick",i),this._currentTooltip=n},wax.tooltip.prototype.over=function(e,t){if(!e)return;t.style.cursor="pointer";if(this.isPopup(this._currentTooltip))return;this._currentTooltip=this.getTooltip(e,t)},wax.tooltip.prototype.out=function(e){e.style.cursor="default";if(this.isPopup(this._currentTooltip))return;this._currentTooltip&&(this.hideTooltip(this._currentTooltip),this._currentTooltip=undefined)};var wax=wax||{};wax.util=wax.util||{},wax.util={offset:function(e){var t=e.offsetWidth||parseInt(e.style.width,10),n=e.offsetHeight||parseInt(e.style.height,10),r=document.body,i=0,s=0,o=function(e){if(e===r||e===document.documentElement)return;i+=e.offsetTop,s+=e.offsetLeft;var t=e.style.transform||e.style.WebkitTransform||e.style.OTransform||e.style.MozTransform||e.style.msTransform;if(t)if(match=t.match(/translate\((.+)px, (.+)px\)/))i+=parseInt(match[2],10),s+=parseInt(match[1],10);else if(match=t.match(/translate3d\((.+)px, (.+)px, (.+)px\)/))i+=parseInt(match[2],10),s+=parseInt(match[1],10);else if(match=t.match(/matrix3d\(([\-\d,\s]+)\)/)){var n=match[1].split(",");i+=parseInt(n[13],10),s+=parseInt(n[12],10)}else if(match=t.match(/matrix\(.+, .+, .+, .+, (.+), (.+)\)/))i+=parseInt(match[2],10),s+=parseInt(match[1],10)};o(e);try{while(e=e.offsetParent)o(e)}catch(u){}i+=r.offsetTop,s+=r.offsetLeft,i+=r.parentNode.offsetTop,s+=r.parentNode.offsetLeft;var a=document.defaultView?window.getComputedStyle(r.parentNode,null):r.parentNode.currentStyle;return r.parentNode.offsetTop!==parseInt(a.marginTop,10)&&!isNaN(parseInt(a.marginTop,10))&&(i+=parseInt(a.marginTop,10),s+=parseInt(a.marginLeft,10)),{top:i,left:s,height:n,width:t}},$:function(e){return typeof e=="string"?document.getElementById(e):e},bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return e.apply(t,n.concat(Array.prototype.slice.call(arguments)))}},isString:function(e){return!!(e===""||e&&e.charCodeAt&&e.substr)},indexOf:function(e,t){var n=Array.prototype.indexOf;if(e===null)return-1;var r,i;if(n&&e.indexOf===n)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},isArray:Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},keys:Object.keys||function(e){var t=Object.prototype.hasOwnProperty;if(e!==Object(e))throw new TypeError("Invalid object");var n=[];for(var r in e)t.call(e,r)&&(n[n.length]=r);return n},eventoffset:function(e){var t=0,n=0;if(!e)var e=window.event;if(e.pageX||e.pageY)return{x:e.pageX,y:e.pageY};if(e.clientX||e.clientY){var r=document.documentElement,i=document.body,s=document.body.parentNode.currentStyle,o=parseInt(s.marginTop,10)||0,u=parseInt(s.marginLeft,10)||0;return{x:e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0)+u,y:e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)+o}}if(e.touches&&e.touches.length===1)return{x:e.touches[0].pageX,y:e.touches[0].pageY}},limit:function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}},throttle:function(e,t){return this.limit(e,t,!1)},parseUri:function(e){var t={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=t.parser[t.strictMode?"strict":"loose"].exec(e),r={},i=14;while(i--)r[t.key[i]]=n[i]||"";return r[t.q.name]={},r[t.key[12]].replace(t.q.parser,function(e,n,i){n&&(r[t.q.name][n]=i)}),r},addUrlData:function(e,t){return e+=this.parseUri(e).query?"&":"?",e+=t}},wax=wax||{},wax.g=wax.g||{},wax.g.attribution=function(e,t){t=t||{};var n,r={};return r.element=function(){return n.element()},r.appendTo=function(e){return wax.util.$(e).appendChild(n.element()),this},r.init=function(){return n=wax.attribution(),n.set(t.attribution),n.element().className="wax-attribution wax-g",this},r.init()},wax=wax||{},wax.g=wax.g||{},wax.g.bwdetect=function(e,t){t=t||{};var n=t.png||".png128",r=t.jpg||".jpg70";if(!e.mapTypes["mb-low"]){var i=e.mapTypes.mb,s={tiles:[],scheme:i.options.scheme,blankImage:i.options.blankImage,minzoom:i.minZoom,maxzoom:i.maxZoom,name:i.name,description:i.description};for(var o=0;o<i.options.tiles.length;o++)s.tiles.push(i.options.tiles[o].replace(".png",n).replace(".jpg",r));m.mapTypes.set("mb-low",new wax.g.connector(s))}return wax.bwdetect(t,function(t){e.setMapTypeId(t?"mb":"mb-low")})},wax=wax||{},wax.g=wax.g||{},wax.g.hash=function(e){return wax.hash({getCenterZoom:function(){var t=e.getCenter(),n=e.getZoom(),r=Math.max(0,Math.ceil(Math.log(n)/Math.LN2));return[n.toFixed(2),t.lat().toFixed(r),t.lng().toFixed(r)].join("/")},setCenterZoom:function(t){e.setCenter(new google.maps.LatLng(t[1],t[2])),e.setZoom(t[0])},bindChange:function(t){google.maps.event.addListener(e,"idle",t)},unbindChange:function(t){google.maps.event.removeListener(e,"idle",t)}})},wax=wax||{},wax.g=wax.g||{},wax.g.interaction=function(e,t,n){t=t||{},n=n||{};var r={waxGM:new wax.GridManager(t),callbacks:n.callbacks||new wax.tooltip,clickAction:n.clickAction||"full",eventHandlers:{},add:function(){return this.eventHandlers.tileloaded=google.maps.event.addListener(e,"tileloaded",wax.util.bind(this.clearTileGrid,this)),this.eventHandlers.idle=google.maps.event.addListener(e,"idle",wax.util.bind(this.clearTileGrid,this)),this.eventHandlers.mousemove=google.maps.event.addListener(e,"mousemove",this.onMove()),this.eventHandlers.click=google.maps.event.addListener(e,"click",this.click()),this},remove:function(){return google.maps.event.removeListener(this.eventHandlers.tileloaded),google.maps.event.removeListener(this.eventHandlers.idle),google.maps.event.removeListener(this.eventHandlers.mousemove),google.maps.event.removeListener(this.eventHandlers.click),this},getTileGrid:function(){if(!this._getTileGrid){this._getTileGrid=[];var t=e.getZoom(),n=wax.util.offset(e.getDiv()),r=wax.util.bind(function(e){if(!e.interactive)return;for(var r in e.cache){if(r.split("/")[0]!=t)continue;var i=wax.util.offset(e.cache[r]);this._getTileGrid.push([i.top-n.top,i.left-n.left,e.cache[r]])}},this);for(var i in e.mapTypes)r(e.mapTypes[i]);e.overlayMapTypes.forEach(r)}return this._getTileGrid},clearTileGrid:function(e,t){this._getTileGrid=null},getTile:function(e){var t,n=this.getTileGrid();for(var r=0;r<n.length;r++)if(n[r][0]<e.pixel.y&&n[r][0]+256>e.pixel.y&&n[r][1]<e.pixel.x&&n[r][1]+256>e.pixel.x){t=n[r][2];break}return t||!1},onMove:function(t){return this._onMove||(this._onMove=wax.util.bind(function(t){var n=this.getTile(t);n&&this.waxGM.getGrid(n.src,wax.util.bind(function(r,i){if(r||!i)return;var s=i.tileFeature(t.pixel.x+wax.util.offset(e.getDiv()).left,t.pixel.y+wax.util.offset(e.getDiv()).top,n,{format:"teaser"});s&&this.feature!==s?(this.feature=s,this.callbacks.out(e.getDiv()),this.callbacks.over(s,e.getDiv(),0,t)):s||(this.feature=null,this.callbacks.out(e.getDiv()))},this))},this)),this._onMove},click:function(t){return this._onClick||(this._onClick=wax.util.bind(function(t){if(window.event&&window.event.cancelBubble)return!1;var n=this.getTile(t);n&&this.waxGM.getGrid(n.src,wax.util.bind(function(r,i){if(r||!i)return;var s=i.tileFeature(t.pixel.x+wax.util.offset(e.getDiv()).left,t.pixel.y+wax.util.offset(e.getDiv()).top,n,{format:this.clickAction});if(s){window.event||(window.event={},setTimeout(function(){window.event=null},150)),window.event.cancelBubble=!0;switch(this.clickAction){case"full":this.callbacks.click(s,e.getDiv(),0,t);break;case"location":window.location=s}}},this))},this)),this._onClick}};return r.add(e)},wax=wax||{},wax.g=wax.g||{},wax.g.legend=function(e,t){t=t||{};var n,r={};return r.add=function(){return n=wax.legend().content(t.legend||""),this},r.element=function(){return n.element()},r.appendTo=function(e){return wax.util.$(e).appendChild(n.element()),this},r.add()};var wax=wax||{};wax.g=wax.g||{},wax.g.connector=function(e){e=e||{},this.options={tiles:e.tiles,scheme:e.scheme||"xyz",blankImage:e.blankImage},this.minZoom=e.minzoom||0,this.maxZoom=e.maxzoom||22,this.name=e.name||"",this.description=e.description||"",this.interactive=!0,this.tileSize=new google.maps.Size(256,256),this.cache={}},wax.g.connector.prototype.getTile=function(e,t,n){var r=t+"/"+e.x+"/"+e.y;if(!this.cache[r]){var i=this.cache[r]=new Image(256,256);this.cache[r].src=this.getTileUrl(e,t),this.cache[r].setAttribute("gTileKey",r),this.cache[r].onerror=function(){i.style.display="none"}}return this.cache[r]},wax.g.connector.prototype.releaseTile=function(e){var t=e.getAttribute("gTileKey");this.cache[t]&&delete this.cache[t],e.parentNode&&e.parentNode.removeChild(e)},wax.g.connector.prototype.getTileUrl=function(e,t){var n=Math.pow(2,t),r=this.options.scheme==="tms"?n-1-e.y:e.y,i=e.x%n;return i=i<0?e.x%n+n:i,r<0?this.options.blankImage:this.options.tiles[parseInt(i+r,10)%this.options.tiles.length].replace("{z}",t).replace("{x}",i).replace("{y}",r)};var CartoDBLayer=function(e,t,n,r){this.user_name=e,this.query=t||"select * from "+n,this.table=n,this.name=n,this.style=r,this.showing=!0,this.editable=!0,this.create_layer()};CartoDBLayer.prototype.create_layer=function(){var e=this,t={tiles:{},getTile:function(t,n){var r=new Image,i="http://"+e.user_name+".cartodb.com/tiles/"+e.table+"/"+n+"/"+t.x+"/"+t.y+".png?sql="+e.query;e.style&&(i+="&style="+encodeURIComponent(e.style.replace("\n",""))),r.src=i;var s=t.x+"_"+t.y+"_"+n;return r.setAttribute("id",s),this.tiles[s]=r,r},releaseTile:function(e){var t=e.getAttribute("id");delete this.tiles[t]},show:function(t){for(var n in this.tiles)this.tiles[n].style.display=t?"block":"none";e.showing=t},tileSize:new google.maps.Size(256,256),name:this.query,description:!1};this.layer=t},CartoDBLayer.prototype.show=function(e){this.layer.show(e)},CartoDBLayer.prototype.update_sql=function(e){this.query=e},CartoDBLayer.prototype.update=CartoDBLayer.prototype.update_sql;var Store=function(e){this.name=e;var t=localStorage.getItem(this.name);this.data=t&&JSON.parse(t)||{}};_.extend(Store.prototype,{save:function(){localStorage.setItem(this.name,JSON.stringify(this.data))},create:function(e){return e.id||(e.id=e.attributes.id=guid()),this.data[e.id]=e,this.save(),e},update:function(e){return this.data[e.id]=e,this.save(),e},find:function(e){return this.data[e.id]},findAll:function(){return _.values(this.data)},destroy:function(e){return delete this.data[e.id],this.save(),e}}),Backbone.sync=function(e,t,n){var r,i=t.localStorage||t.collection.localStorage;switch(e){case"read":r=t.id?i.find(t):i.findAll();break;case"create":r=i.create(t);break;case"update":r=i.update(t);break;case"delete":r=i.destroy(t)}r?n.success(r):n.error("Record not found")},CartoShader.prototype.compile=function(shader){typeof shader=="string"&&(shader=eval("(function() { return "+shader+"; })()"));var mapper={"point-color":"fillStyle","line-color":"strokeStyle","line-width":"lineWidth","polygon-fill":"fillStyle"};for(var attr in shader){var c=mapper[attr];c&&(this.compiled[c]=eval("(function() { return shader[attr]; })();"))}},CartoShader.prototype.apply=function(e,t,n){var r=this.compiled;for(var i in r){var s=r[i];typeof s=="function"&&(s=s(t,n)),e[i]=s}};var TILE_SIZE=256;MercatorProjection.prototype.fromLatLngToPoint=function(e,t){var n=this,r=t||new google.maps.Point(0,0),i=n.pixelOrigin_;r.x=i.x+e.lng()*n.pixelsPerLonDegree_;var s=bound(Math.sin(degreesToRadians(e.lat())),-0.9999,.9999);return r.y=i.y+.5*Math.log((1+s)/(1-s))*-n.pixelsPerLonRadian_,r},MercatorProjection.prototype.fromPointToLatLng=function(e){var t=this,n=t.pixelOrigin_,r=(e.x-n.x)/t.pixelsPerLonDegree_,i=(e.y-n.y)/-t.pixelsPerLonRadian_,s=radiansToDegrees(2*Math.atan(Math.exp(i))-Math.PI/2);return new google.maps.LatLng(s,r)},MercatorProjection.prototype.tileBBox=function(e,t,n){var r=1<<n,i=TILE_SIZE/r,s=e*TILE_SIZE/r,o=t*TILE_SIZE/r;return[this.fromPointToLatLng(new google.maps.Point(s,o+i)),this.fromPointToLatLng(new google.maps.Point(s+i,o))]},MercatorProjection.prototype.tilePoint=function(e,t,n){var r=1<<n,i=e*TILE_SIZE,s=t*TILE_SIZE;return[i,s]},MercatorProjection.prototype.latLngToTilePoint=function(e,t,n,r){var i=1<<r,s=this,o=s.fromLatLngToPoint(e),u=new google.maps.Point(o.x*i,o.y*i),a=this.tilePoint(t,n,r);return new google.maps.Point(Math.floor(u.x-a[0]),Math.floor(u.y-a[1]))},MercatorProjection.prototype.latLngToTile=function(e,t){var n=1<<t,r=this,i=r.fromLatLngToPoint(e),s=new google.maps.Point(i.x*n,i.y*n);return new google.maps.Point(Math.floor(s.x/TILE_SIZE),Math.floor(s.y/TILE_SIZE))},CanvasTileLayer.prototype.create_tile_canvas=function(e,t,n){var r=n.createElement("canvas"),i=n.createElement("canvas");r.style.border=i.style.border="none",r.style.margin=i.style.margin="0",r.style.padding=i.style.padding="0";var s=r.getContext("2d");s.width=r.width=this.tileSize.width,s.height=r.height=this.tileSize.height;var o=i.getContext("2d");i.width=o.width=this.tileSize.width,i.height=o.height=this.tileSize.height;var u=e.x+"_"+e.y+"_"+t;return r.setAttribute("id",u),i.setAttribute("id",u),u in this.tiles&&delete this.tiles[u],this.tiles[u]={canvas:r,ctx:s,hit_canvas:i,hit_ctx:o,coord:e,zoom:t,primitives:null},this.canvas_setup&&this.canvas_setup(this.tiles[u],e,t),r},CanvasTileLayer.prototype.each=function(e){for(var t in this.tiles){var n=this.tiles[t];e(n)}},CanvasTileLayer.prototype.recreate=function(){for(var e in this.tiles){var t=this.tiles[e];this.canvas_setup(t,t.coord,t.zoom)}},CanvasTileLayer.prototype.redraw_tile=function(e){this.render(e,e.coord,e.zoom)},CanvasTileLayer.prototype.redraw=function(){for(var e in this.tiles){var t=this.tiles[e];this.render(t,t.coord,t.zoom)}},CanvasTileLayer.prototype.getTile=function(e,t,n){return this.create_tile_canvas(e,t,n)},CanvasTileLayer.prototype.releaseTile=function(e){var t=e.getAttribute("id");delete this.tiles[t]},CartoDB.prototype.set_css=function(e){this.shader=new CartoShader(e),this.layer.redraw()},CartoDB.prototype.sql=function(e,t){var n=this;this.options.debug&&console.log(e),data=this.cache.getItem(e),$.getJSON(this.base_url+"?q="+encodeURIComponent(e)+"&format=geojson&dp=6",function(r){try{n.cache.setItem(e,JSON.stringify(r))}catch(i){}t(r)})},CartoDB.prototype.tile_data=function(e,t,n,r){var i=this.options,s=new MercatorProjection,o=s.tileBBox(e,t,n),u="the_geom",a;n>=17?a=u:n>=14?a='ST_SimplifyPreserveTopology("'+u+'",0.000001) as the_geom':n>=10?a='ST_SimplifyPreserveTopology("'+u+'",0.0001) as the_geom':n>=6?a='ST_SimplifyPreserveTopology("'+u+'",0.001) as the_geom':n>=4?a='ST_SimplifyPreserveTopology("'+u+'",1.0) as the_geom':a='ST_SimplifyPreserveTopology("'+u+'",4.0) as the_geom',a='ST_SimplifyPreserveTopology("'+u+'", 0.5) as the_geom',a=u;var f=[a].concat(i.columns).join(","),l="select "+f+" from "+i.table+" WHERE the_geom && ST_SetSRID(ST_MakeBox2D(";l+="ST_Point("+o[0].lng()+","+o[0].lat()+"),",l+="ST_Point("+o[1].lng()+","+o[1].lat()+")), 4326)",this.options.where&&(l+=" AND "+this.options.where),this.sql(l,r)},Renderer.prototype.render=function(e,t,n,r,i){var s=this.primitive_render;e.canvas.width=e.canvas.width;if(t.length)for(var o=0;o<t.length;++o){var u=s[t[o].geometry.type];if(u){var a={zoom:r,id:o};i.apply(e,t[o].properties,a),u(e,t[o].geometry.projected)}}},CartoDB.prototype.convert_geometry=function(e,t,n,r){function i(e,t,n,r){return e=new google.maps.LatLng(e[1],e[0]),s.projection.latLngToTilePoint(e,t,n,r)}var s=this,o=this.primitive_conversion={Point:function(e,t,n,r){return i(r,e,t,n)},MultiPoint:function(e,t,n,r){var i=[],s=o.Point;for(var u=0;u<r.length;++u)i.push(s(e,t,n,r[u]));return i},Polygon:function(e,t,n,r){var s=[];if(r.length===0)return[];for(var o=0;o<r[0].length;++o)s.push(i(r[0][o],e,t,n));return[s]},MultiPolygon:function(e,t,n,r){var i=[],s=o.Polygon;for(var u=0;u<r.length;++u){var a=s(e,t,n,r[u]);a.length>0&&i.push(a)}return i}},u=this.primitive_conversion[e.type];if(u)return u(n,r,t,e.coordinates)},CartoDB.prototype._init_layer=function(){var e=this,t=new Renderer;t.projection=e.projection,this.layer=new CanvasTileLayer(function(n,r,i){var s=n.ctx,o=n.hit_ctx;e.tile_data(r.x,r.y,i,function(a){var f=n.primitives=a.features;for(var l=0;l<f.length;++l){var c=f[l];c.geometry.projected===undefined&&(c.geometry.projected=e.convert_geometry(c.geometry,i,r.x,r.y))}t.render(s,f,r,i,e.shader),t.render(o,f,r,i,e.hit_shader)})})},CartoDB.prototype.geometry_at=function(e,t,n){var r=this,i=r.projection.latLngToTile(e,n);t=r.projection.fromLatLngToPoint(e);var s=i.x+"_"+i.y+"_"+n,o=r.layer.tiles[s];if(!o)return;var u=1<<n,a=new google.maps.Point(Math.floor(t.x*u%256),Math.floor(t.y*u%256)),f=o.hit_ctx,l=f.getImageData(a.x,a.y,1,1).data;if(l[3]!==0){var c=RGB2Int(l[0],l[1],l[2]);if(o.primitives&&o.primitives[c]){var h=o.primitives[c];return h}}},RGB2Int=function(e,t,n){return e+256*t+65536*n},Int2RGB=function(e){var t=e%256,n=parseInt(e/256)%256,r=parseInt(e/256/256)%256;return[t,n,r]};var GeoJSON=function(e,t){var n=function(e,t,i){var s;switch(e.type){case"Point":t.position=new google.maps.LatLng(e.coordinates[1],e.coordinates[0]),s=new google.maps.Marker(t),i&&s.set("geojsonProperties",i);break;case"MultiPoint":s=[];for(var o=0;o<e.coordinates.length;o++)t.position=new google.maps.LatLng(e.coordinates[o][1],e.coordinates[o][0]),s.push(new google.maps.Marker(t));if(i)for(var u=0;u<s.length;u++)s[u].set("geojsonProperties",i);break;case"LineString":var a=[];for(var o=0;o<e.coordinates.length;o++){var f=e.coordinates[o],l=new google.maps.LatLng(f[1],f[0]);a.push(l)}t.path=a,s=new google.maps.Polyline(t),i&&s.set("geojsonProperties",i);break;case"MultiLineString":s=[];for(var o=0;o<e.coordinates.length;o++){var a=[];for(var c=0;c<e.coordinates[o].length;c++){var f=e.coordinates[o][c],l=new google.maps.LatLng(f[1],f[0]);a.push(l)}t.path=a,s.push(new google.maps.Polyline(t))}if(i)for(var u=0;u<s.length;u++)s[u].set("geojsonProperties",i);break;case"Polygon":var h=[];for(var o=0;o<e.coordinates.length;o++){var a=[];for(var c=0;c<e.coordinates[o].length;c++){var l=new google.maps.LatLng(e.coordinates[o][c][1],e.coordinates[o][c][0]);a.push(l)}h.push(a)}t.paths=h,s=new google.maps.Polygon(t),i&&s.set("geojsonProperties",i);break;case"MultiPolygon":s=[];for(var o=0;o<e.coordinates.length;o++){var h=[];for(var c=0;c<e.coordinates[o].length;c++){var a=[];for(var u=0;u<e.coordinates[o][c].length;u++){var l=new google.maps.LatLng(e.coordinates[o][c][u][1],e.coordinates[o][c][u][0]);a.push(l)}h.push(a)}t.paths=h,s.push(new google.maps.Polygon(t))}if(i)for(var u=0;u<s.length;u++)s[u].set("geojsonProperties",i);break;case"GeometryCollection":s=[];if(!e.geometries)s=r('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');else for(var o=0;o<e.geometries.length;o++)s.push(n(e.geometries[o],t,i||null));break;default:s=r('Invalid GeoJSON object: Geometry object must be one of "Point", "LineString", "Polygon" or "MultiPolygon".')}return s},r=function(e){return{type:"Error",message:e}},i,s=t||{};switch(e.type){case"FeatureCollection":if(!e.features)i=r('Invalid GeoJSON object: FeatureCollection object missing "features" member.');else{i=[];for(var o=0;o<e.features.length;o++)i.push(n(e.features[o].geometry,s,e.features[o].properties))}break;case"GeometryCollection":if(!e.geometries)i=r('Invalid GeoJSON object: GeometryCollection object missing "geometries" member.');else{i=[];for(var o=0;o<e.geometries.length;o++)i.push(n(e.geometries[o],s))}break;case"Feature":!e.properties||!e.geometry?i=r('Invalid GeoJSON object: Feature object missing "properties" or "geometry" member.'):i=n(e.geometry,s,e.properties);break;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":i=e.coordinates?i=n(e,s):r('Invalid GeoJSON object: Geometry object missing "coordinates" member.');break;default:i=r('Invalid GeoJSON object: GeoJSON object must be one of "Point", "LineString", "Polygon", "MultiPolygon", "Feature", "FeatureCollection" or "GeometryCollection".')}return i},BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS",this.isValid(this)||(window.location="/html5")},searchString:function(e){for(var t=0;t<e.length;t++){var n=e[t].string,r=e[t].prop;this.versionSearchString=e[t].versionSearch||e[t].identity;if(n){if(n.indexOf(e[t].subString)!=-1)return e[t].identity}else if(r)return e[t].identity}},isValid:function(e){return location.search.indexOf("debug=true")!=-1?!0:e.browser=="Safari"&&e.version>3.2?!0:e.browser=="unknown"?!0:e.browser=="Firefox"&&e.version>3.5?!0:e.browser=="Chrome"&&e.version>3?!0:!1},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(t==-1)return;return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"}
,{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init(),$(function(){$(".read-more").on("click",function(e){e.preventDefault(),$("#read-more").modal({show:!0})})}),App.modules={},String.prototype.format=function(e,t,n){function r(){var r=this,i=arguments.length+1;for(e=0;e<i;n=arguments[e++])t=typeof n=="object"?JSON.stringify(n):n,r=r.replace(RegExp("\\{"+(e-1)+"\\}","g"),t);return r}return r.native=String.prototype.format,r}(),App.modules.Log=function(e){var t=function(){};t.prototype.error=function(){},t.prototype.log=function(){},typeof console!="undefined"?_console=console:_console=new t,window.onerror=function(t,n,r){e.Log.to_server(n+"("+r+"):"+t)},e.Log={error:function(){_console.error.apply(_console,arguments)},log:function(){_console.log.apply(_console,arguments)},debug:function(){_console.log.apply(_console,arguments)},to_server:function(){var e=[];jQuery.each(jQuery.browser,function(t,n){e.push(t+":"+n)}),$.post("/api/v0/error",e.join(",")+"=>"+Array.prototype.slice.call(arguments).join(""))}}},App.modules.Config=function(e){e.Config={API_URL:"/api/v0/m",LOCAL_STORAGE:!1,MAP_LAYERS:[]}},App.modules.Bus=function(e){e.Bus=Class.extend({init:function(){_.extend(this,Backbone.Events)},on:function(e,t){this.bind(e,t)},emit:function(){this.trigger.apply(this,arguments)},link:function(t,n){var r=this;_(n).each(function(n,i){var s=t[n];typeof s=="function"?r.on(i,s):e.Log.log("error finding: ",n)})},attach:function(e,t){var n=this;e.bind(t,function(){var e=Array.prototype.slice.call(arguments);n.emit.apply(n,[t].concat(e))})}})},App.modules.Map=function(e){var t=Backbone.View.extend({el:$(".area_popup"),initialize:function(){_.bindAll(this,"show","hide"),this.map=this.options.mapview},show:function(e,t){var n=this,r=this.map.projector.transformCoordinates(e);this.set_pos(r),this.$("h1").html(t.zone),t.events?this.$("h2").html(t.events+" hotspots this month"):this.$("h2").html("no hotspots")},set_pos:function(e){this.el.css({top:e.y-20-50,left:e.x}),this.el.show()},hide:function(){this.el.hide()}});e.Map=Class.extend({init:function(n){_.bindAll(this,"enable_layer","reorder_layers","show_area_info","zoom_changed");var r=this;this.bus=n,this.map=new MapView({el:$(".map_container")}),this.popup=new t({mapview:this.map}),this.movement_timeout=-1,this.report_polygons={},this.month=0,_(e.Config.MAP_LAYERS).each(function(e){r.map.add_layer(e.name,e),r.map.enable_layer(e.name,e.enabled)}),this.layer_editor=new LayerEditor({el:$(".layers"),bus:n,layers:this.map.get_layers()}),this.layer_editor.bind("layer_changed",function(e){r.country_layer.tilemill.toggle(e)}),this.map.bind("changed:layers",function(){r.layer_editor.layers=r.map.get_layers(),r.layer_editor.render()}),this.map.bind("zoom_changed",this.zoom_changed),r.country_layer=new e.CountryLayer(r),r.country_layer.bind("mouse_on",this.show_area_info),r.country_layer.bind("mouse_out",r.popup.hide),r.map.bind("zoom_changed",r.popup.hide),r.grid_layer=new TimePlayer("global_32x"),r.map.add_layer("time",{name:"t"},{layer:r.grid_layer}),r.map.enable_layer("time",!0),r.show_controls(!1)},show_area_info:function(e,t){self=this;var n=t.properties.cumm,r=n&&n[self.month];this.popup.show(e.latLng,{zone:t.properties.name_1,events:r})},set_time:function(e){this.month=e,this.grid_layer.set_time(e)},center_map_on:function(e){var t=new google.maps.LatLngBounds;_(e.coordinates[0]).each(function(e){t.extend(new google.maps.LatLng(e[1],e[0]))}),this.map.map.fitBounds(t)},displace:function(e,t){var n=this.map.projector.transformCoordinates(this.map.get_center());n.x+=e,n.y+=t;var r=this.map.projector.untransformCoordinates(n);this.map.set_center(r)},zoom_changed:function(e){var t=this;console.log("zoom: ",e);var n=32,r="global_64x_grid";e==5?(n=32,r="global_32x_grid"):e==6?(n=16,r="global_16x_grid"):e==7?(n=8,r="global_8x_grid"):e>=8&&(n=4,r="global_4x_grid"),t.grid_layer.set_table(r,n),console.log("table_name: ",r)},enable_layer:function(e,t){this.map.enable_layer(e,t)},reorder_layers:function(e){this.map.reorder_layers(e),this.layer_editor.render()},show_country:function(e,t){this.country_layer.show_country(e,t),this.grid_layer.set_country_iso(t)},enter_on:function(e){},show_controls:function(e){e?this.map.show_controls():this.map.hide_controls()}})},Projector=function(e){this.setMap(e),this.map=e},Projector.prototype=new google.maps.OverlayView,Projector.prototype.draw=function(){},Projector.prototype.transformCoordinates=function(e){return this.getProjection().fromLatLngToContainerPixel(e)},Projector.prototype.untransformCoordinates=function(e){return this.getProjection().fromContainerPixelToLatLng(e)},App.modules.Model=function(e){var t=Backbone.Model.extend({urlRoot:e.Config.API_URL,initialize:function(){}});e.Model=t},App.modules.CartoDB=function(e){function t(n,i,s){var o=r,u=!0;s&&(o="api/v0/proxy/"+r,u=!1),n.length>1500?$.ajax({url:o,crossDomain:u,type:"POST",dataType:"json",data:"q="+encodeURIComponent(n),success:i,error:function(){s?i():(e.Log.log("failed cross POST, using proxy"),t(n,i,!0))}}):$.getJSON(r+"?q="+encodeURIComponent(n)+"&callback=?").success(i).fail(function(){i()}).complete(function(){})}var n="wri-01.cartodb.com/api/v1/sql",r="https://"+n,i=localStorage||{setItem:function(e,t){},getItem:function(e){return null},removeItem:function(e){}},s=Backbone.Model.extend({_create_sql:function(){var e=" where {0} = '{1}'".format(this.what,this.get(this.what).replace("'","''")),t=[];for(var n in this.columns){var r=this.columns[n];r.indexOf("ST_")!==-1?t.push("ST_AsGeoJSON({1}) as {0}".format(n,r)):t.push("{1} as {0}".format(n,r))}var i="select "+t.join(",")+" from "+this.table+e;return i},_parse_columns:function(e){for(var t in e){var n=e[t],r=this.columns[t];r.indexOf("ST_")!==-1&&(e[t]=JSON.parse(n))}return e},fetch:function(){var t=this;e.CartoDB.query(this._create_sql(),function(e){t.set(t._parse_columns(e.rows[0]))})}}),o=Backbone.Collection.extend({_create_sql:function(){var e=this.table;_.isArray(this.table)||(e=[this.table]),e=e.join(",");var t="select "+this.columns.join(",")+" from "+e;return this.where&&(t+=" WHERE "+this.where),t},fetch:function(){var t=this,n=this.sql||this._create_sql();typeof n=="function"&&(n=n.call(this));var r=this.cache?i.getItem(n):!1;r?t.reset(JSON.parse(r)):e.CartoDB.query(n,function(e){if(this.cache)try{i.setItem(n,JSON.stringify(e.rows))}catch(r){}t.reset(e.rows)})}});e.CartoDB={query:t,CartoDBCollection:o,CartoDBModel:s}},App.modules.Country=function(e){var t=e.CartoDB.CartoDBModel.extend({table:"country_attributes_live",columns:{id:"cartodb_id",name:"name_engli",center:"ST_Centroid(the_geom)",bbox:"ST_Envelope(the_geom)",sqkm:"sqkm",unregion1:"unregion1",unregion2:"unregion2",cumm:"cumm",iso:"iso",total_incr:"total_incr",start_value:"start_value",description:"description"},what:"name_engli",center:function(){return c=this.get("center"),c?c:JSON.parse(this.get("the_geom")).coordinates},time_series:function(){return this.get("cumm")},time_series_deltas:function(){var e=this.time_series(),t=[];for(var n=2,r=e.length;n<r;++n)t.push(e[n]-e[n-1]);var i=function(e,t,n){return n<e?0:n>t?t:n},s=[],o=6;for(n=0,r=t.length;n<r;++n){var u=0;for(var a=0;a<o;++a)u+=t[i(0,r-1,n+a-(o/2>>0))];s.push(1e5*u/(o*this.get("sqkm")))}return this._time_series_deltas=s,s},slug:function(){return this.get("name_engli")},max_deforestation:function(){return _.max(this.time_series())},gen_normalized_deforestation:function(e){this.set({time_series_normalized:_(this.time_series()).map(function(t){return t/e})})},def_percent_in_month:function(e){return Math.sqrt(this.get("time_series_normalized")[e])*100},change_since:function(e,t){var n=this.time_series(),r=n[Math.max(0,e)],i=n[t];return(i-r)/r}}),n=e.CartoDB.CartoDBCollection.extend({cache:!0,initialize:function(){this.bind("reset",function(){this.each(function(e){e.set({bbox:JSON.parse(e.get("bbox"))},{silent:!0})})})},sql:function(){var e="WITH foo AS (SELECT ST_AsGeoJSON(ST_Centroid(ST_Envelope(admin1_attributes_live.the_geom))) as center, ST_AsGeoJSON(ST_Envelope(admin1_attributes_live.the_geom)) as bbox, name_1 as name, id1 FROM admin1_attributes_live WHERE admin1_attributes_live.iso = '{0}') SELECT center, bbox, foo.name, foo.id1, sum(global_4x_grid.total_incr) as total FROM foo,global_4x_grid WHERE global_4x_grid.iso='{0}' AND global_4x_grid.id1 = foo.id1 group by foo.id1, foo.name, center, bbox ORDER BY total DESC";return e.format(this.country_iso)},set_iso:function(e){this.country_iso=e},normalize:function(){var e=this.map(function(e){return e.get("total")}),t=_.max(e);t>0&&this.each(function(e){e.set({normalized:e.get("total")/t})})}}),r=e.CartoDB.CartoDBCollection.extend({model:t,table:"country_attributes_live",columns:["unregion1","unregion2","name_engli","cumm","sqkm","total_incr","start_value","iso","ST_AsGeoJSON(ST_Centroid(the_geom)) as the_geom"],where:"start_value is not NULL",cache:!0,initialize:function(){this.bind("reset",this.normalize_deforestation)},inside:function(e){return _.isArray(e)||(e=[e]),this.filter(function(t){return _.indexOf(e,t.get("unregion1"))>=0})},normalize_deforestation:function(){var e=this.map(function(e){return e.max_deforestation()}),t=_.max(e);this.each(function(e){e.gen_normalized_deforestation(t)})},next_country:function(e){var t=this.models;for(var n=0;n<t.length;++n){var r=t[n];if(r.get("name_engli")===e){var i=n-1;i<0&&(i+=t.length),i%=t.length;var s=(n+1)%t.length;return[t[i],t[s]]}}return null}});e.Country=t,e.Countries=r,e.Regions=n},App.modules.Stories=function(e){var t=Backbone.View.extend({tagName:"li",initialize:function(){this.template_id=this.options.template_id||"#story-template"},render:function(){var e=_.template($(this.template_id).html());return $(this.el).html(e(this.model.toJSON())),this}}),n=Backbone.View.extend({initialize:function(){this.stories=this.options.stories,this.stories.bind("reset",this.render,this)},render:function(){var e=this.stories.map(function(e){return{name:e.get("title"),url:e.get("viewport")}});this.el.dropdown({source:e})}}),r=e.CartoDB.CartoDBCollection.extend({table:"geostories",columns:["iso","text","title","picture_url","picture_large_url","name_engli","viewport"],cache:!0,random:function(e){var t=this.models;return _(_.shuffle(_.range(this.models.length)).slice(0,e)).map(function(e){return t[e]})}});e.Stories=r,e.StoryView=t,e.StoryListView=n},App.modules.MainMap=function(e){var t=1100,n=562;merc=d3.geo.mercator().scale(1100).translate([(t>>1)-60,(n>>1)+30]);var r=Class.extend({init:function(e){_.bindAll(this,"render","set_time","update"),this.month=0,this.countries=e,this.countries.bind("reset",this.render)},def_to_size:function(e){return 2+Math.pow(e,.5)*2},update:function(){var e=this,t=e.countries_data,n=Math.abs,r=e.month,i=.03,s=this.svg.selectAll("g.node").attr("transform",function(n){var s=n.pos,o=e.def_to_size(n.time_series_deltas()[r]),u=!1;for(var a=0,f=t.length;a<f;++a){var l=t[a];if(n.cid!==l.cid){var c=l.pos,h=s[0]-c[0],p=s[1]-c[1],d=Math.sqrt(h*h+p*p),v=e.def_to_size(l.time_series_deltas()[r]),m=o+v+2,g=(d-m)/d;if(d<=m){var y=o/m,b=v/m;s[0]-=i*b*g*h,s[1]-=i*b*g*p,c[0]+=i*y*g*h,c[1]+=i*y*g*p,u=!0}}}if(!u){var w=merc(n.center());s[0]+=(w[0]-s[0])*2*i,s[1]+=(w[1]-s[1])*2*i}return"translate("+s.join(",")+")"})},set_time:function(e){var t=this;if(e===this.month)return;var n=this.countries;this.month=e;var r=this.svg.selectAll("g.node").select("circle").transition().duration(500).ease("cubic").attr("r",function(n){return t.def_to_size(n.time_series_deltas()[e])});r=this.svg.selectAll("g.node").select("text.small").text(function(t){var n=t.time_series_deltas();return e==0?"":n[e]-n[e-1]>0?"going up":"going down"})},render:function(){var e=this,r=this.countries,i=d3.select(".bubble_map").append("svg:svg").attr("width",t).attr("height",n);this.countries_data=r.filter(function(e){return e.get("cumm")}),this.svg=i;var s=i.selectAll("g.node").data(this.countries_data).enter().append("g").attr("class","node").attr("transform",function(e){var t=e.center(),n=merc(t);return e.pos=n,"translate("+n.join(",")+")"});s.append("circle").attr("r",function(t){return e.def_to_size(t.time_series_deltas()[e.month])}),s.append("a").attr("xlink:href",function(e){return"/country#"+e.slug()}).append("text").attr("width",100).attr("text-anchor","middle").each(function(e){var t=this,n=e.get("name_engli").toUpperCase().split(" ");e.words=n.length;var r=(e.words-1)*26/2;_.each(n,function(e,n){d3.select(t).append("tspan").attr("y",26*n-r).attr("x","0").text(e)});var i=t.getBBox().height}),s.append("text").attr("text-anchor","middle").attr("class","small").each(function(e){d3.select(this).attr("transform","translate (0, "+e.words*14+")").text("GOING UP")}),setInterval(this.update,30),s.selectAll("text").style("display","none"),i.selectAll("g.node").on("mouseover",function(e,t){var n=e.center(),r=d3.select(this);i.selectAll("g.node").sort(function(t,n){return t.cid==e.cid?1:n.cid==e.cid?-1:0}),d3.select(this).transition().select("circle").attr("r",100),d3.select(this).selectAll("text").style("display","block").transition().delay(100).style("opacity",1)}).on("mouseout",function(t,n){d3.select(this).transition().select("circle").attr("r",function(t){return e.def_to_size(t.time_series_deltas()[e.month])}),d3.select(this).selectAll("text").transition().delay(100).style("opacity",0).each("end",function(){d3.select(this).style("display","none")})})}});_.extend(r.prototype,Backbone.Event),e.MainMap=r},App.modules.StatsPanel=function(e){var t=Backbone.View.extend({initialize:function(){},set_info:function(e){var t=this.$(".info");t.html("");for(var n in e){var r="<dl><DT>"+n;r+="<DD>"+e[n]+"</dl>",t.append(r)}}});e.StatsPanel=t},App.modules.State=function(e){e.State=Backbone.Model.extend({initialize:function(){},set_router:function(e){var t=this;t.router=e},save:function(){this.serialize()},fetch:function(t){var n=this;if(t){var r;try{r=atob(t)}catch(i){e.Log.error("error parsing state");return}n.set(JSON.parse(r))}},serialize:function(){var e=this,t=JSON.stringify(this.toJSON()),n=location.hash.replace(/\/s\/[a-zA-Z0-9=]+/,"");e.router.navigate(n+"/s/"+btoa(t),!1)}})};var MiniTilemill=function(e,t){this.layers={},this.user_name=e,this.map=t,this.use_cartodb_styles=!1};MiniTilemill.prototype.addLayer=function(e,t,n,r){var i=new CartoDBLayer(this.user_name,r,t,e);return this.layers[n]=i,this.map.add_layer(n,{name:t,enabled:!0},i),i},MiniTilemill.prototype.toggle=function(e){var t=this.layers[e];t.show(!t.showing)},MiniTilemill.prototype.update_layers=function(){for(var e in this.layers)this.map.update_layer(e)},App.modules.CountryLayer=function(e){var t=Class.extend({LEVEL_COUNTRY:1,LEVEL_REGION:2,init:function(e){_.bindAll(this,"mousemove","map_click");var t=this;t.level=this.LEVEL_COUNTRY,t.state=[],t.map=e,t.zoom_country=8,this.tilemill=new MiniTilemill("wri-01",e.map);var n=new CartoDB({user:"wri-01",table:"admin1_attributes_live",columns:["iso","shape_area","cartodb_id","cumm"],debug:!1,where:"forma=true",shader:{"point-color":"#fff","line-color":"rgba(0,0,0,0)","line-width":"0","polygon-fill":"rgba(255,255, 255,0.01)"}});e.map.add_layer("vector0",{name:"v0",enabled:!0},n),t.layer=n,this.pas_layer=this.tilemill.addLayer(null,"selected_countries_pas","Protected Areas"),this.rivers=this.tilemill.addLayer(null,"rivers","Rivers"),this.country_border=this.tilemill.addLayer($("#border_style").html(),"country_attributes_live","Borders","select 0 as lid,'dummy' as name_1, 0 as shape_area, the_geom_webmercator from country_attributes_live limit 1"),this.places=this.tilemill.addLayer(null,"places","Populated places"),this.map.map.bind("mousemove",this.mousemove),this.map.map.bind("click",this.map_click),this.map.map.bind("zoom_changed",function(e){e<=t.zoom_country&&t.enable_map_interaction()})},map_click:function(e){var t=this,n=t.layer.geometry_at(e.latLng,e.point,t.map.map.get_zoom());if(n){var r=n.geometry,i=new GeoJSON(r);i.length||(i=[i]);var s=new google.maps.LatLngBounds;_(i).each(function(e){e.getPath().forEach(function(e,t){s.extend(e)})}),t._enter(s,n)}},get_country_zoom:function(e){var t=new google.maps.LatLngBounds;_(e.coordinates[0]).each(function(e){t.extend(new google.maps.LatLng(e[1],e[0]))});var n=256,r=t.getSouthWest().lat(),i=t.getNorthEast().lat(),s=i-r;s<0&&(s+=360);var o=$(this.map.map.map.getDiv()).height(),u=Math.round(Math.log(o*180/s/n)/Math.LN2);return u},show_country:function(e,t){var n=this;n.zoom_country=n.get_country_zoom(e.get("bbox")),n.map.map.set_min_zoom(n.zoom_country),console.log("country zoom",n.zoom_country),_.extend(n.layer.options,{where:"name_0 = '{0}'".format(e.get("name_engli").replace("'","''")),table:"admin1_attributes_live",columns:["name_0","name_1","cartodb_id","cumm"]}),n.map.enable_layer("vector0",!0),n.layer.layer.redraw();var r="select 0 as lid, the_geom_webmercator, 'dummy' as name_1, 0 as shape_area from country_attributes_live where iso = '{0}'";r+=" UNION ",r+="select 1 as lid, the_geom_webmercator, name_1, shape_area from admin1_attributes_live where iso = '{0}'",r=r.format(t),n.country_border.update(r),r="select the_geom_webmercator, is_point from selected_countries_pas where iso = '{0}'",r=r.format(t),n.pas_layer.update(r),r="SELECT rivers.the_geom_webmercator, scalerank FROM rivers, simple_countries where ST_Intersects(rivers.the_geom,simple_countries.the_geom) and simple_countries.iso = '{0}'".format(t),n.rivers.update(r),r="select the_geom_webmercator, name, pop_max from places where iso='{0}' order by gn_pop limit 20".format(t),n.places.update(r),this.tilemill.update_layers(),this.enable_map_interaction()},enable_map_interaction:function(){this.map.map.unbind("mousemove",this.mousemove),this.map.map.bind("mousemove",this.mousemove),this.map.map.unbind("click",this.map_click),this.map.map.bind("click",this.map_click)},disable_map_interaction:function(){this.map.map.unbind("mousemove",this.mousemove),this.map.map.unbind("click",this.map_click)},_enter:function(e,t){this.level==this.LEVEL_COUNTRY&&(this.map.map.map.fitBounds(e),this.disable_map_interaction(),this.map.displace(250,0)),this.remove_hover()},mousemove:function(e){var t=this,n=t.layer.geometry_at(e.latLng,e.point,t.map.map.get_zoom());if(n){if(t.current_geom==n.properties.cartodb_id)return;t.trigger("mouse_on",e,n);var r=t.current_geom=n.properties.cartodb_id,i=n.geometry;this.show_hover(i)}else t.remove_hover(),t.current_geom=null,t.trigger("mouse_out")},show_hover:function(e){var t=this,n={strokeColor:"#FFFFFF",strokeOpacity:.8,strokeWeight:6,fillColor:"#FFF366",fillOpacity:0,clickable:!1};t.remove_hover(),t.vec=new GeoJSON(e,n),t.vec.length||(t.vec=[t.vec]),t.vec.forEach(function(e){e.setMap(t.map.map.map)})},remove_hover:function(){var e=this;e.vec&&e.vec.forEach(function(e){e.setMap(null)})}});_.extend(t.prototype,Backbone.Events),e.CountryLayer=t},App.modules.Search=function(e){var t=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","set_time"),this.countries=this.options.countries,this.countries.bind("reset",this.render),this.el.autocomplete({source:[],minLength:2,url:"/country#"})},set_time:function(e){this.month=e,this.render()},render:function(){var e=this,t=this.countries.map(function(t){return{label:t.get("name_engli"),per:t.def_percent_in_month(e.month)}});this.el.autocomplete("option","source",t)}});e.Search=t},TimePlayer.prototype=new CanvasTileLayer,TimePlayer.prototype.set_time=function(e){this.time=e,this.redraw()},TimePlayer.prototype.set_table=function(e,t){if(this.table===e)return;this.table=e,this.pixel_size=t,this.recreate(),this.redraw()},TimePlayer.prototype.set_country_iso=function(e){this.country=e,this.recreate(),this.redraw()},TimePlayer.prototype.sql=function(e,t){var n=this;$.getJSON(this.base_url+"?q="+encodeURIComponent(e),function(e){t(e)})},TimePlayer.prototype.pre_cache_months=function(e){var t,n=[],r;for(var i in e){t=e[i];var s=[],o=t.cummulative,u=this.pixel_size*this.pixel_size,a=u>>4;for(r=0,l=o.length;r<l;++r)o[r]-o[0]>a?s[r]=1+(3*((o[r]-o[0])/(u-o[0]))>>0):s[r]=0;var f=t.time_series,c=t.time_series,h=-10;c[0]=0,c[1]=0;for(r=2;r<f.length;++r)f[r]>0&&(h=r),c[r]=0,s[r]>0&&(c[r]=Math.max(0,3-(r-h)));n[i]={x:t.upper_left_x,y:t.upper_left_y,w:t.cell_width,h:t.cell_width,months_accum:s,months:t.time_series}}return n},TimePlayer.prototype.get_time_data=function(e,t,n){var r=this;if(!r.table||!r.country)return;var i=new MercatorProjection,s=i.tileBBox(t.x,t.y,n),o="SELECT upper_left_x, upper_left_y, cell_width, cummulative, time_series FROM "+this.table;o+=" WHERE iso = '{0}'".format(r.country),o+=" AND {0}.the_geom && ST_SetSRID(ST_MakeBox2D(".format(r.table),o+="ST_Point("+s[0].lng()+","+s[0].lat()+"),",o+="ST_Point("+s[1].lng()+","+s[1].lat()+")), 4326)",this.sql(o,function(t){e.cells=r.pre_cache_months(t.rows),r.redraw_tile(e)})};var originShift=2*Math.PI*6378137/2,initialResolution=2*Math.PI*6378137/256;TimePlayer.prototype.render_time=function(e,t,n){var r=new MercatorProjection,i=1+this.time>>0,s=e.canvas.width,o=e.canvas.height,u=e.ctx,a,f,l,c,h,p,d,v=256<<n,m=e.cells;if(!m||m.length===0)return;var g,y,c,h;e.canvas.width=s,u.fillStyle="#000",y=r.tilePoint(t.x,t.y,n);var b=["rgba(84, 48, 59, 0.6)","rgba(104, 48, 59, 0.6)","rgba(170, 52, 51, 0.6)","rgba(255, 51, 51, 0.9)"],w=0,E;d=meterToPixelsDist(m[0].w,m[0].w,n);for(f=0;f<m.length;++f){g=m[f],w=0,pixels=meterToPixels(g.x,g.y,n),pixels[1]=v-pixels[1],c=pixels[0]-y[0],h=pixels[1]-y[1],E="rgba(255, 255, 255, 1.0)";if(g.months){var S=g.months[i],x=g.months_accum[i];S===3&&(w=1);if(x===0)continue;E=b[Math.max(0,Math.min(3,x+S))]}var T=d[0]>>0;T+=w,u.fillStyle=E,u.fillRect(c,h,T,T)}};var PolygonDrawTool=Backbone.View.extend({initialize:function(){_.bindAll(this,"add_vertex","create_polygon","reset","editing_state","_add_vertex","edit_polygon"),this.mapview=this.options.mapview,this.map=this.mapview.map,this.listeners=[],this.reset(),this.image=new google.maps.MarkerImage("/img/sprite.png",new google.maps.Size(13,13),new google.maps.Point(457,1234),new google.maps.Point(6,6))},editing_state:function(e){this.reset(),this.mapview.unbind("click",this.add_vertex),e&&this.mapview.bind("click",this.add_vertex)},reset:function(){var e=this;this.polyline!==undefined&&(_(this.listeners).each(function(e){google.maps.event.removeListener(e)}),this.listeners=[],this.polyline.setMap(null),delete this.polyline,this.polygon.setMap(null),delete this.polygon),this.markers!==undefined&&_.each(this.markers,function(e){e.setMap(null)}),this.markers=[],this.vertex=[],this.polyline=new google.maps.Polygon({path:[],strokeColor:"#FFF",strokeOpacity:1,fillOpacity:.3,fillColor:"#66CCCC",strokeWeight:1,map:this.map}),this.polygon=new google.maps.Polygon({path:[],strokeColor:"#DC143C",strokeOpacity:.8,strokeWeight:0,map:this.map}),this.listeners.push(google.maps.event.addListener(this.polygon,"click",function(t){e.trigger("polygon_click",this,this.getPath(),t.latLng)})),this.listeners.push(google.maps.event.addListener(this.polyline,"mouseover",function(t){e.trigger("mouseover",this,t)})),this.listeners.push(google.maps.event.addListener(this.polyline,"mouseout",function(t){e.trigger("mouseout",this,t)})),this.listeners.push(google.maps.event.addListener(this.polyline,"mousemove",function(t){e.trigger("mousemove",this,t)}))},edit_polygon:function(e){var t=this;t.reset();var n=_.map(e,function(e){return _.map(e,function(e){return new google.maps.LatLng(e[0],e[1])})});t.polyline.setPaths(n),t.polyline.setMap(t.map),_.each(e,function(n,r){_.each(n,function(n,i){var s=new google.maps.Marker({position:new google.maps.LatLng(n[0],n[1]),map:t.map,icon:t.image,draggable:!0,flat:!0,raiseOnDrag:!1});s.path_index=r,s.index=i,t.markers.push(s),google.maps.event.addListener(s,"dragstart",function(e){t.trigger("dragstart")}),google.maps.event.addListener(s,"drag",function(e){t.polyline.getPath(this.path_index).setAt(this.index,e.latLng)}),google.maps.event.addListener(s,"dragend",function(t){e[this.path_index][this.index]=[t.latLng.lat(),t.latLng.lng()]})})})},_add_vertex:function(e){var t=new google.maps.Marker({position:e,map:this.map,icon:this.image,draggable:!1});return t.index=this.vertex.length,this.markers.push(t),this.vertex.push(e),this.polyline.setPath(this.vertex),this.polygon.setPath(this.vertex),t},add_vertex:function(e){var t=e.latLng,n=this._add_vertex(t),r=this;this.vertex.length===1&&(r.trigger("first_vertex"),google.maps.event.addListener(n,"click",function(){r.vertex.length>=3&&(r.create_polygon(r.vertex),r.reset())}))},create_polygon:function(e){var t=_.map(e,function(e){return[e.lat(),e.lng()]});this.trigger("polygon",{paths:[t]})}}),PolygonDrawEditTool=PolygonDrawTool.extend({initialize:function(){this.constructor.__super__.initialize.call(this),this.final_polygon=new google.maps.Polygon({path:[],strokeColor:"#0099CC",strokeOpacity:1,fillColor:"rgba(102, 204, 204, 0.3)",fillOpacity:.5,strokeWeight:1,map:this.map})},editing_state:function(e){e?this.mapview.bind("click",this.add_vertex):(this.reset(),this.final_polygon.setPath([]),this.mapview.unbind("click",this.add_vertex))},add_vertex:function(e){this.final_polygon.setPath([]);var t=e.latLng,n=this._add_vertex(t),r=this;this.vertex.length===1&&google.maps.event.addListener(n,"click",function(){r.create_polygon(r.vertex)})},create_polygon:function(e){this.final_polygon.setPath(this.polyline.getPath()),this.reset();var t=_.map(e,function(e){return[e.lat(),e.lng()]});this.trigger("polygon",{path:t})}}),Layer=Backbone.View.extend({template:_.template('<a href="#"><%= name %></a>'),tagName:"li",events:{click:"toggle"},initialize:function(e){var t=this;this.layer=this.options.layer},render:function(){var e=$(this.el),t=_.extend(this.layer,{normalized_name:this.layer.name.replace(" ","_")});return e.html(this.template(t)).addClass("sortable").attr("id",this.layer.name),this.layer.enabled&&e.addClass("enabled"),this},toggle:function(e){e.preventDefault();var e=!this.layer.showing,t=$(this.el);e?t.addClass("enabled"):t.removeClass("enabled"),this.trigger("changed",this.layer.name)},close:function(){this.unbind(),this.remove()}}),LayerEditor=Backbone.View.extend({events:{click:"open"},initialize:function(){var e=this;this.layers=this.options.layers,this.open=!1,this.views={},this.render()},render:function(e,t){var n=this,r=this.$("ul");return _(this.layers).each(function(e){if(e.editable){var t=n.views[e.name];t&&t.close(),t=new Layer({layer:e}),t.bind("changed",function(e){n.trigger("layer_changed",e)}),n.views[e.name]=t,r.append(t.render().el)}}),this},sortLayers:function(){var e=[];this.$("li").each(function(t,n){e.push($(n).attr("id"))}),this.trigger("layers_changed")},open:function(e){e&&e.preventDefault(),this.el.addClass("open"),this.el.css("z-index","100"),this.open=!0},close:function(e){this.el.removeClass("open"),this.el.css("z-index","10"),this.open=!1},sort_by:function(e){this.layers.sort(function(t,n){return _(e).indexOf(t.name)-_(e).indexOf(n.name)}),this.open=!0}}),Slider=Backbone.View.extend({START:new Date(2006,0,1),initialize:function(){_.bindAll(this,"startDrag","onDrag","endDrag");var e=this;this.el.wriSlider({start:"February 1, 2006 00:00:00",end:"January 1, 2012 00:00:00",value:"January 1, 2012 00:00:00"}),this.dragging=!1,this.marker=this.$(".marker"),this.el.bind("change.wriSlider",function(t,n){var r=e.START,i=new Date(n),s=12*(i.getFullYear()-r.getFullYear())+i.getMonth();e.trigger("change",s>>0)})},month_to_date:function(e){var t=e%12,n=e/12>>0;return new Date(this.START.getFullYear()+n,this.START.getMonth()+t,1)},stop:function(){this.el.wriSlider("stop")},set_time:function(e){var t=this,n=this.month_to_date(e);t.el.wriSlider("update",n.getTime())},startDrag:function(e){return this.dragging=!0,this.startPos=this.marker.position(),this.startMousePos=e.clientX,$(document).mousemove(this.onDrag),$(document).mouseup(this.endDrag),!1},onDrag:function(e){if(!this.dragging)return;var t=this.el.width(),n=e.clientX-this.startMousePos,r=this.startPos.left+n;return r=Math.max(0,r),r=Math.min(t-this.marker.width(),r),this.marker.css({left:r}),this.trigger("change",r/t),!1},endDrag:function(e){return this.dragging=!1,$(document).unbind("mousemove",this.onDrag),$(document).unbind("mouseup",this.onDrag),!1}}),HTML5Slider=Backbone.View.extend({events:{change:"slide"},initialize:function(){_.bind(this,"slide","set_values")},slide:function(e){this.trigger("change",this.el.val())},set_value:function(e){this.el.slider("value",0,low)}}),Graph=Backbone.View.extend({initialize:function(){this.w=500,this.h=160;var e=d3.select(this.el[0]).append("svg").attr("width",this.w).attr("height",this.h);this.vis=e,this.month=10},set_country:function(e){this.time_series=e.time_series_deltas(),this.render()},date_range:function(){var e=(new Date(2006,0,1)).getTime(),t=(new Date).getTime()-e;return t/2592e6>>0},set_time:function(e){var t=this;this.month=e;var n=this.time_series,r=this.x_scale,i=this.y_scale;this.vis.select(".time_line").attr("x1",r(this.month)).attr("y1",0).attr("x2",r(this.month)).attr("y2",-1*this.h),this.vis.select(".time_circle").attr("cx",r(this.month)).attr("cy",function(e){return-1*i(n[t.month])})},render:function(){var e=this,t=this.time_series;this.vis.selectAll().remove();var n=this.vis.append("svg:g").attr("transform","translate(0, "+this.h+")"),r=d3.scale.linear().domain([0,d3.max(t)]).range([0,this.h-30]),i=d3.scale.linear().domain([0,e.date_range()]).range([0,this.w]);this.x_scale=i,this.y_scale=r;var s=d3.svg.line().x(function(e,t){return i(t)}).y(function(e){return-1*r(e)});n.append("svg:path").attr("d",s(t)).style("stroke","#FF2222").style("fill","none").style("stroke-width",2),n.append("svg:line").attr("class","time_line").style("stroke","#FF2222").style("stroke-dasharray","5,5").style("fill","none").style("stroke-width",1).attr("x1",i(this.month)).attr("y1",0).attr("x2",i(this.month)).attr("y2",-1*this.h),n.append("svg:circle").attr("class","time_circle").style("fill","#FF2222").attr("cx",i(this.month)).attr("cy",function(n){return-1*r(t[e.month])}).attr("r",3)}});CoordMapType.prototype.tileSize=new google.maps.Size(256,256),CoordMapType.prototype.maxZoom=8,CoordMapType.prototype.minZoom=5,CoordMapType.prototype.getTile=function(e,t,n){var r=new Image,i="http://wri-basemap.s3.amazonaws.com/tiles/{z}/{x}/{y}.png",s=1<<t;return r.src=i.replace("{x}",e.x).replace("{y}",s-e.y-1).replace("{z}",t),r},CoordMapType.prototype.name="Tile #s",CoordMapType.prototype.alt="Tile Coordinate Map Type";var MapView=Backbone.View.extend({mapOptions:{zoom:5,center:new google.maps.LatLng(-22.616552001620068,14.735100097651177),mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,draggableCursor:"default",scrollwheel:!1,mapTypeControl:!1},events:{"click .zoom_in":"zoom_in","click .zoom_out":"zoom_out","click .fullscreen":"fullscreen"},initialize:function(){_.bindAll(this,"center_changed","ready","click","set_center","zoom_changed","zoom_in","zoom_out","adjustSize","set_zoom_silence","set_center_silence");var e=this;this.layers={},this.hide_controls(),this.map=new google.maps.Map(this.$(".map")[0],this.mapOptions);var t=new CoordMapType;this.coordinateMapType=t,this.map.mapTypes.set("coordinate",t),this.map.setMapTypeId("coordinate"),google.maps.event.addListener(this.map,"center_changed",this.center_changed),google.maps.event.addListener(this.map,"zoom_changed",this.zoom_changed),google.maps.event.addListener(this.map,"click",this.click),google.maps.event.addListener(this.map,"mousemove",function(t){e.trigger("mousemove",t)}),this.projector=new Projector(this.map),this.projector.draw=this.ready,this.signals_on=!0,setTimeout(function(){$(".map").find('img[src="http://maps.gstatic.com/mapfiles/google_white.png"]').closest("a").hide(),$(".map").find('a:contains("Terms of Use")').closest("div").hide()},2e3),$(document).scroll(function(e){$(this).scrollTop()>142?$("body"
).hasClass("scrolled")||$("body").addClass("scrolled"):$("body").hasClass("scrolled")&&$("body").removeClass("scrolled")})},adjustSize:function(){google.maps.event.trigger(this.map,"resize")},fullscreen:function(){return this.trigger("fullscreen"),!1},hide_controls:function(){this.$(".layer_editor").hide(),this.$(".zoom_control").hide()},show_zoom_control:function(){this.$(".zoom_control").show()},hide_zoom_control:function(){this.$(".zoom_control").hide()},show_layers_control:function(){this.$(".layer_editor").show()},hide_layers_control:function(){this.$(".layer_editor").hide()},show_controls:function(){this.$(".layer_editor").show(),this.$(".zoom_control").show()},center_changed:function(){this.signals_on&&this.trigger("center_changed",this.map.getCenter())},zoom_in:function(e){e.preventDefault(),this.map.setZoom(this.map.getZoom()+1)},zoom_out:function(e){e.preventDefault();var t=this.map.getZoom()-1;t>=this.coordinateMapType.minZoom&&this.map.setZoom(t)},zoom_changed:function(){var e=this.map.getZoom();this.signals_on&&this.trigger("zoom_changed",e),this.$(".zoom_in").css({opacity:1}),this.$(".zoom_out").css({opacity:1}),e==this.coordinateMapType.minZoom?this.$(".zoom_out").css({opacity:.2}):e==this.coordinateMapType.maxZoom&&this.$(".zoom_in").css({opacity:.2})},set_min_zoom:function(e){this.coordinateMapType.minZoom=e,e==this.coordinateMapType.minZoom&&this.$(".zoom_out").css({opacity:.2})},set_center:function(e,t){this.signals_on=t===undefined?!0:t,this.map.setCenter(e),this.signals_on=!0},set_center_silence:function(e){this.set_center(e,!1)},get_center:function(){return this.map.getCenter()},set_zoom:function(e,t){this.signals_on=t===undefined?!0:t,this.map.setZoom(e),this.signals_on=!0},get_zoom:function(){return this.map.getZoom()},set_zoom_silence:function(e){this.set_zoom(e,!1)},click:function(e){this.trigger("click",e)},crosshair:function(e){var t=this.$(".crosshair");e?t.show():t.hide()},ready:function(){this.projector.draw=function(){},this.trigger("ready")},add_layer:function(e,t,n){n.name=e,n.enabled=!0,this.layers[e]=n,this.reorder_layers(),this.trigger("changed:layers")},get_layers:function(){return this.layers},update_layer:function(e){var t=this.layers[e];this.map.overlayMapTypes.setAt(t.idx,t.layer)},enable_layer:function(e,t){var n=this.layers[e];n.enabled=t,this.map.overlayMapTypes.setAt(n.idx,t?n.layer:null)},toggle_layer:function(e){this.enable_layer(e,!this.layers[e].enabled)},reorder_layers:function(e){var t=this,n=0;t.map.overlayMapTypes.clear(),_(t.layers).each(function(e){e.enabled&&(t.map.overlayMapTypes.setAt(n,e.layer),e.idx=n),n++})},remove_layer:function(e){}});App.modules.WRI=function(e){function t(e,t){for(var n in t)e=e.replace(new RegExp("{"+n+"}","g"),t[n]);return e}var n=Backbone.Router.extend({routes:{":country":"country",":country/s/*state":"country"},country:function(t,n){e.Log.log("route: country"+t+" "+n)}}),r=Backbone.View.extend({tagName:"li",events:{"click .region":"click"},initialize:function(){},click:function(e){e.preventDefault(),this.trigger("move_to",this.model)},render:function(){var e=this.model;return $(this.el).html('<a href="#" class="region">{0}<span style="width:{1}%" class="bar"></span></a></li>'.format(e.get("name"),70*e.get("normalized"))),this},close:function(){this.unbind(),this.remove()}}),i=Backbone.View.extend({START:new Date(2006,0,1),MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],events:{},initialize:function(){this.showing=!0,this.template=this.el.html(),this.model.bind("change",this.render,this),this.stories=this.options.stories,this.regions=new e.Regions,this.regions.bind("reset",this.render_regions,this),this.model.bind("change",function(){this.regions.set_iso(this.model.get("iso")),this.regions.fetch()},this),this.time=0,this.regions_views=[]},set_time:function(e){this.time=e,this.graph.set_time(e),this.set_headlines()},month_to_date:function(e){var t=e%12,n=e/12>>0;return new Date(this.START.getFullYear()+n,this.START.getMonth()+t,1)},set_headlines:function(){var e=100*this.model.change_since(this.time-6,this.time),t=100*this.model.change_since(this.time-1,this.time),n={".inc_last_six_months":e.toFixed(0),".inc_last_month":t.toFixed(0)};_(n).each(function(e,t){this.$(t).html(e),(e|0)>0?this.$(t+"_percent").removeClass("green").addClass("red"):this.$(t+"_percent").addClass("green").removeClass("red")});var r=this.month_to_date(this.time);this.$(".inc_date").html(this.MONTHS[r.getMonth()]+" "+r.getFullYear())},render_regions:function(){var e=this;this.regions.normalize();var t=this.$(".countries");t.html(""),_(this.regions_views).each(function(e){e.close()}),this.regions_views=[],this.regions.each(function(n){var i=new r({model:n});e.regions_views.push(i),i.bind("move_to",e.move_map_to,e),t.append(i.render().el)})},render:function(){var n=this,r=this.model,i=t(this.template,{country:r.get("name_engli"),description:r.get("description")});this.el.fadeOut(300,function(){n.el.html(i),n.graph=new Graph({el:n.$("#graph")}),n.graph.set_country(n.model),n.$(".stories").append((new e.StoryView({model:n.stories.random(1)[0],template_id:"#story-template-large"})).render().el),n.showing&&n.el.fadeIn(),n.set_time(n.time)})},move_map_to:function(e){this.trigger("move_to",e)},hide:function(){this.el.fadeOut(),this.showing=!1},show:function(){this.el.fadeIn(),this.showing=!0}}),s=Backbone.View.extend({initialize:function(){this.countries=this.options.countries,this.country=this.options.country,this.countries.bind("reset",function(){this.continent&&this.render()},this),this.country.bind("change",function(){this.continent=this.country.get("unregion1"),this.countries.models.length>0&&this.render()},this),this.el.dropdown({source:[]})},render:function(){var e=this,t=_(this.countries.inside(this.continent)).map(function(e){return{name:e.get("name_engli"),url:"/country#"+e.get("name_engli")}});t=_(t).filter(function(t){return t.name!=e.country.get("name_engli")}),this.el.dropdown("update",t),this.$(".init").html(this.continent)}});e.WRI=Class.extend({init:function(){_.bindAll(this,"on_route"),$("body").css({"overflow-x":"hidden","overflow-y":"auto"})},run:function(){_.bindAll(this,"on_route_to","_state_url","set_state");var t=this;this.bus=new e.Bus,e.bus=this.bus,this.stories=new e.Stories,this.country=new e.Country({name_engli:""}),this.countries=new e.Countries;var r=new e.StoryListView({el:$("#stories_drop"),stories:this.stories}),o=new s({el:$("#continent_drop"),countries:this.countries,country:this.country}),u=new e.Search({el:$("#autocomplete"),countries:this.countries}),a=_.after(2,function(){var e=t.countries.next_country(t.country.get("name_engli"));if(e){var n=e[0],r=e[1];$(".pag.left").attr("href","country#"+n.get("name_engli")).animate({left:0}),$(".pag.right").attr("href","country#"+r.get("name_engli")).animate({right:0})}});this.countries.bind("reset",a),this.country.bind("change",a),this.stories.fetch(),this.countries.fetch(),this.map=new e.Map(this.bus),this.router=new n,this.router.bind("route:country",this.on_route),this.app_state=new e.State,this.app_state.set_router(this.router),this.state_url=_.debounce(this._state_url,200),this.panel=new i({el:$("#country_info"),model:this.country,stories:this.stories}),this.state=[],this.level=0,this.slider=new Slider({el:$(".slider")}),this.slider.set_time(0),this.slider.bind("change",function(e){t.map.set_time(e),t.panel.set_time(e)}),this.bus.on("app:route_to",this.on_route_to),this.map.map.bind("center_changed",this.state_url),this.map.map.bind("zoom_changed",this.state_url),this.map.show_controls(!0),this.app_state.bind("change:map",this.set_state),this.app_state.bind("change:fullscreen",function(){t.app_state.get("fullscreen")&&t.go_fullscreen(!0)}),this.map.map.bind("fullscreen",this.go_fullscreen,this),this.panel.bind("move_to",this.move_map_to,this),Backbone.history.start()},go_fullscreen:function(e){var t=this;$("body").addClass("fullscreen"),e||t.map.displace(-255,0),$("a.fullscreen").html("Normal map"),this.map.map.unbind("fullscreen",this.go_fullscreen),this.map.map.bind("fullscreen",this.go_normal,this),t.app_state.set({fullscreen:!0},{silent:!0}),t.app_state.save({silent:!0})},go_normal:function(){$("body").removeClass("fullscreen");var e=this;e.map.displace(255,0),$("a.fullscreen").html("Fullscreen map"),this.map.map.unbind("fullscreen",this.go_normal),this.map.map.bind("fullscreen",this.go_fullscreen,this),e.app_state.set({fullscreen:!1},{silent:!0}),e.app_state.save({silent:!0})},_state_url:function(){var e=this,t=e.map.map.get_center();e.app_state.set({map:{center:{lat:t.lat(),lon:t.lng()},zoom:e.map.map.get_zoom()}}),e.app_state.save()},set_state:function(e){var t=this,n=e.get("map");t.map.map.set_center(new google.maps.LatLng(n.center.lat,n.center.lon)),t.map.map.set_zoom(n.zoom)},country_changed:function(){var e=this,t=this.country;e.map.show_country(t,t.get("iso"))},move_map_to:function(e){var t=this;t.map.center_map_on(e.get("bbox")),t.map.displace(255,0)},on_route:function(e,t){var n=this;this.slider.stop();var r=this.country;r.set({name_engli:e},{silent:!0}),t?this.app_state.fetch(t):(r.unbind("change",this.move_map_to),r.bind("change",this.move_map_to,this)),r.unbind("change",this.country_changed),r.bind("change",this.country_changed,n),r.fetch()},on_route_to:function(t){e.Log.debug("route => ",t),this.router.navigate(t,!0)}})},App.modules.WRIHome=function(e){var t=Backbone.View.extend({tagName:"li",template:'<a href="/country#{0}">{1}<span style="width:50%" class="bar"></span></a>',initialize:function(){_.bindAll(this,"_remove_growing"),this.country=this.options.country,this.timeout=null,this.remove_growing=_.debounce(this._remove_growing,300)},_remove_growing:function(){this.$("span").removeClass("growing")},set_time:function(e){var t=this.country.def_percent_in_month(e);this.$("span").css({width:t+"%"}),Math.abs(t-this.old_percent)>.1&&(this.$("span").addClass("growing"),this.remove_growing()),this.old_percent=t},render:function(){return $(this.el).append(this.template.format(this.country.slug(),this.country.get("name_engli"))),this.set_time(0),this}}),n=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","set_time"),this.countries=this.options.countries,this.area=this.options.area,this.countries.bind("reset",this.render),this.country_views=[]},set_time:function(e){this.month=e,_(this.country_views).each(function(t){t.set_time(e)})},render:function(){var e=this;return this.el.html(""),_(this.countries.inside(this.area)).each(function(n){var r=new t({country:n});e.country_views.push(r),e.el.append(r.render().el)}),this}});e.WRIHome=Class.extend({set_headline:function(){var e=["Monitoring the world's forests","Keeping an eye on the world's forests","Monitor deforestation hotspots in the tropics","Monthly deforestation hotspots in the tropics"],t=e[Math.random()*e.length>>0];$("section.title").find("h2").html(t)},run:function(){var t=this,r=new e.Countries,i=new e.Stories,s=new e.MainMap(r);this.slider=new Slider({el:$(".slider")});var o=new e.Search({el:$("#autocomplete"),countries:r}),u=new e.StoryListView({el:$("span.select"),stories:i});this.slider.bind("change",s.set_time),this.slider.bind("change",o.set_time),i.bind("reset",function(){_(i.random(2)).each(function(t){$("#featured_stories").append((new e.StoryView({model:t})).render().el)})});var a=[{el:$("#south_america"),area:"South America",countries:r},{el:$("#africa"),area:["Eastern Africa","Western Africa","Middle Africa"],countries:r},{el:$("#south_east_asia"),area:["Southern Asia","South-Eastern Asia"],countries:r}];_(a).each(function(e){var r=new n(e);t.slider.bind("change",r.set_time)}),r.fetch(),i.fetch(),r.bind("reset",function(){this.slider.set_time(0)},this)}})},App.modules.WRIAbout=function(e){e.WRIAbout=Class.extend({init:function(){},run:function(){var t=new e.Countries,n=new e.Stories,r=new e.Search({el:$("#autocomplete"),countries:t}),i=new e.StoryListView({el:$("#stories_drop"),stories:n});t.fetch(),n.fetch()}})},function(e,t,n){var r=!0,i=!0,s=null,o="wriSlider",u,a,f,l={globalEvents:[],monthNames:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],animation_time:250,step:1296e6};u={pluginName:o,options:null,_init:function(t){return u.options=e.extend(!0,l,t),this.each(function(){var t=e(this);u._addCanvas(t),u._bind(t)})},_bind:function(e){e.find("a.animation").bind({click:u._animate})},_trigger:function(t,n,r){var i=e.inArray(t,u.options.globalEvents)>=0,t=t+"."+u.pluginName;i?e.event.trigger(t,n):r.trigger(t,n)},_addCanvas:function(e){e.append('<span class="canvas"></span><span class="shadow"></span><div class="horizontal"></div>');var t="<table><tbody><tr>";for(var n=2006,r=2013;n<r;n++)n!=2012?t+='<td width="16%"><div><label>'+n+"</label></div></td>":t+='<td width="2%"><div><label>'+n+"</label></div></td>";t+="</tr></tbody></table>",e.find("span.canvas").append(t),u._initializeButton(e),u._initializeSlider(e)},_initializeButton:function(e){e.append('<a href="#play" class="animation"><span>play</span></a>')},_initializeSlider:function(t){t.find("div.horizontal").slider({min:(new Date(u.options.start)).getTime(),max:(new Date(u.options.end)).getTime(),value:(new Date(u.options.value)).getTime(),step:u.options.step,create:function(t,n){var r=new Date(u.options.value),i=u.options.monthNames[r.getMonth()]+" "+r.getFullYear();e(t.target).find("a.ui-slider-handle").text(i)},slide:function(t,n){var r=u.options.monthNames[(new Date(n.value)).getMonth()]+" "+(new Date(n.value)).getFullYear();e(t.target).find("a.ui-slider-handle").text(r);var i=e(t.target).closest(".slider").find("a.animation");u._stopAnimation(i),u._trigger("change",[n.value],e(t.target))},change:function(t,n){var r=u.options.monthNames[(new Date(n.value)).getMonth()]+" "+(new Date(n.value)).getFullYear();e(t.target).find("a.ui-slider-handle").text(r),u._trigger("change",[n.value],e(t.target))}})},_resetSlider:function(e){},_animate:function(t){t&&t.preventDefault();var n=e(t.target).closest("a");n.hasClass("play")?u._stopAnimation(n):u._startAnimation(n)},_stopAnimation:function(e){e.removeClass("play"),e.find("span").text("play"),clearInterval(e.data("interval")),e.data("interval",null)},_startAnimation:function(e){e.addClass("play"),e.find("span").text("pause");var t=e.closest(".slider").find("div.horizontal"),n=t.slider("option","max");t.slider("value")==n&&t.slider("value",0);var r=setInterval(function(){var r=t.slider("value");r<n?t.slider("value",r+u.options.step):r>n?t.slider("value",n):u._stopAnimation(e)},u.options.animation_time);e.data("interval",r)}},a={update:function(e){var t=this.find("div.horizontal");t.slider("value",e)},stop:function(){var e=this.find("a.animation");u._stopAnimation(e)}},f={},e.fn[o]=function(t){if(e.type(t)==="string"&&a[t])return a[t].apply(this,Array.prototype.slice.call(arguments,1));if(e.type(t)==="object"||!t)return u._init.apply(this,arguments);e.error("You cannot invoke "+o+" jQuery plugin with the arguments: "+t)}}(jQuery,window),function(e,t,n){var r=!0,i=!0,s=null,o="dropdown",u,a,f,l={globalEvents:[]};u={pluginName:o,options:null,_init:function(t){return u.options=e.extend(!0,l,t),this.each(function(){var t=e(this);u._createElements(t),u._bind(t)})},_bind:function(e){e.find("a.init").bind({click:u._onClick}),e.find("ul").on("click","a",function(e){u._onListClick(e)})},_trigger:function(t,n,r){var i=e.inArray(t,u.options.globalEvents)>=0,t=t+"."+u.pluginName;i?e.event.trigger(t,n):r.trigger(t,n)},_createElements:function(e){var t=e.text();e.html('<a class="init" href="#'+t+'">'+t+"</a>"+'<div class="options">'+'<div class="t"></div>'+'<div class="b"></div>'+"<ul></ul>"+"</div>"),u._addItems(e)},_addItems:function(e){var t=e.find("ul");t.html(""),_.each(u.options.source,function(e,n){t.append('<li><a href="'+e.url+'">'+e.name+"</a></li>")})},_onClick:function(t){t.stopPropagation(),t.preventDefault();var n=e(t.target).closest("span.select");n.hasClass("active")?u._close(n):u._open(n)},_onListClick:function(t){var n=e(t.target).closest("span.select");u._close(n)},_open:function(t){e(".select").removeClass("active"),t.addClass("active"),e("body").click(function(n){e(n.target).closest("span.select").length||(u._close(t),e("body").unbind("click"))})},_close:function(t){t.removeClass("active"),e("body").unbind("click")}},a={update:function(t){u.options.source=t,u._addItems(e(this))}},e.fn[o]=function(t){if(e.type(t)==="string"&&a[t])return a[t].apply(this,Array.prototype.slice.call(arguments,1));if(e.type(t)==="object"||!t)return u._init.apply(this,arguments);e.error("You cannot invoke "+o+" jQuery plugin with the arguments: "+t)}}(jQuery,window);